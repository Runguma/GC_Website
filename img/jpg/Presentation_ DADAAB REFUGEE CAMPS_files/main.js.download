// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.36/esri/copyright.txt for details.
//>>built
require({cache:{"presentation/builder/util/browserSupport":function(){define(["../../common/error/UnsupportedInternetExplorerError","dojo/Deferred","dojo/sniff"],function(e,u,B){return{test:function(){var A=new u;9>B("ie")?A.reject(new e):A.resolve();return A.promise}}})},"presentation/common/error/UnsupportedInternetExplorerError":function(){define(["dojo/errors/create"],function(e){return e("UnsupportedInternetExplorerError")})},"presentation/common/util/configInitializer":function(){define("../../common/error/MissingWebMapIdError ../../common/error/NotAWebMapItemError ../../common/error/UnlicensedUserError ../../config ./basemap dojo/_base/lang dojo/_base/array dojo/aspect dojo/Deferred dojo/promise/all esri/arcgis/Portal esri/arcgis/utils esri/config esri/IdentityManager esri/request esri/tasks/GeometryService esri/urlUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h){return{init:function(){var v=new d,r=this._createUrlParamsObject(["webmap","sharinghost","slide","proxyurl","legend"],["builder"]);l.mixin(A,r);this._setUpBaseUrls();this._setUpPortal().then(this._setUpItemData).then(this._checkLicense).then(function(){v.resolve(A)},function(C){v.reject(C)});return v.promise},_createUrlParamsObject:function(v,r){v=v?v:[];r=r?r:[];var C=h.urlToObject(window.location.href).query||{},w={};v=v.concat(r);for(var y=v.length,q,
x,E,z=0;z<y;z++)q=v[z],x=!!C[q],E=-1<k.indexOf(r,q),C.hasOwnProperty(q)&&(x?w[q]=C[q]:E&&(w[q]=!0));return w},_setUpBaseUrls:function(){var v=window.location,r=v.pathname.indexOf("/apps/");-1===r&&(r=v.pathname.indexOf("/home/"));-1!==r&&(r=v.pathname.substr(0,r),v=v.protocol+"//"+v.host+r,A.sharinghost=v,A.proxyurl=v+"/sharing/proxy");b.arcgisUrl=A.sharinghost+"/sharing/rest/content/items";A.proxyurl&&(f.defaults.io.proxyUrl=A.proxyurl,f.defaults.io.alwaysUseProxy=!1)},_setUpPortal:function(){var v=
this,r=new d,C=new a.Portal(A.sharinghost);C.on("load",function(){A.portal=C;A.user={};v._setUpHelperServices(C);A.builder?C.signIn().promise.then(function(){A.bingmapskey=A.bingmapskey||C.bingKey;A.user=C.getPortalUser()}.bind(this)).always(function(){return this._setUpBasemaps(C)}.bind(this)).then(function(){r.resolve()}):r.resolve()}.bind(this));return r.promise},_setUpBasemaps:function(v){var r=g.around(a.PortalUtil,"formatQueryParams",function(C){return function(w,y,q){return C(w,y,!0)}});A.basemaps=
[];return v.queryGroups(v.useVectorBasemaps?v.vectorBasemapGalleryGroupQuery:v.basemapGalleryGroupQuery).then(function(C){if(0!==C.results.length)return this._getAllBasemapItems(C.results[0]).then(function(w){if(0!==w.length)return c(k.map(w,function(y){return n({url:y.itemDataUrl,content:{f:"json"},handleAs:"json"})})).then(function(y){k.forEach(y,function(q,x){A.basemaps.push({item:w[x],data:p.ensureProperBasemapUrlProtocol(q.baseMap,v)})})})})}.bind(this)).always(function(){r.remove()})},_getAllBasemapItems:function(v,
r){r=r||{};var C=r.results||[];return v.queryItems({q:'AND (type:"web map" -type:"web mapping application")',start:r.start||0}).then(function(w){C.push.apply(C,w.results);w=w.nextQueryParams.start;return-1<w?this._getAllBasemapItems(v,{results:C,start:w}):C}.bind(this))},_setUpHelperServices:function(v){A.helperServices=l.mixin({},v.helperServices);if(v=A.helperServices.geometry&&A.helperServices.geometry.url)f.defaults.geometryService=new m(v)},_setUpItemData:function(){if(!A.webmap){var v=new d;
v.reject(new e);return v.promise}return b.getItem(A.webmap).then(function(r){var C=new d,w=r.item;r=r.itemData;"Web Map"===w.type?(A.item=w,A.itemData=r,A.portalItem=new a.PortalItem(l.mixin(w,{portal:A.portal})),C.resolve()):C.reject(new u);return C.promise})},_checkLicense:function(){if(A.builder||"public"!==A.item.access)return t.checkAppAccess(A.sharinghost+"/sharing/",A.oauthappid).catch(function(v){if(v&&v.code&&"IdentityManagerBase.1"===v.code)throw v=t.findCredential(A.sharinghost),new B(v.userId);
throw v;})}}})},"presentation/common/error/MissingWebMapIdError":function(){define(["dojo/errors/create"],function(e){return e("MissingWebMapIdError")})},"presentation/common/error/NotAWebMapItemError":function(){define(["dojo/errors/create"],function(e){return e("NotAWebMapItemError")})},"presentation/common/error/UnlicensedUserError":function(){define(["dojo/errors/create"],function(e){return e("UnlicensedUserError",function(u,B){this.details={username:B}}).bind(null,"User is not licensed to use application.")})},
"presentation/config":function(){define([],function(){return{webmap:"",proxyurl:"",bingmapskey:"",builder:!1,legend:"closed",oauthappid:"arcgisWebApps",authoring:{name:"PresentationApp",version:"9.1"},sharinghost:window.location.protocol+"//www.arcgis.com"}})},"presentation/common/util/basemap":function(){define(["dojo/_base/array","dojo/_base/url"],function(e,u){return{ensureProperBasemapUrlProtocol:function(B,A){(A.allSSL||"https:"===window.location.protocol)&&e.forEach(B.baseMapLayers,function(p){this._shouldUseHttps(p.url,
A)&&(p.url=p.url.replace("http:","https:"))},this);return B},_shouldUseHttps:function(B,A){return this._isHostedService(B,A)||this._supportsHttps(B,A)},_isHostedService:function(B,A){if(!B)return!1;var p=(new u(A.portalUrl)).authority,l="singletenant"===A.portalMode,k=-1<B.indexOf(".arcgis.com/"),g=-1<B.indexOf("//services")||-1<B.indexOf("//tiles")||-1<B.indexOf("//features");B=A.supportsHostedServices&&!l&&-1<B.indexOf(p);return k&&g||!k&&B},_httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" "),
_supportsHttps:function(B,A){return B?-1<B.indexOf(A.portalHostname)||e.some(this._httpsDomains,function(p){return-1<B.indexOf("."+p+"/")||-1<B.indexOf("/"+p+"/")}):!1},_uniqueLayerTypes:["OpenStreetMap","BingMapsAerial","BingMapsRoad","BingMapsHybrid"],_isSameBasemap:function(B,A){if(!B||!A)return!1;var p=B.baseMapLayers,l=A.baseMapLayers;return B.title!==A.title||p.length!==l.length?!1:e.every(p,function(k,g){return this._getLayerId(k)===this._getLayerId(l[g])},this)},sameBasemaps:function(B,A){if(!B||
!A)return!1;B=B.baseMapLayers;var p=A.baseMapLayers;return B.length!==p.length?!1:e.every(B,function(l,k){return this._sameBasemapLayers(l,p[k])},this)},_sameBasemapLayers:function(B,A){var p,l,k,g=this._uniqueLayerTypes;B.hasOwnProperty("id")&&A.hasOwnProperty("id")&&(p=B.id===A.id);B.hasOwnProperty("url")&&A.hasOwnProperty("url")&&(l=this._sameUrl(B.url,A.url));-1<g.indexOf(B.type)&&-1<g.indexOf(A.type)&&(k=!0);return p||l||k},_sameUrl:function(B,A){return this._removeProtocol(B)===this._removeProtocol(A)},
_removeProtocol:function(B){var A=B.indexOf("://");return B.substring(A)}}})},"dojo/_base/url":function(){define(["./kernel"],function(e){var u=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,B=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,A=function(){for(var p=arguments,l=[p[0]],k=1;k<p.length;k++)if(p[k]){var g=new A(p[k]+"");l=new A(l[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&!g.query)null!=g.fragment&&(l.fragment=g.fragment),g=l;else if(!g.scheme&&(g.scheme=
l.scheme,!g.authority&&(g.authority=l.authority,"/"!=g.path.charAt(0)))){l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+g.path).split("/");for(var d=0;d<l.length;d++)"."==l[d]?d==l.length-1?l[d]="":(l.splice(d,1),d--):0<d&&(1!=d||""!=l[0])&&".."==l[d]&&".."!=l[d-1]&&(d==l.length-1?(l.splice(d,1),l[d-1]=""):(l.splice(d-1,2),d-=2));g.path=l.join("/")}l=[];g.scheme&&l.push(g.scheme,":");g.authority&&l.push("//",g.authority);l.push(g.path);g.query&&l.push("?",g.query);g.fragment&&l.push("#",g.fragment)}this.uri=
l.join("");p=this.uri.match(u);this.scheme=p[2]||(p[1]?"":null);this.authority=p[4]||(p[3]?"":null);this.path=p[5];this.query=p[7]||(p[6]?"":null);this.fragment=p[9]||(p[8]?"":null);null!=this.authority&&(p=this.authority.match(B),this.user=p[3]||null,this.password=p[4]||null,this.host=p[6]||p[7],this.port=p[9]||null)};A.prototype.toString=function(){return this.uri};return e._Url=A})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(e,u,B,A){var p=
e.some;return function(l){var k,g;u.isArray(l)?g=l:l&&"object"===typeof l&&(k=l);var d=[];if(k){g=[];for(var c in k)Object.hasOwnProperty.call(k,c)&&(d.push(c),g.push(k[c]));var a={}}else g&&(a=[]);if(!g||!g.length)return(new B).resolve(a);var b=new B;b.promise.always(function(){a=d=null});var f=g.length;p(g,function(t,n){k||d.push(n);A(t,function(m){b.isFulfilled()||(a[d[n]]=m,0===--f&&b.resolve(a))},b.reject);return b.isFulfilled()});return b.promise}})},"dojo/when":function(){define(["./Deferred",
"./promise/Promise"],function(e,u){return function(B,A,p,l){var k=B&&"function"===typeof B.then,g=k&&B instanceof u;if(!k)return 1<arguments.length?A?A(B):B:(new e).resolve(B);g||(k=new e(B.cancel),B.then(k.resolve,k.reject,k.progress),B=k.promise);return A||p||l?B.then(A,p,l):B}})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b){var f={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},t=function(x){function E(z){x[z]||(x[z]=function(){var D=arguments;return A.when(x,function(F){Array.prototype.unshift.call(D,F.results||F);return t(p[z].apply(p,D))})})}if(!x)return x;x.then&&(x=u.delegate(x));x.total||(x.total=A.when(x,function(z){return d.isDefined(z.total)?z.total:z.length||0}));E("forEach");E("filter");E("map");E("some");E("every");return x},n={useSSL:function(x,E){var z=f&&
f.self||{};if(z&&!z.isPortal)return-1!==x.indexOf("https:")||z.allSSL?E.replace("http:","https:"):E;var D=n.getLocation(E);return-1<z.portalHostname.toLowerCase().indexOf(D.hostname.toLowerCase())&&D.port&&"80"!==D.port&&"443"!==D.port?(E=D.pathname,E=0===E.indexOf("/")?E:"/"+E,z.allSSL||-1<x.indexOf("https:")?"https://"+D.hostname+(z.httpsPort&&"443"!==z.httpsPort?":"+z.httpsPort:"")+E+D.search:"http://"+D.hostname+(z.httpPort&&"80"!==z.httpPort?":"+z.httpPort:"")+E+D.search):-1!==x.indexOf("https:")||
z.allSSL?E.replace("http:","https:"):E},formatUrl:function(x){var E=f.currentToken;return-1!==x.indexOf("null")?null:n.useSSL(window.location.protocol,E?x+(-1!==x.indexOf("?")?"\x26":"?")+("token\x3d"+E):x)},getLocation:function(x){var E=document.createElement("a");E.href=x;return{protocol:E.protocol,hostname:E.hostname,port:E.port,pathname:E.pathname,search:E.search,hash:E.hash,host:E.host}},resultsToTypedArray:function(x,E,z){z=z?z.listings||z.notifications||z.userInvitations||z.tags||z.items||
z.groups||z.comments||z.provisions||z.results||z:[];return p.map(z,function(D){D=u.mixin(D,E||{});return x?new x(D):D})},clearFieldsFromObject:function(x,E){var z,D=x.length;if(u.isArray(x))for(z=0;z<D;z++)delete E[x[z]];else for(z in x)delete E[z];return E},requestToTypedArray:function(x,E,z,D,F){return t(n.request(x,E,z).then(u.partial(n.resultsToTypedArray,D,F)))},request:function(x,E,z){E&&E.portal&&delete E.portal;if(E&&E.form){var D=E.form;delete E.form}E=u.mixin(u.mixin({},E||{}),f.requestParams);
z=u.mixin(z||{},f.options);return c({url:n.useSSL(window.location.protocol,x.url||x),content:E,callbackParamName:"callback",timeout:z&&z.timeout||0,form:D},z)},formatQueryParams:function(x,E,z){x=u.mixin(u.mixin({},x),u.isString(E)?{q:E}:E||{});x.q=!z&&f.extraQuery?"("+x.q+")"+f.extraQuery:x.q;return x}},m=e([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(x){u.mixin(this,x);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),
h=e([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(x){u.mixin(this,x);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),v=e([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(x){u.mixin(this,x);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+
(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=n.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=n.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var x=this.type;return{source:-1<
p.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===x?x:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(x){var E=u.isString(x)?{comment:x}:x;return n.request(this.itemUrl+"/addComment",E,{usePost:!0}).then(u.hitch(this,function(z){return new m(u.mixin(E,{id:z.commentId,item:this}))}))},updateComment:function(x){if(x&&x.url&&x.comment)return n.request(x.url+"/update",{comment:x.comment},
{usePost:!0}).then(function(E){x.id=E.commentId;return x});throw Error();},getComments:function(){return n.requestToTypedArray(this.itemUrl+"/comments",null,null,m,{item:this})},deleteComment:function(x){if(x&&x.url)return n.request(x.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(x){var E=u.isObject(x)?x:{rating:parseFloat(x)};return n.request(this.itemUrl+"/addRating",E,{usePost:!0}).then(u.hitch(this,function(z){return new h(u.mixin(E,{id:z.ratingId,item:this}))}))},getRating:function(){return n.request(this.itemUrl+
"/rating").then(u.hitch(this,function(x){return new h(u.mixin(x,{item:this}))}))},deleteRating:function(){return n.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var x=this.type,E=this.typeKeywords||[],z=x;"Feature Service"===x||"Feature Collection"===x?z=-1<p.indexOf(E,"Table")?"Table":-1<p.indexOf(E,"Route Layer")?"Route Layer":-1<p.indexOf(E,"Markup")?"Markup":"Feature Layer":"Image Service"===x?z=-1<p.indexOf(E,"Elevation 3D Layer")?"Elevation Layer":-1<p.indexOf(E,
"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===x?z="Scene Layer":"Scene Package"===x?z="Scene Layer Package":"Stream Service"===x?z="Feature Layer":"Geoprocessing Service"===x&&this.portal&&this.portal.isPortal?z=-1<p.indexOf(E,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===x?z="GeoEnrichment Service":"Geocoding Service"===x?z="Locator":"Microsoft Powerpoint"===x?z="Microsoft PowerPoint":"GeoJson"===x?this.type=z="GeoJSON":"Globe Service"===x?z="Globe Layer":
"Vector Tile Service"===x?z="Tile Layer":"netCDF"===x?z="NetCDF":"Map Service"===x?z=-1===p.indexOf(E,"Spatiotemporal")&&(-1<p.indexOf(E,"Hosted Service")||-1<p.indexOf(E,"Tiled"))&&-1===p.indexOf(E,"Relational")?"Tile Layer":"Map Image Layer":x&&-1<x.toLowerCase().indexOf("add in")?z=x.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===x?z="Big Data File Share":"Compact Tile Package"===x?z="Tile Package (tpkx)":"Raster function template"===x&&(z="Raster Function Template");return z},_getIconUrl:function(){var x=
this.type&&this.type.toLowerCase()||"",E=this.typeKeywords||[],z=!1,D=!1,F=!1,J=!1,L=!1,Q=!1;D=!1;0<x.indexOf("service")||"feature collection"===x||"kml"===x||"wms"===x||"wmts"===x||"wfs"===x?(z=-1<p.indexOf(E,"Hosted Service"),"feature service"===x||"feature collection"===x||"kml"===x||"wfs"===x?(J=-1<p.indexOf(E,"Table"),D=-1<p.indexOf(E,"Route Layer"),F=-1<p.indexOf(E,"Markup"),L=-1!==p.indexOf(E,"Spatiotemporal"),Q=-1!==p.indexOf(E,"UtilityNetwork"),x=L&&J?"spatiotemporaltable":J?"table":D?"routelayer":
F?"markup":L?"spatiotemporal":Q?"utilitynetwork":z?"featureshosted":"features"):"map service"===x||"wms"===x||"wmts"===x?(L=-1!==p.indexOf(E,"Spatiotemporal"),D=-1!==p.indexOf(E,"Relational"),x=L||D?"mapimages":z||-1<p.indexOf(E,"Tiled")||"wmts"===x?"maptiles":"mapimages"):x="scene service"===x?-1<p.indexOf(E,"Line")?"sceneweblayerline":-1<p.indexOf(E,"3DObject")?"sceneweblayermultipatch":-1<p.indexOf(E,"Point")?"sceneweblayerpoint":-1<p.indexOf(E,"IntegratedMesh")?"sceneweblayermesh":-1<p.indexOf(E,
"PointCloud")?"sceneweblayerpointcloud":-1<p.indexOf(E,"Polygon")?"sceneweblayerpolygon":-1<p.indexOf(E,"Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===x?-1<p.indexOf(E,"Elevation 3D Layer")?"elevationlayer":-1<p.indexOf(E,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===x?"streamlayer":"vector tile service"===x?"vectortile":"datastore catalog service"===x?"datastorecollection":"geocoding service"===x?"geocodeservice":"geoprocessing service"===x?-1<p.indexOf(E,
"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):x="web map"===x||"cityengine web scene"===x?"maps":"web scene"===x?-1<p.indexOf(E,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===x||"mobile application"===x||"application"===x||"operation view"===x||"desktop application"===x?"apps":"map document"===x||"map package"===x||"published map"===x||"scene document"===x||"globe document"===x||"basemap package"===x||"mobile basemap package"===x||"mobile map package"===
x||"project package"===x||"project template"===x||"pro map"===x||"layout"===x||"layer"===x&&-1<p.indexOf(E,"ArcGIS Pro")||"explorer map"===x&&p.indexOf(E,"Explorer Document")?"mapsgray":"service definition"===x||"csv"===x||"shapefile"===x||"cad drawing"===x||"geojson"===x||"360 vr experience"===x||"netcdf"===x||"administrative report"===x?"datafiles":"explorer add in"===x||"desktop add in"===x||"windows viewer add in"===x||"windows viewer configuration"===x?"appsgray":"arcgis pro add in"===x||"arcgis pro configuration"===
x?"addindesktop":"rule package"===x||"file geodatabase"===x||"sqlite geodatabase"===x||"csv collection"===x||"kml collection"===x||"windows mobile package"===x||"map template"===x||"desktop application template"===x||"gml"===x||"arcpad package"===x||"code sample"===x||"form"===x||"document link"===x||"earth configuration"===x||"operations dashboard add in"===x||"rules package"===x||"image"===x||"workflow manager package"===x||"explorer map"===x&&-1<p.indexOf(E,"Explorer Mapping Application")||-1<
p.indexOf(E,"Document")?"datafilesgray":"network analysis service"===x||"geoprocessing service"===x||"geodata service"===x||"geometry service"===x||"geoprocessing package"===x||"locator package"===x||"geoprocessing sample"===x||"workflow manager service"===x?"toolsgray":"layer"===x||"layer package"===x||"explorer layer"===x?"layersgray":"scene package"===x?"scenepackage":"mobile scene package"===x?"mobilescenepackage":"tile package"===x||"compact tile package"===x?"tilepackage":"task file"===x?"taskfile":
"report template"===x?"report-template":"statistical data collection"===x?"statisticaldatacollection":"insights workbook"===x?"workbook":"insights model"===x?"insightsmodel":"insights page"===x?"insightspage":"insights theme"===x?"insightstheme":"hub initiative"===x?"hubinitiative":"hub page"===x?"hubpage":"hub site application"===x?"hubsite":"hub event"===x?"hubevent":"relational database connection"===x?"relationaldatabaseconnection":"big data file share"===x?"datastorecollection":"image collection"===
x?"imagecollection":"desktop style"===x?"desktopstyle":"style"===x?"style":"dashboard"===x?"dashboard":"raster function template"===x?"rasterprocessingtemplate":"vector tile package"===x?"vectortilepackage":"ortho mapping project"===x?"orthomappingproject":"ortho mapping template"===x?"orthomappingtemplate":"solution"===x?"solutions":"geopackage"===x?"geopackage":"deep learning package"===x?"deeplearningpackage":"real time analytic"===x?"realtimeanalytics":"big data analytic"===x?"bigdataanalytics":
"feed"===x?"feed":"excalibur imagery project"===x?"excaliburimageryproject":"notebook"===x?"notebook":"storymap"===x?"storymap":"survey123 add in"===x?"survey123addin":"mission"===x?"mission":"mission report"===x?"missionreport":"quickcapture project"===x?"quickcaptureproject":"pro report"===x?"proreport":"urban model"===x?"urbanmodel":"web experience"===x?"experiencebuilder":"web experience template"===x?"webexperiencetemplate":"workflow"===x?"workflow":"kernel gateway connection"===x?"kernelgatewayconnection":
"insights script"===x?"insightsscript":"hub initiative template"===x?"hubinitiativetemplate":"storymap theme"===x?"storymaptheme":"knowledge graph"===x?"knowledgegraph":"native application"===x?"nativeapp":"native application installer"===x?"nativeappinstaller":"maps";return x?k.toUrl("../css/images/item_type_icons/"+x+"16.png"):null},_getIsPremiumContent:function(){var x=this.typeKeywords,E=!1;if(-1<p.indexOf(x,"Requires Subscription")||-1<p.indexOf(x,"Requires Credits"))E=!0;return E},_getPremiumIconUrl:function(){var x=
this.typeKeywords,E;this.isPremiumContent&&(E=-1<p.indexOf(x,"Requires Credits")?"premiumcredits":"premiumitem");return E?k.toUrl("../css/images/item_type_icons/"+E+"16.png"):null},getThumbnailUrl:function(x){var E=this.thumbnailUrl;E&&x&&(E+=(-1===E.indexOf("?")?"?":"\x26")+"w\x3d"+x);return E}}),r=e([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(x){u.mixin(this,x);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+
this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?n.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?n.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",
creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var E in this.listingProperties)this[E]&&(this.listingProperties[E]=this[E]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=p.map(this.screenshots,u.hitch(this,function(z){return n.formatUrl(this.url+"/info/"+z)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?n.formatUrl(this.portal.portalUrl+
"/portals/self/resources/"+this.vendor.thumbnail):n.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return n.requestToTypedArray(this.commentsUrl,null,null,m,{item:this})},getVendor:function(){return this.vendor}}),C=e([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(x){u.mixin(this,x);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?
new Date(this.endDate):null;this.listing=x.listing?new r(u.mixin(x.listing,{portal:this.portal})):null}}),w=e([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(x){u.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=n.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return n.request(this.url+"/users")},
queryItems:function(x,E){x=n.formatQueryParams({},x,E);x.q="group:"+this.id+(x.q?" "+x.q:"");return this.portal.queryItems(x)},getThumbnailUrl:function(x){var E=this.thumbnailUrl;E&&x&&(E+=(-1===E.indexOf("?")?"?":"\x26")+"w\x3d"+x);return E}}),y=e([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(x){u.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return n.requestToTypedArray(this.url,
null,null,v,{portal:this.portal,folderId:this.id})}}),q=e([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(x){u.mixin(this,x);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},
getGroups:function(){return t(n.request(this.url).then(u.hitch(this,function(x){return n.resultsToTypedArray(w,{portal:this.portal},x.groups)})))},getNotifications:function(){return n.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return n.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return n.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,
{num:1}).then(function(x){return x.folders}))},getItems:function(x){return t(this.getContent(x).then(function(E){return E.items}))},getItem:function(x){return n.request(this.portal.portalUrl+"content/items/"+x).then(u.hitch(this,function(E){return new v(u.mixin(E,{portal:this.portal}))}))},getContent:function(x,E){var z=this.url.replace("/community/","/content/")+(x?"/"+x:"");return n.request(z,E).then(u.hitch(this,function(D){D.folders=n.resultsToTypedArray(y,{portal:this.portal},D.folders);D.items=
n.resultsToTypedArray(v,{portal:this.portal,folderId:x},D.items);return D}))},getThumbnailUrl:function(x){var E=this.thumbnailUrl;E&&x&&(E+=(-1===E.indexOf("?")?"?":"\x26")+"w\x3d"+x);return E}});return{Portal:e([b],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(x){x=u.isObject(x)?x:{url:x};this.registerConnectEvents();f={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};x.self?(f.self=x.self,u.mixin(this,{url:x.url||a.getProtocolForWebResource()+
"//"+(x.self.urlKey?x.self.urlKey+"."+x.self.customBaseUrl:x.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",x=x.self.user?this.signIn():this.init(this.url)):(x.url&&u.mixin(this,{url:x.url}),x=this.init(this.url));x.then(u.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(x,E){x=(x||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==x.indexOf("/sharing")?x+"/":x+"/sharing/rest/";return this._getSelf(this.portalUrl).then(u.hitch(this,
function(z){f.self=u.mixin({},z);(z=z.user)&&E&&(f.currentToken=E&&E.token,f.loggedInUser=new q(u.mixin(z,{portal:this,credential:E})));f.self.id&&!1===f.self.canSearchPublic&&(f.extraQuery=" AND orgid:"+f.self.id);u.mixin(this,f.self);this.thumbnailUrl=n.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),
u.hitch(this,function(z){this.onError(z);throw z;}))},signIn:function(){var x=new A,E=u.hitch(this,function(){this._onSignIn().then(u.hitch(this,function(){x.resolve(f.loggedInUser)}),u.hitch(this,function(z){x.reject(z)}))});if(f&&f.self)f&&f.loggedInUser?setTimeout(function(){x.resolve(f.loggedInUser)},0):E();else this.on("load",u.hitch(this,function(){E()}));return x},signOut:function(){f.loggedInUser.credential&&f.loggedInUser.credential.destroy();f.loggedInUser=null;f.options.disableIdentityLookup=
!0;n.clearFieldsFromObject(f.self,this);f.self=null;return this.init(this.url)},getPortalUser:function(){return f.loggedInUser},addResource:function(x,E){return n.request(this.portalUrl+"portals/self/addResource",{key:x,text:E},{usePost:!0})},update:function(x){return n.request(this.portalUrl+"portals/self/update",x,{usePost:!0})},queryGroups:function(x,E){return this._queryPortal(this.portalUrl+"community/groups",n.formatQueryParams({},x,E),w)},queryItems:function(x,E){return this._queryPortal(this.portalUrl+
"search",n.formatQueryParams({},x,E),v)},queryListings:function(x){x=n.formatQueryParams({},x,!0);var E="";x.q&&-1<x.q.toLowerCase().indexOf("mylistings:true")?(x.q=x.q.toLowerCase().replace("mylistings:true",""),E="?mylistings\x3dtrue"):x.q||(x.q='""');return this._queryPortal(this.portalUrl+"content/listings"+E,x,r)},queryCustomerList:function(x,E){x=n.formatQueryParams({},x,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",x)},getProvisions:function(){return this.getCustomers().then(u.hitch(this,
function(x){return x.purchases}))},getInterests:function(){return this.getCustomers().then(u.hitch(this,function(x){return x.interests}))},getTrials:function(){return this.getCustomers().then(u.hitch(this,function(x){return x.trials}))},getCustomers:function(x){return n.request(this.portalUrl+"portals/self/customers",{status:x||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(x){return x.purchases})},getMyInterests:function(){return this.getPurchases().then(function(x){return x.interests})},
getPurchases:function(){return n.request(this.portalUrl+"portals/self/purchases").then(u.hitch(this,function(x){x.interests=p.map(x.interests,function(E){return u.mixin(E.provision,{listing:E.listing})});x.purchases=p.map(x.purchases,function(E){return u.mixin(E.provision,{listing:E.listing})});x.trials=p.map(x.trials,function(E){return u.mixin(E.provision,{listing:E.listing})});x.interests=n.resultsToTypedArray(C,{portal:this},x.interests);x.trials=n.resultsToTypedArray(C,{portal:this},x.trials);
x.purchases=n.resultsToTypedArray(C,{portal:this},x.purchases);return x}))},queryUsers:function(x,E){return this._queryPortal(this.portalUrl+"community/users",n.formatQueryParams({sortField:"username"},x,E),q)},_onSignIn:function(){f.options.disableIdentityLookup=!1;f.self=null;return g.id.getCredential(this.portalUrl).then(u.hitch(this,"init",this.url)).then(function(){return f.loggedInUser},u.hitch(this,function(x){f.options.disableIdentityLookup=!0;this.onError(x);throw x;}))},_getSelf:function(x){x+=
"portals/self";if(f.self){var E=new A;setTimeout(function(){E.resolve(f.self)},0)}else E=n.request(x,{culture:B.locale});return E},_queryPortal:function(x,E,z){var D=u.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},E),F=["start","query","num","nextStart"];x=n.request(x,D).then(u.hitch(this,function(J){J.results=n.resultsToTypedArray(z,{portal:this},J);J.queryParams=u.mixin({},D);J.nextQueryParams=u.mixin(D,{start:J.nextStart});return n.clearFieldsFromObject(F,J)}));x=u.delegate(x);x.queryParams=
u.mixin({},D);x.nextQueryParams=A.when(x,function(J){return J.nextQueryParams});return t(x)}}),PortalFolder:y,PortalGroup:w,PortalItem:v,PortalUser:q,PortalComment:m,PortalRating:h,PortalUtil:n,PortalResult:t,PortalListing:r}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,u,B){function A(z,D){throw Error("declare"+(D?" "+D:"")+": "+z);}function p(z,D){for(var F=[],J=[{cls:0,refs:[]}],L={},Q=1,ba=z.length,fa=0,Y,ma,ca,la,ta;fa<ba;++fa){(Y=z[fa])?"[object Function]"!=
y.call(Y)&&A("mixin #"+fa+" is not a callable constructor.",D):A("mixin #"+fa+" is unknown. Did you use dojo.require to pull it in?",D);ma=Y._meta?Y._meta.bases:[Y];ca=0;for(Y=ma.length-1;0<=Y;--Y)la=ma[Y].prototype,la.hasOwnProperty("declaredClass")||(la.declaredClass="uniqName_"+q++),la=la.declaredClass,L.hasOwnProperty(la)||(L[la]={count:0,refs:[],cls:ma[Y]},++Q),la=L[la],ca&&ca!==la&&(la.refs.push(ca),++ca.count),ca=la;++ca.count;J[0].refs.push(ca)}for(;J.length;){ca=J.pop();F.push(ca.cls);for(--Q;ta=
ca.refs,1==ta.length;){ca=ta[0];if(!ca||--ca.count){ca=0;break}F.push(ca.cls);--Q}if(ca)for(fa=0,ba=ta.length;fa<ba;++fa)ca=ta[fa],--ca.count||J.push(ca)}Q&&A("can't build consistent linearization",D);Y=z[0];F[0]=Y?Y._meta&&Y===F[F.length-Y._meta.bases.length]?Y._meta.bases.length:1:0;return F}function l(z,D,F,J){var L,Q=this._inherited=this._inherited||{};if("string"===typeof z){var ba=z;z=D;D=F;F=J}if("function"===typeof z){var fa=z;z=D;D=F}else try{fa=z.callee}catch(la){if(la instanceof TypeError)A("strict mode inherited() requires the caller function to be passed before arguments",
this.declaredClass);else throw la;}(ba=ba||fa.nom)||A("can't deduce a name to call inherited()",this.declaredClass);F=J=0;var Y=this.constructor._meta;J=Y.bases;var ma=Q.p;if("constructor"!=ba){if(Q.c!==fa){ma=0;var ca=J[0];Y=ca._meta;if(Y.hidden[ba]!==fa){(L=Y.chains)&&"string"==typeof L[ba]&&A("calling chained method with inherited: "+ba,this.declaredClass);do if(Y=ca._meta,L=ca.prototype,Y&&(L[ba]===fa&&L.hasOwnProperty(ba)||Y.hidden[ba]===fa))break;while(ca=J[++ma]);ma=ca?ma:-1}}if(ca=J[++ma])if(L=
ca.prototype,ca._meta&&L.hasOwnProperty(ba))F=L[ba];else{fa=w[ba];do if(L=ca.prototype,(F=L[ba])&&(ca._meta?L.hasOwnProperty(ba):F!==fa))break;while(ca=J[++ma])}F=ca&&F||w[ba]}else{if(Q.c!==fa&&(ma=0,(Y=J[0]._meta)&&Y.ctor!==fa)){for((L=Y.chains)&&"manual"===L.constructor||A("calling chained constructor with inherited",this.declaredClass);(ca=J[++ma])&&(!(Y=ca._meta)||Y.ctor!==fa););ma=ca?ma:-1}for(;(ca=J[++ma])&&!(F=(Y=ca._meta)?Y.ctor:ca););F=ca&&F}Q.c=F;Q.p=ma;if(F)return!0===D?F:F.apply(this,
D||z)}function k(z,D,F){return"string"===typeof z?"function"===typeof D?this.__inherited(z,D,F,!0):this.__inherited(z,D,!0):"function"===typeof z?this.__inherited(z,D,!0):this.__inherited(z,!0)}function g(z,D,F,J){var L=this.getInherited(z,D,F);if(L)return L.apply(this,J||F||D||z)}function d(z){for(var D=this.constructor._meta.bases,F=0,J=D.length;F<J;++F)if(D[F]===z)return!0;return this instanceof z}function c(z,D){for(var F in D)"constructor"!=F&&D.hasOwnProperty(F)&&(z[F]=D[F]);if(u("bug-for-in-skips-shadowed"))for(var J=
B._extraNames,L=J.length;L;)F=J[--L],"constructor"!=F&&D.hasOwnProperty(F)&&(z[F]=D[F])}function a(z){r.safeMixin(this.prototype,z);return this}function b(z,D){z instanceof Array||"function"===typeof z||(D=z,z=void 0);D=D||{};z=z||[];return r([this].concat(z),D)}function f(z,D){return function(){var F=arguments,J=F,L=F[0],Q;var ba=z.length;if(!(this instanceof F.callee))return v(F);if(D&&(L&&L.preamble||this.preamble)){var fa=Array(z.length);fa[0]=F;for(Q=0;;){(L=F[0])&&(L=L.preamble)&&(F=L.apply(this,
F)||F);L=z[Q].prototype;(L=L.hasOwnProperty("preamble")&&L.preamble)&&(F=L.apply(this,F)||F);if(++Q==ba)break;fa[Q]=F}}for(Q=ba-1;0<=Q;--Q)L=z[Q],(L=(ba=L._meta)?ba.ctor:L)&&L.apply(this,fa?fa[Q]:F);(L=this.postscript)&&L.apply(this,J)}}function t(z,D){return function(){var F=arguments,J=F,L=F[0];if(!(this instanceof F.callee))return v(F);D&&(L&&(L=L.preamble)&&(J=L.apply(this,J)||J),(L=this.preamble)&&L.apply(this,J));z&&z.apply(this,F);(L=this.postscript)&&L.apply(this,F)}}function n(z){return function(){var D=
arguments,F=0,J,L;if(!(this instanceof D.callee))return v(D);for(;J=z[F];++F)if(J=(L=J._meta)?L.ctor:J){J.apply(this,D);break}(J=this.postscript)&&J.apply(this,D)}}function m(z,D,F){return function(){var J,L=0,Q=1;F&&(L=D.length-1,Q=-1);for(;J=D[L];L+=Q){var ba=J._meta;(J=(ba?ba.hidden:J.prototype)[z])&&J.apply(this,arguments)}}}function h(z){x.prototype=z.prototype;z=new x;x.prototype=null;return z}function v(z){var D=z.callee,F=h(D);D.apply(F,z);return F}function r(z,D,F){"string"!=typeof z&&(F=
D,D=z,z="");F=F||{};var J,L,Q,ba=1,fa=D;if("[object Array]"==y.call(D)){var Y=p(D,z);var ma=Y[0];ba=Y.length-ma;D=Y[ba]}else Y=[0],D?"[object Function]"==y.call(D)?(ma=D._meta,Y=Y.concat(ma?ma.bases:D)):A("base class is not a callable constructor.",z):null!==D&&A("unknown base class. Did you use dojo.require to pull it in?",z);if(D)for(J=ba-1;;--J){var ca=h(D);if(!J)break;ma=Y[J];(ma._meta?c:C)(ca,ma.prototype);var la=u("csp-restrictions")?function(){}:new Function;la.superclass=D;la.prototype=ca;
D=ca.constructor=la}else ca={};r.safeMixin(ca,F);ma=F.constructor;ma!==w.constructor&&(ma.nom="constructor",ca.constructor=ma);for(J=ba-1;J;--J)(ma=Y[J]._meta)&&ma.chains&&(Q=C(Q||{},ma.chains));ca["-chains-"]&&(Q=C(Q||{},ca["-chains-"]));D&&D.prototype&&D.prototype["-chains-"]&&(Q=C(Q||{},D.prototype["-chains-"]));ma=!Q||!Q.hasOwnProperty("constructor");Y[0]=la=Q&&"manual"===Q.constructor?n(Y):1==Y.length?t(F.constructor,ma):f(Y,ma);la._meta={bases:Y,hidden:F,chains:Q,parents:fa,ctor:F.constructor};
la.superclass=D&&D.prototype;la.extend=a;la.createSubclass=b;la.prototype=ca;ca.constructor=la;ca.getInherited=k;ca.isInstanceOf=d;ca.inherited=E;ca.__inherited=l;z&&(ca.declaredClass=z,B.setObject(z,la));if(Q)for(L in Q)ca[L]&&"string"==typeof Q[L]&&"constructor"!=L&&(ma=ca[L]=m(L,Y,"after"===Q[L]),ma.nom=L);return la}var C=B.mixin,w=Object.prototype,y=w.toString,q=0;var x=u("csp-restrictions")?function(){}:new Function;var E=e.config.isDebug?g:l;e.safeMixin=r.safeMixin=function(z,D){for(Q in D){var F=
D[Q];F===w[Q]&&Q in w||"constructor"==Q||("[object Function]"==y.call(F)&&(F.nom=Q),z[Q]=F)}if(u("bug-for-in-skips-shadowed")&&D)for(var J=B._extraNames,L=J.length;L;){var Q=J[--L];F=D[Q];F===w[Q]&&Q in w||"constructor"==Q||("[object Function]"==y.call(F)&&(F.nom=Q),z[Q]=F)}return z};return e.declare=r})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(e,u,B,A,p,l,k){var g=function(){},d=Object.freeze||
function(){},c=e.Deferred=function(a){function b(q){if(n)throw Error("This deferred has already been resolved");t=q;n=!0;f()}function f(){for(var q;!q&&C;){var x=C;C=C.next;if(q=x.progress==g)n=!1;var E=v?x.error:x.resolved;p("config-useDeferredInstrumentation")&&v&&u.instrumentRejected&&u.instrumentRejected(t,!!E);if(E)try{var z=E(t);z&&"function"===typeof z.then?z.then(l.hitch(x.deferred,"resolve"),l.hitch(x.deferred,"reject"),l.hitch(x.deferred,"progress")):(E=q&&void 0===z,q&&!E&&(v=z instanceof
Error),x.deferred[E&&v?"reject":"resolve"](E?t:z))}catch(D){x.deferred.reject(D)}else v?x.deferred.reject(t):x.deferred.resolve(t)}}var t,n,m,h,v,r,C,w=this.promise=new B;this.isResolved=w.isResolved=function(){return 0==h};this.isRejected=w.isRejected=function(){return 1==h};this.isFulfilled=w.isFulfilled=function(){return 0<=h};this.isCanceled=w.isCanceled=function(){return m};this.resolve=this.callback=function(q){this.fired=h=0;this.results=[q,null];b(q)};this.reject=this.errback=function(q){v=
!0;this.fired=h=1;p("config-useDeferredInstrumentation")&&u.instrumentRejected&&u.instrumentRejected(q,!!C);b(q);this.results=[null,q]};this.progress=function(q){for(var x=C;x;){var E=x.progress;E&&E(q);x=x.next}};this.addCallbacks=function(q,x){this.then(q,x,g);return this};w.then=this.then=function(q,x,E){var z=E==g?this:new c(w.cancel);q={resolved:q,error:x,progress:E,deferred:z};C?r=r.next=q:C=r=q;n&&f();return z.promise};var y=this;w.cancel=this.cancel=function(){if(!n){var q=a&&a(y);n||(q instanceof
Error||(q=new A(q)),q.log=!1,y.reject(q))}m=!0};d(w)};l.extend(c,{addCallback:function(a){return this.addCallbacks(l.hitch.apply(e,arguments))},addErrback:function(a){return this.addCallbacks(null,l.hitch.apply(e,arguments))},addBoth:function(a){var b=l.hitch.apply(e,arguments);return this.addCallbacks(b,b)},fired:-1});c.when=e.when=k;return c})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,u,B){e=function(){return this}();var A=e.location,p=A.pathname;
B=A.protocol;A={version:"3.36",_appBaseUrl:B+"//"+A.host+p.substring(0,p.lastIndexOf(p.split("/")[p.split("/").length-1]))};u.noGlobals||(e.esri=A);(A.dijit=A.dijit||{})._arcgisUrl=("http:"===B||"https:"===B?B:"http:")+"//www.arcgis.com/sharing/rest";return A})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(e,u,B,A,p,l,k,g,d){function c(h,v,r,C){(v=v&&v[h])?v={formatType:v.formatType,
options:v}:C&&-1!==e.indexOf(C.properties||"",h)?v={formatType:C.formatter||"DateString",options:null}:r&&-1!==e.indexOf(r.properties||"",h)&&(v={formatType:r.formatter||"NumberFormat",options:null});return v}function a(h){return void 0!==h&&null!==h}function b(h){return a(h)?h:""}function f(h,v,r,C){var w=r.match(/([^\(]+)(\([^\)]+\))?/i);r=A.trim(w[1]);var y=w[2]?A.trim(w[2]):null;w=v[h];C=C||(y?u.fromJson(y.replace(/^\(/,"({").replace(/\)$/,"})")):{});y=C.utcOffset;if(-1===e.indexOf(n,r))r=A.getObject(r),
A.isFunction(r)&&(w=r(w,h,v,C));else if("number"===typeof w||"string"===typeof w&&w&&!isNaN(Number(w)))switch(w=Number(w),r){case "NumberFormat":return k.format(w,C);case "DateString":h=new Date(w);if(C.local||C.systemLocale)return C.systemLocale?h.toLocaleDateString()+(C.hideTime?"":" "+h.toLocaleTimeString()):h.toDateString()+(C.hideTime?"":" "+h.toTimeString());h=h.toUTCString();C.hideTime&&(h=h.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return h;case "DateFormat":return h=new Date(w),a(y)&&
(h=p.add(h,"minute",h.getTimezoneOffset()-y)),g.format(h,C)}return b(w)}function t(h,v){var r;if(v)for(r in h)h.hasOwnProperty(r)&&(void 0===h[r]?delete h[r]:h[r]instanceof Object&&t(h[r],!0));else for(r in h)h.hasOwnProperty(r)&&void 0===h[r]&&delete h[r];return h}var n=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g;return{valueOf:function(h,v){for(var r in h)if(h[r]==v)return r;return null},stripTags:function(h){if(h){var v=typeof h;if("string"===v)h=h.replace(m,"");else if("object"===
v)for(var r in h)(v=h[r])&&"string"===typeof v&&(v=v.replace(m,"")),h[r]=v}return h},substitute:function(h,v,r){if(a(r))if(A.isObject(r)){var C=r.first;var w=r.dateFormat;var y=r.numberFormat;var q=r.format}else C=r;if(v&&"${*}"!==v)return A.replace(v,A.hitch({obj:h},function(E,z){var D=z.split(":");return 1<D.length?(z=D[0],D.shift(),(E=q&&q[D[0]])?D=E.formatType:(D=D.join(":"),E=null),f(z,this.obj,D,E)):(E=c(z,q,y,w))?f(z,this.obj,E.formatType,E.options):b(this.obj[z])}),/\$\{([^\}]+)\}/g);v=[];
for(var x in h)if(r=(r=c(x,q,y,w))?f(x,h,r.formatType,r.options):h[x],v.push(x+" \x3d "+b(r)+"\x3cbr/\x3e"),C)break;return v.join("")},filter:function(h,v,r){v=[A.isString(h)?h.split(""):h,r||B.global,A.isString(v)?new Function("item","index","array",v):v];r={};var C;h=v[0];for(C in h)v[2].call(v[C],h[C],C,h)&&(r[C]=h[C]);return r},startsWith:function(h,v,r){r=r||0;return h.indexOf(v,r)===r},endsWith:function(h,v,r){if("number"!==typeof r||!isFinite(r)||Math.floor(r)!==r||r>h.length)r=h.length;r-=
v.length;h=h.indexOf(v,r);return-1!==h&&h===r},isDefined:a,fixJson:t,isObject:function(h){return h&&"object"===typeof h},isString:function(h){return"string"===typeof h},mixin:function(h,v){for(var r in v)v.hasOwnProperty(r)&&(h[r]=v[r]);return h},clone2DArray:function(h){if(h=h?h.slice(0):null){var v,r=h.length;for(v=0;v<r;v++)h[v]=h[v]?h[v].slice(0):null}return h},clone3DArray:function(h){if(h=h?h.slice(0):null){var v,r=h.length;for(v=0;v<r;v++){h[v]=h[v]?h[v].slice(0):null;var C=h[v];if(C){var w,
y=C.length;for(w=0;w<y;w++)C[w]=C[w]?C[w].slice(0):null}}}return h}}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(e,u){e.fromJson=function(B){return eval("("+B+")")};e._escapeString=u.stringify;e.toJsonIndentStr="\t";e.toJson=function(B,A){return u.stringify(B,function(p,l){return l&&(p=l.__json__||l.json,"function"==typeof p)?p.call(l):l},A&&e.toJsonIndentStr)};return e})},"dojo/json":function(){define(["./has"],function(e){var u="undefined"!=typeof JSON;e.add("json-parse",
u);e.add("json-stringify",u&&'{"a":1}'==JSON.stringify({a:0},function(A,p){return p||1}));if(e("json-stringify"))return JSON;var B=function(A){return('"'+A.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:e("json-parse")?JSON.parse:function(A,p){if(p&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(A))throw new SyntaxError("Invalid characters in JSON");
return eval("("+A+")")},stringify:function(A,p,l){function k(d,c,a){p&&(d=p(a,d));var b=typeof d;if("number"==b)return isFinite(d)?d+"":"null";if("boolean"==b)return d+"";if(null===d)return"null";if("string"==typeof d)return B(d);if("function"==b||"undefined"==b)return g;if("function"==typeof d.toJSON)return k(d.toJSON(a),c,a);if(d instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(v,r,C){v=d["getUTC"+r]()+(C?1:0);return 10>v?"0"+v:
v});if(d.valueOf()!==d)return k(d.valueOf(),c,a);var f=l?c+l:"",t=l?" ":"",n=l?"\n":"";if(d instanceof Array){t=d.length;var m=[];for(a=0;a<t;a++)b=k(d[a],f,a),"string"!=typeof b&&(b="null"),m.push(n+f+b);return"["+m.join(",")+n+c+"]"}m=[];for(a in d)if(d.hasOwnProperty(a)){if("number"==typeof a)var h='"'+a+'"';else if("string"==typeof a)h=B(a);else continue;b=k(d[a],f,a);"string"==typeof b&&m.push(n+f+h+":"+t+b)}return"{"+m.join(",")+n+c+"}"}var g;"string"==typeof p&&(l=p,p=null);return k(A,"","")}}})},
"dojo/date":function(){define(["./has","./_base/lang"],function(e,u){var B={getDaysInMonth:function(A){var p=A.getMonth();return 1==p&&B.isLeapYear(A)?29:[31,28,31,30,31,30,31,31,30,31,30,31][p]},isLeapYear:function(A){A=A.getFullYear();return!(A%400)||!(A%4)&&!!(A%100)},getTimezoneName:function(A){var p=A.toString(),l="",k=p.indexOf("(");if(-1<k)l=p.substring(++k,p.indexOf(")"));else if(k=/([A-Z\/]+) \d{4}$/,p=p.match(k))l=p[1];else if(p=A.toLocaleString(),k=/ ([A-Z\/]+)$/,p=p.match(k))l=p[1];return"AM"==
l||"PM"==l?"":l},compare:function(A,p,l){A=new Date(+A);p=new Date(+(p||new Date));"date"==l?(A.setHours(0,0,0,0),p.setHours(0,0,0,0)):"time"==l&&(A.setFullYear(0,0,0),p.setFullYear(0,0,0));return A>p?1:A<p?-1:0},add:function(A,p,l){var k=new Date(+A),g=!1,d="Date";switch(p){case "day":break;case "weekday":if(p=l%5)var c=parseInt(l/5);else p=0<l?5:-5,c=0<l?(l-5)/5:(l+5)/5;var a=A.getDay(),b=0;6==a&&0<l?b=1:0==a&&0>l&&(b=-1);a+=p;if(0==a||6==a)b=0<l?2:-2;l=7*c+p+b;break;case "year":d="FullYear";g=
!0;break;case "week":l*=7;break;case "quarter":l*=3;case "month":g=!0;d="Month";break;default:d="UTC"+p.charAt(0).toUpperCase()+p.substring(1)+"s"}if(d)k["set"+d](k["get"+d]()+l);g&&k.getDate()<A.getDate()&&k.setDate(0);return k},difference:function(A,p,l){p=p||new Date;l=l||"day";var k=p.getFullYear()-A.getFullYear(),g=1;switch(l){case "quarter":A=A.getMonth();p=p.getMonth();g=Math.floor(p/3)+1+4*k-(Math.floor(A/3)+1);break;case "weekday":k=Math.round(B.difference(A,p,"day"));l=parseInt(B.difference(A,
p,"week"));if(0==k%7)k=5*l;else{g=0;var d=A.getDay(),c=p.getDay();l=parseInt(k/7);p=k%7;A=new Date(A);A.setDate(A.getDate()+7*l);A=A.getDay();if(0<k)switch(!0){case 6==d:g=-1;break;case 0==d:g=0;break;case 6==c:g=-1;break;case 0==c:g=-2;break;case 5<A+p:g=-2}else if(0>k)switch(!0){case 6==d:g=0;break;case 0==d:g=1;break;case 6==c:g=2;break;case 0==c:g=1;break;case 0>A+p:g=2}k=k+g-2*l}g=k;break;case "year":g=k;break;case "month":g=p.getMonth()-A.getMonth()+12*k;break;case "week":g=parseInt(B.difference(A,
p,"day")/7);break;case "day":g/=24;case "hour":g/=60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=p.getTime()-A.getTime()}return Math.round(g)}};u.mixin(u.getObject("dojo.date",!0),B);return B})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,u,B,A,p){var l={};e.setObject("dojo.number",l);l.format=function(g,d){d=e.mixin({},d||{});var c=u.normalizeLocale(d.locale);c=u.getLocalization("dojo.cldr","number",c);d.customs=
c;c=d.pattern||c[(d.type||"decimal")+"Format"];return isNaN(g)||Infinity==Math.abs(g)?null:l._applyPattern(g,c,d)};l._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;l._applyPattern=function(g,d,c){c=c||{};var a=c.customs.group,b=c.customs.decimal;d=d.split(";");var f=d[0];d=d[0>g?1:0]||"-"+f;if(-1!=d.indexOf("%"))g*=100;else if(-1!=d.indexOf("\u2030"))g*=1E3;else if(-1!=d.indexOf("\u00a4"))a=c.customs.currencyGroup||a,b=c.customs.currencyDecimal||b,d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(n,
m,h,v){return(n=c[["symbol","currency","displayName"][h.length-1]]||c.currency||"")?m+n+v:""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var t=l._numberPatternRE;f=f.match(t);if(!f)throw Error("unable to find a number expression in pattern: "+d);!1===c.fractional&&(c.places=0);return d.replace(t,l._formatAbsolute(g,f[0],{decimal:b,group:a,places:c.places,round:c.round}))};l.round=function(g,d,c){c=10/(c||10);return(c*+g).toFixed(d)/c};if(0==(.9).toFixed()){var k=
l.round;l.round=function(g,d,c){var a=Math.pow(10,-d||0),b=Math.abs(g);if(!g||b>=a)a=0;else if(b/=a,.5>b||.95<=b)a=0;return k(g,d,c)+(0<g?a:-a)}}l._formatAbsolute=function(g,d,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);d=d.split(".");var a="string"==typeof c.places&&c.places.indexOf(","),b=c.places;a?b=c.places.substring(a+1):0<=b||(b=(d[1]||[]).length);0>c.round||(g=l.round(g,b,c.round));g=String(Math.abs(g)).split(".");var f=g[1]||"";d[1]||c.places?(a&&(c.places=c.places.substring(0,
a)),a=void 0!==c.places?c.places:d[1]&&d[1].lastIndexOf("0")+1,a>f.length&&(g[1]=A.pad(f,a,"0",!0)),b<f.length&&(g[1]=f.substr(0,b))):g[1]&&g.pop();b=d[0].replace(",","");a=b.indexOf("0");-1!=a&&(a=b.length-a,a>g[0].length&&(g[0]=A.pad(g[0],a)),-1==b.indexOf("#")&&(g[0]=g[0].substr(g[0].length-a)));b=d[0].lastIndexOf(",");var t;if(-1!=b){var n=d[0].length-b-1;d=d[0].substr(0,b);b=d.lastIndexOf(",");-1!=b&&(t=d.length-b-1)}d=[];for(b=g[0];b;)a=b.length-n,d.push(0<a?b.substr(a):b),b=0<a?b.slice(0,a):
"",t&&(n=t,t=void 0);g[0]=d.reverse().join(c.group||",");return g.join(c.decimal||".")};l.regexp=function(g){return l._parseInfo(g).regexp};l._parseInfo=function(g){g=g||{};var d=u.normalizeLocale(g.locale);d=u.getLocalization("dojo.cldr","number",d);var c=g.pattern||d[(g.type||"decimal")+"Format"],a=d.group,b=d.decimal,f=1;if(-1!=c.indexOf("%"))f/=100;else if(-1!=c.indexOf("\u2030"))f/=1E3;else{var t=-1!=c.indexOf("\u00a4");t&&(a=d.currencyGroup||a,b=d.currencyDecimal||b)}d=c.split(";");1==d.length&&
d.push("-"+d[0]);d=p.buildGroupRE(d,function(n){n="(?:"+p.escapeString(n,".")+")";return n.replace(l._numberPatternRE,function(m){var h={signed:!1,separator:g.strict?a:[a,""],fractional:g.fractional,decimal:b,exponent:!1};m=m.split(".");var v=g.places;1==m.length&&1!=f&&(m[1]="###");1==m.length||0===v?h.fractional=!1:(void 0===v&&(v=g.pattern?m[1].lastIndexOf("0")+1:Infinity),v&&void 0==g.fractional&&(h.fractional=!0),!g.places&&v<m[1].length&&(v+=","+m[1].length),h.places=v);m=m[0].split(",");1<
m.length&&(h.groupSize=m.pop().length,1<m.length&&(h.groupSize2=m.pop().length));return"("+l._realNumberRegexp(h)+")"})},!0);t&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(n,m,h,v){n=p.escapeString(g[["symbol","currency","displayName"][h.length-1]]||g.currency||"");if(!n)return"";m=m?"[\\s\\xa0]":"";v=v?"[\\s\\xa0]":"";return g.strict?m+n+v:(m&&(m+="*"),v&&(v+="*"),"(?:"+m+n+v+")?")}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:a,decimal:b,factor:f}};l.parse=function(g,
d){d=l._parseInfo(d);g=(new RegExp("^"+d.regexp+"$")).exec(g);if(!g)return NaN;var c=g[1];if(!g[1]){if(!g[2])return NaN;c=g[2];d.factor*=-1}c=c.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return c*d.factor};l._realNumberRegexp=function(g){g=g||{};"places"in g||(g.places=Infinity);"string"!=typeof g.decimal&&(g.decimal=".");"fractional"in g&&!/^0/.test(g.places)||(g.fractional=[!0,!1]);"exponent"in g||(g.exponent=[!0,!1]);"eSigned"in g||(g.eSigned=[!0,!1]);var d=l._integerRegexp(g),
c=p.buildGroupRE(g.fractional,function(b){var f="";b&&0!==g.places&&(f="\\"+g.decimal,f=Infinity==g.places?"(?:"+f+"\\d+)?":f+("\\d{"+g.places+"}"));return f},!0),a=p.buildGroupRE(g.exponent,function(b){return b?"([eE]"+l._integerRegexp({signed:g.eSigned})+")":""});d+=c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");return d+a};l._integerRegexp=function(g){g=g||{};"signed"in g||(g.signed=[!0,!1]);"separator"in g?"groupSize"in g||(g.groupSize=3):g.separator="";var d=p.buildGroupRE(g.signed,function(a){return a?
"[-+]":""},!0),c=p.buildGroupRE(g.separator,function(a){if(!a)return"(?:\\d+)";a=p.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=g.groupSize,f=g.groupSize2;return f?(a="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+a+"]\\d{"+f+"})*["+a+"]\\d{"+b+"})",0<b-f?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return d+c};return l})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(e,u,B,A,p,l,k,g,d){B.add("dojo-preload-i18n-Api",1);k=e.i18n={};var c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,a=function(x,E,z,D){var F=[z+D];E=E.split("-");for(var J="",L=0;L<E.length;L++)if(J+=(J?"-":"")+E[L],!x||x[J])F.push(z+J+"/"+D),F.specificity=J;return F},b={},f=function(x,E,z){z=z?z.toLowerCase():e.locale;x=x.replace(/\./g,"/");E=E.replace(/\./g,"/");return/root/i.test(z)?x+"/nls/"+E:x+"/nls/"+z+"/"+E},t=e.getL10nName=function(x,E,z){return x=d.id+"!"+f(x,E,z)},n=function(x,E,
z,D,F,J){x([E],function(L){var Q=l.clone(L.root||L.ROOT),ba=a(!L._v1x&&L,F,z,D);x(ba,function(){for(var fa=1;fa<ba.length;fa++)Q=l.mixin(l.clone(Q),arguments[fa]);b[E+"/"+F]=Q;Q.$locale=ba.specificity;J()})})},m=function(x){var E=p.extraLocale||[];E=l.isArray(E)?E:[E];E.push(x);return E},h=function(x,E,z){var D=c.exec(x),F=D[1]+"/",J=D[5]||D[4],L=F+J,Q=(D=D[5]&&D[4])||e.locale||"",ba=L+"/"+Q;D=D?[Q]:m(Q);var fa=D.length,Y=function(){--fa||z(l.delegate(b[ba]))};Q=x.split("*");var ma="preload"==Q[1];
if(B("dojo-preload-i18n-Api")){if(ma&&(b[x]||(b[x]=1,w(Q[2],g.parse(Q[3]),1,E)),z(1)),(Q=ma)||(r&&C.push([x,E,z]),Q=r&&!b[ba]),Q)return}else if(ma){z(1);return}A.forEach(D,function(ca){var la=L+"/"+ca;B("dojo-preload-i18n-Api")&&y(la);b[la]?Y():n(E,L,F,J,ca,Y)})};B("dojo-preload-i18n-Api");var v=k.normalizeLocale=function(x){x=x?x.toLowerCase():e.locale;return"root"==x?"ROOT":x},r=0,C=[],w=k._preloadLocalizations=function(x,E,z,D){function F(ba,fa){D([ba],fa)}function J(ba,fa){for(ba=ba.split("-");ba.length;){if(fa(ba.join("-")))return;
ba.pop()}fa("ROOT")}function L(){for(--r;!r&&C.length;)h.apply(null,C.shift())}function Q(ba){ba=v(ba);J(ba,function(fa){if(0<=A.indexOf(E,fa)){var Y=x.replace(/\./g,"/")+"_"+fa;r++;F(Y,function(ma){for(var ca in ma){var la=ma[ca],ta=ca.match(/(.+)\/([^\/]+)$/);if(ta){var za=ta[2];ta=ta[1]+"/";if(la._localized){var P;if("ROOT"===fa){var ea=P=la._localized;delete la._localized;ea.root=la;b[u.toAbsMid(ca)]=ea}else P=la._localized,b[u.toAbsMid(ta+za+"/"+fa)]=la;fa!==ba&&function(ra,M,Z,ka){var qa=[],
ua=[];J(ba,function(Aa){ka[Aa]&&(qa.push(u.toAbsMid(ra+Aa+"/"+M)),ua.push(u.toAbsMid(ra+M+"/"+Aa)))});qa.length?(r++,D(qa,function(){for(var Aa=qa.length-1;0<=Aa;Aa--)Z=l.mixin(l.clone(Z),arguments[Aa]),b[ua[Aa]]=Z;b[u.toAbsMid(ra+M+"/"+ba)]=l.clone(Z);L()})):b[u.toAbsMid(ra+M+"/"+ba)]=Z}(ta,za,la,P)}}}L()});return!0}return!1})}D=D||u;Q();A.forEach(e.config.extraLocale,Q)},y=function(){},q={};y=function(x){for(var E,z=x.split("/"),D=e.global[z[0]],F=1;D&&F<z.length-1;D=D[z[F++]]);D&&((E=D[z[F]])||
(E=D[z[F].replace(/-/g,"_")]),E&&(b[x]=E));return E};k.getLocalization=function(x,E,z){var D,F=f(x,E,z);if(q[F])return q[F];h(F,u,function(J){D=q[F]=J});return D};return l.mixin(k,{dynamic:!0,normalize:function(x,E){return/^\./.test(x)?E(x):x},load:h,cache:b,getL10nName:t})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(e,u,
B,A,p,l,k,g,d,c,a,b,f,t,n,m){e._xhrObj=n._create;var h=e.config;e.objectToQuery=A.objectToQuery;e.queryToObject=A.queryToObject;e.fieldToObject=l.fieldToObject;e.formToObject=l.toObject;e.formToQuery=l.toQuery;e.formToJson=l.toJson;e._blockAsync=!1;u.add("native-xhr2-blob",function(){if(u("native-xhr2")){var q=new XMLHttpRequest;q.open("GET","/",!0);q.responseType="blob";var x=q.responseType;q.abort();return"blob"===x}});var v=e._contentHandlers=e.contentHandlers={text:function(q){return q.responseText},
json:function(q){return d.fromJson(q.responseText||null)},"json-comment-filtered":function(q){g.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");q=q.responseText;var x=q.indexOf("/*"),E=q.lastIndexOf("*/");if(-1==x||-1==E)throw Error("JSON was not comment filtered");
return d.fromJson(q.substring(x+2,E))},javascript:function(q){return e.eval(q.responseText)},xml:function(q){var x=q.responseXML;x&&u("dom-qsa2.1")&&!x.querySelectorAll&&u("dom-parser")&&(x=(new DOMParser).parseFromString(q.responseText,"application/xml"));if(u("ie")&&(!x||!x.documentElement)){var E=function(z){return"MSXML"+z+".DOMDocument"};E=["Microsoft.XMLDOM",E(6),E(4),E(3),E(2)];a.some(E,function(z){try{var D=new ActiveXObject(z);D.async=!1;D.loadXML(q.responseText);x=D}catch(F){return!1}return!0})}return x},
"json-comment-optional":function(q){return q.responseText&&/^[^{\[]*\/\*/.test(q.responseText)?v["json-comment-filtered"](q):v.json(q)}};u("native-xhr2")&&(v.arraybuffer=v.blob=v.document=function(q,x){return"blob"!==x.args.handleAs||u("native-xhr2-blob")?q.response:new Blob([q.response],{type:q.getResponseHeader("Content-Type")})});e._ioSetArgs=function(q,x,E,z){var D={args:q,url:q.url},F=null;if(q.form){F=p.byId(q.form);var J=F.getAttributeNode("action");D.url=D.url||(J?J.value:e.doc?e.doc.URL:
null);F=l.toObject(F)}J={};F&&c.mixin(J,F);q.content&&c.mixin(J,q.content);q.preventCache&&(J["dojo.preventCache"]=(new Date).valueOf());D.query=A.objectToQuery(J);D.handleAs=q.handleAs||"text";var L=new k(function(Y){Y.canceled=!0;x&&x(Y);var ma=Y.ioArgs.error;ma||(ma=Error("request cancelled"),ma.dojoType="cancel",Y.ioArgs.error=ma);return ma});L.addCallback(E);var Q=q.load;Q&&c.isFunction(Q)&&L.addCallback(function(Y){return Q.call(q,Y,D)});var ba=q.error;ba&&c.isFunction(ba)&&L.addErrback(function(Y){return ba.call(q,
Y,D)});var fa=q.handle;fa&&c.isFunction(fa)&&L.addBoth(function(Y){return fa.call(q,Y,D)});L.addErrback(function(Y){return z(Y,L)});h.ioPublish&&e.publish&&!1!==D.args.ioPublish&&(L.addCallbacks(function(Y){e.publish("/dojo/io/load",[L,Y]);return Y},function(Y){e.publish("/dojo/io/error",[L,Y]);return Y}),L.addBoth(function(Y){e.publish("/dojo/io/done",[L,Y]);return Y}));L.ioArgs=D;return L};var r=function(q){q=v[q.ioArgs.handleAs](q.ioArgs.xhr,q.ioArgs);return void 0===q?null:q},C=function(q,x){x.ioArgs.args.failOk||
console.error(q);return q},w=function(q){0>=y&&(y=0,h.ioPublish&&e.publish&&(!q||q&&!1!==q.ioArgs.args.ioPublish)&&e.publish("/dojo/io/stop"))},y=0;f.after(t,"_onAction",function(){--y});f.after(t,"_onInFlight",w);e._ioCancelAll=t.cancelAll;e._ioNotifyStart=function(q){h.ioPublish&&e.publish&&!1!==q.ioArgs.args.ioPublish&&(y||e.publish("/dojo/io/start"),y+=1,e.publish("/dojo/io/send",[q]))};e._ioWatch=function(q,x,E,z){q.ioArgs.options=q.ioArgs.args;c.mixin(q,{response:q.ioArgs,isValid:function(D){return x(q)},
isReady:function(D){return E(q)},handleResponse:function(D){return z(q)}});t(q);w(q)};e._ioAddQueryToUrl=function(q){q.query.length&&(q.url+=(-1==q.url.indexOf("?")?"?":"\x26")+q.query,q.query=null)};e.xhr=function(q,x,E){var z=e._ioSetArgs(x,function(L){J&&J.cancel()},r,C),D=z.ioArgs;"postData"in x?D.query=x.postData:"putData"in x?D.query=x.putData:"rawBody"in x?D.query=x.rawBody:(2<arguments.length&&!E||-1==="POST|PUT".indexOf(q.toUpperCase()))&&e._ioAddQueryToUrl(D);var F;u("native-xhr2")&&(F=
{arraybuffer:1,blob:1,document:1});F=F[x.handleAs]?x.handleAs:"text";"blob"!==F||u("native-xhr2-blob")||(F="arraybuffer");F={method:q,handleAs:F,responseType:x.responseType,timeout:x.timeout,withCredentials:x.withCredentials,ioArgs:D};"undefined"!==typeof x.headers&&(F.headers=x.headers);"undefined"!==typeof x.contentType&&(F.headers||(F.headers={}),F.headers["Content-Type"]=x.contentType);"undefined"!==typeof D.query&&(F.data=D.query);"undefined"!==typeof x.sync&&(F.sync=x.sync);e._ioNotifyStart(z);
try{var J=n(D.url,F,!0)}catch(L){return z.cancel(),z}z.ioArgs.xhr=J.response.xhr;J.then(function(){z.resolve(z)}).otherwise(function(L){D.error=L;L.response&&(L.status=L.response.status,L.responseText=L.response.text,L.xhr=L.response.xhr);z.reject(L)});return z};e.xhrGet=function(q){return e.xhr("GET",q)};e.rawXhrPost=e.xhrPost=function(q){return e.xhr("POST",q,!0)};e.rawXhrPut=e.xhrPut=function(q){return e.xhr("PUT",q,!0)};e.xhrDelete=function(q){return e.xhr("DELETE",q)};e._isDocumentOk=function(q){return m.checkStatus(q.status)};
e._getText=function(q){var x;e.xhrGet({url:q,sync:!0,load:function(E){x=E}});return x};c.mixin(e.xhr,{_xhrObj:e._xhrObj,fieldToObject:l.fieldToObject,formToObject:l.toObject,objectToQuery:A.objectToQuery,formToQuery:l.toQuery,formToJson:l.toJson,queryToObject:A.queryToObject,contentHandlers:v,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,_getText:e._getText,get:e.xhrGet,post:e.xhrPost,
put:e.xhrPut,del:e.xhrDelete});return e.xhr})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(e,u,B,A){var p={fieldToObject:function(l){var k=null;if(l=u.byId(l)){var g=l.name,d=(l.type||"").toLowerCase();if(g&&d&&!l.disabled)if("radio"==d||"checkbox"==d)l.checked&&(k=l.value);else if(l.multiple)for(k=[],l=[l.firstChild];l.length;)for(g=l.pop();g;g=g.nextSibling)if(1==g.nodeType&&"option"==g.tagName.toLowerCase())g.selected&&k.push(g.value);else{g.nextSibling&&
l.push(g.nextSibling);g.firstChild&&l.push(g.firstChild);break}else k=l.value}return k},toObject:function(l){var k={};l=u.byId(l).elements;for(var g=0,d=l.length;g<d;++g){var c=l[g],a=c.name,b=(c.type||"").toLowerCase();if(a&&b&&0>"file|submit|image|reset|button".indexOf(b)&&!c.disabled){var f=k,t=a;c=p.fieldToObject(c);if(null!==c){var n=f[t];"string"==typeof n?f[t]=[n,c]:e.isArray(n)?n.push(c):f[t]=c}"image"==b&&(k[a+".x"]=k[a+".y"]=k[a].x=k[a].y=0)}}return k},toQuery:function(l){return B.objectToQuery(p.toObject(l))},
toJson:function(l,k){return A.stringify(p.toObject(l),null,k?4:0)}};return p})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,u,B,A,p){function l(m,h){var v=m.xhr;m.status=m.xhr.status;try{m.text=v.responseText}catch(C){}"xml"===m.options.handleAs&&(m.data=v.responseXML);if(h)this.reject(h);else{try{B(m)}catch(C){var r=C}A.checkStatus(v.status)?r?this.reject(r):this.resolve(m):(h=r?new e("Unable to load "+m.url+" status: "+v.status+
" and an error in handleAs: transformation of response",m):new e("Unable to load "+m.url+" status: "+v.status,m),this.reject(h))}}function k(m){return this.xhr.getResponseHeader(m)}function g(m,h,v){var r=p("native-formdata")&&h&&h.data&&h.data instanceof FormData,C=A.parseArgs(m,A.deepCreate(n,h),r);m=C.url;h=C.options;var w=!h.data&&"POST"!==h.method&&"PUT"!==h.method;10>=p("ie")&&(m=m.split("#")[0]);var y,q=A.deferred(C,a,c,f,l,function(){y&&y()}),x=C.xhr=g._create();if(!x)return q.cancel(new e("XHR was not created")),
v?q:q.promise;C.getHeader=k;b&&(y=b(x,q,C,h.uploadProgress));var E="undefined"===typeof h.data?null:h.data,z=!h.sync,D=h.method;try{x.open(D,m,z,h.user||t,h.password||t);h.withCredentials&&(x.withCredentials=h.withCredentials);p("native-response-type")&&h.handleAs in d&&(x.responseType=d[h.handleAs]);var F=h.headers;m=r||w?!1:"application/x-www-form-urlencoded";if(F)for(var J in F)"content-type"===J.toLowerCase()?m=F[J]:F[J]&&x.setRequestHeader(J,F[J]);m&&!1!==m&&x.setRequestHeader("Content-Type",
m);F&&"X-Requested-With"in F||x.setRequestHeader("X-Requested-With","XMLHttpRequest");A.notify&&A.notify.emit("send",C,q.promise.cancel);x.send(E)}catch(L){q.reject(L)}u(q);x=null;return v?q:q.promise}p.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});p.add("dojo-force-activex-xhr",function(){return p("activex")&&"file:"===window.location.protocol});p.add("native-xhr2",function(){if(p("native-xhr")&&!p("dojo-force-activex-xhr")){var m=new XMLHttpRequest;return"undefined"!==
typeof m.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof m.upload)}});p.add("native-formdata",function(){return"undefined"!==typeof FormData});p.add("native-blob",function(){return"undefined"!==typeof Blob});p.add("native-arraybuffer",function(){return"undefined"!==typeof ArrayBuffer});p.add("native-response-type",function(){return p("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});p.add("native-xhr2-blob",function(){if(p("native-response-type")){var m=new XMLHttpRequest;
m.open("GET","https://dojotoolkit.org/",!0);m.responseType="blob";var h=m.responseType;m.abort();return"blob"===h}});var d={blob:p("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"};if(p("native-xhr2")){var c=function(m){return!this.isFulfilled()};var a=function(m,h){h.xhr.abort()};var b=function(m,h,v,r){function C(E){h.handleResponse(v)}function w(E){E=new e("Unable to load "+v.url+" status: "+E.target.status,v);h.handleResponse(v,E)}function y(E,z){v.transferType=
E;z.lengthComputable?(v.loaded=z.loaded,v.total=z.total,h.progress(v)):3===v.xhr.readyState&&(v.loaded="loaded"in z?z.loaded:z.position,h.progress(v))}function q(E){return y("download",E)}function x(E){return y("upload",E)}m.addEventListener("load",C,!1);m.addEventListener("error",w,!1);m.addEventListener("progress",q,!1);r&&m.upload&&m.upload.addEventListener("progress",x,!1);return function(){m.removeEventListener("load",C,!1);m.removeEventListener("error",w,!1);m.removeEventListener("progress",
q,!1);m.upload.removeEventListener("progress",x,!1);m=null}}}else{c=function(m){return m.xhr.readyState};var f=function(m){return 4===m.xhr.readyState};a=function(m,h){m=h.xhr;h=typeof m.abort;"function"!==h&&"object"!==h&&"unknown"!==h||m.abort()}}var t,n={data:null,query:null,sync:!1,method:"GET"};g._create=function(){throw Error("XMLHTTP not available");};if(p("native-xhr")&&!p("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};else if(p("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),
g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(m){try{new ActiveXObject("Microsoft.XMLHTTP"),g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(h){}}A.addCommonMethods(g);return g})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(e,u,B,A){function p(a){var b=c[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}A.add("activex","undefined"!==typeof ActiveXObject);A.add("dom-parser",
function(a){return"DOMParser"in a});if(A("activex")){var l=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],k;var g=function(a){function b(n){try{var m=new ActiveXObject(n);m.async=!1;m.loadXML(t);f=m;k=n}catch(h){return!1}return!0}var f=a.data,t=a.text;f&&A("dom-qsa2.1")&&!f.querySelectorAll&&A("dom-parser")&&(f=(new DOMParser).parseFromString(t,"application/xml"));f&&f.documentElement||k&&b(k)||B.some(l,b);return f}}var d=function(a){return A("native-xhr2-blob")||
"blob"!==a.options.handleAs||"undefined"===typeof Blob?a.xhr.response:new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")})},c={javascript:function(a){return u.eval(a.text||"")},json:function(a){return e.parse(a.text||null)},xml:g,blob:d,arraybuffer:d,document:d};p.register=function(a,b){c[a]=b};return p})},"dojo/selector/_loader":function(){define(["../has","require"],function(e,u){if("undefined"!==typeof document){var B=document.createElement("div");e.add("dom-qsa2.1",!!B.querySelectorAll);
e.add("dom-qsa3",function(){try{return B.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==B.querySelectorAll(".TEST:empty").length}catch(p){}})}var A;return{load:function(p,l,k,g){if(g&&g.isBuild)k();else{g=u;p="default"==p?e("config-selectorEngine")||"css3":p;p="css2"==p||"lite"==p?"./lite":"css2.1"==p?e("dom-qsa2.1")?"./lite":"./acme":"css3"==p?e("dom-qsa3")?"./lite":"./acme":"acme"==p?"./acme":(g=l)&&p;if("?"==p.charAt(p.length-1)){p=p.substring(0,p.length-1);var d=!0}if(d&&(e("dom-compliant-qsa")||
A))return k(A);g([p],function(c){"./lite"!=p&&(A=c);k(c)})}}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,u){var B=/[&<>'"\/]/g,A={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},p={};u.setObject("dojo.string",p);p.escape=function(l){return l?l.replace(B,function(k){return A[k]}):""};p.rep=function(l,k){if(0>=k||!l)return"";for(var g=[];;){k&1&&g.push(l);if(!(k>>=1))break;l+=l}return g.join("")};p.pad=function(l,
k,g,d){g||(g="0");l=String(l);k=p.rep(g,Math.ceil((k-l.length)/g.length));return d?l+k:k+l};p.substitute=function(l,k,g,d){d=d||e.global;g=g?u.hitch(d,g):function(c){return c};return l.replace(/\$\{([^\s:\}]*)(?::([^\s:\}]+))?\}/g,function(c,a,b){if(""==a)return"$";c=u.getObject(a,!1,k);b&&(c=u.getObject(b,!1,d).call(d,c,a));b=g(c,a);if("undefined"===typeof b)throw Error('string.substitute could not find key "'+a+'" in template');return b.toString()})};p.trim=String.prototype.trim?u.trim:function(l){l=
l.replace(/^\s+/,"");for(var k=l.length-1;0<=k;k--)if(/\S/.test(l.charAt(k))){l=l.substring(0,k+1);break}return l};return p})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(e,u){var B={};u.setObject("dojo.regexp",B);B.escapeString=function(A,p){return A.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(l){return p&&-1!=p.indexOf(l)?l:"\\"+l})};B.buildGroupRE=function(A,p,l){if(!(A instanceof Array))return p(A);for(var k=[],g=0;g<A.length;g++)k.push(p(A[g]));return B.group(k.join("|"),
l)};B.group=function(A,p){return"("+(p?"?:":"")+A+")"};return B})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(e,u,B,A,p,l,k,g,d){function c(h,v,r,C){return C.replace(/([a-z])\1*/ig,function(w){var y=w.charAt(0);w=w.length;var q=["abbr","wide","narrow"];switch(y){case "G":var x=v[4>w?"eraAbbr":"eraNames"][0>h.getFullYear()?0:1];break;case "y":x=h.getFullYear();
switch(w){case 1:break;case 2:if(!r.fullYear){x=String(x);x=x.substr(x.length-2);break}default:var E=!0}break;case "Q":case "q":x=Math.ceil((h.getMonth()+1)/3);E=!0;break;case "M":case "L":x=h.getMonth();3>w?(x+=1,E=!0):(y=["months","L"==y?"standAlone":"format",q[w-3]].join("-"),x=v[y][x]);break;case "w":x=f._getWeekOfYear(h,0);E=!0;break;case "d":x=h.getDate();E=!0;break;case "D":x=f._getDayOfYear(h);E=!0;break;case "e":case "c":if(x=h.getDay(),2>w){x=(x-A.getFirstDayOfWeek(r.locale)+8)%7;break}case "E":x=
h.getDay();3>w?(x+=1,E=!0):(y=["days","c"==y?"standAlone":"format",q[w-3]].join("-"),x=v[y][x]);break;case "a":y=12>h.getHours()?"am":"pm";x=r[y]||v["dayPeriods-format-wide-"+y];break;case "h":case "H":case "K":case "k":E=h.getHours();switch(y){case "h":x=E%12||12;break;case "H":x=E;break;case "K":x=E%12;break;case "k":x=E||24}E=!0;break;case "m":x=h.getMinutes();E=!0;break;case "s":x=h.getSeconds();E=!0;break;case "S":x=Math.round(h.getMilliseconds()*Math.pow(10,w-3));E=!0;break;case "v":case "z":if(x=
f._getZone(h,!0,r))break;w=4;case "Z":y=f._getZone(h,!1,r);y=[0>=y?"+":"-",k.pad(Math.floor(Math.abs(y)/60),2),k.pad(Math.abs(y)%60,2)];4==w&&(y.splice(0,0,"GMT"),y.splice(3,0,":"));x=y.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+C);}E&&(x=k.pad(x,w));return x})}function a(h,v,r,C){var w=function(x){return x};v=v||w;r=r||w;C=C||w;var y=h.match(/(''|[^'])+/g),q="'"==h.charAt(0);u.forEach(y,function(x,E){x?(y[E]=(q?r:v)(x.replace(/''/g,"'")),q=!q):y[E]=""});
return C(y.join(""))}function b(h,v,r,C){C=l.escapeString(C);r.strict||(C=C.replace(" a"," ?a"));return C.replace(/([a-z])\1*/ig,function(w){var y=w.charAt(0);var q=w.length,x="",E="";r.strict?(1<q&&(x="0{"+(q-1)+"}"),2<q&&(E="0{"+(q-2)+"}")):(x="0?",E="0{0,2}");switch(y){case "y":y="\\d{2,4}";break;case "M":case "L":2<q?(y=v["months-"+("L"==y?"standAlone":"format")+"-"+t[q-3]].slice(0).join("|"),r.strict||(y=y.replace(/\./g,""),y="(?:"+y+")\\.?")):y="1[0-2]|"+x+"[1-9]";break;case "D":y="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+
x+"[1-9][0-9]|"+E+"[1-9]";break;case "d":y="3[01]|[12]\\d|"+x+"[1-9]";break;case "w":y="[1-4][0-9]|5[0-3]|"+x+"[1-9]";break;case "E":case "e":case "c":y=".+?";break;case "h":y="1[0-2]|"+x+"[1-9]";break;case "k":y="1[01]|"+x+"\\d";break;case "H":y="1\\d|2[0-3]|"+x+"\\d";break;case "K":y="1\\d|2[0-4]|"+x+"[1-9]";break;case "m":case "s":y="[0-5]\\d";break;case "S":y="\\d{"+q+"}";break;case "a":q=r.am||v["dayPeriods-format-wide-am"];x=r.pm||v["dayPeriods-format-wide-pm"];y=q+"|"+x;r.strict||(q!=q.toLowerCase()&&
(y+="|"+q.toLowerCase()),x!=x.toLowerCase()&&(y+="|"+x.toLowerCase()),-1!=y.indexOf(".")&&(y+="|"+y.replace(/\./g,"")));y=y.replace(/\./g,"\\.");break;default:y=".*"}h&&h.push(w);return"("+y+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var f={};e.setObject(d.id.replace(/\//g,"."),f);f._getZone=function(h,v,r){return v?B.getTimezoneName(h):h.getTimezoneOffset()};f.format=function(h,v){v=v||{};var r=p.normalizeLocale(v.locale),C=v.formatLength||"short";r=f._getGregorianBundle(r);var w=[];h=e.hitch(this,c,
h,r,v);if("year"==v.selector)return a(r["dateFormatItem-yyyy"]||"yyyy",h);var y;"date"!=v.selector&&(y=v.timePattern||r["timeFormat-"+C])&&w.push(a(y,h));"time"!=v.selector&&(y=v.datePattern||r["dateFormat-"+C])&&w.push(a(y,h));return 1==w.length?w[0]:r["dateTimeFormat-"+C].replace(/'/g,"").replace(/\{(\d+)\}/g,function(q,x){return w[x]})};f.regexp=function(h){return f._parseInfo(h).regexp};f._parseInfo=function(h){h=h||{};var v=p.normalizeLocale(h.locale);v=f._getGregorianBundle(v);var r=h.formatLength||
"short",C=h.datePattern||v["dateFormat-"+r],w=h.timePattern||v["timeFormat-"+r];r="date"==h.selector?C:"time"==h.selector?w:v["dateTimeFormat-"+r].replace(/\{(\d+)\}/g,function(q,x){return[w,C][x]});var y=[];return{regexp:a(r,e.hitch(this,b,y,v,h)),tokens:y,bundle:v}};f.parse=function(h,v){var r=/[\u200E\u200F\u202A\u202E]/g,C=f._parseInfo(v),w=C.tokens,y=C.bundle;h=(new RegExp("^"+C.regexp.replace(r,"")+"$",C.strict?"":"i")).exec(h&&h.replace(r,""));if(!h)return null;var q=["abbr","wide","narrow"],
x=[1970,0,1,0,0,0,0],E="";h=u.every(h,function(D,F){if(!F)return!0;var J=w[F-1];F=J.length;J=J.charAt(0);switch(J){case "y":if(2!=F&&v.strict)x[0]=D;else if(100>D)D=Number(D),J=""+(new Date).getFullYear(),F=100*J.substring(0,2),J=Math.min(Number(J.substring(2,4))+20,99),x[0]=D<J?F+D:F-100+D;else{if(v.strict)return!1;x[0]=D}break;case "M":case "L":if(2<F){if(F=y["months-"+("L"==J?"standAlone":"format")+"-"+q[F-3]].concat(),v.strict||(D=D.replace(".","").toLowerCase(),F=u.map(F,function(Q){return Q.replace(".",
"").toLowerCase()})),D=u.indexOf(F,D),-1==D)return!1}else D--;x[1]=D;break;case "E":case "e":case "c":F=y["days-"+("c"==J?"standAlone":"format")+"-"+q[F-3]].concat();v.strict||(D=D.toLowerCase(),F=u.map(F,function(Q){return Q.toLowerCase()}));D=u.indexOf(F,D);if(-1==D)return!1;break;case "D":x[1]=0;case "d":x[2]=D;break;case "a":F=v.am||y["dayPeriods-format-wide-am"];J=v.pm||y["dayPeriods-format-wide-pm"];if(!v.strict){var L=/\./g;D=D.replace(L,"").toLowerCase();F=F.replace(L,"").toLowerCase();J=
J.replace(L,"").toLowerCase()}if(v.strict&&D!=F&&D!=J)return!1;E=D==J?"p":D==F?"a":"";break;case "K":24==D&&(D=0);case "h":case "H":case "k":if(23<D)return!1;x[3]=D;break;case "m":x[4]=D;break;case "s":x[5]=D;break;case "S":x[6]=D}return!0});r=+x[3];"p"===E&&12>r?x[3]=r+12:"a"===E&&12==r&&(x[3]=0);r=new Date(x[0],x[1],x[2],x[3],x[4],x[5],x[6]);v.strict&&r.setFullYear(x[0]);var z=w.join("");C=-1!=z.indexOf("d");z=-1!=z.indexOf("M");if(!h||z&&r.getMonth()>x[1]||C&&r.getDate()>x[2])return null;if(z&&
r.getMonth()<x[1]||C&&r.getDate()<x[2])r=B.add(r,"hour",1);return r};var t=["abbr","wide","narrow"],n=[],m={};f.addCustomFormats=function(h,v){n.push({pkg:h,name:v});m={}};f._getGregorianBundle=function(h){if(m[h])return m[h];var v={};u.forEach(n,function(r){r=p.getLocalization(r.pkg,r.name,h);v=e.mixin(v,r)},this);return m[h]=v};f.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");f.getNames=function(h,v,r,C){C=f._getGregorianBundle(C);h=[h,r,v];if("standAlone"==r){r=h.join("-");
var w=C[r];1==w[0]&&(w=void 0)}h[1]="format";return(w||C[h.join("-")]).concat()};f.isWeekend=function(h,v){v=A.getWeekend(v);h=(h||new Date).getDay();v.end<v.start&&(v.end+=7,h<v.start&&(h+=7));return h>=v.start&&h<=v.end};f._getDayOfYear=function(h){return B.difference(new Date(h.getFullYear(),0,1,h.getHours()),h)+1};f._getWeekOfYear=function(h,v){1==arguments.length&&(v=0);var r=(new Date(h.getFullYear(),0,1)).getDay(),C=(r-v+7)%7;C=Math.floor((f._getDayOfYear(h)+C-1)/7);r==v&&C++;return C};return f})},
"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(e,u){var B={};e.setObject("dojo.cldr.supplemental",B);B.getFirstDayOfWeek=function(A){A={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,
sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[B._region(A)];return void 0===A?1:A};B._region=function(A){A=u.normalizeLocale(A);A=A.split("-");var p=A[1];p?4==p.length&&(p=A[2]):p={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",
fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",
mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",
ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",
dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",
kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",
niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",
tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[A[0]];return p};B.getWeekend=function(A){var p=B._region(A);A={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[p];p={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,
ma:6,qa:6,sd:6,sy:6,tn:6}[p];void 0===A&&(A=6);void 0===p&&(p=0);return{start:A,end:p}};return B})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v){function r(Y){Y=new l(Y);return(Y.host+(Y.port?":"+
Y.port:"")).toLowerCase()}function C(Y){return this._xhr?this._xhr.getResponseHeader(Y):null}function w(Y,ma){var ca=b.objectToQuery(Y.content);ca&&(Y.url+=(-1===Y.url.indexOf("?")?"?":"\x26")+ca);if(2E3<Y.url.length){if("data:"!==Y.url.toLowerCase().slice(0,5))return Y=new A,Y.reject(p.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),Y;if(3E6<Y.url.length)return Y=new A,Y.reject(p.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),
Y}var la=new Image;ma.allowImageDataAccess&&(la.crossOrigin=Y.withCredentials?"use-credentials":"anonymous");var ta=!1,za=new A(function(P){ta=!0;la.onload=la.onerror=la.onabort=null;la.src=""});ma=function(P){la.onload=la.onerror=la.onabort=null;ta||za.reject(Error("Unable to load the resource"))};la.onload=function(){la.onload=la.onerror=la.onabort=null;ta||za.resolve(this)};la.onerror=ma;la.onabort=ma;la.alt="";la.src=Y.url;return za}function y(Y,ma,ca,la){var ta=!1,za=!1,P=!1;if(m.isDefined(ma))if(p.isObject(ma)){ta=
!!ma.useProxy;za=!!ma.usePost;P=!!ma.returnProgress;var ea=ma.crossOrigin}else ta=!!ma;Y=p.mixin({},Y);delete Y._credential;Y._ssl&&(Y.url=Y.url.replace(/^http:/i,"https:"));10>n("ie")&&!ba.test(Y.url)&&(Y.url=encodeURI(Y.url));var ra=Y.content,M=Y.url,Z=ca&&Y.form,ka=J;ea=m.isDefined(ea)?ea:ka.useCors;Y.load=function(Ka){if(Ka){if(Ka.error){var Pa=p.mixin(Error(),Ka.error);Pa.log=!!B.isDebug}else"error"===Ka.status&&(Pa=p.mixin(Error(),Ka),Pa.log=!!B.isDebug);Pa&&(Y.failOk=!Pa.log,m.isDefined(Pa.httpCode)||
(Pa.httpCode=Pa.code))}return Pa||Ka};Y.error=function(Ka,Pa){Pa&&Pa.xhr&&Pa.xhr.abort();Ka instanceof Error||(Ka=p.mixin(Error(),Ka));Ka.log=!!B.isDebug;Y.failOk=!Ka.log;ka.errorHandler(Ka,Pa);return Ka};Y._token&&(Y.content=Y.content||{},Y.content.token=Y._token);var qa=0;if(ra&&M){var ua=b.objectToQuery(ra);qa=ua.length+M.length+1;n("esri-url-encodes-apostrophe")&&(qa=ua.replace(/'/g,"%27").length+M.length+1)}Y.timeout=m.isDefined(Y.timeout)?Y.timeout:ka.timeout;Y.handleAs=Y.handleAs||"json";try{var Aa=
ea&&h.canUseXhr(Y.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(Y.url),ya=h.hasSameOrigin(Y.url,window.location.href)||Aa,G=za||ca||qa>ka.postLength?!0:!1,I=ya||-1===Y.handleAs.indexOf("json")||!Y.callbackParamName||ca?!1:!0,R=h.getProxyRule(Y.url)||ka.alwaysUseProxy||ta||!("image"===Y.handleAs&&!ma.allowImageDataAccess||I&&!G||ya)?!0:!1;ca&&!n("esri-file-upload")&&!R&&Aa&&(R=!0);if(R){var X=h.getProxyUrl(M,ea);var W=X.path;X._xo&&(Aa=!0);!G&&W.length+1+qa>ka.postLength&&(G=!0);Y.url=
W+"?"+M;if(G)Y.content=p.mixin(X.query||{},ra);else{var sa=b.objectToQuery(p.mixin(X.query||{},ra));sa&&(Y.url+="?"+sa);Y.content=null}}if(!I||G||R){var T=Y.headers;!Aa||T&&T.hasOwnProperty("X-Requested-With")||(T=Y.headers=T||{},T["X-Requested-With"]=null);if(ca){var S=Y.callbackParamName||"callback.html",ia=Y.callbackElementName||"textarea",na,va,Ba=Z.elements?Z.elements.length:0;if(ra=Y.content)for(na in ra.token&&-1<M.toLowerCase().indexOf("/sharing/servers/")&&(M+=(-1===M.indexOf("?")?"?":"\x26")+
"token\x3d"+ra.token,Y.url=R?W+"?"+M:M,delete ra.token),ra){var Na=ra[na];if(m.isDefined(Na)){var Va=null;for(va=0;va<Ba;va++){var Da=Z.elements[va];if(Da.name===na){Va=Da;break}}Va?Va.value=Na:la?Z.append(na,Na):Z.appendChild(a.create("input",{type:"hidden",name:na,value:Na}))}}if(n("esri-file-upload")){u.forEach(Z.elements,function(Ka){Ka.name===S&&Z.removeChild(Ka)});var K=la?Z:new FormData(Z);if(11<=n("safari")&&"entries"in K&&"delete"in K){la=[];for(var V=K.entries(),ha=V.next();!ha.done;){var N=
ha.value;N[1]instanceof File&&""===N[1].name&&la.push(N[0]);ha=V.next()}la.forEach(function(Ka){K.delete(Ka)})}Y.contentType=!1;Y.postData=K;delete Y.form}else{Z.enctype="multipart/form-data";9>n("ie")&&(Z.encoding="multipart/form-data");Z.method="post";u.some(Z.elements,function(Ka){return Ka.name===S})||Z.appendChild(a.create("input",{type:"hidden",name:S,value:ia}));if(-1!==M.toLowerCase().indexOf("addattachment")||-1!==M.toLowerCase().indexOf("updateattachment"))M+=(-1===M.indexOf("?")?"?":"\x26")+
S+"\x3d"+ia,Y.url=R?W+"?"+M:M;delete Y.content}}if(Aa&&!Y.hasOwnProperty("withCredentials")&&"with-credentials"===J.useCors){M=R?W:M;var aa=h.canUseXhr(M,!0),ja=-1<aa?J.corsEnabledServers[aa]:null;if(ja&&ja.hasOwnProperty("withCredentials"))ja.withCredentials&&(Y.withCredentials=!0);else if(f.id){var pa=f.id.findServerInfo(M);pa&&pa.webTierAuth&&(Y.withCredentials=!0)}}Y=F?F(Y):Y;if("image"===Y.handleAs)return w(Y,ma);if(G){if(ca&&!n("esri-file-upload")){var wa=new A(function(){Ja.cancel()});var Ja=
c.post(Y.url,Y).then(function(Ka){wa.resolve(Ka)}).otherwise(function(Ka){wa.reject(Ka)});wa.addCallback(function(Ka){return Y.load(Ka)});wa.addErrback(function(Ka){return Y.error(Ka)});return wa}!R&&n("safari")&&(Y.url+=(-1===Y.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+Q++);if(P){Y.uploadProgress=!0;Y.data=Y.postData;Y.query=Y.content;wa=new A(function(){Ea.cancel()});var Ea=g.post(Y.url,Y).then(function(Ka){wa.resolve(Ka)},function(Ka){wa.reject(Ka)},function(Ka){wa.progress({transferType:Ka.transferType,
loaded:Ka.loaded,total:Ka.total})});wa.addCallback(function(Ka){return Y.load(Ka)});wa.addErrback(function(Ka){return Y.error(Ka)});return wa}return k.post(Y)}return k.get(Y)}Y=F?F(Y):Y;Y.jsonp=Y.callbackParamName;Y.query=Y.content;wa=new A(function(){Qa.cancel()});var Qa=d.get(Y.url,Y).then(function(Ka){wa.resolve(Ka)}).otherwise(function(Ka){wa.reject(Ka)});wa.addCallback(function(Ka){return Y.load(Ka)});wa.addErrback(function(Ka){return Y.error(Ka)});return wa}catch(Ka){return wa=new A,wa.errback(Y.error(Ka)),
wa}}function q(Y){var ma=J.corsStatus,ca=h.canUseXhr(Y,!0);-1<ca&&J.corsEnabledServers.splice(ca,1);var la=new A;la.reject({log:!!B.isDebug});ma[r(Y)]=la.promise;return ca}function x(Y){var ma=J.corsStatus;try{var ca=r(Y);if(J.corsDetection&&J.useCors&&n("esri-cors")&&Y&&-1!==Y.toLowerCase().indexOf("/rest/services")&&!h.hasSameOrigin(Y,window.location.href)&&!h.canUseXhr(Y)){if(ma[ca]&&!ma[ca].isCanceled())return ma[ca];var la=new A(v._dfdCanceller);ma[ca]=la.promise;var ta=k.get({url:Y.substring(0,
Y.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*J.corsDetectionTimeout});la._pendingDfd=ta;ta.then(function(za){za?(h.canUseXhr(Y)||J.corsEnabledServers.push(ca),la.resolve()):la.reject()},function(za){la.reject(za)});return la.promise}}catch(za){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}return fa}function E(Y,ma,ca,la){function ta(ya){ya._pendingDfd=y(ca,la,ka,Z);if(!ya._pendingDfd){ya.ioArgs=
ya._pendingDfd&&ya._pendingDfd.ioArgs;var G=Error("Deferred object is missing");G.log=!!B.isDebug;ya.errback(G);ya._pendingDfd=null;return ya}ya._pendingDfd.addCallback(function(I){if(!I)return I;var R=ya._pendingDfd&&ya._pendingDfd.ioArgs&&ya._pendingDfd.ioArgs.xhr;if(!R)return I;if(R=R.getResponseHeader("Content-Type"))if(R=R.toLowerCase(),-1===R.indexOf("text/plain")&&-1===R.indexOf("application/json"))return I;if(I instanceof ArrayBuffer&&750>=I.byteLength)R=new Blob([I]);else if(I instanceof
Blob&&750>=I.size)R=I;else return I;var X=new A,W=new FileReader;W.readAsText(R);W.onloadend=function(){if(!W.error)try{var sa=JSON.parse(W.result);if(sa.error)var T=sa.error}catch(S){}T?(T=p.mixin(Error(),T),T.log=!!B.isDebug,null==T.httpCode&&(T.httpCode=T.code),X.reject(T)):X.resolve(I)};return X.promise}).addCallback(function(I){ya.ioArgs=ya._pendingDfd&&ya._pendingDfd.ioArgs;la.returnFullResponse&&(I={data:I,_xhr:ya.ioArgs&&ya.ioArgs.xhr,getHeader:C});ya.callback(I);ya._pendingDfd=null}).addErrback(function(I){if(I){var R=
I.code;var X=I.subcode;var W=(W=I.messageCode)&&W.toUpperCase()}if(I&&403==R&&(4==X||I.message&&-1<I.message.toLowerCase().indexOf("ssl")&&-1===I.message.toLowerCase().indexOf("permission"))){if(!ca._ssl){ca._ssl=ca._sslFromServer=!0;E(ya,!0,ca,la);return}}else if(I&&415==I.status){if(q(ca.url),!ca._err415){ca._err415=1;E(ya,!0,ca,la);return}}else if(f.id&&-1!==u.indexOf(f.id._errorCodes,R)&&!f.id._isPublic(ca.url)&&!P&&(403!=R||-1===u.indexOf(L,W)&&(!m.isDefined(X)||2==X&&ca._token))){ya._pendingDfd=
f.id.getCredential(ca.url,{token:ca._token,error:I});ya._pendingDfd.addCallback(function(sa){ca._token=sa.token;ca._credential=sa;ca._ssl=ca._sslFromServer||sa.ssl;E(ya,!0,ca,la)}).addErrback(function(sa){ya.errback(sa);ya._pendingDfd=null});return}ya.ioArgs=ya._pendingDfd&&ya._pendingDfd.ioArgs;ya.isFulfilled()||ya.errback(I);ya._pendingDfd=null}).then(null,null,function(I){ya.progress(I)})}var za=ca.form,P=la.disableIdentityLookup,ea=la._preLookup,ra=!1;if(n("esri-workers")&&!1!==J.useWorkers)if(!0===
la.useWorkers||!0===J.useWorkers)ra=!0;else if(la.workerOptions){var M=la.workerOptions;if(M.callback||M.worker&&M.worker.worker instanceof Worker)ra=!0}var Z=za&&n("esri-file-upload")&&za instanceof FormData,ka=za&&(za.elements?u.some(za.elements,function(ya){return"file"===ya.type}):Z),qa=-1!==ca.url.toLowerCase().indexOf("token\x3d")||ca.content&&ca.content.token||ka&&u.some(za.elements,function(ya){return"token"===ya.name})?1:0;if(!ma){Y.addCallback(function(ya){if((/\/sharing\/rest\/accounts\/self/i.test(ca.url)||
/\/sharing\/rest\/portals\/self/i.test(ca.url))&&!qa&&!ca._token&&ya.user&&ya.user.username){J.webTierAuthServers.push(r(ca.url));ya=J.corsEnabledServers;var G=h.canUseXhr(ca.url,!0),I={host:r(ca.url),withCredentials:!0};if(-1===G)ya.push(I);else{var R=ya[G];R instanceof RegExp?(I.host=R,ya.splice(G,1,I)):"object"===typeof R?R.withCredentials=!0:ya.splice(G,1,I)}}if(ya=ca._credential)if(G=(G=f.id.findServerInfo(ya.server))&&G.owningSystemUrl)G=G.replace(/\/?$/,"/sharing"),(ya=f.id.findCredential(G,
ya.userId))&&-1===f.id._getIdenticalSvcIdx(G,ya)&&ya.resources.splice(0,0,G)});Y.addBoth(function(ya){delete ca._credential;!ya||n("ie")&&ya.nodeType||(ya._ssl=ca._ssl)});var ua=ca.load,Aa=ca.error;ua&&Y.addCallback(function(ya){var G=Y._pendingDfd;G=G&&G.ioArgs;return ua.call(G&&G.args,ya,G)});Aa&&Y.addErrback(function(ya){var G=Y._pendingDfd;G=G&&G.ioArgs;return Aa.call(G&&G.args,ya,G)})}!f.id||qa||ca._token||f.id._isPublic(ca.url)||P&&!ea||!(ma=f.id.findCredential(ca.url))||(ca._token=ma.token,
ca._ssl=ma.ssl);ra?la.workerOptions&&la.workerOptions.worker?(D||(D=k),k=la.workerOptions.worker,ta(Y)):e(["./workers/RequestClient"],function(ya){D||(D=k);if(la.workerOptions){var G=la.workerOptions;k=ya.getClient(G.callback,G.cbFunction)}else k=ya.getClient();ta(Y)}):(D&&(k=D,D=null),ta(Y));return Y}function z(Y,ma){Y.url=h.fixUrl(Y.url);ma=ma||{};var ca=new A(v._dfdCanceller),la=x(Y.url);ca._pendingDfd=la;la.always(function(ta){ta&&"cancel"===ta.dojoType?ca.reject(ta):E(ca,!1,Y,ma)});return ca}
var D=null,F,J=t.defaults.io,L=["COM_0056","COM_0057","SB_0008"],Q=0,ba=/%[0-9A-F]{2}/i,fa=function(){var Y=new A;Y.resolve();return Y.promise}();z._makeRequest=y;z._processRequest=E;z._disableCors=q;z._detectCors=x;z.setRequestPreCallback=function(Y){F=Y};return z})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(e,u,B,A,p,l){function k(){var h=document.createElement("iframe");h.name="esri_core_jsonp_iframe";
h.style.display="none";h.setAttribute("sandbox","allow-scripts");if(!l("ff")&&"srcdoc"in h){var v=e.toUrl("dojo/dojo.js"),r=p.replace("../../../dojo/dojo.js",v);v=v.slice(0,-7);r=r.replace("../../../dojo/",v);h.srcdoc=r}else r=e.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===r.indexOf("https:")&&(r=r.replace("https:","http:")),h.src=r;document.body.appendChild(h);return h}function g(){var h=new MessageChannel;h.port1.addEventListener("message",d);h.port1.start();return h}function d(h){var v=
h.data;if("ready"===v){v=0;for(var r=n;v<r.length;v++)h=r[v],a(h,f);n=null}else if(h=m[v.id])delete m[v.id],v.isError?h.dfd.reject(Error(v.message)):h.dfd.resolve(v.response)}function c(h,v){h.addEventListener("load",function(){h.contentWindow.postMessage("init","*",[v.port2])})}function a(h,v){m[h.message.id]=h;v.port1.postMessage(h.message)}Object.defineProperty(u,"__esModule",{value:!0});var b,f,t=0,n=[],m={};u.get=function(h,v){if(!l("esri-script-sandbox"))return A.get(h,v);var r=null;v&&(r={jsonp:v.jsonp,
preventCache:v.preventCache,query:v.query,timeout:v.timeout});v=new B(function(){if(n){var w=n.indexOf(C);-1<w&&n.splice(w,1)}else C.message.id in m&&delete m[C.message.id]});var C={dfd:v,message:{id:"id"+(++t+Math.random()),url:h,options:r}};b||(b=k(),f=g(),c(b,f));n?n.push(C):a(C,f);return v.promise}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(e,u,B,A){var p=function(c,a,b){A(c,{sync:!!a,headers:{"X-Requested-With":null}}).then(b)};var l={},k=function(c){if(c){c=
c.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var a=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(c=a[1])}else c="";return c},g={},d={};e.cache=function(c,a,b){if("string"==typeof c)if(/\//.test(c)){var f=c;b=a}else f=u.toUrl(c.replace(/\./g,"/")+(a?"/"+a:""));else f=c+"",b=a;c=void 0!=b&&"string"!=typeof b?b.value:b;b=b&&b.sanitize;if("string"==typeof c)return l[f]=c,b?k(c):c;if(null===c)return delete l[f],null;f in l||p(f,!0,function(t){l[f]=t});return b?k(l[f]):l[f]};
return{dynamic:!0,normalize:function(c,a){c=c.split("!");var b=c[0];return(/^\./.test(b)?a(b):b)+(c[1]?"!"+c[1]:"")},load:function(c,a,b){c=c.split("!");var f=1<c.length,t=c[0],n=a.toUrl(c[0]);c="url:"+n;var m=g,h=function(r){b(f?k(r):r)};t in l?m=l[t]:a.cache&&c in a.cache?m=a.cache[c]:n in l&&(m=l[n]);if(m===g)if(d[n])d[n].push(h);else{var v=d[n]=[h];p(n,!a.async,function(r){l[t]=l[n]=r;for(var C=0;C<v.length;)v[C++](r);delete d[n]})}else h(m)}}})},"dojo/request":function(){define(["./request/default!"],
function(e){return e})},"dojo/request/default":function(){define(["exports","require","../has"],function(e,u,B){var A=B("config-requestProvider");A||(A="./xhr");e.getPlatformDefaultId=function(){return"./xhr"};e.load=function(p,l,k,g){u(["platform"==p?"./xhr":A],function(d){k(d)})}})},"esri/core/sniff":function(){define(["../sniff"],function(e){return e})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(e,u,B){var A=e("ff"),p=e("ie"),l=void 0===p&&7<=e("trident"),
k=e("edge"),g=e("webkit"),d=e("opera"),c=e("chrome"),a=e("safari"),b=navigator.userAgent,f;(f=b.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&e.add("esri-iphone",parseFloat(f[2].replace("_",".")));(f=b.match(/Android\s+(\d+(\.\d+)*)/i))&&e.add("esri-android",parseFloat(f[1]));(f=b.match(/Fennec\/(\d+\.\d+)/i))&&e.add("esri-fennec",parseFloat(f[1]));0<=b.indexOf("BlackBerry")&&0<=b.indexOf("WebKit")&&e.add("esri-blackberry",1);e.add("esri-touch",e("esri-iphone")||e("esri-android")||e("esri-blackberry")||
6<=e("esri-fennec")||(A||g)&&(document.createTouch||"ontouchstart"in u||u.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(f=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&e.add("esri-mobile",!!f);e.add("esri-pointer",!A&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!u.PointerEvent));B._getDOMAccessor=function(n){var m="";A?m="Moz":g?m="Webkit":p?m="ms":d&&(m="O");return m+n.charAt(0).toUpperCase()+n.substr(1)};e.add("esri-phonegap",!!u.cordova);e.add("esri-cors",
e("esri-phonegap")||u.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);e.add("esri-file-upload",u.FormData&&u.FileList?!0:!1);e.add("esri-script-sandbox",function(){return"MessageChannel"in u&&"HTMLIFrameElement"in u&&"sandbox"in HTMLIFrameElement.prototype});e.add("esri-secure-context",function(){if("isSecureContext"in u)return u.isSecureContext;if(u.location&&u.location.origin)return 0===u.location.origin.indexOf("https:")});e.add("esri-wasm","WebAssembly"in u);e.add("esri-workers",u.Worker?
!0:!1);e.add("esri-featurelayer-webgl",!1);if(b=e("esri-featurelayer-webgl")){var t=e("esri-mobile");f=t?1:2;t=t?1:3;"object"===typeof b?(b.maxDrillLevel=null==b.maxDrillLevel?f:b.maxDrillLevel,b.maxRecordCountFactor=null==b.maxRecordCountFactor?t:b.maxRecordCountFactor,b.enablePBFQuery=null==b.enablePBFQuery?!0:b.enablePBFQuery):e.add("esri-featurelayer-webgl",{maxDrillLevel:f,maxRecordCountFactor:t,enablePBFQuery:!0},null,!0)}e.add("esri-featurelayer-webgl-labeling",!1);e.add("esri-pbf",!p||10<=
p);e.add("esri-featurelayer-pbf",!0);e.add("esri-transforms",l||k||9<=p||3.5<=A||4<=c||3.1<=a||10.5<=d||3.2<=e("esri-iphone")||2.1<=e("esri-android"));e.add("esri-transitions",l||k||10<=p||4<=A||4<=c||3.1<=a||10.5<=d||3.2<=e("esri-iphone")||2.1<=e("esri-android"));e.add("esri-transforms3d",l||k||10<=A||12<=c||4<=a||3.2<=e("esri-iphone")||3<=e("esri-android"));e.add("esri-url-encodes-apostrophe",function(){if(!u.document)return!1;var n=u.document.createElement("a");n.href="?'";return-1<n.href.indexOf("?%27")});
3>e("esri-android")&&(e.add("esri-transforms",!1,!1,!0),e.add("esri-transitions",!1,!1,!0),e.add("esri-transforms3d",!1,!1,!0));e.add("esri-will-change",e("esri-transforms")&&(52<=c||11.1<=a));B._css=function(n){var m=e("esri-transforms3d");void 0!==n&&null!==n?m=n:m&&(c||a&&!e("esri-iphone"))&&(m=!1);var h=m?"translate3d(":"translate(",v=m?c?",-1px)":",0px)":")",r=m?"scale3d(":"scale(",C=m?",1)":")",w=m?"rotate3d(0,0,1,":"rotate(",y=m?"matrix3d(":"matrix(",q=m?",0,0,":",",x=m?",0,0,0,0,1,0,":",",
E=m?",0,1)":")";return{names:{transition:g&&"-webkit-transition"||A&&"MozTransition"||d&&"OTransition"||p&&"msTransition"||"transition",transform:g&&"-webkit-transform"||A&&"MozTransform"||d&&"OTransform"||p&&"msTransform"||"transform",transformName:g&&"-webkit-transform"||A&&"-moz-transform"||d&&"-o-transform"||p&&"-ms-transform"||"transform",origin:g&&"-webkit-transform-origin"||A&&"MozTransformOrigin"||d&&"OTransformOrigin"||p&&"msTransformOrigin"||"transformOrigin",endEvent:g&&"webkitTransitionEnd"||
A&&"transitionend"||d&&"oTransitionEnd"||p&&"MSTransitionEnd"||"transitionend"},translate:function(z,D){return h+z+"px,"+D+"px"+v},scale:function(z){return r+z+","+z+C},rotate:function(z){return w+z+"deg)"},matrix:function(z){return y+z.xx+","+z.xy+q+z.yx+","+z.yy+x+z.dx.toFixed(10)+(A&&59>=A?"px,":",")+z.dy.toFixed(10)+(A&&59>=A?"px":"")+E},getScaleFromMatrix:function(z){if(!z)return 1;z=z.toLowerCase();var D=-1<z.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(z.substring(D.length,z.indexOf(",")))}}};
return e})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b){function f(w){return!this.isFulfilled()}function t(w){return!!this._finished}function n(w,y){if(!y)try{var q=w.options,x=h.doc(h._frame),E=q.handleAs;if("html"!==E){if("xml"===E)if("html"===x.documentElement.tagName.toLowerCase()){g("a",x.documentElement).orphan();
var z=x.documentElement.innerText||x.documentElement.textContent;z=z.replace(/>\s+</g,"\x3e\x3c");w.text=l.trim(z)}else w.data=x;else w.text=x.getElementsByTagName("textarea")[0].value;p(w)}else w.data=x}catch(D){y=D}y?this.reject(y):this._finished?this.resolve(w):this.reject(Error("Invalid dojo/request/iframe request state"))}function m(w){this._callNext()}function h(w,y,q){var x=A.parseArgs(w,A.deepCreate(C,y),!0);w=x.url;y=x.options;if("GET"!==y.method&&"POST"!==y.method)throw Error(y.method+" not supported by dojo/request/iframe");
h._frame||(h._frame=h.create(h._iframeName,r+"();"));w=A.deferred(x,null,f,t,n,m);w._callNext=function(){this._calledNext||(this._calledNext=!0,h._currentDfd=null,h._fireNextRequest())};w._legacy=q;h._dfdQueue.push(w);h._fireNextRequest();B(w);return q?w:w.promise}var v=e.id.replace(/[\/\.\-]/g,"_"),r=v+"_onload";b.global[r]||(b.global[r]=function(){var w=h._currentDfd;if(w){var y=c.byId(w.response.options.form)||w._tmpForm;if(y){for(var q=w._contentToClean,x=0;x<q.length;x++)for(var E=q[x],z=0;z<
y.childNodes.length;z++){var D=y.childNodes[z];if(D.name===E){a.destroy(D);break}}w._originalAction&&y.setAttribute("action",w._originalAction);w._originalMethod&&(y.setAttribute("method",w._originalMethod),y.method=w._originalMethod);w._originalTarget&&(y.setAttribute("target",w._originalTarget),y.target=w._originalTarget)}w._tmpForm&&(a.destroy(w._tmpForm),delete w._tmpForm);w._finished=!0}else h._fireNextRequest()});var C={method:"POST"};h.create=function(w,y,q){if(b.global[w])return b.global[w];
if(b.global.frames[w])return b.global.frames[w];q||(d("config-useXDomain")&&!d("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),q=d("config-dojoBlankHtmlUrl")||u.toUrl("dojo/resources/blank.html"));y=a.place('\x3ciframe id\x3d"'+w+'" name\x3d"'+w+'" src\x3d"'+q+'" onload\x3d"'+y+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
b.body());return b.global[w]=y};h.doc=function(w){if(w.contentDocument)return w.contentDocument;var y=w.name;if(y){var q=b.doc.getElementsByTagName("iframe");if(w.document&&q[y].contentWindow&&q[y].contentWindow.document)return q[y].contentWindow.document;if(b.doc.frames[y]&&b.doc.frames[y].document)return b.doc.frames[y].document}return null};h.setSrc=function(w,y,q){w=b.global.frames[w.name];w.contentWindow&&(w=w.contentWindow);try{q?w.location.replace(y):w.location=y}catch(x){console.log("dojo/request/iframe.setSrc: ",
x)}};h._iframeName=v+"_IoIframe";h._notifyStart=function(){};h._dfdQueue=[];h._currentDfd=null;h._fireNextRequest=function(){try{if(!h._currentDfd&&h._dfdQueue.length){do var w=h._currentDfd=h._dfdQueue.shift();while(w&&(w.canceled||w.isCanceled&&w.isCanceled())&&h._dfdQueue.length);if(!w||w.canceled||w.isCanceled&&w.isCanceled())h._currentDfd=null;else{var y=w.response,q=y.options,x=w._contentToClean=[],E=c.byId(q.form),z=A.notify,D=q.data||null;if(!w._legacy&&"POST"===q.method&&!E)E=w._tmpForm=
a.create("form",{name:v+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},b.body());else if("GET"===q.method&&E&&-1<y.url.indexOf("?")){var F=y.url.slice(y.url.indexOf("?")+1);D=l.mixin(k.queryToObject(F),D)}if(E){if(!w._legacy){var J=E;do J=J.parentNode;while(J&&J!==b.doc.documentElement);J||(E.style.position="absolute",E.style.left="-1000px",E.style.top="-1000px",b.body().appendChild(E));E.name||(E.name=v+"_form")}if(D){J=function(ca,la){a.create("input",{type:"hidden",name:ca,value:la},
E);x.push(ca)};for(var L in D){var Q=D[L];if(l.isArray(Q)&&1<Q.length)for(F=0;F<Q.length;F++)J(L,Q[F]);else{var ba=g("input[name\x3d'"+L+"']",E);-1==ba.indexOf()?J(L,Q):ba.val(Q)}}}var fa=E.getAttributeNode("action"),Y=E.getAttributeNode("method"),ma=E.getAttributeNode("target");y.url&&(w._originalAction=fa?fa.value:null,fa?fa.value=y.url:E.setAttribute("action",y.url));w._legacy?Y&&Y.value||(Y?Y.value=q.method:E.setAttribute("method",q.method)):(w._originalMethod=Y?Y.value:null,Y?Y.value=q.method:
E.setAttribute("method",q.method));w._originalTarget=ma?ma.value:null;ma?ma.value=h._iframeName:E.setAttribute("target",h._iframeName);E.target=h._iframeName;z&&z.emit("send",y,w.promise.cancel);h._notifyStart(y);E.submit()}else q="",y.options.data&&(q=y.options.data,"string"!==typeof q&&(q=k.objectToQuery(q))),J=y.url+(-1<y.url.indexOf("?")?"\x26":"?")+q,z&&z.emit("send",y,w.promise.cancel),h._notifyStart(y),h.setSrc(h._frame,J,!0)}}}catch(ca){w.reject(ca)}};A.addCommonMethods(h,["GET","POST"]);
return h})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(e,u,B,A,p,l,k,g){function d(r,C){var w=function(q,x){if("string"==typeof x&&(x=B.byId(x),!x))return new C([]);q="string"==typeof q?r(q,x):q?q.end&&q.on?q:[q]:[];return q.end&&q.on?q:new C(q)};w.matches=r.match||function(q,x,E){return 0<w.filter([q],x,E).length};w.filter=r.filter||function(q,x,E){return w(x,E).filter(function(z){return-1<
p.indexOf(q,z)})};if("function"!=typeof r){var y=r.search;r=function(q,x){return y(x||document,q)}}return w}u.add("array-extensible",function(){return 1==l.delegate([],{length:1}).length&&!u("bug-for-in-skips-shadowed")});var c=Array.prototype,a=c.slice,b=c.concat,f=p.forEach,t=function(r,C,w){C=[0].concat(a.call(C,0));w=w||e.global;return function(y){C[0]=y;return r.apply(w,C)}},n=function(r){var C=this instanceof m&&u("array-extensible");"number"==typeof r&&(r=Array(r));var w=r&&"length"in r?r:
arguments;if(C||!w.sort){for(var y=C?this:[],q=y.length=w.length,x=0;x<q;x++)y[x]=w[x];if(C)return y;w=y}l._mixin(w,h);w._NodeListCtor=function(E){return m(E)};return w},m=n,h=m.prototype=u("array-extensible")?[]:{};m._wrap=h._wrap=function(r,C,w){r=new (w||this._NodeListCtor||m)(r);return C?r._stash(C):r};m._adaptAsMap=function(r,C){return function(){return this.map(t(r,arguments,C))}};m._adaptAsForEach=function(r,C){return function(){this.forEach(t(r,arguments,C));return this}};m._adaptAsFilter=
function(r,C){return function(){return this.filter(t(r,arguments,C))}};m._adaptWithCondition=function(r,C,w){return function(){var y=arguments,q=t(r,y,w);if(C.call(w||e.global,y))return this.map(q);this.forEach(q);return this}};f(["slice","splice"],function(r){var C=c[r];h[r]=function(){return this._wrap(C.apply(this,arguments),"slice"==r?this:null)}});f(["indexOf","lastIndexOf","every","some"],function(r){var C=p[r];h[r]=function(){return C.apply(e,[this].concat(a.call(arguments,0)))}});l.extend(n,
{constructor:m,_NodeListCtor:m,toString:function(){return this.join(",")},_stash:function(r){this._parent=r;return this},on:function(r,C){var w=this.map(function(y){return A(y,r,C)});w.remove=function(){for(var y=0;y<w.length;y++)w[y].remove()};return w},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(r){var C=a.call(this,0),w=p.map(arguments,function(y){return a.call(y,0)});return this._wrap(b.apply(C,w),this)},map:function(r,C){return this._wrap(p.map(this,
r,C),this)},forEach:function(r,C){f(this,r,C);return this},filter:function(r){var C=arguments,w=this,y=0;if("string"==typeof r){w=v._filterResult(this,C[0]);if(1==C.length)return w._stash(this);y=1}return this._wrap(p.filter(w,C[y],C[y+1]),this)},instantiate:function(r,C){var w=l.isFunction(r)?r:l.getObject(r);C=C||{};return this.forEach(function(y){new w(C,y)})},at:function(){var r=new this._NodeListCtor(0);f(arguments,function(C){0>C&&(C=this.length+C);this[C]&&r.push(this[C])},this);return r._stash(this)}});
var v=d(g,n);e.query=d(g,function(r){return n(r)});v.load=function(r,C,w){k.load(r,C,function(y){w(d(y,n))})};e._filterQueryResult=v._filterResult=function(r,C,w){return new n(v.filter(r,C,w))};e.NodeList=v.NodeList=n;return v})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,u,B,A,p){var l=A.trim,k=B.forEach,g="BackCompat"==p.doc.compatMode,d=!1,c=function(){return!0},a=function(G){G=0<="\x3e~+".indexOf(G.slice(-1))?G+" * ":
G+" ";for(var I=function(aa,ja){return l(G.slice(aa,ja))},R=[],X=-1,W=-1,sa=-1,T=-1,S=-1,ia=-1,na=-1,va,Ba="",Na="",Va,Da=0,K=G.length,V=null,ha=null,N=function(){0<=ia&&(V.id=I(ia,Da).replace(/\\/g,""),ia=-1);if(0<=na){var aa=na==Da?null:I(na,Da);V[0>"\x3e~+".indexOf(aa)?"tag":"oper"]=aa;na=-1}0<=S&&(V.classes.push(I(S+1,Da).replace(/\\/g,"")),S=-1)};Ba=Na,Na=G.charAt(Da),Da<K;Da++)"\\"!=Ba&&(V||(Va=Da,V={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?
this.otag:this.tag}},na=Da),va?Na==va&&(va=null):"'"==Na||'"'==Na?va=Na:0<=X?"]"==Na?(ha.attr?ha.matchFor=I(sa||X+1,Da):ha.attr=I(X+1,Da),!(X=ha.matchFor)||'"'!=X.charAt(0)&&"'"!=X.charAt(0)||(ha.matchFor=X.slice(1,-1)),ha.matchFor&&(ha.matchFor=ha.matchFor.replace(/\\/g,"")),V.attrs.push(ha),ha=null,X=sa=-1):"\x3d"==Na&&(sa=0<="|~^$*".indexOf(Ba)?Ba:"",ha.type=sa+Na,ha.attr=I(X+1,Da-sa.length),sa=Da+1):0<=W?")"==Na&&(0<=T&&(ha.value=I(W+1,Da)),T=W=-1):"#"==Na?(N(),ia=Da+1):"."==Na?(N(),S=Da):":"==
Na?(N(),T=Da):"["==Na?(N(),X=Da,ha={}):"("==Na?(0<=T&&(ha={name:I(T+1,Da),value:null},V.pseudos.push(ha)),W=Da):" "==Na&&Ba!=Na&&(N(),0<=T&&V.pseudos.push({name:I(T+1,Da)}),V.loops=V.pseudos.length||V.attrs.length||V.classes.length,V.oquery=V.query=I(Va,Da),V.otag=V.tag=V.oper?null:V.tag||"*",V.tag&&(V.tag=V.tag.toUpperCase()),R.length&&R[R.length-1].oper&&(V.infixOper=R.pop(),V.query=V.infixOper.query+" "+V.query),R.push(V),V=null));return R},b=function(G,I){return G?I?function(){return G.apply(window,
arguments)&&I.apply(window,arguments)}:G:I},f=function(G,I){I=I||[];G&&I.push(G);return I},t=function(G){return 1==G.nodeType},n=function(G,I){return G?"class"==I?G.className||"":"for"==I?G.htmlFor||"":"style"==I?G.style.cssText||"":(d?G.getAttribute(I):G.getAttribute(I,2))||"":""},m={"*\x3d":function(G,I){return function(R){return 0<=n(R,G).indexOf(I)}},"^\x3d":function(G,I){return function(R){return 0==n(R,G).indexOf(I)}},"$\x3d":function(G,I){return function(R){R=" "+n(R,G);var X=R.lastIndexOf(I);
return-1<X&&X==R.length-I.length}},"~\x3d":function(G,I){var R=" "+I+" ";return function(X){return 0<=(" "+n(X,G)+" ").indexOf(R)}},"|\x3d":function(G,I){var R=I+"-";return function(X){X=n(X,G);return X==I||0==X.indexOf(R)}},"\x3d":function(G,I){return function(R){return n(R,G)==I}}};A=p.doc.documentElement;var h=!(A.nextElementSibling||"nextElementSibling"in A),v=h?"nextSibling":"nextElementSibling",r=h?"previousSibling":"previousElementSibling",C=h?t:c,w=function(G){for(;G=G[r];)if(C(G))return!1;
return!0},y=function(G){for(;G=G[v];)if(C(G))return!1;return!0},q=function(G){var I=G.parentNode;I=7!=I.nodeType?I:I.nextSibling;var R=0,X=I.children||I.childNodes,W=G._i||G.getAttribute("_i")||-1,sa=I._l||("undefined"!==typeof I.getAttribute?I.getAttribute("_l"):-1);if(!X)return-1;X=X.length;if(sa==X&&0<=W&&0<=sa)return W;u("ie")&&"undefined"!==typeof I.setAttribute?I.setAttribute("_l",X):I._l=X;W=-1;for(I=I.firstElementChild||I.firstChild;I;I=I[v])C(I)&&(u("ie")?I.setAttribute("_i",++R):I._i=++R,
G===I&&(W=R));return W},x=function(G){return!(q(G)%2)},E=function(G){return q(G)%2},z={checked:function(G,I){return function(R){return!("checked"in R?!R.checked:!R.selected)}},disabled:function(G,I){return function(R){return R.disabled}},enabled:function(G,I){return function(R){return!R.disabled}},"first-child":function(){return w},"last-child":function(){return y},"only-child":function(G,I){return function(R){return w(R)&&y(R)}},empty:function(G,I){return function(R){var X=R.childNodes;for(R=R.childNodes.length-
1;0<=R;R--){var W=X[R].nodeType;if(1===W||3==W)return!1}return!0}},contains:function(G,I){G=I.charAt(0);if('"'==G||"'"==G)I=I.slice(1,-1);return function(R){return 0<=R.innerHTML.indexOf(I)}},not:function(G,I){G=a(I)[0];I={el:1};"*"!=G.tag&&(I.tag=1);G.classes.length||(I.classes=1);var R=F(G,I);return function(X){return!R(X)}},"nth-child":function(G,I){G=parseInt;if("odd"==I)return E;if("even"==I)return x;if(-1!=I.indexOf("n")){I=I.split("n",2);var R=I[0]?"-"==I[0]?-1:G(I[0]):1,X=I[1]?G(I[1]):0,W=
0,sa=-1;0<R?0>X?X=X%R&&R+X%R:0<X&&(X>=R&&(W=X-X%R),X%=R):0>R&&(R*=-1,0<X&&(sa=X,X%=R));if(0<R)return function(S){S=q(S);return S>=W&&(0>sa||S<=sa)&&S%R==X};I=X}var T=G(I);return function(S){return q(S)==T}}},D=9>u("ie")||9==u("ie")&&u("quirks")?function(G){var I=G.toLowerCase();"class"==I&&(G="className");return function(R){return d?R.getAttribute(G):R[G]||R[I]}}:function(G){return function(I){return I&&I.getAttribute&&I.hasAttribute(G)}},F=function(G,I){if(!G)return c;I=I||{};var R=null;"el"in I||
(R=b(R,t));"tag"in I||"*"!=G.tag&&(R=b(R,function(X){return X&&(d?X.tagName:X.tagName.toUpperCase())==G.getTag()}));"classes"in I||k(G.classes,function(X,W,sa){var T=new RegExp("(?:^|\\s)"+X+"(?:\\s|$)");R=b(R,function(S){return T.test(S.className)});R.count=W});"pseudos"in I||k(G.pseudos,function(X){var W=X.name;z[W]&&(R=b(R,z[W](W,X.value)))});"attrs"in I||k(G.attrs,function(X){var W,sa=X.attr;X.type&&m[X.type]?W=m[X.type](sa,X.matchFor):sa.length&&(W=D(sa));W&&(R=b(R,W))});"id"in I||G.id&&(R=b(R,
function(X){return!!X&&X.id==G.id}));R||"default"in I||(R=c);return R},J=function(G){return function(I,R,X){for(;I=I[v];)if(!h||t(I)){X&&!ua(I,X)||!G(I)||R.push(I);break}return R}},L=function(G){return function(I,R,X){for(I=I[v];I;){if(C(I)){if(X&&!ua(I,X))break;G(I)&&R.push(I)}I=I[v]}return R}},Q=function(G,I){var R=function(X){var W=[];try{W=Array.prototype.slice.call(X)}catch(S){for(var sa=0,T=X.length;sa<T;sa++)W.push(X[sa])}return W};G=G||c;return function(X,W,sa){var T=0,S=[];S=R(X.children||
X.childNodes);for(I&&B.forEach(S,function(ia){1===ia.nodeType&&(S=S.concat(R(ia.getElementsByTagName("*"))))});X=S[T++];)C(X)&&(!sa||ua(X,sa))&&G(X,T)&&W.push(X);return W}},ba=function(G,I){for(G=G.parentNode;G&&G!=I;)G=G.parentNode;return!!G},fa={},Y=function(G){var I=fa[G.query];if(I)return I;var R=G.infixOper;R=R?R.oper:"";var X=F(G,{el:1}),W="*"==G.tag,sa=p.doc.getElementsByClassName;if(R)sa={el:1},W&&(sa.tag=1),X=F(G,sa),"+"==R?I=J(X):"~"==R?I=L(X):"\x3e"==R&&(I=Q(X));else if(G.id)X=!G.loops&&
W?c:F(G,{el:1,id:1}),I=function(S,ia){var na=e.byId(G.id,S.ownerDocument||S);S.ownerDocument&&!ba(S,S.ownerDocument)&&B.some(11===S.nodeType?S.childNodes:[S],function(va){va=Q(function(Ba){return Ba.id===G.id},!0)(va,[]);if(va.length)return na=va[0],!1});if(na&&X(na)&&(9==S.nodeType||ba(na,S)))return f(na,ia)};else if(sa&&/\{\s*\[native code\]\s*\}/.test(String(sa))&&G.classes.length&&!g){X=F(G,{el:1,classes:1,id:1});var T=G.classes.join(" ");I=function(S,ia,na){ia=f(0,ia);for(var va,Ba=0,Na=S.getElementsByClassName(T);va=
Na[Ba++];)X(va,S)&&ua(va,na)&&ia.push(va);return ia}}else W||G.loops?(X=F(G,{el:1,tag:1,id:1}),I=function(S,ia,na){ia=f(0,ia);for(var va,Ba=0,Na=(va=G.getTag())?S.getElementsByTagName(va):[];va=Na[Ba++];)X(va,S)&&ua(va,na)&&ia.push(va);return ia}):I=function(S,ia,na){ia=f(0,ia);var va=0,Ba=G.getTag();for(Ba=Ba?S.getElementsByTagName(Ba):[];S=Ba[va++];)ua(S,na)&&ia.push(S);return ia};return fa[G.query]=I},ma={},ca={},la=function(G){var I=a(l(G));if(1==I.length){var R=Y(I[0]);return function(X){if(X=
R(X,[]))X.nozip=!0;return X}}return function(X){X=f(X);for(var W,sa,T=I.length,S,ia,na=0;na<T;na++){ia=[];W=I[na];sa=X.length-1;0<sa&&(S={},ia.nozip=!0);sa=Y(W);for(var va=0;W=X[va];va++)sa(W,ia,S);if(!ia.length)break;X=ia}return ia}},ta=u("ie")?"commentStrip":"nozip",za=!!p.doc.querySelectorAll,P=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,ea=function(G,I,R,X){return R?(I?I+" ":"")+R+(X?" "+X:""):G},ra=/([^[]*)([^\]]*])?/g,M=function(G,I,R){return I.replace(P,ea)+(R||"")},Z=function(G,I){G=G.replace(ra,
M);if(za){var R=ca[G];if(R&&!I)return R}if(R=ma[G])return R;R=G.charAt(0);var X=-1==G.indexOf(" ");0<=G.indexOf("#")&&X&&(I=!0);if(!za||I||-1!="\x3e~+".indexOf(R)||u("ie")&&-1!=G.indexOf(":")||g&&0<=G.indexOf(".")||-1!=G.indexOf(":contains")||-1!=G.indexOf(":checked")||-1!=G.indexOf("|\x3d")){var W=G.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return ma[G]=2>W.length?la(G):function(T){for(var S=0,ia=[],na;na=W[S++];)ia=ia.concat(la(na)(T));return ia}}var sa=0<="\x3e~+".indexOf(G.charAt(G.length-
1))?G+" *":G;return ca[G]=function(T){if(9==T.nodeType||X)try{var S=T.querySelectorAll(sa);S[ta]=!0;return S}catch(ia){}return Z(G,!0)(T)}},ka=0,qa=u("ie")?function(G){return d?G.getAttribute("_uid")||G.setAttribute("_uid",++ka)||ka:G.uniqueID}:function(G){return G._uid||(G._uid=++ka)},ua=function(G,I){if(!I)return 1;G=qa(G);return I[G]?0:I[G]=1},Aa=function(G){if(G&&G.nozip)return G;if(!G||!G.length)return[];if(2>G.length)return[G[0]];var I=[];ka++;var R,X;if(u("ie")&&d){var W=ka+"";for(R=0;R<G.length;R++)(X=
G[R])&&X.getAttribute("_zipIdx")!=W&&(I.push(X),X.setAttribute("_zipIdx",W))}else if(u("ie")&&G.commentStrip)try{for(R=0;R<G.length;R++)(X=G[R])&&t(X)&&I.push(X)}catch(sa){}else for(R=0;R<G.length;R++)(X=G[R])&&X._zipIdx!=ka&&(I.push(X),X._zipIdx=ka);return I},ya=function(G,I){I=I||p.doc;d="div"===(I.ownerDocument||I).createElement("div").tagName;return(G=Z(G)(I))&&G.nozip?G:Aa(G)};ya.filter=function(G,I,R){var X=[],W=a(I);W=1!=W.length||/[^\w#\.]/.test(I)?function(S){return-1!=B.indexOf(ya(I,e.byId(R)),
S)}:F(W[0]);for(var sa=0,T;T=G[sa];sa++)W(T)&&X.push(T);return X};return ya})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(e,u,B,A,p,l,k,g,d){function c(h){return function(v,r,C){return 2==arguments.length?h["string"==typeof r?"get":"set"](v,r):h.set(v,r,C)}}var a=function(h){return 1==h.length&&"string"==typeof h[0]},b=function(h){var v=h.parentNode;v&&v.removeChild(h)},
f=u.NodeList,t=f._adaptWithCondition,n=f._adaptAsForEach,m=f._adaptAsMap;A.extend(f,{_normalize:function(h,v){var r=!0===h.parse;if("string"==typeof h.template){var C=h.templateFunc||e.string&&e.string.substitute;h=C?C(h.template,h):h}C=typeof h;"string"==C||"number"==C?(h=l.toDom(h,v&&v.ownerDocument),h=11==h.nodeType?A._toArray(h.childNodes):[h]):A.isArrayLike(h)?A.isArray(h)||(h=A._toArray(h)):h=[h];r&&(h._runParse=!0);return h},_cloneNode:function(h){return h.cloneNode(!0)},_place:function(h,
v,r,C){if(1==v.nodeType||"only"!=r)for(var w,y=h.length,q=y-1;0<=q;q--){var x=C?this._cloneNode(h[q]):h[q];if(h._runParse&&e.parser&&e.parser.parse)for(w||(w=v.ownerDocument.createElement("div")),w.appendChild(x),e.parser.parse(w),x=w.firstChild;w.firstChild;)w.removeChild(w.firstChild);q==y-1?l.place(x,v,r):v.parentNode.insertBefore(x,v);v=x}},position:m(k.position),attr:t(c(g),a),style:t(c(d),a),addClass:n(p.add),removeClass:n(p.remove),toggleClass:n(p.toggle),replaceClass:n(p.replace),empty:n(l.empty),
removeAttr:n(g.remove),marginBox:m(k.getMarginBox),place:function(h,v){var r=u(h)[0];return this.forEach(function(C){l.place(C,r,v)})},orphan:function(h){return(h?u._filterResult(this,h):this).forEach(b)},adopt:function(h,v){return u(h).place(this[0],v)._stash(this)},query:function(h){if(!h)return this;var v=new f;this.map(function(r){u(h,r).forEach(function(C){void 0!==C&&v.push(C)})});return v._stash(this)},filter:function(h){var v=arguments,r=this,C=0;if("string"==typeof h){r=u._filterResult(this,
v[0]);if(1==v.length)return r._stash(this);C=1}return this._wrap(B.filter(r,v[C],v[C+1]),this)},addContent:function(h,v){h=this._normalize(h,this[0]);for(var r=0,C;C=this[r];r++)h.length?this._place(h,C,v,0<r):l.empty(C);return this}});return f})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(e,u,B){function A(d){if("string"==typeof d||d instanceof String){if(d&&!l.test(d))return k[0]=d,k;d=d.split(l);d.length&&!d[0]&&d.shift();d.length&&!d[d.length-1]&&d.pop();
return d}return d?u.filter(d,function(c){return c}):[]}var p,l=/\s+/,k=[""],g={};return p={contains:function(d,c){return 0<=(" "+B.byId(d).className+" ").indexOf(" "+c+" ")},add:function(d,c){d=B.byId(d);c=A(c);var a=d.className;a=a?" "+a+" ":" ";var b=a.length;for(var f=0,t=c.length,n;f<t;++f)(n=c[f])&&0>a.indexOf(" "+n+" ")&&(a+=n+" ");b<a.length&&(d.className=a.substr(1,a.length-2))},remove:function(d,c){d=B.byId(d);if(void 0!==c){c=A(c);var a=" "+d.className+" ";for(var b=0,f=c.length;b<f;++b)a=
a.replace(" "+c[b]+" "," ");a=e.trim(a)}else a="";d.className!=a&&(d.className=a)},replace:function(d,c,a){d=B.byId(d);g.className=d.className;p.remove(g,a);p.add(g,c);d.className!==g.className&&(d.className=g.className)},toggle:function(d,c,a){d=B.byId(d);if(void 0===a){c=A(c);for(var b=0,f=c.length,t;b<f;++b)t=c[b],p[p.contains(d,t)?"remove":"add"](d,t)}else p[a?"add":"remove"](d,c);return a}}})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(e,u,B,A,p){function l(d){for(;d.childNodes[0]&&1==d.childNodes[0].nodeType;)d=d.childNodes[0];return d}function k(d,c){"string"==typeof d?(d=A.toDom(d,c&&c.ownerDocument),11==d.nodeType&&(d=d.childNodes[0])):1==d.nodeType&&d.parentNode&&(d=d.cloneNode(!1));return d}var g=e.NodeList;u.extend(g,{_placeMultiple:function(d,c){d="string"==typeof d||d.nodeType?e(d):d;for(var a=[],b=0;b<d.length;b++)for(var f=d[b],t=this.length,n=t-1,m;m=this[n];n--)0<b&&(m=this._cloneNode(m),a.unshift(m)),n==t-
1?A.place(m,f,c):f.parentNode.insertBefore(m,f),f=m;a.length&&(a.unshift(0),a.unshift(this.length-1),Array.prototype.splice.apply(this,a));return this},innerHTML:function(d){return arguments.length?this.addContent(d,"only"):this[0].innerHTML},text:function(d){if(arguments.length){for(var c=0,a;a=this[c];c++)1==a.nodeType&&p.set(a,"textContent",d);return this}var b="";for(c=0;a=this[c];c++)b+=p.get(a,"textContent");return b},val:function(d){if(arguments.length){for(var c=u.isArray(d),a=0,b;b=this[a];a++){var f=
b.nodeName.toUpperCase(),t=b.type,n=c?d[a]:d;if("SELECT"==f)for(f=b.options,t=0;t<f.length;t++){var m=f[t];m.selected=b.multiple?-1!=B.indexOf(d,m.value):m.value==n}else"checkbox"==t||"radio"==t?b.checked=b.value==n:b.value=n}return this}if((b=this[0])&&1==b.nodeType){d=b.value||"";if("SELECT"==b.nodeName.toUpperCase()&&b.multiple){d=[];f=b.options;for(t=0;t<f.length;t++)m=f[t],m.selected&&d.push(m.value);d.length||(d=null)}return d}},append:function(d){return this.addContent(d,"last")},appendTo:function(d){return this._placeMultiple(d,
"last")},prepend:function(d){return this.addContent(d,"first")},prependTo:function(d){return this._placeMultiple(d,"first")},after:function(d){return this.addContent(d,"after")},insertAfter:function(d){return this._placeMultiple(d,"after")},before:function(d){return this.addContent(d,"before")},insertBefore:function(d){return this._placeMultiple(d,"before")},remove:g.prototype.orphan,wrap:function(d){if(this[0]){d=k(d,this[0]);for(var c=0,a;a=this[c];c++){var b=this._cloneNode(d);a.parentNode&&a.parentNode.replaceChild(b,
a);l(b).appendChild(a)}}return this},wrapAll:function(d){if(this[0]){d=k(d,this[0]);this[0].parentNode.replaceChild(d,this[0]);d=l(d);for(var c=0,a;a=this[c];c++)d.appendChild(a)}return this},wrapInner:function(d){if(this[0]){d=k(d,this[0]);for(var c=0;c<this.length;c++){var a=this._cloneNode(d);this._wrap(u._toArray(this[c].childNodes),null,this._NodeListCtor).wrapAll(a)}}return this},replaceWith:function(d){d=this._normalize(d,this[0]);for(var c=0,a;a=this[c];c++)this._place(d,a,"before",0<c),a.parentNode.removeChild(a);
return this},replaceAll:function(d){d=e(d);for(var c=this._normalize(this,this[0]),a=0,b;b=d[a];a++)this._place(c,b,"before",0<a),b.parentNode.removeChild(b);return this},clone:function(){for(var d=[],c=0;c<this.length;c++)d.push(this._cloneNode(this[c]));return this._wrap(d,this,this._NodeListCtor)}});g.prototype.html||(g.prototype.html=g.prototype.innerHTML);return g})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(e,u,B,A){B=function(){return this}();
A={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,
panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:B.Worker&&!1,io:{errorHandler:function(p,l){u.publish("esri.Error",[p])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com",
"basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com",
"servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],
corsDetection:B.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};e.noGlobals||(B.esriConfig=A);return A})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(e,u,B,A,p,l,k,g,d,c){var a={},b=g.defaults.io,f=/^[a-z][a-z0-9\+\-\.]*:/i,t=/^\s*http:/i,n=/^\s*https:/i,m=/:\d+$/,h=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.isHTTP=function(r){var C=A.location.protocol;return null==r?"http:"===C||"https:"===C:r?"https:"===C:"http:"===C};a.getProtocolForWebResource=function(r){return a.isHTTP()?A.location.protocol:r?"https:":"http:"};a.urlToObject=function(r){var C={},w=new B(r),y=r.indexOf("?");null===w.query?C={path:r,query:null}:(C.path=r.substring(0,
y),C.query=p.queryToObject(w.query));w.fragment&&(C.hash=w.fragment,null===w.query&&(C.path=C.path.substring(0,C.path.length-(w.fragment.length+1))));return C};a.getProxyUrl=function(r,C){var w=e.isString(r)?0===e.trim(r).toLowerCase().indexOf("https:"):r,y=b.proxyUrl,q=c.io.proxyNotSet;e.isString(r)&&(r=a.getProxyRule(r))&&(y=r.proxyUrl);if(!y)throw console.log(q),Error(q);if(w&&!1!==C&&0!==A.location.href.toLowerCase().indexOf("https:")&&(C=y,0!==C.toLowerCase().indexOf("http")&&(C=a.getAbsoluteUrl(C)),
C=C.replace(/^http:/i,"https:"),a.canUseXhr(C))){y=C;var x=1}y=a.urlToObject(y);y._xo=x;return y};a.addProxy=function(r){var C=a.getProxyRule(r),w;C?w=a.urlToObject(C.proxyUrl):b.alwaysUseProxy&&(w=a.getProxyUrl());w&&(C=a.urlToObject(r),r=w.path+"?"+C.path,(w=p.objectToQuery(e.mixin(w.query||{},C.query)))&&(r+="?"+w));return r};a.addProxyRule=function(r){var C=r.urlPrefix=a.urlToObject(r.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),w=b.proxyRules,y,q=w.length,
x=q;for(y=0;y<q;y++){var E=w[y].urlPrefix;if(0===C.indexOf(E)){if(C.length===E)return-1;x=y;break}else 0===E.indexOf(C)&&(x=y+1)}w.splice(x,0,r);return x};a.getProxyRule=function(r){var C=b.proxyRules,w=C.length,y=a.urlToObject(r).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(r=0;r<w;r++)if(0===y.indexOf(C[r].urlPrefix)){var q=C[r];break}return q};a.hasSameOrigin=function(r,C,w){r=r.toLowerCase();C=C.toLowerCase();var y=A.location.href.toLowerCase();r=0===r.indexOf("http")?
new B(r):y=new B(y);C=0===C.indexOf("http")?new B(C):e.isString(y)?new B(y):y;return(w||r.scheme===C.scheme)&&r.host===C.host&&r.port===C.port};a.canUseXhr=function(r,C){var w=d("esri-phonegap")?!0:!1,y=a.hasSameOrigin,q=b.corsEnabledServers,x,E=-1;!w&&d("esri-cors")&&q&&q.length&&(w=u.some(q,function(z,D){z=!z||"object"!==typeof z||z instanceof RegExp?z:z.host;if(z instanceof RegExp){if(z.test(r))return E=D,!0}else if(z&&(x=0!==z.trim().toLowerCase().indexOf("http"),y(r,x?"http://"+z:z)||x&&y(r,
"https://"+z)))return E=D,!0;return!1}));return C?E:w};a.getAbsoluteUrl=function(r){var C=a.getProtocolForWebResource();return e.isString(r)&&!f.test(r)?0===r.indexOf("//")?C+r:0===r.indexOf("/")?C+"//"+A.location.host+r:l._appBaseUrl+r:r};a.fixUrl=function(r){r=e.trim(r);r=a.getAbsoluteUrl(r);r=a.normalizeSlashes(r);r=r.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");r=a.downgradeToHTTP(r);return r=a.upgradeToHTTPS(r)};a.normalize=function(r){return a.fixUrl(r)};a.normalizeSlashes=function(r){if(/^https?:\/\//i.test(r)){var C=
r.indexOf("?");if(-1<C){var w=r.slice(0,C);var y=r.slice(C+1)}else w=r;r=w.replace(/\/{2,}/g,"/");r=r.replace("/","//");y&&(r+="?"+y)}return r};a.downgradeToHTTP=function(r){return a.isHTTP(!1)&&n.test(r)&&a.hasSameOrigin(A.location.href,r,!0)&&!a.canUseXhr(r)?r.replace(n,"http:"):r};a.upgradeToHTTPS=function(r){var C=b.httpsDomains,w=a.isHTTP(!1),y=a.isHTTP(!0);if(!t.test(r))return r;r=e.trim(r);var q=r.indexOf("/",7);q=-1===q?r:r.slice(0,q);q=q.toLowerCase().slice(7);if(m.test(q))if(k.endsWith(q,
":80"))q=q.slice(0,-3),r=r.replace(":80","");else return r;if(w&&q===A.location.host&&(!h.test(r)||!a.canUseXhr(r)))return r;w=!1;if(y&&q===A.location.host)w=!0;else if(C)for(var x=0;x<C.length;x++){var E=C[x];if(q===E||k.endsWith(q,"."+E)){w=!0;break}}w||!y||b.alwaysUseProxy||a.getProxyRule(r)||(w=!0);w&&(r=r.replace(t,"https:"));return r};g=c.widgets.popup;var v=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:g.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:g.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:g.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:g.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:g.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:g.NLS_openLinkInApp}];a.getURIInfo=function(r){var C;u.some(v,function(w){w.pattern.test(r)&&(C=w);return!!C});return C};a.isKnownURI=function(r){return!!a.getURIInfo(r)};return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(e,u,B){return{_dfdCanceller:function(A){A.canceled=!0;var p=A._pendingDfd;if(!A.isFulfilled()&&p&&!p.isFulfilled()){p.cancel();var l=p.results&&p.results[1]}A._pendingDfd=null;return l},_fixDfd:function(A){var p=
A.then;A.then=function(l,k,g){if(l){var d=l;l=function(c){return c&&c._argsArray?d.apply(null,c):d(c)}}return p.call(this,l,k,g)};return A},_resDfd:function(A,p,l){var k=p.length;1===k?l?A.errback(p[0]):A.callback(p[0]):1<k?(p._argsArray=!0,A.callback(p)):A.callback()}}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(e,u,B,A,p,l){return e([A],{declaredClass:"esri.Evented",registerConnectEvents:function(){var k=
this.constructor,g=this.constructor._meta.parents,d=[{}],c={},a,b=function(t,n){u.isArray(t)||(t=[t]);for(var m=0;m<t.length;m++){var h=t[m];h._meta&&h._meta.parents&&b(h._meta.parents,n);h.prototype._eventMap&&n.push(u.mixin({},h.prototype._eventMap))}return n};if(!k._onMap){b(g,d);d.push(this._eventMap);g=u.mixin.apply(this,d);for(f in this)/^on\w/.test(f)&&u.isFunction(this[f])&&(d=this._hyphenLower(f).toLowerCase(),g[d]||(c[d]={method:f}));for(a in g){var f=this._onCamelCase(a);c[a]={method:f,
argKeys:g[a]}}k._onMap=c;return k._onMap}},on:function(k,g){if(-1<k.indexOf(",")){for(var d=k.split(/\s*,\s*/),c=d.length,a=[];c--;)a.push(this.on(d[c],g));a.remove=function(){for(var t=0;t<a.length;t++)a[t].remove()};return a}d=this.constructor._onMap||this.registerConnectEvents();c="string"==typeof k&&k.toLowerCase();var b=this._onCamelCase(c),f=d&&d[c];return(b=f&&f.method||this[b]&&u.isFunction(this[b])&&b)?f&&u.isArray(f.argKeys)?(d=this._onArr2Obj(g,d[c].argKeys),B.after(this,b,d,!0)):B.after(this,
b,function(t){t=t||{};t.target||(t.target=this);g.call(this,t)},!0):this.inherited(arguments)},emit:function(k,g){var d,c,a=k.toLowerCase();var b=this._onCamelCase(k);var f=this.constructor._onMap||this.registerConnectEvents();b=(c=f&&f[a]&&f[a].method||u.isFunction(this[b])&&b)&&this[c];c&&f&&f[a]&&this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},f[a].argKeys)(g);g=g||{};g.target||(g.target=this);if(b){var t=d&&d.length?d:[g];t=b.apply(this,t)}this.inherited(arguments,[k,g]);return t},
_onObj2Arr:function(k,g){if(g){var d=this;return function(c){var a,b=[],f=g.length;for(a=0;a<f;a++)b[a]=c[g[a]];k.apply(d,b)}}return k},_onArr2Obj:function(k,g){if(g){var d=this;return function(){var c,a={},b=arguments.length;for(c=0;c<b;c++)a[g[c]]=arguments[c];a.target||(a.target=d);k.call(d,a)}}return k},_hyphenLower:function(k){return k.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(g,d){return(d?"-":"")+g.toLowerCase()})},_onCamelCase:function(k){return"on"+k.substr(0,1).toUpperCase()+
k.substr(1).replace(/\-([a-z])/g,function(g,d){return d.toUpperCase()})}})})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(e,u,B,A){e=new e;u.id=A.safeMixin(e,B);return u.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m){return u([n],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(h){p.mixin(this,h);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(h,v,r){this._nls||(this._nls=m.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var C=this._loginDialog,w=r&&r.error,y=r&&r.token,q=new A(function(){C.onCancel()});if(C.open)return h=Error("BUSY"),h.name="identity-manager:busy",h.code="IdentityManager.1",h.log=!!B.isDebug,q.errback(h),q;f.hide(C.errMsg_);w&&403==w.code&&y&&(k.set(C.errMsg_,"innerHTML",this._nls.forbidden),
f.show(C.errMsg_));C.dfd_=q;C.serverInfo_=v;C.resUrl_=h;C.admin_=r&&r.isAdmin;k.set(C.resLink_,{title:h,innerHTML:"("+(this.getResourceName(h)||this._nls.lblItem)+")"});k.set(C.serverLink_,{title:v.server,innerHTML:(-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server)+" "});C.txtPwd_.set("value","");C.show();return q},_createLoginDialog:function(){var h=this._nls,v=b.substitute(h,this._dialogContent);v=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},v);var r=new c({title:h.title,content:v,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(C){C.charOrCode===g.ENTER&&this.execute_()},execute_:function(){var C=this.txtUser_.get("value"),w=this.txtPwd_.get("value"),y=this.dfd_,q=this;if(this.form_.validate()&&C&&w){this.btnSubmit_.set("label",h.lblSigning);var x=a.id.findCredential(q.resUrl_,C),E=function(z){q.btnSubmit_.set("label",
h.lblOk);q.btnSubmit_.set("disabled",!1);f.hide(q.errMsg_);q.hide();c._DialogLevelManager.hide(q);var D=q.serverInfo_;q.dfd_=q.serverInfo_=q.generateDfd_=q.resUrl_=null;var F=x;if(z){var J=z.token;var L=b.isDefined(z.expires)?Number(z.expires):null;var Q=!!z.ssl;F?(F.userId=C,F.token=J,F.expires=L,F.validity=z.validity,F.ssl=Q,F.creationTime=(new Date).getTime()):F=new t({userId:C,server:D.server,token:J,expires:L,ssl:Q,isAdmin:q.admin_,validity:z.validity})}y.callback(F)};x&&!x._enqueued?E():(q.btnSubmit_.set("disabled",
!0),q.generateDfd_=a.id.generateToken(this.serverInfo_,{username:C,password:w},{isAdmin:this.admin_}).addCallback(E).addErrback(function(z){q.btnSubmit_.set("disabled",!1);q.generateDfd_=null;q.btnSubmit_.set("label",h.lblOk);k.set(q.errMsg_,"innerHTML",z&&z.code?h.invalidUser:h.noAuthService);f.show(q.errMsg_)}))}},cancel_:function(){r.generateDfd_&&r.generateDfd_.cancel();var C=r.dfd_,w=r.resUrl_,y=r.serverInfo_;r.btnSubmit_.set("disabled",!1);r.dfd_=r.serverInfo_=r.generateDfd_=r.resUrl_=null;
f.hide(r.errMsg_);c._DialogLevelManager.hide(r);r.esriIdMgr_.onDialogCancel({resourceUrl:w,serverInfo:y});w=Error("ABORTED");w.name="identity-manager:user-aborted";w.code="IdentityManager.2";w.log=!!B.isDebug;C.errback(w)}});v=r.domNode;r.form_=d.byNode(e.query(".esriIdForm",v)[0]);r.txtUser_=d.byNode(e.query(".esriIdUser",v)[0]);r.txtPwd_=d.byNode(e.query(".esriIdPwd",v)[0]);r.btnSubmit_=d.byNode(e.query(".esriIdSubmit",v)[0]);r.btnCancel_=d.byNode(e.query(".esriIdCancel",v)[0]);r.resLink_=e.query(".resLink",
v)[0];r.serverLink_=e.query(".serverLink",v)[0];r.errMsg_=e.query(".esriErrorMsg",v)[0];r.connect(r.txtUser_,"onKeyPress",r.keypressed_);r.connect(r.txtPwd_,"onKeyPress",r.keypressed_);r.connect(r.btnSubmit_,"onClick",r.execute_);r.connect(r.btnCancel_,"onClick",r.onCancel);r.connect(r,"onCancel",r.cancel_);return r}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(e,u,B){var A={},p={},l={length:0,add:function(k){if(p[k.id])throw Error("Tried to register widget with id\x3d\x3d"+
k.id+" but that id is already registered");p[k.id]=k;this.length++},remove:function(k){p[k]&&(delete p[k],this.length--)},byId:function(k){return"string"==typeof k?p[k]:k},byNode:function(k){return p[k.getAttribute("widgetId")]},toArray:function(){var k=[],g;for(g in p)k.push(p[g]);return k},getUniqueId:function(k){do var g=k+"_"+(k in A?++A[k]:A[k]=0);while(p[g]);return"dijit"==B._scopeName?g:B._scopeName+"_"+g},findWidgets:function(k,g){function d(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var b=
a.getAttribute("widgetId");b?(b=p[b])&&c.push(b):a!==g&&d(a)}}var c=[];d(k);return c},_destroyAll:function(){B._curFocus=null;B._prevFocus=null;B._activeStack=[];e.forEach(l.findWidgets(u.body()),function(k){k._destroyed||(k.destroyRecursive?k.destroyRecursive():k.destroy&&k.destroy())})},getEnclosingWidget:function(k){for(;k;){var g=1==k.nodeType&&k.getAttribute("widgetId");if(g)return p[g];k=k.parentNode}return null},_hash:p};return B.registry=l})},"dijit/main":function(){define(["dojo/_base/kernel"],
function(e){return e.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q){function ba(){}var fa=new p;fa.resolve(!0);y=A("dijit._DialogBase"+(m("dojo-bidi")?"_NoBidi":""),[x,z,D,E],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(la){this._set("draggable",la)},maxRatio:.9,
closable:!0,_setClosableAttr:function(la){this.closeButtonNode.style.display=la?"":"none";this._set("closable",la)},postMixInProperties:function(){var la=a.getLocalization("dijit","common");f.mixin(this,la);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);B.after(this,"onExecute",f.hitch(this,"hide"),!0);B.after(this,"onCancel",f.hitch(this,"hide"),!0);t(this.closeButtonNode,
h.press,function(la){la.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&ma.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();w.focus(this._firstFocusItem)},_endDrag:function(){var la=g.position(this.domNode),ta=v.getBox(this.ownerDocument);la.y=Math.min(Math.max(la.y,0),ta.h-la.h);la.x=Math.min(Math.max(la.x,0),ta.w-la.w);this._relativePosition=la;this._position()},
_setup:function(){var la=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==m("ie")?C:r)(la,{handle:this.titleBar}),B.after(this._moveable,"onMoveStop",f.hitch(this,"_endDrag"),!0)):k.add(la,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":u.map(this["class"].split(/\s/),function(ta){return ta+"_underlay"}).join(" "),_onKeyDown:f.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,
"dojoMove")){var la=this.domNode,ta=v.getBox(this.ownerDocument),za=this._relativePosition,P=g.position(la);d.set(la,{left:Math.floor(ta.l+(za?Math.min(za.x,ta.w-P.w):(ta.w-P.w)/2))+"px",top:Math.floor(ta.t+(za?Math.min(za.y,ta.h-P.h):(ta.h-P.h)/2))+"px"})}},_onKey:function(la){if(la.keyCode==b.TAB){this._getFocusItems();var ta=la.target;this._firstFocusItem==this._lastFocusItem?(la.stopPropagation(),la.preventDefault()):ta==this._firstFocusItem&&la.shiftKey?(w.focus(this._lastFocusItem),la.stopPropagation(),
la.preventDefault()):ta!=this._lastFocusItem||la.shiftKey||(w.focus(this._firstFocusItem),la.stopPropagation(),la.preventDefault())}else this.closable&&la.keyCode==b.ESCAPE&&(this.onCancel(),la.stopPropagation(),la.preventDefault())},show:function(){if(this.open)return fa.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),ma.hide(this));var la=v.get(this.ownerDocument);this._modalconnects.push(t(la,
"scroll",f.hitch(this,"resize",null)));this._modalconnects.push(t(this.domNode,"keydown",f.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new p(f.hitch(this,function(){ta.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,ba);la=this._fadeInDeferred.promise;var ta=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:f.hitch(this,function(){ma.show(this,this.underlayAttrs)}),
onEnd:f.hitch(this,function(){this.autofocus&&ma.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return la},hide:function(){if(!this._alreadyInitialized||!this.open)return fa.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new p(f.hitch(this,function(){ta.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,ba);this._fadeOutDeferred.then(f.hitch(this,"onHide"));
var la=this._fadeOutDeferred.promise;var ta=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,function(){this.domNode.style.display="none";ma.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var za;za=this._modalconnects.pop();)za.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return la},resize:function(la){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!la){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),u.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(ea){ea&&d.set(ea,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var ta=v.getBox(this.ownerDocument);ta.w*=this.maxRatio;ta.h*=this.maxRatio;var za=g.position(this.domNode);
this._shrunk=!1;za.w>=ta.w&&(la={w:ta.w},g.setMarginBox(this.domNode,la),za=g.position(this.domNode),this._shrunk=!0);za.h>=ta.h&&(la||(la={w:za.w}),la.h=ta.h,this._shrunk=!0);la&&(la.w||(la.w=za.w),la.h||(la.h=za.h))}if(la){g.setMarginBox(this.domNode,la);ta=[];this.titleBar&&ta.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&ta.push({domNode:this.actionBarNode,region:"bottom"});za={domNode:this.containerNode,region:"center"};ta.push(za);var P=L.marginBox2contentBox(this.domNode,la);
L.layoutChildren(this.domNode,P,ta);this._singleChild?(ta=L.marginBox2contentBox(this.containerNode,za),this._singleChild.resize({w:ta.w,h:ta.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();m("touch")||la||this._position()}},_layoutChildren:function(){u.forEach(this.getChildren(),function(la){la.resize&&la.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&
this._moveable.destroy();for(var la;la=this._modalconnects.pop();)la.remove();ma.hide(this);this.inherited(arguments)}});m("dojo-bidi")&&(y=A("dijit._DialogBase",y,{_setTitleAttr:function(la){this._set("title",la);this.titleNode.innerHTML=la;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(la){this._created&&this.textDir!=la&&(this._set("textDir",la),this.set("title",this.title))}}));var Y=A("dijit.Dialog",[J,y],{});Y._DialogBase=y;var ma=Y._DialogLevelManager={_beginZIndex:950,show:function(la,
ta){ca[ca.length-1].focus=w.curNode;var za=ca[ca.length-1].dialog?ca[ca.length-1].zIndex+2:Y._DialogLevelManager._beginZIndex;d.set(la.domNode,"zIndex",za);F.show(ta,za-1);ca.push({dialog:la,underlayAttrs:ta,zIndex:za})},hide:function(la){if(ca[ca.length-1].dialog==la){ca.pop();var ta=ca[ca.length-1];1==ca.length?F.hide():F.show(ta.underlayAttrs,ta.zIndex-1);if(la.refocus&&(la=ta.focus,!ta.dialog||la&&l.isDescendant(la,ta.dialog.domNode)||(ta.dialog._getFocusItems(),la=ta.dialog._firstFocusItem),
la))try{la.focus()}catch(za){}}else ta=u.indexOf(u.map(ca,function(za){return za.dialog}),la),-1!=ta&&ca.splice(ta,1)},isTop:function(la){return ca[ca.length-1].dialog==la}},ca=Y._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];w.watch("curNode",function(la,ta,za){la=ca[ca.length-1].dialog;if(za&&la&&!la._fadeOutDeferred&&za.ownerDocument==la.ownerDocument){do if(za==la.domNode||k.contains(za,"dijitPopup"))return;while(za=za.parentNode);la.focus()}});m("dijit-legacy-requires")&&n(0,function(){e(["dijit/TooltipDialog"])});
return Y})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(e,u,B,A,p,l,k,g,d){var c=B.mixin,a={},b=a._Line=function(r,C){this.start=r;this.end=C};b.prototype.getValue=function(r){return(this.end-this.start)*r+this.start};var f=a.Animation=function(r){c(this,r);B.isArray(this.curve)&&(this.curve=new b(this.curve[0],this.curve[1]))};f.prototype=new A;B.extend(f,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,
_getStep:function(){var r=this._percent,C=this.easing;return C?C(r):r},_fire:function(r,C){C=C||[];if(this[r])if(u.debugAtAllCosts)this[r].apply(this,C);else try{this[r].apply(this,C)}catch(w){console.error("exception in animation handler for:",r),console.error(w)}return this},play:function(r,C){this._delayTimer&&this._clearTimer();if(C)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);r=r||this.delay;
C=B.hitch(this,"_play",C);if(0<r)return this._delayTimer=setTimeout(C,r),this;C();return this},_play:function(r){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;r=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[r]));this._fire("onPlay",[r]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(r,C){this._stopTimer();this._active=this._paused=!0;this._percent=r;C&&this.play();return this},stop:function(r){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();r&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},
status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var r=(new Date).valueOf();r=0===this.duration?1:(r-this._startTime)/this.duration;1<=r&&(r=1);this._percent=r;this.easing&&(r=this.easing(r));this._fire("onAnimate",[this.curve.getValue(r)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,
this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var t=0,n=null,m={run:function(){}};B.extend(f,{_startTimer:function(){this._timer||(this._timer=l.after(m,"run",B.hitch(this,"_cycle"),!0),t++);n||(n=setInterval(B.hitch(m,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,t--);0>=t&&(clearInterval(n),n=null,
t=0)}});var h=k("ie")?function(r){var C=r.style;C.width.length||"auto"!=d.get(r,"width")||(C.width="auto")}:function(){};a._fade=function(r){r.node=g.byId(r.node);var C=c({properties:{}},r);r=C.properties.opacity={};r.start="start"in C?C.start:function(){return+d.get(C.node,"opacity")||0};r.end=C.end;r=a.animateProperty(C);l.after(r,"beforeBegin",B.partial(h,C.node),!0);return r};a.fadeIn=function(r){return a._fade(c({end:1},r))};a.fadeOut=function(r){return a._fade(c({end:0},r))};a._defaultEasing=
function(r){return.5+Math.sin((r+1.5)*Math.PI)/2};var v=function(r){this._properties=r;for(var C in r){var w=r[C];w.start instanceof p&&(w.tempColor=new p)}};v.prototype.getValue=function(r){var C={},w;for(w in this._properties){var y=this._properties[w],q=y.start;q instanceof p?C[w]=p.blendColors(q,y.end,r,y.tempColor).toCss():B.isArray(q)||(C[w]=(y.end-q)*r+q+("opacity"!=w?y.units||"px":0))}return C};a.animateProperty=function(r){var C=r.node=g.byId(r.node);r.easing||(r.easing=e._defaultEasing);
r=new f(r);l.after(r,"beforeBegin",B.hitch(r,function(){var w={},y;for(y in this.properties){if("width"==y||"height"==y)this.node.display="block";var q=this.properties[y];B.isFunction(q)&&(q=q(C));q=w[y]=c({},B.isObject(q)?q:{end:q});B.isFunction(q.start)&&(q.start=q.start(C));B.isFunction(q.end)&&(q.end=q.end(C));var x=0<=y.toLowerCase().indexOf("color"),E=function(z,D){var F={height:z.offsetHeight,width:z.offsetWidth}[D];if(void 0!==F)return F;F=d.get(z,D);return"opacity"==D?+F:x?F:parseFloat(F)};
"end"in q?"start"in q||(q.start=E(C,y)):q.end=E(C,y);x?(q.start=new p(q.start),q.end=new p(q.end)):q.start="opacity"==y?+q.start:parseFloat(q.start)}this.curve=new v(w)}),!0);l.after(r,"onAnimate",B.hitch(d,"set",r.node),!0);return r};a.anim=function(r,C,w,y,q,x){return a.animateProperty({node:r,duration:w||f.prototype.duration,properties:C,easing:y,onEnd:q}).play(x||0)};c(e,a);e._Animation=f;return a})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,u,
B,A){var p=e.Color=function(l){l&&this.setColor(l)};p.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:A.transparentColor||[0,0,0,0]};u.extend(p,{r:255,g:255,b:255,a:1,_set:function(l,k,g,d){this.r=l;this.g=k;this.b=g;this.a=d},setColor:function(l){u.isString(l)?
p.fromString(l,this):u.isArray(l)?p.fromArray(l,this):(this._set(l.r,l.g,l.b,l.a),l instanceof p||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+B.map(["r","g","b"],function(l){l=this[l].toString(16);return 2>l.length?"0"+l:l},this).join("")},toCss:function(l){var k=this.r+", "+this.g+", "+this.b;return(l?"rgba("+k+", "+this.a:"rgb("+k)+")"},toString:function(){return this.toCss(!0)}});
p.blendColors=e.blendColors=function(l,k,g,d){d=d||new p;d.r=Math.round(l.r+(k.r-l.r)*g);d.g=Math.round(l.g+(k.g-l.g)*g);d.b=Math.round(l.b+(k.b-l.b)*g);d.a=l.a+(k.a-l.a)*g;return d.sanitize()};p.fromRgb=e.colorFromRgb=function(l,k){return(l=l.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&p.fromArray(l[1].split(/\s*,\s*/),k)};p.fromHex=e.colorFromHex=function(l,k){var g=k||new p,d=4==l.length?4:8,c=(1<<d)-1;l=Number("0x"+l.substr(1));if(isNaN(l))return null;B.forEach(["b","g","r"],function(a){var b=
l&c;l>>=d;g[a]=4==d?17*b:b});g.a=1;return g};p.fromArray=e.colorFromArray=function(l,k){k=k||new p;k._set(Number(l[0]),Number(l[1]),Number(l[2]),Number(l[3]));isNaN(k.a)&&(k.a=1);return k.sanitize()};p.fromString=e.colorFromString=function(l,k){var g=p.named[l];return g&&p.fromArray(g,k)||p.fromRgb(l,k)||p.fromHex(l,k)};return p})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(e,u,B,A,p){var l=0,k=[],g=0;u=function(){l=1;e._postLoad=e.config.afterOnLoad=
!0;d()};var d=function(){if(!g){for(g=1;l&&(!A||0==A._Q.length)&&(B.idle?B.idle():1)&&k.length;){var b=k.shift();try{b()}catch(f){if(f.info=f.message,B.signal)B.signal("error",f);else throw f;}}g=0}};B.on&&B.on("idle",d);A&&(A._onQEmpty=d);var c=e.ready=e.addOnLoad=function(b,f,t){var n=p._toArray(arguments);"number"!=typeof b?(t=f,f=b,b=1E3):n.shift();t=t?p.hitch.apply(e,n):function(){f()};t.priority=b;for(n=0;n<k.length&&b>=k[n].priority;n++);k.splice(n,0,t);d()},a=e.config.addOnLoad;if(a)c[p.isArray(a)?
"apply":"call"](e,a);A?A(u):u();return c})},"dojo/domReady":function(){define(["./global","./has"],function(e,u){function B(m){d.push(m);g&&A()}function A(){if(!c){for(c=!0;d.length;)try{d.shift()(p)}catch(m){console.error(m,"in domReady callback",m.stack)}c=!1;B._onQEmpty()}}var p=document,l={loaded:1,complete:1},k="string"!=typeof p.readyState,g=!!l[p.readyState],d=[],c;B.load=function(m,h,v){B(v)};B._Q=d;B._onQEmpty=function(){};k&&(p.readyState="loading");if(!g){var a=[],b=function(m){m=m||e.event;
g||"readystatechange"==m.type&&!l[p.readyState]||(k&&(p.readyState="complete"),g=1,A())},f=function(m,h){m.addEventListener(h,b,!1);d.push(function(){m.removeEventListener(h,b,!1)})};if(!u("dom-addeventlistener")){f=function(m,h){h="on"+h;m.attachEvent(h,b);d.push(function(){m.detachEvent(h,b)})};var t=p.createElement("div");try{t.doScroll&&null===e.frameElement&&a.push(function(){try{return t.doScroll("left"),1}catch(m){}})}catch(m){}}f(p,"DOMContentLoaded");f(e,"load");"onreadystatechange"in p?
f(p,"readystatechange"):k||a.push(function(){return l[p.readyState]});if(a.length){var n=function(){if(!g){for(var m=a.length;m--;)if(a[m]()){b("poller");return}setTimeout(n,30)}};n()}}return B})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(e,u,B,A,p,l,k,g,d,c){function a(J,L,Q){return n&&Q?function(ba,fa){return l(ba,Q,fa)}:h?function(ba,fa){var Y=l(ba,L,function(ca){fa.call(this,ca);D=(new Date).getTime()}),
ma=l(ba,J,function(ca){(!D||(new Date).getTime()>D+1E3)&&fa.call(this,ca)});return{remove:function(){Y.remove();ma.remove()}}}:function(ba,fa){return l(ba,J,fa)}}function b(J){do if(void 0!==J.dojoClick)return J;while(J=J.parentNode)}function f(J,L,Q){if(!g.isRight(J)){var ba=b(J.target);if(r=!J.target.disabled&&ba&&ba.dojoClick)if(w=(C="useTarget"==r)?ba:J.target,C&&J.preventDefault(),y=J.changedTouches?J.changedTouches[0].pageX-c.global.pageXOffset:J.clientX,q=J.changedTouches?J.changedTouches[0].pageY-
c.global.pageYOffset:J.clientY,x=("object"==typeof r?r.x:"number"==typeof r?r:0)||4,E=("object"==typeof r?r.y:"number"==typeof r?r:0)||4,!v){v=!0;var fa=function(Y){r=C?B.isDescendant(c.doc.elementFromPoint(Y.changedTouches?Y.changedTouches[0].pageX-c.global.pageXOffset:Y.clientX,Y.changedTouches?Y.changedTouches[0].pageY-c.global.pageYOffset:Y.clientY),w):r&&(Y.changedTouches?Y.changedTouches[0].target:Y.target)==w&&Math.abs((Y.changedTouches?Y.changedTouches[0].pageX-c.global.pageXOffset:Y.clientX)-
y)<=x&&Math.abs((Y.changedTouches?Y.changedTouches[0].pageY-c.global.pageYOffset:Y.clientY)-q)<=E};c.doc.addEventListener(L,function(Y){g.isRight(Y)||(fa(Y),C&&Y.preventDefault())},!0);c.doc.addEventListener(Q,function(Y){if(!g.isRight(Y)&&(fa(Y),r)){z=(new Date).getTime();var ma=C?w:Y.target;"LABEL"===ma.tagName&&(ma=B.byId(ma.getAttribute("for"))||ma);var ca=Y.changedTouches?Y.changedTouches[0]:Y,la=function(ea){var ra=document.createEvent("MouseEvents");ra._dojo_click=!0;ra.initMouseEvent(ea,!0,
!0,Y.view,Y.detail,ca.screenX,ca.screenY,ca.clientX,ca.clientY,Y.ctrlKey,Y.altKey,Y.shiftKey,Y.metaKey,0,null);return ra},ta=la("mousedown"),za=la("mouseup"),P=la("click");setTimeout(function(){l.emit(ma,"mousedown",ta);l.emit(ma,"mouseup",za);l.emit(ma,"click",P);z=(new Date).getTime()},0)}},!0);J=function(Y){c.doc.addEventListener(Y,function(ma){var ca=ma.target;r&&!ma._dojo_click&&(new Date).getTime()<=z+1E3&&("INPUT"!=ca.tagName||!A.contains(ca,"dijitOffScreen"))&&(ma.stopPropagation(),ma.stopImmediatePropagation&&
ma.stopImmediatePropagation(),"click"==Y&&("INPUT"!=ca.tagName||"radio"==ca.type&&(A.contains(ca,"dijitCheckBoxInput")||A.contains(ca,"mblRadioButton"))||"checkbox"==ca.type&&(A.contains(ca,"dijitCheckBoxInput")||A.contains(ca,"mblCheckBox")))&&"TEXTAREA"!=ca.tagName&&"AUDIO"!=ca.tagName&&"VIDEO"!=ca.tagName&&ma.preventDefault())},!0)};J("click");J("mousedown");J("mouseup")}}}var t=5>k("ios"),n=k("pointer-events")||k("MSPointer"),m=function(){var J={},L;for(L in{down:1,move:1,up:1,cancel:1,over:1,
out:1})J[L]=k("MSPointer")?"MSPointer"+L.charAt(0).toUpperCase()+L.slice(1):"pointer"+L;return J}(),h=k("touch-events"),v,r,C=!1,w,y,q,x,E,z,D,F;k("touch")&&(n?d(function(){c.doc.addEventListener(m.down,function(J){f(J,m.move,m.up)},!0)}):d(function(){function J(L){var Q=p.delegate(L,{bubbles:!0});6<=k("ios")&&(Q.touches=L.touches,Q.altKey=L.altKey,Q.changedTouches=L.changedTouches,Q.ctrlKey=L.ctrlKey,Q.metaKey=L.metaKey,Q.shiftKey=L.shiftKey,Q.targetTouches=L.targetTouches);return Q}F=c.body();c.doc.addEventListener("touchstart",
function(L){D=(new Date).getTime();var Q=F;F=L.target;l.emit(Q,"dojotouchout",{relatedTarget:F,bubbles:!0});l.emit(F,"dojotouchover",{relatedTarget:Q,bubbles:!0});f(L,"touchmove","touchend")},!0);l(c.doc,"touchmove",function(L){D=(new Date).getTime();var Q=c.doc.elementFromPoint(L.pageX-(t?0:c.global.pageXOffset),L.pageY-(t?0:c.global.pageYOffset));Q&&(F!==Q&&(l.emit(F,"dojotouchout",{relatedTarget:Q,bubbles:!0}),l.emit(Q,"dojotouchover",{relatedTarget:F,bubbles:!0}),F=Q),l.emit(Q,"dojotouchmove",
J(L))||L.preventDefault())});l(c.doc,"touchend",function(L){D=(new Date).getTime();var Q=c.doc.elementFromPoint(L.pageX-(t?0:c.global.pageXOffset),L.pageY-(t?0:c.global.pageYOffset))||c.body();l.emit(Q,"dojotouchend",J(L))})}));u={press:a("mousedown","touchstart",m.down),move:a("mousemove","dojotouchmove",m.move),release:a("mouseup","dojotouchend",m.up),cancel:a(g.leave,"touchcancel",n?m.cancel:null),over:a("mouseover","dojotouchover",m.over),out:a("mouseout","dojotouchout",m.out),enter:g._eventHandler(a("mouseover",
"dojotouchover",m.over)),leave:g._eventHandler(a("mouseout","dojotouchout",m.out))};return e.touch=u})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(e,u,B,A,p,l,k){u.add("rtl-adjust-position-for-verticalScrollBar",function(d,c){d=B.body(c);c=k.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,
"last");var a=k.create("div",{style:{overflow:"hidden",direction:"ltr"}},c,"last"),b=0!=p.position(a).x;c.removeChild(a);d.removeChild(c);return b});u.add("position-fixed-support",function(d,c){d=B.body(c);c=k.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},d,"last");var a=k.create("span",{style:{position:"fixed",left:"0",top:"0"}},c,"last"),b=p.position(a).x!=p.position(c).x;c.removeChild(a);d.removeChild(c);return b});var g={getBox:function(d){d=d||B.doc;var c=
"BackCompat"==d.compatMode?B.body(d):d.documentElement,a=p.docScroll(d);if(u("touch")){var b=g.get(d);d=b.innerWidth||c.clientWidth;c=b.innerHeight||c.clientHeight}else d=c.clientWidth,c=c.clientHeight;return{l:a.x,t:a.y,w:d,h:c}},get:function(d){if(u("ie")&&g!==document.parentWindow){d.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var c=d._parentWindow;d._parentWindow=null;return c}return d.parentWindow||d.defaultView},scrollIntoView:function(d,c){try{d=A.byId(d);var a=
d.ownerDocument||B.doc,b=B.body(a),f=a.documentElement||b.parentNode,t=u("ie")||u("trident"),n=u("webkit");if(d!=b&&d!=f)if(!(u("mozilla")||t||n||u("opera")||u("trident")||u("edge"))&&"scrollIntoView"in d)d.scrollIntoView(!1);else{var m="BackCompat"==a.compatMode,h=Math.min(b.clientWidth||f.clientWidth,f.clientWidth||b.clientWidth),v=Math.min(b.clientHeight||f.clientHeight,f.clientHeight||b.clientHeight);a=n||m?b:f;var r=c||p.position(d),C=d.parentNode;c=function(Y){return 6>=t||7==t&&m?!1:u("position-fixed-support")&&
"fixed"==l.get(Y,"position").toLowerCase()};var w=this;n=function(Y,ma,ca){"BODY"==Y.tagName||"HTML"==Y.tagName?w.get(Y.ownerDocument).scrollBy(ma,ca):(ma&&(Y.scrollLeft+=ma),ca&&(Y.scrollTop+=ca))};if(!c(d))for(;C;){C==b&&(C=a);var y=p.position(C),q=c(C),x="rtl"==l.getComputedStyle(C).direction.toLowerCase();if(C==a)y.w=h,y.h=v,a==f&&(t||u("trident"))&&x&&(y.x+=a.offsetWidth-y.w),y.x=0,y.y=0;else{var E=p.getPadBorderExtents(C);y.w-=E.w;y.h-=E.h;y.x+=E.l;y.y+=E.t;var z=C.clientWidth,D=y.w-z;0<z&&
0<D&&(x&&u("rtl-adjust-position-for-verticalScrollBar")&&(y.x+=D),y.w=z);z=C.clientHeight;D=y.h-z;0<z&&0<D&&(y.h=z)}q&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>v&&(y.h=v-y.y),y.x+y.w>h&&(y.w=h-y.x));var F=r.x-y.x,J=r.y-y.y,L=F+r.w-y.w,Q=J+r.h-y.h;if(0<L*F&&(C.scrollLeft||C==a||C.scrollWidth>C.offsetHeight)){var ba=Math[0>F?"max":"min"](F,L);x&&(8==t&&!m||5<=u("trident"))&&(ba=-ba);var fa=C.scrollLeft;n(C,ba,0);ba=C.scrollLeft-fa;r.x-=ba}0<Q*J&&(C.scrollTop||C==a||C.scrollHeight>C.offsetHeight)&&
(ba=Math.ceil(Math[0>J?"max":"min"](J,Q)),fa=C.scrollTop,n(C,0,ba),ba=C.scrollTop-fa,r.y-=ba);C=C!=a&&!q&&C.parentNode}}}catch(Y){console.error("scrollIntoView: "+Y),d.scrollIntoView(!1)}}};e.setObject("dojo.window",g);return g})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f){function t(h,v){"touchAction"in document.body.style?
n="touchAction":"msTouchAction"in document.body.style&&(n="msTouchAction");m=function(r,C){r.style[n]=C};m(h,v)}var n,m=function(){};k("touch-action")&&(m=t);return u("dojo.dnd.Moveable",[l],{handle:"",delay:0,skip:!1,constructor:function(h,v){this.node=A.byId(h);m(this.node,"none");v||(v={});this.handle=v.handle?A.byId(v.handle):null;this.handle||(this.handle=this.node);this.delay=0<v.delay?v.delay:0;this.skip=v.skip;this.mover=v.mover?v.mover:b;this.events=[g(this.handle,c.press,B.hitch(this,"onMouseDown")),
g(this.handle,"dragstart",B.hitch(this,"onSelectStart")),g(this.handle,"selectstart",B.hitch(this,"onSelectStart"))]},markupFactory:function(h,v,r){return new r(v,h)},destroy:function(){e.forEach(this.events,function(h){h.remove()});m(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(h){if(!this.skip||!a.isFormElement(h)){if(this.delay)this.events.push(g(this.handle,c.move,B.hitch(this,"onMouseMove")),g(this.handle.ownerDocument,c.release,B.hitch(this,"onMouseUp"))),this._lastX=
h.pageX,this._lastY=h.pageY;else this.onDragDetected(h);h.stopPropagation();h.preventDefault()}},onMouseMove:function(h){if(Math.abs(h.pageX-this._lastX)>this.delay||Math.abs(h.pageY-this._lastY)>this.delay)this.onMouseUp(h),this.onDragDetected(h);h.stopPropagation();h.preventDefault()},onMouseUp:function(h){for(var v=0;2>v;++v)this.events.pop().remove();h.stopPropagation();h.preventDefault()},onSelectStart:function(h){this.skip&&a.isFormElement(h)||(h.stopPropagation(),h.preventDefault())},onDragDetected:function(h){new this.mover(this.node,
h,this)},onMoveStart:function(h){d.publish("/dnd/move/start",h);p.add(f.body(),"dojoMove");p.add(this.node,"dojoMoveItem")},onMoveStop:function(h){d.publish("/dnd/move/stop",h);p.remove(f.body(),"dojoMove");p.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(h,v){this.onMoving(h,v);var r=h.node.style;r.left=v.l+"px";r.top=v.t+"px";this.onMoved(h,v)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang",
"../dom"],function(e,u,B,A){var p=B.getObject("dojo.dnd",!0);p.getCopyKeyState=function(l){return l[e("mac")?"metaKey":"ctrlKey"]};p._uniqueId=0;p.getUniqueId=function(){do var l=u._scopeName+"Unique"+ ++p._uniqueId;while(A.byId(l));return l};p._empty={};p.isFormElement=function(l){l=l.target;3==l.nodeType&&(l=l.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+l.tagName.toLowerCase()+" ")};return p})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f){return u("dojo.dnd.Mover",[d],{constructor:function(t,n,m){function h(v){v.preventDefault();v.stopPropagation()}this.node=l.byId(t);this.marginBox={l:n.pageX,t:n.pageY};this.mouseButton=n.button;n=this.host=m;t=t.ownerDocument;this.events=[c(t,a.move,B.hitch(this,"onFirstMove")),c(t,a.move,B.hitch(this,"onMouseMove")),c(t,a.release,B.hitch(this,"onMouseUp")),c(t,"dragstart",h),c(t.body,"selectstart",h)];f.autoScrollStart(t);if(n&&n.onMoveStart)n.onMoveStart(this)},
onMouseMove:function(t){f.autoScroll(t);var n=this.marginBox;this.host.onMove(this,{l:n.l+t.pageX,t:n.t+t.pageY},t);t.preventDefault();t.stopPropagation()},onMouseUp:function(t){(A("webkit")&&A("mac")&&2==this.mouseButton?0==t.button:this.mouseButton==t.button)&&this.destroy();t.preventDefault();t.stopPropagation()},onFirstMove:function(t){var n=this.node.style,m=this.host;switch(n.position){case "relative":case "absolute":var h=Math.round(parseFloat(n.left))||0;n=Math.round(parseFloat(n.top))||0;
break;default:n.position="absolute";n=k.getMarginBox(this.node);h=p.doc.body;var v=g.getComputedStyle(h),r=k.getMarginBox(h,v);v=k.getContentBox(h,v);h=n.l-(v.l-r.l);n=n.t-(v.t-r.t)}this.marginBox.l=h-this.marginBox.l;this.marginBox.t=n-this.marginBox.t;if(m&&m.onFirstMove)m.onFirstMove(this,t);this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(n){n.remove()});var t=this.host;if(t&&t.onMoveStop)t.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(e,u,B,A,p,l){var k={};e.setObject("dojo.dnd.autoscroll",k);k.getViewport=l.getBox;k.V_TRIGGER_AUTOSCROLL=32;k.H_TRIGGER_AUTOSCROLL=32;k.V_AUTOSCROLL_VALUE=16;k.H_AUTOSCROLL_VALUE=16;var g,d=B.doc,c=Infinity,a=Infinity;k.autoScrollStart=function(b){d=b;g=l.getBox(d);b=B.body(d).parentNode;c=Math.max(b.scrollHeight-g.h,0);a=Math.max(b.scrollWidth-g.w,0)};k.autoScroll=function(b){var f=g||l.getBox(d),t=B.body(d).parentNode,n=0,m=0;b.clientX<k.H_TRIGGER_AUTOSCROLL?n=-k.H_AUTOSCROLL_VALUE:b.clientX>
f.w-k.H_TRIGGER_AUTOSCROLL&&(n=Math.min(k.H_AUTOSCROLL_VALUE,a-t.scrollLeft));b.clientY<k.V_TRIGGER_AUTOSCROLL?m=-k.V_AUTOSCROLL_VALUE:b.clientY>f.h-k.V_TRIGGER_AUTOSCROLL&&(m=Math.min(k.V_AUTOSCROLL_VALUE,c-t.scrollTop));window.scrollBy(n,m)};k._validNodes={div:1,p:1,td:1};k._validOverflow={auto:1,scroll:1};k.autoScrollNodes=function(b){for(var f,t,n,m,h,v=0,r=0,C=b.target;C;){if(1==C.nodeType&&C.tagName.toLowerCase()in k._validNodes){n=p.getComputedStyle(C);h=n.overflowX.toLowerCase()in k._validOverflow;
m=n.overflowY.toLowerCase()in k._validOverflow;if(h||m)f=A.getContentBox(C,n),t=A.position(C,!0);if(h){n=Math.min(k.H_TRIGGER_AUTOSCROLL,f.w/2);h=b.pageX-t.x;if(u("webkit")||u("opera"))h+=B.body().scrollLeft;v=0;0<h&&h<f.w&&(h<n?v=-n:h>f.w-n&&(v=n),C.scrollLeft+=v)}if(m){m=Math.min(k.V_TRIGGER_AUTOSCROLL,f.h/2);n=b.pageY-t.y;if(u("webkit")||u("opera"))n+=B.body().scrollTop;r=0;0<n&&n<f.h&&(n<m?r=-m:n>f.h-m&&(r=m),C.scrollTop+=r)}if(v||r)return}try{C=C.parentNode}catch(w){C=null}}k.autoScroll(b)};
return k})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(e,u){var B=u.prototype.onMove;return e("dojo.dnd.TimedMoveable",u,{timeout:40,constructor:function(A,p){p||(p={});p.timeout&&"number"==typeof p.timeout&&0<=p.timeout&&(this.timeout=p.timeout)},onMoveStop:function(A){A._timer&&(clearTimeout(A._timer),B.call(this,A,A._leftTop));u.prototype.onMoveStop.apply(this,arguments)},onMove:function(A,p){A._leftTop=p;if(!A._timer){var l=this;A._timer=setTimeout(function(){A._timer=
null;B.call(l,A,A._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h){var v,r,C=new (u([b,k],{curNode:null,activeStack:[],constructor:function(){var y=g.hitch(this,function(q){B.isDescendant(this.curNode,q)&&this.set("curNode",
null);B.isDescendant(this.prevNode,q)&&this.set("prevNode",null)});e.before(l,"empty",y);e.before(l,"destroy",y)},registerIframe:function(y){return this.registerWin(y.contentWindow,y)},registerWin:function(y,q){var x=this,E=y.document&&y.document.body;if(E){var z=a("pointer-events")?"pointerdown":a("MSPointer")?"MSPointerDown":a("touch-events")?"mousedown, touchstart":"mousedown",D=d(y.document,z,function(L){L&&L.target&&null==L.target.parentNode||x._onTouchNode(q||L.target,"mouse")}),F=d(E,"focusin",
function(L){if(L.target.tagName){var Q=L.target.tagName.toLowerCase();"#document"!=Q&&"body"!=Q&&(n.isFocusable(L.target)?x._onFocusNode(q||L.target):x._onTouchNode(q||L.target))}}),J=d(E,"focusout",function(L){x._onBlurNode(q||L.target)});return{remove:function(){D.remove();F.remove();J.remove();E=D=F=J=null}}}},_onBlurNode:function(y){y=(new Date).getTime();y<v+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(g.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),y<r+100||(this._clearActiveWidgetsTimer=setTimeout(g.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(y,q){r=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);p.contains(y,"dijitPopup")&&(y=y.firstChild);var x=[];try{for(;y;){var E=A.get(y,
"dijitPopupParent");if(E)y=m.byId(E).domNode;else if(y.tagName&&"body"==y.tagName.toLowerCase()){if(y===f.body())break;y=t.get(y.ownerDocument).frameElement}else{var z=y.getAttribute&&y.getAttribute("widgetId"),D=z&&m.byId(z);!D||"mouse"==q&&D.get("disabled")||x.unshift(z);y=y.parentNode}}}catch(F){}this._setStack(x,q)},_onFocusNode:function(y){y&&9!=y.nodeType&&(v=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(y),y!=
this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",y)))},_setStack:function(y,q){var x=this.activeStack,E=x.length-1,z=y.length-1;if(y[z]!=x[E]){this.set("activeStack",y);var D;for(D=E;0<=D&&x[D]!=y[D];D--)if(E=m.byId(x[D]))E._hasBeenBlurred=!0,E.set("focused",!1),E._focusManager==this&&E._onBlur(q),this.emit("widget-blur",E,q);for(D++;D<=z;D++)if(E=m.byId(y[D]))E.set("focused",!0),E._focusManager==this&&E._onFocus(q),this.emit("widget-focus",E,q)}},focus:function(y){if(y)try{y.focus()}catch(q){}}}));
c(function(){var y=C.registerWin(t.get(document));a("ie")&&d(window,"unload",function(){y&&(y.remove(),y=null)})});h.focus=function(y){C.focus(y)};for(var w in C)/^_/.test(w)||(h.focus[w]="function"==typeof C[w]?g.hitch(C,w):C[w]);C.watch(function(y,q,x){h.focus[y]=x});return C})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,u,B,A){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(p){var l=this._attrPairNames;return l[p]?
l[p]:l[p]={s:"_"+p+"Setter",g:"_"+p+"Getter"}},postscript:function(p){p&&this.set(p)},_get:function(p,l){return"function"===typeof this[l.g]?this[l.g]():this[p]},get:function(p){return this._get(p,this._getAttrNames(p))},set:function(p,l){if("object"===typeof p){for(var k in p)p.hasOwnProperty(k)&&"_watchCallbacks"!=k&&this.set(k,p[k]);return this}k=this._getAttrNames(p);var g=this._get(p,k);k=this[k.s];var d;"function"===typeof k?d=k.apply(this,Array.prototype.slice.call(arguments,1)):this[p]=l;
if(this._watchCallbacks){var c=this;A(d,function(){c._watchCallbacks(p,g,l)})}return this},_changeAttrValue:function(p,l){var k=this.get(p);this[p]=l;this._watchCallbacks&&this._watchCallbacks(p,k,l);return this},watch:function(p,l){var k=this._watchCallbacks;if(!k){var g=this;k=this._watchCallbacks=function(c,a,b,f){var t=function(n){if(n){n=n.slice();for(var m=0,h=n.length;m<h;m++)n[m].call(g,c,a,b)}};t(k["_"+c]);f||t(k["*"])}}l||"function"!==typeof p?p="_"+p:(l=p,p="*");var d=k[p];"object"!==typeof d&&
(d=k[p]=[]);d.push(l);p={};p.unwatch=p.remove=function(){var c=B.indexOf(d,l);-1<c&&d.splice(c,1)};return p}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(e,u,B,A,p,l,k){var g={_isElementShown:function(d){var c=A.get(d);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=B.get(d,"type")},hasDefaultTabStop:function(d){switch(d.nodeName.toLowerCase()){case "a":return B.has(d,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":try{var c=d.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;var a=c.body}catch(b){try{a=d.contentWindow.document.body}catch(f){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==d.contentEditable}},effectiveTabIndex:function(d){if(!B.get(d,"disabled"))return B.has(d,"tabIndex")?+B.get(d,"tabIndex"):
g.hasDefaultTabStop(d)?0:void 0},isTabNavigable:function(d){return 0<=g.effectiveTabIndex(d)},isFocusable:function(d){return-1<=g.effectiveTabIndex(d)},_getTabNavigable:function(d){function c(y){return y&&"input"==y.tagName.toLowerCase()&&y.type&&"radio"==y.type.toLowerCase()&&y.name&&y.name.toLowerCase()}function a(y){return v[c(y)]||y}var b,f,t,n,m,h,v={},r=g._isElementShown,C=g.effectiveTabIndex,w=function(y){for(y=y.firstChild;y;y=y.nextSibling)if(!(1!=y.nodeType||9>=l("ie")&&"HTML"!==y.scopeName)&&
r(y)){var q=C(y);if(0<=q){if(0==q)b||(b=y),f=y;else if(0<q){if(!t||q<n)n=q,t=y;if(!m||q>=h)h=q,m=y}q=c(y);B.get(y,"checked")&&q&&(v[q]=y)}"SELECT"!=y.nodeName.toUpperCase()&&w(y)}};r(d)&&w(d);return{first:a(b),last:a(f),lowest:a(t),highest:a(m)}},getFirstInTabbingOrder:function(d,c){d=g._getTabNavigable(u.byId(d,c));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(d,c){d=g._getTabNavigable(u.byId(d,c));return d.last?d.last:d.highest}};p.mixin(k,g);return g})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(e,u,B,A,p){var l={};e.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(k){l[k]=A[k]});B.mixin(l,{defaultDuration:u.defaultDuration||200});B.mixin(p,l);return p})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f){function t(){}function n(m){return function(h,v,r,C){return h&&"string"==typeof v&&h[v]==t?h.on(v.substring(2).toLowerCase(),k.hitch(r,C)):m.apply(B,arguments)}}e.around(B,"connect",n);l.connect&&e.around(l,"connect",n);e=A("dijit._Widget",[a,b,f],{onClick:t,onDblClick:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseOut:t,onMouseOver:t,onMouseLeave:t,onMouseEnter:t,onMouseUp:t,constructor:function(m){this._toConnect={};for(var h in m)this[h]===
t&&(this._toConnect[h.replace(/^on/,"").toLowerCase()]=m[h],delete m[h])},postCreate:function(){this.inherited(arguments);for(var m in this._toConnect)this.on(m,this._toConnect[m]);delete this._toConnect},on:function(m,h){return this[this._onMap(m)]===t?B.connect(this.domNode,m.toLowerCase(),this,h):this.inherited(arguments)},_setFocusedAttr:function(m){this._focused=m;this._set("focused",m)},setAttribute:function(m,h){l.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(m,h)},attr:function(m,h){return 2<=arguments.length||"object"===typeof m?this.set.apply(this,arguments):this.get(m)},getDescendants:function(){l.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});p("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return e})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q){function x(z){return function(D){g[D?
"set":"remove"](this.domNode,z,D);this._set(z,D)}}f.add("dijit-legacy-requires",!t.isAsync);f.add("dojo-bidi",!1);f("dijit-legacy-requires")&&h(0,function(){e(["dijit/_base/manager"])});var E={};A=l("dijit._WidgetBase",[v,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:x("lang"),dir:"",_setDirAttr:x("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(z){this._set("ownerDocument",
z)},attributeMap:{},_blankGif:A.blankGif||e.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var z=this.constructor;if(!z._setterAttrs){var D=z.prototype,F=z._setterAttrs=[];z=z._onMap={};for(var J in D.attributeMap)F.push(J);for(J in D)/^on/.test(J)&&(z[J.substring(2).toLowerCase()]=J),/^_set[A-Z](.*)Attr$/.test(J)&&(J=J.charAt(4).toLowerCase()+J.substr(5,J.length-9),D.attributeMap&&J in D.attributeMap||F.push(J))}},postscript:function(z,D){this.create(z,D)},create:function(z,
D){this._introspect();this.srcNodeRef=k.byId(D);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);z&&(this.params=z,n.mixin(this,z));this.postMixInProperties();this.id||(this.id=q.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=C.body(this.ownerDocument);
q.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();if((z=this.srcNodeRef)&&z.parentNode&&this.domNode!==z){z.parentNode.replaceChild(this.domNode,z);var F=!0}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();F&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var z={},D;for(D in this.params||{})z[D]=this._get(D);u.forEach(this.constructor._setterAttrs,function(F){if(!(F in z)){var J=this._get(F);J&&this.set(F,J)}},this);for(D in z)this.set(D,
z[D])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var z=this.baseClass.split(" ");this.isLeftToRight()||(z=z.concat(u.map(z,function(D){return D+"Rtl"})));d.add(this.domNode,z)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,u.forEach(this.getChildren(),function(z){z._started||z._destroyed||!n.isFunction(z.startup)||(z.startup(),z._started=!0)}))},
destroyRecursive:function(z){this._beingDestroyed=!0;this.destroyDescendants(z);this.destroy(z)},destroy:function(z){function D(F){F.destroyRecursive?F.destroyRecursive(z):F.destroy&&F.destroy(z)}this._beingDestroyed=!0;this.uninitialize();u.forEach(this._connects,n.hitch(this,"disconnect"));u.forEach(this._supportingWidgets,D);this.domNode&&u.forEach(q.findWidgets(this.domNode,this.containerNode),D);this.destroyRendering(z);q.remove(this.id);this._destroyed=!0},destroyRendering:function(z){this.bgIframe&&
(this.bgIframe.destroy(z),delete this.bgIframe);this.domNode&&(z?g.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(z||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(z){u.forEach(this.getChildren(),function(D){D.destroyRecursive&&D.destroyRecursive(z)})},uninitialize:function(){return!1},_setStyleAttr:function(z){var D=this.domNode;n.isObject(z)?b.set(D,z):D.style.cssText=D.style.cssText?D.style.cssText+("; "+z):z;this._set("style",
z)},_attrToDom:function(z,D,F){F=3<=arguments.length?F:this.attributeMap[z];u.forEach(n.isArray(F)?F:[F],function(J){var L=this[J.node||J||"domNode"];switch(J.type||"attribute"){case "attribute":n.isFunction(D)&&(D=n.hitch(this,D));J=J.attribute?J.attribute:/^on[A-Z][a-zA-Z]*$/.test(z)?z.toLowerCase():z;L.tagName?g.set(L,J,D):L.set(J,D);break;case "innerText":L.innerHTML="";L.appendChild(this.ownerDocument.createTextNode(D));break;case "textContent":L.textContent=D;break;case "innerHTML":L.innerHTML=
D;break;case "class":d.replace(L,D,this[z]);break;case "toggleClass":d.toggle(L,J.className||z,D)}},this)},get:function(z){var D=this._getAttrNames(z);return this[D.g]?this[D.g]():this._get(z)},set:function(z,D){if("object"===typeof z){for(var F in z)this.set(F,z[F]);return this}F=this._getAttrNames(z);var J=this[F.s];if(n.isFunction(J))var L=J.apply(this,Array.prototype.slice.call(arguments,1));else{J=this.focusNode&&!n.isFunction(this.focusNode)?"focusNode":"domNode";var Q=this[J]&&this[J].tagName,
ba;if((ba=Q)&&!(ba=E[Q])){ba=this[J];var fa={};for(Y in ba)fa[Y.toLowerCase()]=!0;ba=E[Q]=fa}var Y=ba;F=z in this.attributeMap?this.attributeMap[z]:F.s in this?this[F.s]:Y&&F.l in Y&&"function"!=typeof D||/^aria-|^data-|^role$/.test(z)?J:null;null!=F&&this._attrToDom(z,D,F);this._set(z,D)}return L||this},_attrPairNames:{},_getAttrNames:function(z){var D=this._attrPairNames;if(D[z])return D[z];var F=z.replace(/^[a-z]|-[a-zA-Z]/g,function(J){return J.charAt(J.length-1).toUpperCase()});return D[z]={n:z+
"Node",s:"_set"+F+"Attr",g:"_get"+F+"Attr",l:F.toLowerCase()}},_set:function(z,D){var F=this[z];this[z]=D;!this._created||F===D||F!==F&&D!==D||(this._watchCallbacks&&this._watchCallbacks(z,F,D),this.emit("attrmodified-"+z,{detail:{prevValue:F,newValue:D}}))},_get:function(z){return this[z]},emit:function(z,D,F){D=D||{};void 0===D.bubbles&&(D.bubbles=!0);void 0===D.cancelable&&(D.cancelable=!0);D.detail||(D.detail={});D.detail.widget=this;var J,L=this["on"+z];L&&(J=L.apply(this,F?F:[D]));this._started&&
!this._beingDestroyed&&m.emit(this.domNode,z.toLowerCase(),D);return J},on:function(z,D){var F=this._onMap(z);return F?B.after(this,F,D,!0):this.own(m(this.domNode,z,D))[0]},_onMap:function(z){var D=this.constructor,F=D._onMap;if(!F){F=D._onMap={};for(var J in D.prototype)/^on/.test(J)&&(F[J.replace(/^on/,"").toLowerCase()]=J)}return F["string"==typeof z&&z.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
q.findWidgets(this.containerNode):[]},getParent:function(){return q.getEnclosingWidget(this.domNode.parentNode)},connect:function(z,D,F){return this.own(p.connect(z,D,this,F))[0]},disconnect:function(z){z.remove()},subscribe:function(z,D){return this.own(r.subscribe(z,n.hitch(this,D)))[0]},unsubscribe:function(z){z.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():a.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=b.get(this.domNode,"display")},
placeAt:function(z,D){var F=!z.tagName&&q.byId(z);!F||!F.addChild||D&&"number"!==typeof D?(z=F&&"domNode"in F?F.containerNode&&!/after|before|replace/.test(D||"")?F.containerNode:F.domNode:k.byId(z,this.ownerDocument),c.place(this.domNode,z,D),!this._started&&(this.getParent()||{})._started&&this.startup()):F.addChild(this,D);return this},defer:function(z,D){var F=setTimeout(n.hitch(this,function(){F&&(F=null,this._destroyed||n.hitch(this,z)())}),D||0);return{remove:function(){F&&(clearTimeout(F),
F=null);return null}}}});f("dojo-bidi")&&A.extend(y);return A})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(e,u,B){return B("dijit.Destroyable",null,{destroy:function(A){this._destroyed=!0},own:function(){var A=["destroyRecursive","destroy","remove"];e.forEach(arguments,function(p){function l(){k.remove();e.forEach(g,function(c){c.remove()})}var k=u.before(this,"destroy",function(c){p[d](c)}),g=[];if(p.then){var d="cancel";p.then(l,l)}else e.forEach(A,
function(c){"function"===typeof p[c]&&(d||(d=c),g.push(u.after(p,c,l,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(e,u,B,A,p,l){e=A("dijit._OnDijitClickMixin",null,{connect:function(k,g,d){return this.inherited(arguments,[k,"ondijitclick"==g?l:g,d])}});e.a11yclick=l;return e})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,
u,B,A){function p(g){if((g.keyCode===e.ENTER||g.keyCode===e.SPACE)&&!/input|button|textarea/i.test(g.target.nodeName))for(g=g.target;g;g=g.parentNode)if(g.dojoClick)return!0}var l;B(document,"keydown",function(g){p(g)?(l=g.target,g.preventDefault()):l=null});B(document,"keyup",function(g){p(g)&&g.target==l&&(l=null,B.emit(g.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,metaKey:g.metaKey,altKey:g.altKey,_origType:g.type}))});var k=function(g,d){g.dojoClick=!0;return B(g,
"click",d)};k.click=k;k.press=function(g,d){var c=B(g,A.press,function(b){("mousedown"!=b.type||u.isLeft(b))&&d(b)}),a=B(g,"keydown",function(b){b.keyCode!==e.ENTER&&b.keyCode!==e.SPACE||d(b)});return{remove:function(){c.remove();a.remove()}}};k.release=function(g,d){var c=B(g,A.release,function(b){("mouseup"!=b.type||u.isLeft(b))&&d(b)}),a=B(g,"keyup",function(b){b.keyCode!==e.ENTER&&b.keyCode!==e.SPACE||d(b)});return{remove:function(){c.remove();a.remove()}}};k.move=A.move;return k})},"dijit/_FocusMixin":function(){define(["./focus",
"./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,u,B,A){A.extend(u,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return B("dijit._FocusMixin",null,{_focusManager:e})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(e,u,B,A,p){var l=p.doc.documentElement;p=A("ie");var k=A("trident"),g=A("opera"),d=Math.floor,c=A("ff"),a=e.boxModel.replace(/-/,
"");g={dj_quirks:A("quirks"),dj_opera:g,dj_khtml:A("khtml"),dj_webkit:A("webkit"),dj_safari:A("safari"),dj_chrome:A("chrome"),dj_edge:A("edge"),dj_gecko:A("mozilla"),dj_ios:A("ios"),dj_android:A("android")};p&&(g.dj_ie=!0,g["dj_ie"+d(p)]=!0,g.dj_iequirks=A("quirks"));k&&(g.dj_trident=!0,g["dj_trident"+d(k)]=!0);c&&(g["dj_ff"+d(c)]=!0);g["dj_"+a]=!0;var b="",f;for(f in g)g[f]&&(b+=f+" ");l.className=u.trim(l.className+" "+b);B(function(){if(!e.isBodyLtr()){var t="dj_rtl dijitRtl "+b.replace(/ /g,"-rtl ");
l.className=u.trim(l.className+" "+t+"dj_rtl dijitRtl "+b.replace(/ /g,"-rtl "))}});return A})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,u,B,A){B(function(){u("highcontrast")&&e.add(A.body(),"dijit_a11y")});return u})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(e,u,B,A,p,l,k){p.add("highcontrast",function(){var g=k.doc.createElement("div");
try{g.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(u.blankGif||e.toUrl("./resources/blank.gif"))+'");';k.body().appendChild(g);var d=A.getComputedStyle(g),c=d.backgroundImage;return d.borderTopColor==d.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c)}catch(a){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+a.toString()),!1}finally{8>=p("ie")?g.outerHTML="":k.body().removeChild(g)}});
l(function(){p("highcontrast")&&B.add(k.body(),"dj_a11y")});return p})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(e,u,B,A,p,l,k,g){var d=u("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(c){var a=this.declaredClass,b=this;return k.substitute(c,this,function(f,t){"!"==t.charAt(0)&&(f=A.getObject(t.substr(1),
!1,b));if("undefined"==typeof f)throw Error(a+" template:"+t);return null==f?"":"!"==t.charAt(0)?f:this._escapeValue(""+f)},this)},_escapeValue:function(c){return c.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=e(this.templatePath,{sanitize:!0}));var c=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);
if(A.isString(c)){var a=B.toDom(this._stringRepl(c),this.ownerDocument);if(1!=a.nodeType)throw Error("Invalid template: "+c);}else a=c.cloneNode(!0);this.domNode=a}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(c){var a=this.containerNode;if(c&&a)for(;c.hasChildNodes();)a.appendChild(c.firstChild)}});d._templateCache={};d.getCachedTemplate=function(c,a,b){var f=d._templateCache,t=c,n=f[t];if(n){try{if(!n.ownerDocument||n.ownerDocument==
(b||document))return n}catch(m){}B.destroy(n)}c=k.trim(c);if(a||c.match(/\$\{([^\}]+)\}/g))return f[t]=c;a=B.toDom(c,b);if(1!=a.nodeType)throw Error("Invalid template: "+c);return f[t]=a};l("ie")&&p(window,"unload",function(){var c=d._templateCache,a;for(a in c){var b=c[a];"object"==typeof b&&B.destroy(b);delete c[a]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(e){return e.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(e,u,B,A,p,l,k,g,d){var c=p.delegate(g,{mouseenter:l.enter,mouseleave:l.leave,keypress:B._keypress}),a;B=A("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var f=b;;)if(1==f.nodeType&&(this._processTemplateNode(f,function(t,n){return t.getAttribute(n)},this._attach)||
this.searchContainerNode)&&f.firstChild)f=f.firstChild;else{if(f==b)break;for(;!f.nextSibling;)if(f=f.parentNode,f==b)return;f=f.nextSibling}},_processTemplateNode:function(b,f,t){var n=!0,m=this.attachScope||this,h=f(b,"dojoAttachPoint")||f(b,"data-dojo-attach-point");if(h)for(var v=h.split(/\s*,\s*/);h=v.shift();)p.isArray(m[h])?m[h].push(b):m[h]=b,n="containerNode"!=h,this._attachPoints.push(h);if(f=f(b,"dojoAttachEvent")||f(b,"data-dojo-attach-event"))for(h=f.split(/\s*,\s*/),v=p.trim;f=h.shift();)if(f){var r=
null;-1!=f.indexOf(":")?(r=f.split(":"),f=v(r[0]),r=v(r[1])):f=v(f);r||(r=f);this._attachEvents.push(t(b,f,p.hitch(m,r)))}return n},_attach:function(b,f,t){f=f.replace(/^on/,"").toLowerCase();f="dijitclick"==f?a||(a=e("./a11yclick")):c[f]||f;return k(b,f,t)},_detachTemplateNodes:function(){var b=this.attachScope||this;u.forEach(this._attachPoints,function(f){delete b[f]});this._attachPoints=[];u.forEach(this._attachEvents,function(f){f.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});p.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return B})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b){u=u("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);e.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(t){this.watch(t,l.hitch(this,"_setStateClass"))},this);for(var f in this.cssStateNodes||{})this._trackMouseState(this[f],this.cssStateNodes[f]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(f){if(!this.disabled)switch(f.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function f(r){t=t.concat(e.map(t,function(C){return C+r}),"dijit"+r)}var t=this.baseClass.split(" ");this.isLeftToRight()||f("Rtl");var n="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&f(n);this.state&&f(this.state);
this.selected&&f("Selected");this._opened&&f("Opened");this.disabled?f("Disabled"):this.readOnly?f("ReadOnly"):this.active?f("Active"):this.hovering&&f("Hover");this.focused&&f("Focused");n=this.stateNode||this.domNode;var m={};e.forEach(n.className.split(" "),function(r){m[r]=!0});"_stateClasses"in this&&e.forEach(this._stateClasses,function(r){delete m[r]});e.forEach(t,function(r){m[r]=!0});var h=[],v;for(v in m)h.push(v);n.className=h.join(" ");this._stateClasses=t},_subnodeCssMouseEvent:function(f,
t,n){function m(h){A.toggle(f,t+"Active",h)}if(!this.disabled&&!this.readOnly)switch(n.type){case "mouseover":case "MSPointerOver":case "pointerover":A.toggle(f,t+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":A.toggle(f,t+"Hover",!1);m(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":m(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":m(!1);break;case "focus":case "focusin":A.toggle(f,
t+"Focused",!0);break;case "blur":case "focusout":A.toggle(f,t+"Focused",!1)}},_trackMouseState:function(f,t){f._cssState=t}});g(function(){function f(m,h,v){if(!v||!B.isDescendant(v,h))for(;h&&h!=v;h=h.parentNode)if(h._cssState){var r=b.getEnclosingWidget(h);r&&(h==r.domNode?r._cssMouseEvent(m):r._subnodeCssMouseEvent(h,h._cssState,m))}}var t=c.body(),n;k(t,d.over,function(m){f(m,m.target,m.relatedTarget)});k(t,d.out,function(m){f(m,m.target,m.relatedTarget)});k(t,a.press,function(m){n=m.target;
f(m,n)});k(t,a.release,function(m){f(m,n);n=null});k(t,"focusin, focusout",function(m){var h=m.target;if(h._cssState&&!h.getAttribute("widgetId")){var v=b.getEnclosingWidget(h);v&&v._subnodeCssMouseEvent(h,h._cssState,m)}})});return u})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(e,u,B,A,p,l){return u("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(k){var g=[];e.forEach(k||
this.getChildren(),function(d){"value"in d?g.push(d):g=g.concat(this._getDescendantFormWidgets(d.getChildren()))},this);return g},reset:function(){e.forEach(this._getDescendantFormWidgets(),function(k){k.reset&&k.reset()})},validate:function(){var k=!1;return e.every(e.map(this._getDescendantFormWidgets(),function(g){g._hasBeenBlurred=!0;var d=g.disabled||!g.validate||g.validate();d||k||(l.scrollIntoView(g.containerNode||g.domNode),g.focus(),k=!0);return d}),function(g){return g})},setValues:function(k){B.deprecated(this.declaredClass+
"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",k)},_setValueAttr:function(k){var g={};e.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(g[b.name]||(g[b.name]=[])).push(b)});for(var d in g)if(g.hasOwnProperty(d)){var c=g[d],a=A.getObject(d,!1,k);void 0!==a&&(a=[].concat(a),"boolean"==typeof c[0].checked?e.forEach(c,function(b){b.set("value",-1!=e.indexOf(a,b._get("value")))}):c[0].multiple?c[0].set("value",a):e.forEach(c,function(b,f){b.set("value",
a[f])}))}},getValues:function(){B.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var k={};e.forEach(this._getDescendantFormWidgets(),function(g){var d=g.name;if(d&&!g.disabled){var c=g.get("value");"boolean"==typeof g.checked?/Radio/.test(g.declaredClass)?!1!==c?A.setObject(d,c,k):(c=A.getObject(d,!1,k),void 0===c&&A.setObject(d,null,k)):(g=A.getObject(d,!1,k),g||(g=[],A.setObject(d,g,k)),!1!==c&&
g.push(c)):(g=A.getObject(d,!1,k),"undefined"!=typeof g?A.isArray(g)?g.push(c):A.setObject(d,[g,c],k):A.setObject(d,c,k))}});return k},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var k=e.map(this._descendants,function(g){return g.get("state")||""});return 0<=e.indexOf(k,"Error")?"Error":0<=e.indexOf(k,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(k){this._descendants=this._getDescendantFormWidgets();e.forEach(this._descendants,
function(g){g._started||g.startup()});k||this._onChildChange()},_onChildChange:function(k){k&&"state"!=k&&"disabled"!=k||this._set("state",this._getState());k&&"value"!=k&&"disabled"!=k&&"checked"!=k||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");
this.state=this._getState();var k=this;this.own(p(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(g){g.target!=k.domNode&&k._onChildChange(g.type.replace("attrmodified-",""))}));this.watch("state",function(g,d,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(e,u){return e("dijit._DialogMixin",null,{actionBarTemplate:"",
execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var B=u._getTabNavigable(this.domNode);this._firstFocusItem=B.lowest||B.first||this.closeButtonNode||this.domNode;this._lastFocusItem=B.last||B.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b){var f=e("dijit.DialogUnderlay",[g,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(t){A.set(this.node,"id",t+"_underlay");this._set("dialogId",t)},_setClassAttr:function(t){this.node.className="dijitDialogUnderlay "+t;this._set("class",t)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(l(this.domNode,"keydown",u.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var t=this.node.style,n=this.domNode.style;n.display="none";var m=k.getBox(this.ownerDocument);n.top=m.t+"px";n.left=m.l+"px";t.width=m.w+"px";t.height=m.h+"px";n.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new c(this.domNode);var t=k.get(this.ownerDocument);this._modalConnects=[a.on("resize",u.hitch(this,"layout")),l(t,"scroll",
u.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});f.show=function(t,n){var m=f._singleton;!m||m._destroyed?m=b._underlay=f._singleton=new f(t):t&&m.set(t);p.set(m.domNode,"zIndex",n);m.open||m.show()};f.hide=function(){var t=
f._singleton;t&&!t._destroyed&&t.hide()};return f})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(e,u,B,A,p,l,k,g){g.add("config-bgIframe",(g("ie")||g("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var d=new function(){var c=[];this.pop=function(){if(c.length){var a=c.pop();a.style.display=""}else 9>g("ie")?(a=B.dojoBlankHtmlUrl||e.toUrl("dojo/resources/blank.html")||
'javascript:""',a=document.createElement("\x3ciframe src\x3d'"+a+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(a=A.create("iframe"),a.src='javascript:""',a.className="dijitBackgroundIframe",a.setAttribute("role","presentation"),p.set(a,"opacity",.1)),a.tabIndex=-1;return a};this.push=function(a){a.style.display="none";c.push(a)}};u.BackgroundIframe=function(c){if(!c.id)throw Error("no id");if(g("config-bgIframe")){var a=
this.iframe=d.pop();c.appendChild(a);7>g("ie")||g("quirks")?(this.resize(c),this._conn=k(c,"resize",l.hitch(this,"resize",c))):p.set(a,{width:"100%",height:"100%"})}};l.extend(u.BackgroundIframe,{resize:function(c){this.iframe&&p.set(this.iframe,{width:c.offsetWidth+"px",height:c.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});return u.BackgroundIframe})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(e,u,B,A,p){var l=new e,k;B(function(){var g=p.getBox();l._rlh=u(window,"resize",function(){var c=p.getBox();if(g.h!=c.h||g.w!=c.w)g=c,l.emit("resize")});if(8==A("ie")){var d=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,l.emit("resize"))},500)}A("ios")&&(u(document,"focusin",function(c){k=c.target}),u(document,"focusout",function(c){k=null}))});l.getEffectiveBox=
function(g){g=p.getBox(g);var d=k&&k.tagName&&k.tagName.toLowerCase();A("ios")&&k&&!k.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(k.type))&&(g.h*=0==orientation||180==orientation?.66:.4,d=k.getBoundingClientRect(),g.h=Math.max(g.h,d.top+d.height));return g};return l})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m){return d("dijit.layout.ContentPane",[B,A,p],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:e._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(h,v,r){var C=new r(h,v);return!C.href&&C._contentSetter&&C._contentSetter.parseDeferred&&!C._contentSetter.parseDeferred.isFulfilled()?C._contentSetter.parseDeferred.then(function(){return C}):C},create:function(h,v){if(!(h&&h.template||!v||"href"in h||"content"in h)){v=a.byId(v);for(var r=v.ownerDocument.createDocumentFragment();v.firstChild;)r.appendChild(v.firstChild);
h=u.delegate(h,{content:r})}this.inherited(arguments,[h,v])},postMixInProperties:function(){this.inherited(arguments);var h=n.getLocalization("dijit","loading",this.lang);this.loadingMessage=l.substitute(this.loadingMessage,h);this.errorMessage=l.substitute(this.errorMessage,h)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,
function(h){h._started||h._destroyed||!u.isFunction(h.startup)||(h.startup(),h._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(h){h._started||h._destroyed||!u.isFunction(h.startup)||(h.startup(),h._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(h){h._started||h._destroyed||!u.isFunction(h.startup)||(h.startup(),h._started=!0)},this)},setHref:function(h){e.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",h)},_setHrefAttr:function(h){this.cancel();this.onLoadDeferred=new c(u.hitch(this,"cancel"));this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._set("href",h);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(h){e.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",h)},_setContentAttr:function(h){this._set("href",
"");this.cancel();this.onLoadDeferred=new c(u.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._setContent(h||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(h){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new c(u.hitch(this,"cancel"));this.onLoadDeferred.then(u.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var h=this,v={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
u.isObject(this.ioArgs)&&u.mixin(v,this.ioArgs);var r=this._xhrDfd=(this.ioMethod||t.get)(v),C;r.then(function(w){C=w;try{return h._isDownloaded=!0,h._setContent(w,!1)}catch(y){h._onError("Content",y)}},function(w){r.canceled||h._onError("Download",w);delete h._xhrDfd;return w}).then(function(){h.onDownloadEnd();delete h._xhrDfd;return C});delete this._hrefChanged},_onLoadHandler:function(h){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(h)}catch(v){console.error("Error "+(this.widgetId||
this.id)+" running custom onLoad code: "+v.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(h){console.error("Error "+this.widgetId+" running custom onUnload code: "+h.message)}},destroyDescendants:function(h){this.isLoaded&&this._onUnloadHandler();var v=this._contentSetter;g.forEach(this.getChildren(),function(r){r.destroyRecursive?r.destroyRecursive(h):r.destroy&&r.destroy(h);r._destroyed=!0});v&&(g.forEach(v.parseResults,function(r){r._destroyed||(r.destroyRecursive?
r.destroyRecursive(h):r.destroy&&r.destroy(h),r._destroyed=!0)}),delete v.parseResults);h||f.empty(this.containerNode);delete this._singleChild},_setContent:function(h,v){h=this.preprocessContent(h);this.destroyDescendants();var r=this._contentSetter;r&&r instanceof k._ContentSetter||(r=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:u.hitch(this,this._onError),onContentError:u.hitch(this,function(y){y=this.onContentError(y);try{this.containerNode.innerHTML=y}catch(q){console.error("Fatal "+
this.id+" could not change content due to "+q.message,q)}})}));var C=u.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!h.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});C=r.set(u.isObject(h)&&h.domNode?h.domNode:h,C);var w=this;return m(C&&C.then?C:r.parseDeferred,function(){delete w._contentSetterParams;v||(w._started&&(w._startChildren(),w._scheduleLayout()),
w._onLoadHandler(h))})},preprocessContent:function(h){return h},_onError:function(h,v,r){this.onLoadDeferred.reject(v);h=this["on"+h+"Error"].call(this,v);r?console.error(r,v):h&&this._setContent(h,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct",
"dojo/_base/kernel"],function(e,u,B,A){return u("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(p,l){var k=this.containerNode;if(0<l){for(k=k.firstChild;0<l;)1==k.nodeType&&l--,k=k.nextSibling;k?l="before":(k=this.containerNode,l="last")}B.place(p.domNode,k,l);this._started&&!p._started&&p.startup()},removeChild:function(p){"number"==typeof p&&(p=this.getChildren()[p]);p&&(p=p.domNode)&&p.parentNode&&
p.parentNode.removeChild(p)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(p,l){var k=this.getChildren();p=e.indexOf(k,p);return k[p+l]},getIndexOfChild:function(p){return e.indexOf(this.getChildren(),p)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(e,u,B,A,p,l,k,g,d,c){return u("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",l.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;k("\x3e *",this.containerNode).some(function(f){var t=g.byNode(f);t&&t.resize?a.push(t):!/script|link|style/i.test(f.nodeName)&&
f.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];B.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();a&&A.setMarginBox(this.domNode,a);var f=this.containerNode;f===this.domNode?
(b=b||{},l.mixin(b,a||{}),"h"in b&&"w"in b||(b=l.mixin(A.getMarginBox(f),b)),this._contentBox=c.marginBox2contentBox(f,b)):this._contentBox=A.getContentBox(f);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||A.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{a=this.getChildren();for(var b,f=0;b=a[f++];)b.resize&&b.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!B.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(e,u,B,A,p){function l(d){return d.substring(0,1).toUpperCase()+d.substring(1)}function k(d,c){var a=d.resize?d.resize(c):B.setMarginBox(d.domNode,c);a?p.mixin(d,a):(p.mixin(d,B.getMarginBox(d.domNode)),p.mixin(d,c))}var g={marginBox2contentBox:function(d,c){var a=A.getComputedStyle(d),b=B.getMarginExtents(d,a),f=B.getPadBorderExtents(d,a);return{l:A.toPixelValue(d,a.paddingLeft),t:A.toPixelValue(d,a.paddingTop),w:c.w-(b.w+f.w),h:c.h-(b.h+f.h)}},layoutChildren:function(d,c,a,b,f){c=p.mixin({},
c);u.add(d,"dijitLayoutContainer");a=e.filter(a,function(t){return"center"!=t.region&&"client"!=t.layoutAlign}).concat(e.filter(a,function(t){return"center"==t.region||"client"==t.layoutAlign}));e.forEach(a,function(t){var n=t.domNode,m=t.region||t.layoutAlign;if(!m)throw Error("No region setting for "+t.id);var h=n.style;h.left=c.l+"px";h.top=c.t+"px";h.position="absolute";u.add(n,"dijitAlign"+l(m));n={};b&&b==t.id&&(n["top"==t.region||"bottom"==t.region?"h":"w"]=f);"leading"==m&&(m=t.isLeftToRight()?
"left":"right");"trailing"==m&&(m=t.isLeftToRight()?"right":"left");"top"==m||"bottom"==m?(n.w=c.w,k(t,n),c.h-=t.h,"top"==m?c.t+=t.h:h.top=c.t+c.h+"px"):"left"==m||"right"==m?(n.h=c.h,k(t,n),c.w-=t.w,"left"==m?c.l+=t.w:h.left=c.l+c.w+"px"):"client"!=m&&"center"!=m||k(t,c)})}};p.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(e,u,B,A,p,l,k){var g=0,d={_secureForInnerHtml:function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:l.empty,_setNodeContent:function(c,a){l.empty(c);if(a)if("number"==typeof a&&(a=a.toString()),"string"==typeof a&&(a=l.toDom(a,c.ownerDocument)),!a.nodeType&&u.isArrayLike(a))for(var b=a.length,f=0;f<a.length;f=b==a.length?f+1:0)l.place(a[f],c,"last");else l.place(a,c,"last");return c},_ContentSetter:A("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:e._scopeName,startup:!0,constructor:function(c,a){u.mixin(this,
c||{});a=this.node=p.byId(this.node||a);this.id||(this.id=["Setter",a?a.id||a.tagName:"",g++].join("_"))},set:function(c,a){void 0!==c&&(this.content=c);"number"==typeof c&&(c=c.toString());a&&this._mixin(a);this.onBegin();this.setContent();return(c=this.onEnd())&&c.then?c:this.node},setContent:function(){var c=this.node;if(!c)throw Error(this.declaredClass+": setContent given no node");try{c=d._setNodeContent(c,this.content)}catch(b){var a=this.onContentError(b);try{c.innerHTML=a}catch(f){console.error("Fatal "+
this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=c},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(B.forEach(this.parseResults,function(c){c.destroy&&c.destroy()}),delete this.parseResults);l.empty(this.node)},onBegin:function(){var c=this.content;if(u.isString(c)&&(this.cleanContent&&(c=d._secureForInnerHtml(c)),this.extractContent)){var a=
c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(c=a[1])}this.empty();this.content=c;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(c){return"Error occurred setting content: "+c},onExecError:function(c){return"Error occurred executing scripts: "+c},_mixin:function(c){var a={},b;for(b in c)b in a||(this[b]=c[b])},_parse:function(){var c=
this.node;try{var a={};B.forEach(["dir","lang","textDir"],function(f){this[f]&&(a[f]=this[f])},this);var b=this;this.parseDeferred=k.parse({rootNode:c,noStart:!this.startup,inherited:a,scope:this.parserScope}).then(function(f){return b.parseResults=f},function(f){b._onError("Content",f,"Error parsing in _ContentSetter#"+b.id)})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(c,a,b){c=this["on"+c+"Error"].call(this,a);b?console.error(b,a):c&&d._setNodeContent(this.node,
c,!0)}}),set:function(c,a,b){void 0==a&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),a="");"number"==typeof a&&(a=a.toString());return b?(new d._ContentSetter(u.mixin(b,{content:a,node:c}))).set():d._setNodeContent(c,a,!0)}};u.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m){function h(y){return eval("("+y+")")}function v(y){var q=y._nameCaseMap,x=y.prototype;if(!q||q._extendCnt<C){q=y._nameCaseMap={};for(var E in x)"_"!==E.charAt(0)&&(q[E.toLowerCase()]=E);q._extendCnt=C}return q}function r(y,q){q||(q=e);var x=q._dojoParserCtorMap||(q._dojoParserCtorMap={}),E=y.join();if(!x[E]){for(var z=[],D=0,F=y.length;D<F;D++){var J=y[D];z[z.length]=x[J]=x[J]||B.getObject(J)||~J.indexOf("/")&&q(J)}y=z.shift();x[E]=z.length?y.createSubclass?
y.createSubclass(z):y.extend.apply(y,z):y}return x[E]}new Date("X");var C=0;d.after(B,"extend",function(){C++},!0);var w={_clearCache:function(){C++;_ctorMap={}},_functionFromScript:function(y,q){var x="",E="",z=y.getAttribute(q+"args")||y.getAttribute("args");q=y.getAttribute("with");z=(z||"").split(/\s*,\s*/);q&&q.length&&A.forEach(q.split(/\s*,\s*/),function(D){x+="with("+D+"){";E+="}"});return new Function(z,x+y.innerHTML+E)},instantiate:function(y,q,x){q=q||{};x=x||{};var E=(x.scope||u._scopeName)+
"Type",z="data-"+(x.scope||u._scopeName)+"-",D=z+"type",F=z+"mixins",J=[];A.forEach(y,function(L){var Q=E in q?q[E]:L.getAttribute(D)||L.getAttribute(E);if(Q){var ba=L.getAttribute(F);Q=ba?[Q].concat(ba.split(/\s*,\s*/)):[Q];J.push({node:L,types:Q})}});return this._instantiate(J,q,x)},_instantiate:function(y,q,x,E){function z(D){q._started||x.noStart||A.forEach(D,function(F){"function"!==typeof F.startup||F._started||F.startup()});return D}y=A.map(y,function(D){var F=D.ctor||r(D.types,x.contextRequire);
if(!F)throw Error("Unable to resolve constructor for: '"+D.types.join()+"'");return this.construct(F,D.node,q,x,D.scripts,D.inherited)},this);return E?c(y).then(z):z(y)},construct:function(y,q,x,E,z,D){function F(Z){ca&&B.setObject(ca,Z);for(Y=0;Y<P.length;Y++)d[P[Y].advice||"after"](Z,P[Y].method,B.hitch(Z,P[Y].func),!0);for(Y=0;Y<ea.length;Y++)ea[Y].call(Z);for(Y=0;Y<ra.length;Y++)Z.watch(ra[Y].prop,ra[Y].func);for(Y=0;Y<M.length;Y++)n(Z,M[Y].event,M[Y].func);return Z}var J=y&&y.prototype;E=E||
{};var L={};E.defaults&&B.mixin(L,E.defaults);D&&B.mixin(L,D);if(f("dom-attributes-explicit"))var Q=q.attributes;else f("dom-attributes-specified-flag")?Q=A.filter(q.attributes,function(Z){return Z.specified}):(D=(/^input$|^img$/i.test(q.nodeName)?q:q.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),Q=A.map(D.split(/\s+/),function(Z){var ka=Z.toLowerCase();return{name:Z,value:"LI"==q.nodeName&&"value"==Z||"enctype"==ka?q.getAttribute(ka):
q.getAttributeNode(ka).value}}));var ba=E.scope||u._scopeName;D="data-"+ba+"-";var fa={};"dojo"!==ba&&(fa[D+"props"]="data-dojo-props",fa[D+"type"]="data-dojo-type",fa[D+"mixins"]="data-dojo-mixins",fa[ba+"type"]="dojotype",fa[D+"id"]="data-dojo-id");var Y=0,ma;ba=[];for(var ca,la;ma=Q[Y++];){var ta=ma.name,za=ta.toLowerCase();ma=ma.value;switch(fa[za]||za){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":la=ma;break;case "data-dojo-id":case "jsid":ca=ma;
break;case "data-dojo-attach-point":case "dojoattachpoint":L.dojoAttachPoint=ma;break;case "data-dojo-attach-event":case "dojoattachevent":L.dojoAttachEvent=ma;break;case "class":L["class"]=q.className;break;case "style":L.style=q.style&&q.style.cssText;break;default:if(ta in J||(ta=v(y)[za]||ta),ta in J)switch(typeof J[ta]){case "string":L[ta]=ma;break;case "number":L[ta]=ma.length?Number(ma):NaN;break;case "boolean":L[ta]="false"!=ma.toLowerCase();break;case "function":""===ma||-1!=ma.search(/[^\w\.]+/i)?
L[ta]=new Function(ma):L[ta]=B.getObject(ma,!1)||new Function(ma);ba.push(ta);break;default:za=J[ta],L[ta]=za&&"length"in za?ma?ma.split(/\s*,\s*/):[]:za instanceof Date?""==ma?new Date(""):"now"==ma?new Date:a.fromISOString(ma):za instanceof g?u.baseUrl+ma:h(ma)}else L[ta]=ma}}for(Q=0;Q<ba.length;Q++)fa=ba[Q].toLowerCase(),q.removeAttribute(fa),q[fa]=null;if(la)try{la=h.call(E.propsThis,"{"+la+"}"),B.mixin(L,la)}catch(Z){throw Error(Z.toString()+" in data-dojo-props\x3d'"+la+"'");}B.mixin(L,x);z||
(z=y&&(y._noScript||J._noScript)?[]:t("\x3e script[type^\x3d'dojo/']",q));var P=[],ea=[],ra=[],M=[];if(z)for(Y=0;Y<z.length;Y++)fa=z[Y],q.removeChild(fa),x=fa.getAttribute(D+"event")||fa.getAttribute("event"),E=fa.getAttribute(D+"prop"),la=fa.getAttribute(D+"method"),ba=fa.getAttribute(D+"advice"),Q=fa.getAttribute("type"),fa=this._functionFromScript(fa,D),x?"dojo/connect"==Q?P.push({method:x,func:fa}):"dojo/on"==Q?M.push({event:x,func:fa}):L[x]=fa:"dojo/aspect"==Q?P.push({method:la,advice:ba,func:fa}):
"dojo/watch"==Q?ra.push({prop:E,func:fa}):ea.push(fa);y=(z=y.markupFactory||J.markupFactory)?z(L,q,y):new y(L,q);return y.then?y.then(F):F(y)},scan:function(y,q){function x(za){if(!za.inherited){za.inherited={};var P=za.node,ea=x(za.parent);P={dir:P.getAttribute("dir")||ea.dir,lang:P.getAttribute("lang")||ea.lang,textDir:P.getAttribute(Q)||ea.textDir};for(var ra in P)P[ra]&&(za.inherited[ra]=P[ra])}return za.inherited}var E=[],z=[],D={},F=(q.scope||u._scopeName)+"Type",J="data-"+(q.scope||u._scopeName)+
"-",L=J+"type",Q=J+"textdir";J+="mixins";var ba=y.firstChild,fa=q.inherited;if(!fa){fa=function ra(P,ea){return P.getAttribute&&P.getAttribute(ea)||P.parentNode&&ra(P.parentNode,ea)};fa={dir:fa(y,"dir"),lang:fa(y,"lang"),textDir:fa(y,Q)};for(var Y in fa)fa[Y]||delete fa[Y]}Y={inherited:fa};for(var ma,ca;;)if(ba)if(1!=ba.nodeType)ba=ba.nextSibling;else if(ma&&"script"==ba.nodeName.toLowerCase())(fa=ba.getAttribute("type"))&&/^dojo\/\w/i.test(fa)&&ma.push(ba),ba=ba.nextSibling;else if(ca)ba=ba.nextSibling;
else if(fa=ba.getAttribute(L)||ba.getAttribute(F),y=ba.firstChild,fa||y&&(3!=y.nodeType||y.nextSibling)){ca=null;if(fa){var la=ba.getAttribute(J);ma=la?[fa].concat(la.split(/\s*,\s*/)):[fa];try{ca=r(ma,q.contextRequire)}catch(za){}ca||A.forEach(ma,function(za){~za.indexOf("/")&&!D[za]&&(D[za]=!0,z[z.length]=za)});la=ca&&!ca.prototype._noScript?[]:null;Y={types:ma,ctor:ca,parent:Y,node:ba,scripts:la};Y.inherited=x(Y);E.push(Y)}else Y={node:ba,scripts:ma,parent:Y};ma=la;ca=ba.stopParser||ca&&ca.prototype.stopParser&&
!q.template;ba=y}else ba=ba.nextSibling;else{if(!Y||!Y.node)break;ba=Y.node.nextSibling;ca=!1;Y=Y.parent;ma=Y.scripts}var ta=new b;z.length?(q.contextRequire||e)(z,function(){ta.resolve(A.filter(E,function(za){if(!za.ctor)try{za.ctor=r(za.types,q.contextRequire)}catch(ra){}for(var P=za.parent;P&&!P.types;)P=P.parent;var ea=za.ctor&&za.ctor.prototype;za.instantiateChildren=!(ea&&ea.stopParser&&!q.template);za.instantiate=!P||P.instantiate&&P.instantiateChildren;return za.instantiate}))}):ta.resolve(E);
return ta.promise},_require:function(y,q){y=h("{"+y.innerHTML+"}");var x=[],E=[],z=new b;q=q&&q.contextRequire||e;for(var D in y)x.push(D),E.push(y[D]);q(E,function(){for(var F=0;F<x.length;F++)B.setObject(x[F],arguments[F]);z.resolve(arguments)});return z.promise},_scanAmd:function(y,q){var x=new b,E=x.promise;x.resolve(!0);var z=this;t("script[type\x3d'dojo/require']",y).forEach(function(D){E=E.then(function(){return z._require(D,q)});D.parentNode.removeChild(D)});return E},parse:function(y,q){!y||
"string"==typeof y||"nodeType"in y||(q=y,y=q.rootNode);var x=y?l.byId(y):k.body();q=q||{};var E=q.template?{template:!0}:{},z=[],D=this;y=this._scanAmd(x,q).then(function(){return D.scan(x,q)}).then(function(F){return D._instantiate(F,E,q,!0)}).then(function(F){return z=z.concat(F)}).otherwise(function(F){console.error("dojo/parser::parse() error",F);throw F;});B.mixin(z,y);return z}};u.parser=w;p.parseOnLoad&&m(100,w,"parse");return w})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],
function(e,u){var B={};e.setObject("dojo.date.stamp",B);B.fromISOString=function(A,p){B._isoRegExp||(B._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var l=B._isoRegExp.exec(A);A=null;if(l){l.shift();l[1]&&l[1]--;l[6]&&(l[6]*=1E3);p&&(p=new Date(p),u.forEach(u.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(d){return p["get"+d]()}),function(d,c){l[c]=l[c]||d}));A=new Date(l[0]||1970,l[1]||
0,l[2]||1,l[3]||0,l[4]||0,l[5]||0,l[6]||0);100>l[0]&&A.setFullYear(l[0]||1970);var k=0,g=l[7]&&l[7].charAt(0);"Z"!=g&&(k=60*(l[8]||0)+(Number(l[9])||0),"-"!=g&&(k*=-1));g&&(k-=A.getTimezoneOffset());k&&A.setTime(A.getTime()+6E4*k)}return A};B.toISOString=function(A,p){var l=function(c){return 10>c?"0"+c:c};p=p||{};var k=[],g=p.zulu?"getUTC":"get",d="";"time"!=p.selector&&(d=A[g+"FullYear"](),d=["0000".substr((d+"").length)+d,l(A[g+"Month"]()+1),l(A[g+"Date"]())].join("-"));k.push(d);"date"!=p.selector&&
(d=[l(A[g+"Hours"]()),l(A[g+"Minutes"]()),l(A[g+"Seconds"]())].join(":"),g=A[g+"Milliseconds"](),p.milliseconds&&(d+="."+(100>g?"0":"")+l(g)),p.zulu?d+="Z":"time"!=p.selector&&(A=A.getTimezoneOffset(),p=Math.abs(A),d+=(0<A?"-":"+")+l(Math.floor(p/60))+":"+l(p%60)),k.push(d));return k.join("T")};return B})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(e,u,B,A,p){var l={show:function(k){if(k=l.getNode(k))k.style.display="block"},
getNode:function(k){return k&&k.domNode||k},hide:function(k){if(k=l.getNode(k))k.style.display="none"},toggle:function(k){if(k=l.getNode(k))k.style.display="none"===k.style.display?"block":"none"},documentBox:8>=p("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(k){if(k=this.getNode(k)){var g=0,d=0,c=0,a=0,b=0,f=0;return[u.connect(k,"ontouchstart",function(t){g=t.touches[0].screenX;d=t.touches[0].screenY;
c=k.scrollWidth;a=k.scrollHeight;b=k.clientWidth;f=k.clientHeight}),u.connect(k,"ontouchmove",function(t){t.preventDefault();var n=k.firstChild;n instanceof Text&&(n=k.childNodes[1]);var m=n._currentX||0,h=n._currentY||0;m+=t.touches[0].screenX-g;0<m?m=0:0>m&&Math.abs(m)+b>c&&(m=-1*(c-b));n._currentX=m;h+=t.touches[0].screenY-d;0<h?h=0:0>h&&Math.abs(h)+f>a&&(h=-1*(a-f));n._currentY=h;A.set(n,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+m+"px, "+h+"px)"});g=t.touches[0].screenX;
d=t.touches[0].screenY})]}}};return l})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(e,u,B,A){return e(A.Credential,{})})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r){var C={},w=function(z){var D=(new l(z.owningSystemUrl)).host;z=(new l(z.server)).host;var F=/.+\.arcgis\.com$/i;return F.test(D)&&F.test(z)},y=function(z,D){return!!(w(z)&&D&&A.some(D,function(F){return F.test(z.server)}))},q=null,x=null;try{q=window.localStorage,x=window.sessionStorage}catch(z){}k=e(h,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=B.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();d(window,"pageshow",B.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:t.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(z){var D=this.serverInfos;D?(z=A.filter(z,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=D.concat(z)):
this.serverInfos=z;A.forEach(z,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var J=a.defaults.io.corsEnabledServers,L=this._getOrigin(F.tokenServiceUrl);t.canUseXhr(F.server)||J.push(F.server.replace(/^https?:\/\//i,""));t.canUseXhr(L)||J.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(z){var D=this.oAuthInfos;D?(A.forEach(z,function(F){(F=this.findOAuthInfo(F.portalUrl))&&D.splice(D.indexOf(F),1)},this),
this.oAuthInfos=D.concat(z)):this.oAuthInfos=z},registerToken:function(z){z=b.mixin({},z);var D=this._sanitizeUrl(z.server),F=this.findServerInfo(D),J=!0,L;F||(F=new f,F.server=this._getServerInstanceRoot(D),F.tokenServiceUrl=this._getTokenSvcUrl(D),F.hasPortal=!0,this.registerServers([F]));(L=this.findCredential(D,z.userId))?(delete z.server,B.mixin(L,z),J=!1):(L=new E({userId:z.userId,server:F.server,token:z.token,expires:z.expires,ssl:z.ssl,scope:this._isServerRsrc(D)?"server":"portal"}),L.resources=
[D],this.credentials.push(L));L.onTokenChange(!1);J||L.refreshServerTokens()},toJson:function(){return b.fixJson({serverInfos:A.map(this.serverInfos,function(z){return z.toJson()}),oAuthInfos:A.map(this.oAuthInfos,function(z){return z.toJson()}),credentials:A.map(this.credentials,function(z){return z.toJson()})})},initialize:function(z){if(z){B.isString(z)&&(z=JSON.parse(z));var D=z.serverInfos,F=z.oAuthInfos;z=z.credentials;if(D){var J=[];A.forEach(D,function(Q){Q.server&&Q.tokenServiceUrl&&J.push(Q.declaredClass?
Q:new f(Q))});J.length&&this.registerServers(J)}if(F){var L=[];A.forEach(F,function(Q){Q.appId&&L.push(Q.declaredClass?Q:new r(Q))});L.length&&this.registerOAuthInfos(L)}z&&A.forEach(z,function(Q){Q.userId&&Q.server&&Q.token&&Q.expires&&Q.expires>(new Date).getTime()&&(Q=Q.declaredClass?Q:new E(Q),Q.onTokenChange(),this.credentials.push(Q))},this)}},findServerInfo:function(z){var D;z=this._sanitizeUrl(z);A.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,z)&&(D=F);return!!D},
this);return D},findOAuthInfo:function(z){var D;z=this._sanitizeUrl(z);A.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,z)&&(D=F);return!!D},this);return D},findCredential:function(z,D){var F;z=this._sanitizeUrl(z);var J=this._isServerRsrc(z)?"server":"portal";D?A.some(this.credentials,function(L){this._hasSameServerInstance(L.server,z)&&D===L.userId&&L.scope===J&&(F=L);return!!F},this):A.some(this.credentials,function(L){this._hasSameServerInstance(L.server,z)&&-1!==this._getIdenticalSvcIdx(z,
L)&&L.scope===J&&(F=L);return!!F},this);return F},getCredential:function(z,D){var F=!0;if(b.isDefined(D))if(B.isObject(D)){var J=!!D.token;var L=D.error;F=!1!==D.prompt}else J=D;z=this._sanitizeUrl(z);var Q=new p(n._dfdCanceller),ba=this._isAdminResource(z);if((J=J?this.findCredential(z):null)&&L&&498===L.code)J.destroy();else if(J)return z=Error("You are currently signed in as: '"+J.userId+"'. You do not have access to this resource: "+z),z.name="identity-manager:not-authorized",z.code="IdentityManagerBase.1",
z.httpCode=L&&L.httpCode,z.messageCode=L?L.messageCode:null,z.subcode=L?L.subcode:null,z.details=L?L.details:null,z.log=!!u.isDebug,Q.errback(z),Q;if(L=this._findCredential(z,D))return Q.callback(L),Q;var fa=this.findServerInfo(z);if(fa)!fa.hasServer&&this._isServerRsrc(z)&&(fa._restInfoDfd=this._getTokenSvcUrl(z,!0),fa.hasServer=!0);else{L=this._getTokenSvcUrl(z);if(!L)return z=Error("Unknown resource - could not find token service endpoint."),z.name="identity-manager:unknown-resource",z.code="IdentityManagerBase.2",
z.log=!!u.isDebug,Q.errback(z),Q;fa=new f;fa.server=this._getServerInstanceRoot(z);B.isString(L)?(fa.tokenServiceUrl=L,fa.hasPortal=!0):(fa._restInfoDfd=L,fa.hasServer=!0);this.registerServers([fa])}fa.hasPortal&&void 0===fa._selfReq&&(F||t.hasSameOrigin(fa.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(Y){return Y.tokenServiceUrl===fa.tokenServiceUrl}))&&(fa._selfReq={owningTenant:D&&D.owningTenant,selfDfd:this._getPortalSelf(fa.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),z)});return this._enqueue(z,fa,D,Q,ba)},getResourceName:function(z){return this._isRESTService(z)?z.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(z)&&z.replace(this._gwUser,"$1")||this._gwItem.test(z)&&z.replace(this._gwItem,"$1")||this._gwGroup.test(z)&&z.replace(this._gwGroup,"$1")||""},generateToken:function(z,D,F){var J=this._rePortalTokenSvc.test(z.tokenServiceUrl),L=new l(window.location.href.toLowerCase()),Q=!D;var ba=z.shortLivedTokenValidity;
if(D){var fa=c.id.tokenValidity||ba||c.id.defaultTokenValidity;fa>ba&&(fa=ba)}if(F){var Y=F.isAdmin;var ma=F.serverUrl;var ca=F.token;var la=F.ssl;z.customParameters=F.customParameters}if(Y)ba=z.adminTokenServiceUrl;else{ba=z.tokenServiceUrl;var ta=new l(ba.toLowerCase());z.webTierAuth&&F&&F.serverUrl&&!la&&"http"===L.scheme&&(t.hasSameOrigin(L.uri,ba,!0)||"https"===ta.scheme&&L.host===ta.host&&"7080"===L.port&&"7443"===ta.port)&&(ba=ba.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));Q&&J&&
(ba=ba.replace(/\/rest/i,""))}Y=B.mixin({url:ba,content:B.mixin({request:"getToken",username:D&&D.username,password:D&&D.password,serverUrl:ma,token:ca,expiration:fa,referer:Y||J?window.location.host:null,client:Y?"referer":null,f:"json"},z.customParameters),handleAs:"json",callbackParamName:Q?"callback":void 0},F&&F.ioArgs);F={usePost:!Q,disableIdentityLookup:!0,useProxy:this._useProxy(z,F)};J||(Y.withCredentials=!1);J=m(Y,F);J.addCallback(function(za){if(!za||!za.token)return za=Error("Unable to generate token"),
za.name="identity-manager:authentication-failed",za.code="IdentityManagerBase.3",za.log=!!u.isDebug,za;var P=z.server;C[P]||(C[P]={});D&&(C[P][D.username]=D.password);za.validity=fa;return za});J.addErrback(function(za){});return J},isBusy:function(){return!!this._busy},checkSignInStatus:function(z){var D=new p;this.checkAppAccess(z,"").then(function(F){D.resolve(F.credential)}).catch(function(F){D.reject(F)});return D},checkAppAccess:function(z,D,F){var J=this,L=!1;return this.getCredential(z,{prompt:!1}).then(function(Q){var ba=
{f:"json"};if("portal"===Q.scope)if(D&&(J._doPortalSignIn(z)||F&&F.force)){var fa=Q.server+"/sharing/rest/oauth2/validateAppAccess";ba.client_id=D}else if(Q.token)fa=Q.server+"/sharing/rest";else return{credential:Q};else if(Q.token)fa=Q.server+"/rest/services";else return{credential:Q};Q.token&&(ba.token=Q.token);return m({url:fa,content:ba,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(Y){if(!1===Y.valid){var ma=Error("You are currently signed in as: '"+Q.userId+"'.  You do not have access to this app: '"+
D+"'.");ma.name="identity-manager:not-authorized";ma.code="IdentityManagerBase.1";ma.log=!!u.isDebug;ma.details=Y;throw ma;}L=!!Y.viewOnlyUserTypeApp;return{credential:Q}}).catch(function(Y){if("IdentityManagerBase.1"===Y.code||400===Y.code)throw 400===Y.code&&(Y.name="identity-manager:invalid-request"),Y;if(498===Y.code)throw Q.destroy(),Y=Error("User is not signed in."),Y.name="identity-manager:not-authenticated",Y.code="IdentityManagerBase.6",Y.log=!!u.isDebug,Y;return{credential:Q}})}).then(function(Q){return{credential:Q.credential,
viewOnly:L}})},setProtocolErrorHandler:function(z){this._protocolFunc=z},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var z=this.credentials.slice();A.forEach(z,function(D){D.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(z){z||(z="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
d(window,"message",function(D){(D.origin===window.location.origin||b.endsWith(D.origin,".arcgis.com"))&&D.data&&"arcgis:auth:requestCredential"===D.data.type&&this.getCredential(z).then(function(F){D.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},D.origin)}).catch(function(F){D.source.postMessage({type:"arcgis:auth:error",error:{name:F.name,message:F.message}},D.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthHash:function(){var z=window.location.hash;if(z){"#"===z.charAt(0)&&(z=z.substring(1));z=g.queryToObject(z);var D=!1;if(z.access_token&&z.expires_in&&z.state&&z.hasOwnProperty("username"))try{z.state=JSON.parse(z.state),"object"===typeof z.state&&z.state.portalUrl&&(this._oAuthHash=z,D=!0)}catch(F){}else z.error&&z.error_description&&(console.log("IdentityManager OAuth Error: ",z.error," - ",z.error_description),"access_denied"===
z.error&&(D=!0));D&&(window.location.hash=z.state&&z.state.hash||"")}},_pageShowHandler:function(z){z.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(z=Error("ABORTED"),z.name="identity-manager:user-aborted",z.code="IdentityManager.2",z.log=!!u.isDebug,this._errbackFunc(z))},_findCredential:function(z,D){var F=-1,J,L,Q=D&&D.token;D=D&&D.resource;var ba=this._isServerRsrc(z)?"server":"portal",fa=A.filter(this.credentials,function(la){return this._hasSameServerInstance(la.server,z)&&la.scope===
ba},this);z=D||z;if(fa.length)if(1===fa.length){D=fa[0];var Y=(J=(L=this.findServerInfo(D.server))&&L.owningSystemUrl)&&this.findCredential(J,D.userId);F=this._getIdenticalSvcIdx(z,D);if(Q)-1!==F&&(D.resources.splice(F,1),this._removeResource(z,Y));else return-1===F&&D.resources.push(z),this._addResource(z,Y),D}else{var ma,ca;A.some(fa,function(la){ca=this._getIdenticalSvcIdx(z,la);return-1!==ca?(ma=la,Y=(J=(L=this.findServerInfo(ma.server))&&L.owningSystemUrl)&&this.findCredential(J,ma.userId),F=
ca,!0):!1},this);if(Q)ma&&(ma.resources.splice(F,1),this._removeResource(z,Y));else if(ma)return this._addResource(z,Y),ma}},_findOAuthInfo:function(z){var D=this.findOAuthInfo(z);D||A.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,z)&&(D=F);return!!D},this);return D},_addResource:function(z,D){D&&-1===this._getIdenticalSvcIdx(z,D)&&D.resources.push(z)},_removeResource:function(z,D){var F=-1;D&&(F=this._getIdenticalSvcIdx(z,D),-1<F&&D.resources.splice(F,1))},_useProxy:function(z,
D){return D&&D.isAdmin&&!t.hasSameOrigin(z.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(z.tokenServiceUrl)&&10.1==z.currentVersion&&!t.hasSameOrigin(z.tokenServiceUrl,window.location.href)},_getOrigin:function(z){z=new l(z);return z.scheme+"://"+z.host+(b.isDefined(z.port)?":"+z.port:"")},_getServerInstanceRoot:function(z){var D=z.toLowerCase(),F=D.indexOf(this._agsRest);-1===F&&this._isAdminResource(z)&&(F=this._agsAdmin.test(z)?z.replace(this._agsAdmin,"$1").length:z.search(this._adminSvcs));
-1===F&&(F=D.indexOf("/sharing"));-1===F&&"/"===D.substr(-1)&&(F=D.length-1);return-1<F?z.substring(0,F):z},_hasSameServerInstance:function(z,D){"/"===z.substr(-1)&&(z=z.slice(0,-1));z=z.toLowerCase();D=this._getServerInstanceRoot(D).toLowerCase();z=this._normalizeAGOLorgDomain(z);D=this._normalizeAGOLorgDomain(D);z=z.substr(z.indexOf(":"));D=D.substr(D.indexOf(":"));return z===D},_normalizeAGOLorgDomain:function(z){var D=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
J=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;D.test(z)?z=z.replace(D,"https://www.arcgis.com"):F.test(z)?z=z.replace(F,"https://devext.arcgis.com"):J.test(z)&&(z=z.replace(J,"https://qaext.arcgis.com"));return z},_sanitizeUrl:function(z){var D=(a.defaults.io.proxyUrl||"").toLowerCase(),F=D?z.toLowerCase().indexOf(D+"?"):-1;-1!==F&&(z=z.substring(F+D.length+1));z=t.normalize(z);return t.urlToObject(z).path},_isRESTService:function(z){return-1<z.indexOf(this._agsRest)},_isAdminResource:function(z){return this._agsAdmin.test(z)||
this._adminSvcs.test(z)},_isServerRsrc:function(z){return this._isRESTService(z)||this._isAdminResource(z)},_isIdenticalService:function(z,D){if(this._isRESTService(z)&&this._isRESTService(D)){z=this._getSuffix(z).toLowerCase();D=this._getSuffix(D).toLowerCase();var F=z===D;F||(F=/(.*)\/(MapServer|FeatureServer).*/ig,F=z.replace(F,"$1")===D.replace(F,"$1"))}else this._isAdminResource(z)&&this._isAdminResource(D)?F=!0:this._isServerRsrc(z)||this._isServerRsrc(D)||!this._isPortalDomain(z)||(F=!0);return F},
_isPortalDomain:function(z){var D=new l(z.toLowerCase()),F=this._portalConfig;z=A.some(this._gwDomains,function(J){return J.regex.test(D.uri)});!z&&F&&(z=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),D.uri));z||(!this._arcgisUrl&&(F=B.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new l(F)).authority),this._arcgisUrl&&(z=this._arcgisUrl.toLowerCase()===D.authority));z||(z=A.some(this._portals,function(J){return this._hasSameServerInstance(J,D.uri)},this));return z=
z||this._agsPortal.test(D.path)},_isIdProvider:function(z,D){var F=-1,J=-1;A.forEach(this._gwDomains,function(fa,Y){-1===F&&fa.regex.test(z)&&(F=Y);-1===J&&fa.regex.test(D)&&(J=Y)});var L=!1;if(-1<F&&-1<J)if(0===F||4===F){if(0===J||4===J)L=!0}else if(1===F){if(1===J||2===J)L=!0}else 2===F?2===J&&(L=!0):3===F&&3===J&&(L=!0);if(!L){var Q=this.findServerInfo(D),ba=Q&&Q.owningSystemUrl;ba&&w(Q)&&this._isPortalDomain(ba)&&this._isIdProvider(z,ba)&&(L=!0)}return L},_isPublic:function(z){z=this._sanitizeUrl(z);
return A.some(this._publicUrls,function(D){return D.test(z)})},_getIdenticalSvcIdx:function(z,D){var F=-1;A.some(D.resources,function(J,L){return this._isIdenticalService(z,J)?(F=L,!0):!1},this);return F},_getSuffix:function(z){return z.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(z){if(this._isRESTService(z)||this._isAdminResource(z)){var D=this._getServerInstanceRoot(z);var F=D+"/admin/generateToken";z=D+"/rest/info";D=m({url:z,content:{f:"json"},
handleAs:"json",callbackParamName:"callback"});D.adminUrl_=F;return D}if(this._isPortalDomain(z)){var J="";A.some(this._gwDomains,function(L){L.regex.test(z)&&(J=L.tokenServiceUrl);return!!J});J||A.some(this._portals,function(L){this._hasSameServerInstance(L,z)&&(J=L+this._gwTokenUrl);return!!J},this);J||(F=z.toLowerCase().indexOf("/sharing"),-1!==F&&(J=z.substring(0,F)+this._gwTokenUrl));J||(J=this._getOrigin(z)+this._gwTokenUrl);J&&(F=(new l(z)).port,/^http:\/\//i.test(z)&&"7080"===F&&(J=J.replace(/:7080/i,
":7443")),J=J.replace(/http:/i,"https:"));return J}if(-1!==z.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(z,D,F){return m({url:z+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:D,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(J){return J.token})},_getPlatformSelf:function(z,D){return m({url:z+"/sharing/rest/oauth2/platformSelf",content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":D,
"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(z,D){var F="";A.some(this._gwDomains,function(J){J.regex.test(z)&&(F=J.customBaseUrl);return!!F});if(F)return D=new p,D.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0}),D;"https:"===window.location.protocol?z=z.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(D)&&(z=z.replace(/^https:/i,
"http:").replace(/:7443/i,":7080"));return m({url:z,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_doPortalSignIn:function(z){var D=this._portalConfig,F=window.location.href,J=this.findServerInfo(z);return(D||this._isPortalDomain(F))&&(J?J.hasPortal||J.owningSystemUrl&&this._isPortalDomain(J.owningSystemUrl):this._isPortalDomain(z))&&(this._isIdProvider(F,z)||D&&(this._hasSameServerInstance(this._getServerInstanceRoot(D.restBaseUrl),z)||
this._isIdProvider(D.restBaseUrl,z))||t.hasSameOrigin(F,z,!0))?!0:!1},_checkProtocol:function(z,D,F,J){var L=!0;J=J?D.adminTokenServiceUrl:D.tokenServiceUrl;0!==B.trim(J).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||a.defaults.io.useCors&&(t.canUseXhr(J)||t.canUseXhr(t.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:z,serverInfo:D}):!1,L||(z=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
z.name="identity-manager:aborted",z.code="IdentityManagerBase.4",z.log=!!u.isDebug,console.log(z.message),F(z)));return L},_enqueue:function(z,D,F,J,L,Q){J||(J=new p(n._dfdCanceller));J.resUrl_=z;J.sinfo_=D;J.options_=F;J.admin_=L;J.refresh_=Q;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(z),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(J)):this._xoReqs.push(J):this._doSignIn(J);return J},_doSignIn:function(z){this._busy=
z;this._rejectOnPersistedPageShow=!1;var D=this,F=function(ma){var ca=z.options_&&z.options_.resource,la=z.resUrl_,ta=z.refresh_,za=!1;-1===A.indexOf(D.credentials,ma)&&(ta&&-1!==A.indexOf(D.credentials,ta)?(ta.userId=ma.userId,ta.token=ma.token,ta.expires=ma.expires,ta.validity=ma.validity,ta.ssl=ma.ssl,ta.creationTime=ma.creationTime,za=!0,ma=ta):D.credentials.push(ma));ma.resources||(ma.resources=[]);ma.resources.push(ca||la);ma.scope=D._isServerRsrc(la)?"server":"portal";ma.onTokenChange();ca=
D._soReqs;var P={};D._soReqs=[];A.forEach(ca,function(ea){if(!this._isIdenticalService(la,ea.resUrl_)){var ra=this._getSuffix(ea.resUrl_);P[ra]||(P[ra]=!0,ma.resources.push(ea.resUrl_))}},D);z.callback(ma);A.forEach(ca,function(ea){this._hasSameServerInstance(this._getServerInstanceRoot(la),ea.resUrl_)?ea.callback(ma):this._soReqs.push(ea)},D);D._busy=z.resUrl_=z.sinfo_=z.refresh_=null;if(!za)D.onCredentialCreate({credential:ma});D._soReqs.length?D._doSignIn(D._soReqs.shift()):D._xoReqs.length&&D._doSignIn(D._xoReqs.shift())},
J=function(ma){z.errback(ma);D._busy=z.resUrl_=z.sinfo_=z.refresh_=null;D._soReqs.length?D._doSignIn(D._soReqs.shift()):D._xoReqs.length&&D._doSignIn(D._xoReqs.shift())},L=function(ma,ca,la,ta){var za=z.sinfo_,P=!z.options_||!1!==z.options_.prompt,ea=za.hasPortal&&D._findOAuthInfo(z.resUrl_);if(ma)F(new E({userId:ma,server:za.server,token:la||null,expires:b.isDefined(ta)?Number(ta):null,ssl:!!ca}));else if(window!==window.parent&&D._appUrlObj.query&&D._appUrlObj.query["arcgis-auth-origin"]&&D._appUrlObj.query["arcgis-auth-portal"]&&
D._hasSameServerInstance(D._getServerInstanceRoot(D._appUrlObj.query["arcgis-auth-portal"]),z.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},D._appUrlObj.query["arcgis-auth-origin"]);var ra=d(window,"message",function(ua){if(ua.source===window.parent&&ua.data)if("arcgis:auth:credential"===ua.data.type)ra.remove(),F(new E(ua.data.credential));else if("arcgis:auth:error"===ua.data.type){ra.remove();ua=ua.data.error;switch(ua.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Aa=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Aa="IdentityManager.2";break;case "identity-manager:authentication-failed":Aa="IdentityManager.3";break;case "identity-manager:aborted":Aa="IdentityManager.4";break;case "identity-manager:not-authenticated":Aa="IdentityManager.6";break;case "identity-manager:invalid-request":Aa=400}var ya=Error(ua.message);ya.name=ua.name;ya.code=Aa;ya.log=!!u.isDebug;
J(ya)}})}else if(ea){var M=ea._oAuthCred;M||(ma=new v(ea,q),ca=new v(ea,x),ma.isValid()&&ca.isValid()?ma.expires>ca.expires?(M=ma,ca.destroy()):(M=ca,ma.destroy()):M=ma.isValid()?ma:ca,ea._oAuthCred=M);if(M.isValid()){var Z=new E({userId:M.userId,server:za.server,token:M.token,expires:M.expires,ssl:M.ssl,_oAuthCred:M});ea.appId!==M.appId&&D._doPortalSignIn(z.resUrl_)?z._pendingDfd=D._exchangeToken(Z.server,ea.appId,Z.token).then(function(ua){Z.token=ua;M.token=ua;M.save();F(Z)}).catch(function(){F(Z)}):
F(Z)}else if(D._oAuthHash&&D._hasSameServerInstance(ea.portalUrl,D._oAuthHash.state.portalUrl))ma=D._oAuthHash,Z=new E({userId:ma.username,server:za.server,token:ma.access_token,expires:(new Date).getTime()+1E3*Number(ma.expires_in),ssl:"true"===ma.ssl,oAuthState:ma.state,_oAuthCred:M}),M.storage=ma.persist?q:x,M.token=Z.token,M.expires=Z.expires,M.userId=Z.userId,M.ssl=Z.ssl,M.save(),D._oAuthHash=null,F(Z);else{var ka=function(){P?z._pendingDfd=D.oAuthSignIn(z.resUrl_,za,ea,z.options_).addCallbacks(F,
J):(qa=Error("User is not signed in."),qa.name="identity-manager:not-authenticated",qa.code="IdentityManagerBase.6",qa.log=!!u.isDebug,J(qa))};D._doPortalSignIn(z.resUrl_)?z._pendingDfd=D._getPlatformSelf(za.server,ea.appId).then(function(ua){var Aa=ua.portalUrl;!Aa||t.hasSameOrigin(Aa,window.location.origin,!0)?(Z=new E({server:za.server,userId:ua.username,token:ua.token}),F(Z)):ka()}).catch(ka):ka()}}else if(P)D._checkProtocol(z.resUrl_,za,J,z.admin_)&&(ma=z.options_,z.admin_&&(ma=ma||{},ma.isAdmin=
!0),z._pendingDfd=D.signIn(z.resUrl_,za,ma).addCallbacks(F,J));else{var qa=Error("User is not signed in.");qa.name="identity-manager:not-authenticated";qa.code="IdentityManagerBase.6";qa.log=!!u.isDebug;J(qa)}},Q=function(){var ma=z.sinfo_,ca=ma.owningSystemUrl,la=z.options_,ta;if(la){var za=la.token;var P=la.error;var ea=la.prompt}(ta=D._findCredential(ca,{token:za,resource:z.resUrl_}))||A.some(D.credentials,function(ra){this._isIdProvider(ca,ra.server)&&(ta=ra);return!!ta},D);ta?(la=D.findCredential(z.resUrl_,
ta.userId))?F(la):y(ma,D._legacyFed)?(la=ta.toJson(),la.server=ma.server,la.resources=null,F(new E(la))):(z._pendingDfd=D.generateToken(D.findServerInfo(ta.server),null,{serverUrl:z.resUrl_,token:ta.token,ssl:ta.ssl})).addCallbacks(function(ra){F(new E({userId:ta.userId,server:ma.server,token:ra.token,expires:b.isDefined(ra.expires)?Number(ra.expires):null,ssl:!!ra.ssl,isAdmin:z.admin_,validity:ra.validity}))},J):(D._busy=null,za&&(z.options_.token=null),(z._pendingDfd=D.getCredential(ca.replace(/\/?$/,
"/sharing"),{resource:z.resUrl_,owningTenant:ma.owningTenant,token:za,error:P,prompt:ea})).addCallbacks(function(ra){D._enqueue(z.resUrl_,z.sinfo_,z.options_,z,z.admin_)},function(ra){J(ra)}))};this._errbackFunc=J;var ba=z.sinfo_.owningSystemUrl,fa=this._isServerRsrc(z.resUrl_),Y=z.sinfo_._restInfoDfd;Y?Y.addCallbacks(function(ma){var ca=z.sinfo_;ca._restInfoDfd&&(ca.adminTokenServiceUrl=ca._restInfoDfd.adminUrl_,ca._restInfoDfd=null,ca.tokenServiceUrl=B.getObject("authInfo.tokenServicesUrl",!1,ma)||
B.getObject("authInfo.tokenServiceUrl",!1,ma)||B.getObject("tokenServiceUrl",!1,ma),ca.shortLivedTokenValidity=B.getObject("authInfo.shortLivedTokenValidity",!1,ma),ca.currentVersion=ma.currentVersion,ca.owningTenant=ma.owningTenant,(ma=ca.owningSystemUrl=ma.owningSystemUrl)&&D._portals.push(ma));fa&&ca.owningSystemUrl?Q():L()},function(){z.sinfo_._restInfoDfd=null;var ma=Error("Unknown resource - could not find token service endpoint.");ma.name="identity-manager:server-identification-failed";ma.code=
"IdentityManagerBase.2";ma.log=!!u.isDebug;J(ma)}):fa&&ba?Q():z.sinfo_._selfReq?z.sinfo_._selfReq.selfDfd.then(function(ma){var ca={};if(ma){var la=ma.user&&ma.user.username;ca.username=la;ca.allSSL=ma.allSSL;var ta=ma.supportsOAuth;var za=ma.currentVersion;if("multitenant"===ma.portalMode)var P=ma.customBaseUrl}z.sinfo_.webTierAuth=!!la;return la&&D.normalizeWebTierAuth?D.generateToken(z.sinfo_,null,{ssl:ca.allSSL}).addBoth(function(ea){ca.portalToken=ea&&ea.token;ca.tokenExpiration=ea&&ea.expires;
return ca}):!la&&ta&&4.4<=parseFloat(za)&&!D._findOAuthInfo(z.resUrl_)?D._generateOAuthInfo({portalUrl:z.sinfo_.server,customBaseUrl:P,owningTenant:z.sinfo_._selfReq.owningTenant}).always(function(){return ca}):ca}).always(function(ma){z.sinfo_._selfReq=null;ma?L(ma.username,ma.allSSL,ma.portalToken,ma.tokenExpiration):L()}):L()},_generateOAuthInfo:function(z){var D=this,F=z.portalUrl,J=z.customBaseUrl,L=z.owningTenant;if(z=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var Q=
window.location.href;var ba=Q.indexOf("?");-1<ba&&(Q=Q.slice(0,ba));ba=Q.search(/\/(apps|home)\//);Q=-1<ba?Q.slice(0,ba):null}z&&Q?(this._hasTestedIfAppIsOnPortal=!0,z=m({url:Q+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){D.defaultOAuthInfo=new r({appId:"arcgisonline",popupCallbackUrl:Q+"/home/oauth-callback.html"})})):(z=new p,z.resolve(),z=z.promise);return z.then(function(){if(D.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),m({url:F+"/sharing/rest/oauth2/validateRedirectUri",
content:{accountId:L,client_id:D.defaultOAuthInfo.appId,redirect_uri:t.getAbsoluteUrl(D.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(fa){if(fa.valid){var Y=D.defaultOAuthInfo.clone();Y.portalUrl=fa.urlKey&&J?"https://"+fa.urlKey.toLowerCase()+"."+J:F;Y.popup=window!==window.top||!(t.hasSameOrigin(F,window.location.origin)||D._gwDomains.some(function(ma){return ma.regex.test(F)&&ma.regex.test(window.location.origin)}));D.oAuthInfos.push(Y)}})})}});
var E=e(h,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(z){B.mixin(this,z);this.resources=this.resources||[];b.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var z=this,D=this.resources&&this.resources[0],F=c.id.findServerInfo(this.server),J=F&&F.owningSystemUrl,L=!!J&&"server"===this.scope,Q=L&&y(F,c.id._legacyFed),ba=L&&c.id.findServerInfo(J),fa,Y=(fa=F.webTierAuth)&&c.id.normalizeWebTierAuth,ma=C[this.server];
ma=ma&&ma[this.userId];var ca={username:this.userId,password:ma};if(!fa||Y)if(L&&!ba&&A.some(c.id.serverInfos,function(za){c.id._isIdProvider(J,za.server)&&(ba=za);return!!ba}),fa=ba&&c.id.findCredential(ba.server,this.userId),!L||fa)if(Q)fa.refreshToken();else{if(L)var la={serverUrl:D,token:fa&&fa.token,ssl:fa&&fa.ssl};else if(Y)ca=null,la={ssl:this.ssl};else if(ma)this.isAdmin&&(la={isAdmin:!0});else{if(D){D=c.id._sanitizeUrl(D);this._enqueued=1;var ta=c.id._enqueue(D,F,null,null,this.isAdmin,this);
ta.addCallback(function(){z._enqueued=0;z.refreshServerTokens()}).addErrback(function(){z._enqueued=0})}return ta}return c.id.generateToken(L?ba:F,L?null:ca,la).addCallback(function(za){z.token=za.token;z.expires=b.isDefined(za.expires)?Number(za.expires):null;z.creationTime=(new Date).getTime();z.validity=za.validity;z.onTokenChange();z.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&A.forEach(c.id.credentials,function(z){var D=c.id.findServerInfo(z.server),
F=D&&D.owningSystemUrl;z!==this&&z.userId===this.userId&&F&&"server"===z.scope&&(c.id._hasSameServerInstance(this.server,F)||c.id._isIdProvider(F,this.server))&&(y(D,c.id._legacyFed)?(z.token=this.token,z.expires=this.expires,z.creationTime=this.creationTime,z.validity=this.validity,z.onTokenChange()):z.refreshToken())},this)},onTokenChange:function(z){clearTimeout(this._refreshTimer);var D=this.server&&c.id.findServerInfo(this.server),F=(D=D&&D.owningSystemUrl)&&c.id.findServerInfo(D);!1!==z&&(!D||
"portal"===this.scope||F&&F.webTierAuth&&!c.id.normalizeWebTierAuth)&&(b.isDefined(this.expires)||b.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var z=A.indexOf(c.id.credentials,this);-1<z&&c.id.credentials.splice(z,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},
_toJson:function(){var z=b.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),D=this.resources;D&&0<D.length&&(z.resources=D.slice());return z},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var z=6E4*this.tokenRefreshBuffer,D=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>D&&
(F=D);this._refreshTimer=setTimeout(B.hitch(this,this.refreshToken),F>z?F-z:F)}});k.Credential=E;return k})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.ServerInfo",constructor:function(l){u.mixin(this,l)},toJson:function(){return p.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,
owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}})})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(e,u,B,A){return u(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(p,l){this.oAuthInfo=p;this.storage=l;this._init()},
isValid:function(){var p=!1;if(this.oAuthInfo&&this.token&&this.userId){var l=(new Date).getTime();this.expires>l&&(this.expires-l)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(p=!0)}return p},save:function(){if(this.storage){var p=this._load(),l=this.oAuthInfo;if(l&&l.authNamespace&&l.portalUrl){var k=p[l.authNamespace];k||(k=p[l.authNamespace]={});k[l.portalUrl]={appId:this.appId=l.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",
A.stringify(p))}catch(g){console.log(g)}}}},destroy:function(){var p=this._load(),l=this.oAuthInfo;if(l&&l.appId&&l.portalUrl&&this.token&&this.expires>Date.now()){var k=l.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",g=new FormData;g.append("f","json");g.append("auth_token",this.token);g.append("client_id",l.appId);g.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(k,g);else{var d=new XMLHttpRequest;d.open("POST",
k);d.send(g)}}if(l&&l.authNamespace&&l.portalUrl&&this.storage&&(k=p[l.authNamespace])){delete k[l.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",A.stringify(p))}catch(c){console.log(c)}}l&&(this.oAuthInfo=l._oAuthCred=null)},_init:function(){var p=this._load(),l=this.oAuthInfo;l&&l.authNamespace&&l.portalUrl&&(p=p[l.authNamespace])&&(p=p[l.portalUrl])&&(this.appId=p.appId,this.expires=p.expires,this.ssl=p.ssl,this.token=p.token,this.userId=p.userId)},_load:function(){var p={};if(this.storage){var l=
this.storage.getItem("esriJSAPIOAuth");if(l)try{p=A.parse(l)}catch(k){console.log(k)}}return p}})})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(e,u,B,A,p){var l=B(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(k){A.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",
preserveUrlHash:!1},k)},_oAuthCred:null,toJson:function(){return u.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new l(this.toJson())}});return l})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(e,u,B,A,p,l,k,g,d,c){A("dijit-legacy-requires")&&k(0,function(){e(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});k=u("dijit.form.Button"+(A("dojo-bidi")?"_NoBidi":""),[g,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=l.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&B.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){p.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=l.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});A("dojo-bidi")&&(k=u("dijit.form.Button",k,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return k})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(e,u,B,A,p,l,k,g){u("dijit-legacy-requires")&&A(0,function(){require(["dijit/form/_FormValueWidget"])});return e("dijit.form._FormWidget",[p,k,l,g],{setDisabled:function(d){B.deprecated("setDisabled("+d+") is deprecated. Use set('disabled',"+d+") instead.","","2.0");this.set("disabled",d)},setValue:function(d){B.deprecated("dijit.form._FormWidget:setValue("+d+") is deprecated.  Use set('value',"+d+") instead.","","2.0");this.set("value",d)},getValue:function(){B.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!u("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(e,u,B,A,p,l,k,g,d,c){return u("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(B.set(this.focusNode,"disabled",a),g("trident")&&"readOnly"in this&&B.set(this.focusNode,"readonly",a||this.readOnly)):this.focusNode.setAttribute("aria-disabled",a?"true":"false");
this.valueNode&&B.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",e.forEach(p.isArray(a)?a:[a],function(b){b=this[b];g("webkit")||c.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(k(this.focusNode,
"focus",function(){t.remove();b.remove()}))[0],f=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",t=this.own(k(this.ownerDocumentBody,f,p.hitch(this,function(n){t.remove();b.remove();this.focused&&("touchend"==n.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=A.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,
this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(e,u,B,A){var p=e("dijit.form._ButtonMixin"+(B("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(l){l.stopPropagation();l.preventDefault();this.disabled||this.valueNode.click(l);return!1},_onClick:function(l){if(this.disabled)return l.stopPropagation(),l.preventDefault(),!1;!1===this.onClick(l)&&l.preventDefault();var k=l.defaultPrevented;if(!k&&"submit"==this.type&&
!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var d=A.byNode(g);if(d&&"function"==typeof d._onSubmit){d._onSubmit(l);l.preventDefault();k=!0;break}}return!k},postCreate:function(){this.inherited(arguments);u.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(l){this._set("label",l);(this.containerNode||this.focusNode).innerHTML=l;this.onLabelSet()},onLabelSet:function(){}});B("dojo-bidi")&&(p=e("dijit.form._ButtonMixin",
p,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return p})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(e,u,B,A,p,l,k,g){return e("dijit.form.Form",[p,l,k,g],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(d){u.set(this.domNode,"encType",d);A("ie")&&(this.domNode.encoding=d);this._set("encType",d)},reset:function(d){var c={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:d?d.target:this.domNode,target:d?d.target:this.domNode};!1!==this.onReset(c)&&c.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(d){this.reset(d);d.stopPropagation();d.preventDefault();return!1},_onSubmit:function(d){var c=this.constructor.prototype;if(this.execute!=c.execute||this.onExecute!=c.onExecute)B.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(d)&&(d.stopPropagation(),d.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(e,u,B,A,p,l,k){var g=e("dijit.form.ValidationTextBox",p,{templateString:k,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(d,c){c!=g.prototype[d]&&(u.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+d+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(d){this._deprecateRegExp("regExpGen",d);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(d){this._deprecateRegExp("regExp",d)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(d,c){return(new RegExp("^(?:"+this._computeRegexp(c)+")"+(this.required?"":"?")+"$")).test(d)&&(!this.required||!this._isEmpty(d))&&(this._isEmpty(d)||void 0!==this.parse(d,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(d){return(this.trim?/^\s*$/:/^$/).test(d)},getErrorMessage:function(){var d="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:d;return this.required&&this._isEmpty(this.textbox.value)?c:d},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(d){var c="",a=this.disabled||this.isValid(d);a&&(this._maskValidSubsetError=!0);var b=this._isEmpty(this.textbox.value),f=!a&&d&&this._isValidSubset();this._set("state",a?"":((!this._hasBeenBlurred||
d)&&b||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&d)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=d&&f,c=this.getErrorMessage(d)):"Incomplete"==this.state?(c=this.getPromptMessage(d),this._maskValidSubsetError=!this._hasBeenBlurred||d):b&&(c=this.getPromptMessage(d));this.set("message",c);return a},displayMessage:function(d){d&&this.focused?l.show(d,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(d){this.constraints=B.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(d){!d.locale&&this.lang&&(d.locale=this.lang);this._set("constraints",d);this._refreshState()},_setPatternAttr:function(d){this._set("pattern",d);this._refreshState()},
_computeRegexp:function(d){var c=this.pattern;"function"==typeof c&&(c=c.call(this,d));if(c!=this._lastRegExp){var a="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+="(?:"+b+"|$)"}});try{"".search(a)}catch(b){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+
a+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=A.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(d){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(d){this._set("required",d);this.focusNode.setAttribute("aria-required",d);this._refreshState()},_setMessageAttr:function(d){this._set("message",d);this.displayMessage(d)},reset:function(){this._maskValidSubsetError=
!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){l.hide(this.domNode);this.inherited(arguments)}});return g})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(e,u,B,A,p,l,k,g,d,c,a){g=e("dijit.form.TextBox"+(k("dojo-bidi")?"_NoBidi":""),
[g,d],{templateString:c,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:k("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var b=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==b||"file"==b)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>k("ie")&&this.defer(function(){try{var b=B.getComputedStyle(this.domNode);if(b){var f=b.fontFamily;if(f){var t=this.domNode.getElementsByTagName("INPUT");if(t)for(b=0;b<t.length;b++)t[b].style.fontFamily=f}}}catch(n){}})},_setPlaceHolderAttr:function(b){this._set("placeHolder",b);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=u.create("span",{className:"dijitPlaceHolder dijitInputField"},
this.textbox,"after"),this.own(l(this._phspan,"mousedown",function(f){f.preventDefault()}),l(this._phspan,"touchend, pointerup, MSPointerUp",p.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(b));this._updatePlaceHolder()},_onInput:function(b){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},
_setValueAttr:function(b,f,t){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){A.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(b){A.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",b)},_onBlur:function(b){this.disabled||(this.inherited(arguments),
this._updatePlaceHolder(),k("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(b){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>k("ie")&&(g.prototype._isTextSelected=function(){var b=this.ownerDocument.selection.createRange();return b.parentElement()==this.textbox&&0<b.text.length},a._setSelectionRange=d._setSelectionRange=function(b,f,t){b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),
b.moveStart("character",-99999),b.moveStart("character",f),b.moveEnd("character",t-f),b.select())});k("dojo-bidi")&&(g=e("dijit.form.TextBox",g,{_setPlaceHolderAttr:function(b){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return g})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(e,u,B,A){return e("dijit.form._FormValueWidget",[B,A],{_layoutHackIE7:function(){if(7==u("ie"))for(var p=this.domNode,l=p.parentNode,
k=p.firstChild||p,g=k.style.filter,d=this;l&&0==l.clientHeight;)(function(){var c=d.connect(l,"onscroll",function(){d.disconnect(c);k.style.filter=(new Date).getMilliseconds();d.defer(function(){k.style.filter=g})})})(),l=l.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(e,u,B,A,p,l,k){return e("dijit.form._FormValueMixin",k,{readOnly:!1,_setReadOnlyAttr:function(g){l("trident")&&
"disabled"in this?u.set(this.focusNode,"readOnly",g||this.disabled):u.set(this.focusNode,"readOnly",g);this._set("readOnly",g)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(g,d){this._handleOnChange(g,d)},_handleOnChange:function(g,d){this._set("value",g);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,
!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(e,u,B,A,p,l,k,g){var d=u("dijit.form._TextBoxMixin"+(A("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(c,a,b){if(void 0!==c){var f=this.filter(c);
"string"!=typeof b&&(b=null===f||"number"==typeof f&&isNaN(f)?"":this.filter(this.format(f,this.constraints)),0!=this.compare(f,this.filter(this.parse(b,this.constraints)))&&(b=null))}null==b||"number"==typeof b&&isNaN(b)||this.textbox.value==b||(this.textbox.value=b,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[f,a])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(c){null==c?c="":"string"!=
typeof c&&(c=String(c));this.textbox.value=c;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(c){return null==c?"":c.toString?c.toString():c},parse:function(c){return c},_refreshState:function(){},onInput:function(){},_onInput:function(c){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||c);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(k(this.textbox,"keydown, keypress, paste, cut, compositionend",l.hitch(this,function(c){if("keydown"==c.type&&229!=c.keyCode){var a=c.keyCode;switch(a){case p.SHIFT:case p.ALT:case p.CTRL:case p.META:case p.CAPS_LOCK:case p.NUM_LOCK:case p.SCROLL_LOCK:return}if(!c.ctrlKey&&!c.metaKey&&
!c.altKey){switch(a){case p.NUMPAD_0:case p.NUMPAD_1:case p.NUMPAD_2:case p.NUMPAD_3:case p.NUMPAD_4:case p.NUMPAD_5:case p.NUMPAD_6:case p.NUMPAD_7:case p.NUMPAD_8:case p.NUMPAD_9:case p.NUMPAD_MULTIPLY:case p.NUMPAD_PLUS:case p.NUMPAD_ENTER:case p.NUMPAD_MINUS:case p.NUMPAD_PERIOD:case p.NUMPAD_DIVIDE:return}if(65<=a&&90>=a||48<=a&&57>=a||a==p.SPACE)return;a=!1;for(var b in p)if(p[b]===c.keyCode){a=!0;break}if(!a)return}}(a=32<=c.charCode?String.fromCharCode(c.charCode):c.charCode)||(a=65<=c.keyCode&&
90>=c.keyCode||48<=c.keyCode&&57>=c.keyCode||c.keyCode==p.SPACE?String.fromCharCode(c.keyCode):c.keyCode);a||(a=229);if("keypress"==c.type){if("string"!=typeof a)return;if("a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||" "===a)if(c.ctrlKey||c.metaKey||c.altKey)return}var f={faux:!0},t;for(t in c)/^(layer[XY]|returnValue|keyLocation)$/.test(t)||(b=c[t],"function"!=typeof b&&"undefined"!=typeof b&&(f[t]=b));l.mixin(f,{charOrCode:a,_wasConsumed:!1,preventDefault:function(){f._wasConsumed=!0;c.preventDefault()},
stopPropagation:function(){c.stopPropagation()}});this._lastInputProducingEvent=f;!1===this.onInput(f)&&(f.preventDefault(),f.stopPropagation());if(!f._wasConsumed&&9>=A("ie"))switch(c.keyCode){case p.TAB:case p.ESCAPE:case p.DOWN_ARROW:case p.UP_ARROW:case p.LEFT_ARROW:case p.RIGHT_ARROW:break;default:c.keyCode==p.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&k.emit(this.textbox,"input",{bubbles:!0})})}})),k(this.textbox,
"input",l.hitch(this,"_onInput")),k(this.domNode,"keypress",function(c){c.stopPropagation()}))},_blankValue:"",filter:function(c){if(null===c)return this._blankValue;if("string"!=typeof c)return c;this.trim&&(c=l.trim(c));this.uppercase&&(c=c.toUpperCase());this.lowercase&&(c=c.toLowerCase());this.propercase&&(c=c.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return c},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(c){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(c){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==c&&(this._selectOnClickHandle=k.once(this.domNode,"mouseup, touchend",l.hitch(this,function(a){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});A("dojo-bidi")&&(d=u("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=g._setSelectionRange=function(c,a,
b){c.setSelectionRange&&c.setSelectionRange(a,b)};d.selectInputText=g.selectInputText=function(c,a,b){c=B.byId(c);isNaN(a)&&(a=0);isNaN(b)&&(b=c.value?c.value.length:0);try{c.focus(),d._setSelectionRange(c,a,b)}catch(f){}};return d})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v){function r(){}var C=u("dijit._MasterTooltip",[t,n],{duration:b.defaultDuration,templateString:h,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new m(this.domNode);this.fadeIn=B.fadeIn({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onShow")});this.fadeOut=B.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onHide")})},show:function(y,q,x,E,z,D,F){if(!this.aroundNode||this.aroundNode!==
q||this.containerNode.innerHTML!=y)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=y;z&&this.set("textDir",z);this.containerNode.align=E?"right":"left";var J=f.around(this.domNode,q,x&&x.length?x:w.defaultPosition,!E,g.hitch(this,"orient")),L=J.aroundNodePos;"M"==J.corner.charAt(0)&&"M"==J.aroundCorner.charAt(0)?(this.connectorNode.style.top=L.y+(L.h-this.connectorNode.offsetHeight>>1)-J.y+"px",this.connectorNode.style.left=""):"M"==J.corner.charAt(1)&&
"M"==J.aroundCorner.charAt(1)?this.connectorNode.style.left=L.x+(L.w-this.connectorNode.offsetWidth>>1)-J.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");k.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=q;this.onMouseEnter=D||r;this.onMouseLeave=F||r}},orient:function(y,q,x,E,z){this.connectorNode.style.top="";var D=E.h;E=E.w;y.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[q+"-"+x];this.domNode.style.width="auto";var F=l.position(this.domNode);if(a("ie")||a("trident"))F.w+=2;l.setMarginBox(this.domNode,{w:Math.min(Math.max(E,1),F.w)});"B"==x.charAt(0)&&"B"==q.charAt(0)?(y=l.position(y),q=this.connectorNode.offsetHeight,
y.h>D?(this.connectorNode.style.top=D-(z.h+q>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(z.h/2-q/2,0),y.h-q)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,F.w-E)},_onShow:function(){a("ie")&&(this.domNode.style.filter="")},hide:function(y){this._onDeck&&this._onDeck[1]==y?this._onDeck=null:this.aroundNode===y&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=r},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});a("dojo-bidi")&&C.extend({_setAutoTextDir:function(y){this.applyTextDir(y);e.forEach(y.children,function(q){this._setAutoTextDir(q)},this)},_setTextDirAttr:function(y){this._set("textDir",y);"auto"==y?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});v.showTooltip=
function(y,q,x,E,z,D,F){x&&(x=e.map(x,function(J){return{after:"after-centered",before:"before-centered"}[J]||J}));w._masterTT||(v._masterTT=w._masterTT=new C);return w._masterTT.show(y,q,x,E,z,D,F)};v.hideTooltip=function(y){return w._masterTT&&w._masterTT.hide(y)};var w=u("dijit.Tooltip",t,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(y){e.forEach(this._connections||[],function(q){e.forEach(q,function(x){x.remove()})},this);this._connectIds=
e.filter(g.isArrayLike(y)?y:y?[y]:[],function(q){return A.byId(q,this.ownerDocument)},this);this._connections=e.map(this._connectIds,function(q){q=A.byId(q,this.ownerDocument);var x=this.selector,E=x?function(D){return c.selector(x,D)}:function(D){return D},z=this;return[c(q,E(d.enter),function(){z._onHover(this)}),c(q,E("focusin"),function(){z._onHover(this)}),c(q,E(d.leave),g.hitch(z,"_onUnHover")),c(q,E("focusout"),g.hitch(z,"set","state","DORMANT"))]},this);this._set("connectId",y)},addTarget:function(y){y=
y.id||y;-1==e.indexOf(this._connectIds,y)&&this.set("connectId",this._connectIds.concat(y))},removeTarget:function(y){y=e.indexOf(this._connectIds,y.id||y);0<=y&&(this._connectIds.splice(y,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);p.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var y=this.connectId;e.forEach(g.isArrayLike(y)?y:[y],this.addTarget,this)},getContent:function(y){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(y){if(!(this.state==y||"SHOW TIMER"==y&&"SHOWING"==this.state||"HIDE TIMER"==y&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(y){case "DORMANT":this._connectNode&&(w.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var q=this.getContent(this._connectNode);if(!q){this.set("state","DORMANT");return}w.show(q,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,g.hitch(this,"set","state","SHOWING"),g.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",y)}},_onHover:function(y){this._connectNode&&y!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=y;this.set("state","SHOW TIMER")},_onUnHover:function(y){this.set("state","HIDE TIMER")},open:function(y){this.set("state","DORMANT");this._connectNode=y;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");e.forEach(this._connections||[],function(y){e.forEach(y,function(q){q.remove()})},this);this.inherited(arguments)}});w._MasterTooltip=C;w.show=
v.showTooltip;w.hide=v.hideTooltip;w.defaultPosition=["after-centered","before-centered"];return w})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(e,u,B,A,p,l,k){function g(c,a,b,f){var t=l.getEffectiveBox(c.ownerDocument);c.parentNode&&"body"==String(c.parentNode.tagName).toLowerCase()||p.body(c.ownerDocument).appendChild(c);var n=null;e.some(a,function(v){var r=v.corner,C=v.pos,w=0,y=
{w:{L:t.l+t.w-C.x,R:C.x-t.l,M:t.w}[r.charAt(1)],h:{T:t.t+t.h-C.y,B:C.y-t.t,M:t.h}[r.charAt(0)]},q=c.style;q.left=q.right="auto";b&&(w=b(c,v.aroundCorner,r,y,f),w="undefined"==typeof w?0:w);var x=c.style,E=x.display,z=x.visibility;"none"==x.display&&(x.visibility="hidden",x.display="");q=u.position(c);x.display=E;x.visibility=z;E={L:C.x,R:C.x-q.w,M:Math.max(t.l,Math.min(t.l+t.w,C.x+(q.w>>1))-q.w)}[r.charAt(1)];z={T:C.y,B:C.y-q.h,M:Math.max(t.t,Math.min(t.t+t.h,C.y+(q.h>>1))-q.h)}[r.charAt(0)];C=Math.max(t.l,
E);x=Math.max(t.t,z);E=Math.min(t.l+t.w,E+q.w)-C;z=Math.min(t.t+t.h,z+q.h)-x;w+=q.w-E+(q.h-z);if(null==n||w<n.overflow)n={corner:r,aroundCorner:v.aroundCorner,x:C,y:x,w:E,h:z,overflow:w,spaceAvailable:y};return!w});n.overflow&&b&&b(c,n.aroundCorner,n.corner,n.spaceAvailable,f);a=n.y;var m=n.x,h=p.body(c.ownerDocument);/relative|absolute/.test(B.get(h,"position"))&&(a-=B.get(h,"marginTop"),m-=B.get(h,"marginLeft"));h=c.style;h.top=a+"px";h.left=m+"px";h.right="auto";return n}var d={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return k.place={at:function(c,a,b,f,t){b=e.map(b,function(n){var m={corner:n,aroundCorner:d[n],pos:{x:a.x,y:a.y}};f&&(m.pos.x+="L"==n.charAt(1)?f.x:-f.x,m.pos.y+="T"==n.charAt(0)?f.y:-f.y);return m});return g(c,b,t)},around:function(c,a,b,f,t){function n(D,F){z.push({aroundCorner:D,corner:F,pos:{x:{L:y,R:y+x,M:y+(x>>1)}[D.charAt(1)],y:{T:q,B:q+E,M:q+(E>>1)}[D.charAt(0)]}})}if("string"==typeof a||"offsetWidth"in a||"ownerSVGElement"in a){var m=u.position(a,!0);if(/^(above|below)/.test(b[0])){var h=
u.getBorderExtents(a),v=a.firstChild?u.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0},r=u.getBorderExtents(c),C=c.firstChild?u.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};m.y+=Math.min(h.t+v.t,r.t+C.t);m.h-=Math.min(h.t+v.t,r.t+C.t)+Math.min(h.b+v.b,r.b+C.b)}}else m=a;if(a.parentNode)for(h="absolute"==B.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){v=u.position(a,!0);r=B.getComputedStyle(a);/relative|absolute/.test(r.position)&&(h=!1);if(!h&&/hidden|auto|scroll/.test(r.overflow)){C=
Math.min(m.y+m.h,v.y+v.h);var w=Math.min(m.x+m.w,v.x+v.w);m.x=Math.max(m.x,v.x);m.y=Math.max(m.y,v.y);m.h=C-m.y;m.w=w-m.x}"absolute"==r.position&&(h=!0);a=a.parentNode}var y=m.x,q=m.y,x="w"in m?m.w:m.w=m.width,E="h"in m?m.h:(A.deprecated("place.around: dijit/place.__Rectangle: { x:"+y+", y:"+q+", height:"+m.height+", width:"+x+" } has been deprecated.  Please use { x:"+y+", y:"+q+", h:"+m.height+", w:"+x+" }","","2.0"),m.h=m.height),z=[];e.forEach(b,function(D){var F=f;switch(D){case "above-centered":n("TM",
"BM");break;case "below-centered":n("BM","TM");break;case "after-centered":F=!F;case "before-centered":n(F?"ML":"MR",F?"MR":"ML");break;case "after":F=!F;case "before":n(F?"TL":"TR",F?"TR":"TL");n(F?"BL":"BR",F?"BR":"BL");break;case "below-alt":F=!F;case "below":n(F?"BL":"BR",F?"TL":"TR");n(F?"BR":"BL",F?"TR":"TL");break;case "above-alt":F=!F;case "above":n(F?"TL":"TR",F?"BL":"BR");n(F?"TR":"TL",F?"BR":"BL");break;default:n(D.aroundCorner,D.corner)}});c=g(c,z,t,{w:x,h:E});c.aroundNodePos=m;return c}}})},
"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){var n=null,m=null;try{n=window.localStorage,m=window.sessionStorage}catch(h){}return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(h){this._oAuthRedirectFunc=h},oAuthSignIn:function(h,v,r,C){var w=this._oAuthDfd=new g;w.resUrl_=h;w.sinfo_=v;w.oinfo_=r;var y=!C||!1!==C.oAuthPopupConfirmation;if(!r.popup||!y)return this._doOAuthSignIn(h,v,r),w;this._nls||(this._nls=a.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());h=this.oAuthDialog;r=C&&C.error;C=C&&C.token;u.hide(h.errMsg_);r&&403==r.code&&C&&(c.set(h.errMsg_,"innerHTML",this._nls.forbidden),u.show(h.errMsg_));c.set(h.serverLink_,
{title:v.server,innerHTML:-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server});h.show();return w},setOAuthResponseHash:function(h){var v=this._oAuthDfd;this._oAuthDfd=null;if(v&&h)if(clearInterval(this._oAuthIntervalId),"#"===h.charAt(0)&&(h=h.substring(1)),h=b.queryToObject(h),h.error){var r="access_denied"===h.error;h=Error(r?"ABORTED":"OAuth: "+h.error+" - "+h.error_description);h.name=r?"identity-manager:user-aborted":"identity-manager:authentication-failed";h.code="IdentityManagerBase."+
(r?2:3);h.log=!!k.isDebug;v.errback(h)}else{r=v.oinfo_._oAuthCred;var C=new e({userId:h.username,server:v.sinfo_.server,token:h.access_token,expires:(new Date).getTime()+1E3*Number(h.expires_in),ssl:"true"===h.ssl,_oAuthCred:r});r.storage=h.persist?n:m;r.token=C.token;r.expires=C.expires;r.userId=C.userId;r.ssl=C.ssl;r.save();v.callback(C)}},_createOAuthDialog:function(){var h=this._nls,v=B.substitute(h,this._oAuthDialogContent);v=B.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
v);var r=new p({title:h.title,content:v,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var C=r.esriIdMgr_._oAuthDfd;r.hide_();r.esriIdMgr_._doOAuthSignIn(C.resUrl_,C.sinfo_,C.oinfo_)},cancel_:function(){var C=r.esriIdMgr_._oAuthDfd;r.esriIdMgr_._oAuthDfd=null;r.hide_();var w=Error("ABORTED");w.code="IdentityManager.2";w.log=!!k.isDebug;C.errback(w)},hide_:function(){u.hide(r.errMsg_);r.hide();p._DialogLevelManager.hide(r)}});h=r.domNode;r.btnSubmit_=l.byNode(d.query(".esriIdSubmit",
h)[0]);r.btnCancel_=l.byNode(d.query(".esriIdCancel",h)[0]);r.serverLink_=d.query(".serverLink",h)[0];r.errMsg_=d.query(".esriErrorMsg",h)[0];r.connect(r.btnSubmit_,"onClick",r.execute_);r.connect(r.btnCancel_,"onClick",r.onCancel);r.connect(r,"onCancel",r.cancel_);return r},_doOAuthSignIn:function(h,v,r){var C=this,w={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(w.hash=window.location.hash);w={client_id:r.appId,response_type:"token",state:t.stringify(w),expiration:r.expiration,
locale:r.locale,redirect_uri:r.popup?A.getAbsoluteUrl(r.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};r.forceLogin&&(w.force_login=!0);!r.popup&&this._doPortalSignIn(h)&&(w.redirectToUserOrgUrl=!0);var y=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",q=y+"?"+b.objectToQuery(w);if(r.popup){if(7===f("ie")){var x=window.open(r.popupCallbackUrl,"esriJSAPIOAuth",r.popupWindowFeatures);x.location=q}else x=window.open(q,"esriJSAPIOAuth",r.popupWindowFeatures);x?(x.focus(),
this._oAuthDfd.oAuthWin_=x,this._oAuthIntervalId=setInterval(function(){if(x.closed){clearInterval(C._oAuthIntervalId);var E=C._oAuthDfd;if(E){var z=Error("ABORTED");z.code="IdentityManager.2";z.log=!!k.isDebug;E.errback(z)}}},500)):(h=Error("ABORTED"),h.name="identity-manager:user-aborted",h.code="IdentityManager.2",h.log=!!k.isDebug,this._oAuthDfd.errback(h))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:w,authorizeUrl:y,resourceUrl:h,serverInfo:v,
oAuthInfo:r}):window.location=q}}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q,ba,fa){function Y(U){return!(!U||"BingMapsAerial"!==U.layerType&&"BingMapsAerial"!==U.type)}function ma(U){return!(!U||"BingMapsRoad"!==U.layerType&&"BingMapsRoad"!==U.type)}function ca(U){return Y(U)||ma(U)||!(!U||"BingMapsHybrid"!==U.layerType&&"BingMapsHybrid"!==U.type)}function la(U){return!(!U||"OpenStreetMap"!==U.layerType&&"OpenStreetMap"!==U.type)}function ta(U){return!!(U&&U.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(U.layerType)||
!U.layerType&&!U.type))}function za(U){return h({url:sb.arcgisUrl+"/"+U.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function P(U,Ga){var Fa={f:"json"};Ga&&(Fa.token=Ga);return h({url:U,content:Fa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function ea(U){!U.layerDefinition||U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.labelingInfo||(U.showLabels=!1);U.itemProperties.layerDefinition&&(U.layerDefinition?(U.layerDefinition.drawingInfo||
(U.layerDefinition.drawingInfo=U.itemProperties.layerDefinition.drawingInfo),m.isDefined(U.layerDefinition.definitionExpression)||(U.layerDefinition.definitionExpression=U.itemProperties.layerDefinition.definitionExpression),m.isDefined(U.layerDefinition.minScale)||(U.layerDefinition.minScale=U.itemProperties.layerDefinition.minScale),m.isDefined(U.layerDefinition.maxScale)||(U.layerDefinition.maxScale=U.itemProperties.layerDefinition.maxScale)):U.layerDefinition=U.itemProperties.layerDefinition);
!U.itemProperties.popupInfo||U.popupInfo||U.disablePopup||(U.popupInfo=U.itemProperties.popupInfo);m.isDefined(U.itemProperties.showLabels)&&!m.isDefined(U.showLabels)&&(U.showLabels=U.itemProperties.showLabels);m.isDefined(U.itemProperties.showLegend)&&!m.isDefined(U.showLegend)&&(U.showLegend=U.itemProperties.showLegend);m.isDefined(U.itemProperties.refreshInterval)&&!m.isDefined(U.refreshInterval)&&(U.refreshInterval=U.itemProperties.refreshInterval)}function ra(U){ea(U);U.itemProperties.layerDefinition&&
U.layerDefinition&&(!m.isDefined(U.layerDefinition.maximumTrackPoints)&&m.isDefined(U.itemProperties.layerDefinition.maximumTrackPoints)&&(U.layerDefinition.maximumTrackPoints=U.itemProperties.layerDefinition.maximumTrackPoints),!U.layerDefinition.definitionGeometry&&U.itemProperties.layerDefinition.definitionGeometry&&(U.layerDefinition.definitionGeometry=U.itemProperties.layerDefinition.definitionGeometry));U.itemProperties.purgeOptions&&!U.purgeOptions&&(U.purgeOptions=U.itemProperties.purgeOptions)}
function M(U,Ga){var Fa=new p;Ga=U.itemData;var xa=[],Ca=[];B.forEach(Ga.operationalLayers,function(La){if(La.itemId&&ta(La)){var Ha=La.url.toLowerCase();-1<Ha.indexOf("/featureserver")||-1<Ha.indexOf("/mapserver/")?(Ca.push(La),xa.push(za(La))):-1<Ha.indexOf("/mapserver")&&-1===Ha.indexOf("/mapserver/")&&(!La.layers||!m.isDefined(La.minScale)&&!m.isDefined(La.maxScale))?(Ca.push(La),xa.push(za(La))):-1<Ha.indexOf("/imageserver")?(Ca.push(La),xa.push(za(La))):-1<Ha.indexOf("/streamserver")&&(Ca.push(La),
xa.push(za(La)))}});Ga.baseMap&&Ga.baseMap.baseMapLayers&&B.forEach(Ga.baseMap.baseMapLayers,function(La){La.itemId&&"VectorTileLayer"!==La.layerType&&(Ca.push(La),xa.push(za(La)))});if(0<xa.length){var Ma={};(new d(xa)).addCallback(function(La){B.forEach(Ca,function(Ha,Oa){if((Oa=La[Oa][1])&&!(Oa instanceof Error)&&(Ma[Ha.itemId]=Oa,ta(Ha))){var Sa=Ha.url.toLowerCase();(-1<Sa.indexOf("/featureserver")||-1<Sa.indexOf("/mapserver/"))&&Oa.layers?B.forEach(Oa.layers,function(Xa){var bb="/featureserver/"+
Xa.id;(bb=Sa.match(bb+"$")==bb)||(bb="/mapserver/"+Xa.id,bb=Sa.match(bb+"$")==bb);bb&&(Ha.itemProperties=Xa,ea(Ha))}):-1<Sa.indexOf("/streamserver")?(Ha.itemProperties=Oa,ra(Ha)):-1<Sa.indexOf("/mapserver")?(Oa.layers&&!Ha.layers&&(Ha.layers=Oa.layers),m.isDefined(Oa.minScale)&&!m.isDefined(Ha.minScale)&&(Ha.minScale=Oa.minScale),m.isDefined(Oa.maxScale)&&!m.isDefined(Ha.maxScale)&&(Ha.maxScale=Oa.maxScale),m.isDefined(Oa.refreshInterval)&&!m.isDefined(Ha.refreshInterval)&&(Ha.refreshInterval=Oa.refreshInterval),
Oa.visibleLayers&&!Ha.visibleLayers&&(Ha.visibleLayers=Oa.visibleLayers)):-1<Sa.indexOf("/imageserver")&&(m.isDefined(Oa.minScale)&&!m.isDefined(Ha.minScale)&&(Ha.minScale=Oa.minScale),m.isDefined(Oa.maxScale)&&!m.isDefined(Ha.maxScale)&&(Ha.maxScale=Oa.maxScale),m.isDefined(Oa.refreshInterval)&&!m.isDefined(Ha.refreshInterval)&&(Ha.refreshInterval=Oa.refreshInterval),!Oa.popupInfo||Ha.popupInfo||Ha.disablePopup||(Ha.popupInfo=Oa.popupInfo),Oa.renderingRule&&!Ha.renderingRule&&(Ha.renderingRule=Oa.renderingRule,
Oa.renderingRule.functionName&&(Ha.renderingRule.rasterFunction=Oa.renderingRule.functionName)),Oa.bandIds&&!Ha.bandIds&&(Ha.bandIds=Oa.bandIds),Oa.mosaicRule&&!Ha.mosaicRule&&(Ha.mosaicRule=Oa.mosaicRule),Oa.format&&!Ha.format&&(Ha.format=Oa.format),m.isDefined(Oa.compressionQuality)&&!m.isDefined(Ha.compressionQuality)&&(Ha.compressionQuality=Oa.compressionQuality),!Oa.layerDefinition||!Oa.layerDefinition.definitionExpression||m.isDefined(Ha.layerDefinition)&&m.isDefined(Ha.layerDefinition.definitionExpression)||
(Ha.layerDefinition=Ha.layerDefinition||{},Ha.layerDefinition.definitionExpression=Oa.layerDefinition.definitionExpression),Oa=u.getObject("layerDefinition.drawingInfo.renderer",!1,Oa),null==u.getObject("layerDefinition.drawingInfo.renderer",!1,Ha)&&null!=Oa&&(Ha.layerDefinition=Ha.layerDefinition||{},Ha.layerDefinition.drawingInfo=Ha.layerDefinition.drawingInfo||{},Ha.layerDefinition.drawingInfo.renderer=Oa))}});U.relatedItemsData=Ma;Fa.callback(U)})}else Fa.callback(U);return Fa}function Z(U,Ga){var Fa=
new p,xa=U.itemData,Ca=xa.baseMap.baseMapLayers[0];if(ca(Ca))if(Ca.portalUrl&&f.id)delete Ga.bingMapsKey,f.id.checkSignInStatus(C.urlToObject(sb.arcgisUrl).path).then(u.hitch(null,function(La,Ha,Oa,Sa,Xa){P(Ca.portalUrl,Xa.token).then(u.hitch(null,qa,La,Ha,Oa,Sa),u.hitch(null,ua,La,Ha,Oa,Sa))},U,Ga,xa,Fa),u.hitch(null,function(La,Ha,Oa,Sa,Xa){P(Ca.portalUrl).then(u.hitch(null,qa,La,Ha,Oa,Sa),u.hitch(null,ua,La,Ha,Oa,Sa))},U,Ga,xa,Fa));else if(Ga.bingMapsKey){var Ma=new Eb({bingMapsKey:Ga.bingMapsKey,
mapStyle:Eb.MAP_STYLE_AERIAL});A.connect(Ma,"onLoad",u.hitch(this,function(){Fa.callback([U,Ga])}));A.connect(Ma,"onError",function(La){delete Ga.bingMapsKey;U.itemData=Aa(xa);Ca=U.itemData.baseMap.baseMapLayers[0];Ca.errors=[];Ca.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Fa.callback([U,Ga])})}else U.itemData=Aa(xa),Ca=U.itemData.baseMap.baseMapLayers[0],Ca.errors=[],Ca.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),
Fa.callback([U,Ga]);else Fa.callback([U,Ga]);return Fa}function ka(U){var Ga=new p;U=U.itemData;var Fa=U.baseMap&&U.baseMap.baseMapLayers;if($b&&!$b.supported())for(U=0;U<Fa.length;U++){var xa=Fa[U];if(!xa.isReference){if("VectorTileLayer"===xa.layerType){var Ca=xa.itemId;var Ma=U}break}}Ca?Za(Ca,!1).addBoth(function(La){var Ha=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;La&&La.item&&Ha.test(La.item.url)&&(Fa[Ma]={id:"FB_"+xa.id,layerType:"ArcGISTiledMapServiceLayer",
opacity:"opacity"in xa?xa.opacity:1,visibility:"visibility"in xa?xa.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ga.resolve()}):Ga.resolve();return Ga}function qa(U,Ga,Fa,xa,Ca){Ca.bingKey?(Ga.bingMapsKey=Ca.bingKey,Ca=new Eb({bingMapsKey:Ga.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL}),A.connect(Ca,"onLoad",u.hitch(this,function(){xa.callback([U,Ga])})),A.connect(Ca,"onError",function(Ma){delete Ga.bingMapsKey;U.itemData=Aa(Fa);Ma=U.itemData.baseMap.baseMapLayers[0];
Ma.errors=[];Ma.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});xa.callback([U,Ga])})):ua(U,Ga,Fa,xa)}function ua(U,Ga,Fa,xa){delete Ga.bingMapsKey;U.itemData=Aa(Fa);Fa=U.itemData.baseMap.baseMapLayers[0];Fa.errors=[];Fa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});xa.callback([U,Ga])}function Aa(U){Y(U.baseMap.baseMapLayers[0])?
U.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:ma(U.baseMap.baseMapLayers[0])?U.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:U.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return U}function ya(U,Ga,Fa,xa){var Ca=U.dynamicLayerInfos||U.layerInfos,Ma=Ga.layers;if(Ma&&Ca)if(xa.usePopupManager){var La;B.forEach(Ca,function($a){var cb=$a.id;if(!$a.subLayerIds)for($a=0;$a<Ma.length;$a++){var fb=Ma[$a];if(fb.id===cb&&fb.popupInfo&&!fb.disablePopup){La||(La={});La[cb]={infoTemplate:new Fa(fb.popupInfo),
layerUrl:fb.layerUrl};break}}});La&&U.setInfoTemplates(La)}else{var Ha=[],Oa=[],Sa=[],Xa=[],bb=[],Ta=[];B.forEach(Ca,function($a){var cb=$a.id;if(!$a.subLayerIds&&-1!==B.indexOf(U.visibleLayers,cb))for($a=0;$a<Ma.length;$a++){var fb=Ma[$a];if(fb.id===cb){Oa.push(cb);Ha.push(fb.popupInfo);Sa.push(fb.layerUrl||"");fb.layerDefinition&&fb.layerDefinition.definitionExpression?Xa.push(fb.layerDefinition.definitionExpression):Xa.push("");bb.push(m.isDefined(fb.minScale)?fb.minScale:null);Ta.push(m.isDefined(fb.maxScale)?
fb.maxScale:null);break}}});Ha.length&&(U.__popups=Ha,U.__popupIds=Oa,U.__popupUrls=Sa,U.__popupWhereClauses=Xa,U.__popupMinScales=bb,U.__popupMaxScales=Ta,U.__resourceInfo=Ga.resourceInfo)}}function G(U){if(!U)return!1;var Ga=(new k(sb.arcgisUrl)).authority;return-1!==U.indexOf(".arcgis.com/")||-1!==U.indexOf(Ga)}function I(U){return U?-1!==U.indexOf("/services.arcgisonline.com/")||-1!==U.indexOf("/server.arcgisonline.com/"):!1}function R(U){"https:"===location.protocol&&(G(U)||I(U))&&(U=U.replace("http:",
"https:"));return U}function X(U,Ga,Fa){var xa=[];U.displayLevels||(xa=B.map(U.resourceInfo.tileInfo.lods,function(La){return La.level}));if(U.exclusionAreas){var Ca=u.clone(U.exclusionAreas);Ca=B.map(Ca,function(La){La.geometry=new q(La.geometry);return La})}var Ma=U.resourceInfo&&"Raster"===U.resourceInfo.cacheType;Ma?(xa=U.layerDefinition&&U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.renderer,xa=new ac(R(U.url),{resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,
id:U.id,minScale:U.minScale,maxScale:U.maxScale,refreshInterval:U.refreshInterval,multidimensionalDefinition:U.multidimensionalDefinition,bandIds:U.bandIds,renderer:xa||null})):xa=new Q(R(U.url),{resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,displayLevels:U.displayLevels||xa,id:U.id,minScale:U.minScale,maxScale:U.maxScale,refreshInterval:U.refreshInterval,exclusionAreas:Ca});Fa.ignorePopups||(Ma&&U.popupInfo&&!U.disablePopup?xa.setInfoTemplate(new Ga(U.popupInfo)):ya(xa,U,Ga,
Fa));return xa}function W(U,Ga){if(!U||!Ga||0===Ga.length)return[];Ga=","+Ga+",";var Fa=[],xa,Ca=",";for(xa=0;xa<U.length;xa++)if(null!==U[xa].subLayerIds){if(-1===Ga.indexOf(","+U[xa].id+",")||-1<Ca.indexOf(","+U[xa].id+","))Ca+=U[xa].subLayerIds.toString()+","}else-1<Ga.indexOf(","+U[xa].id+",")&&-1===Ca.indexOf(","+U[xa].id+",")&&Fa.push(U[xa].id);return Fa}function sa(U,Ga,Fa){var xa=new zb;xa.format="png24";U.resourceInfo&&U.resourceInfo.supportedImageFormatTypes&&-1<U.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&
(xa.format="png32");xa=new hb(R(U.url),{resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,id:U.id,imageParameters:xa,minScale:U.minScale,maxScale:U.maxScale,refreshInterval:U.refreshInterval});var Ca=U.visibleLayers;if(!U.visibleLayers){var Ma="";B.forEach(xa.layerInfos,function(Ta){Ta.defaultVisibility&&(Ma+=(0<Ma.length?",":"")+Ta.id)});Ca=Ma}if(U.layers&&0<U.layers.length){var La=[],Ha=[],Oa,Sa=[],Xa,bb;B.forEach(U.layers,function(Ta){var $a=Ta.layerDefinition;$a&&$a.definitionExpression&&
(La[Ta.id]=$a.definitionExpression);if($a&&$a.source){Oa=null;bb=$a.source;if("mapLayer"===bb.type){var cb=B.filter(U.resourceInfo.layers,function(fb){return fb.id===bb.mapLayerId});cb.length&&(Oa=u.mixin(cb[0],Ta))}else Oa=u.mixin({},Ta);Oa&&(Oa.source=bb,delete Oa.popupInfo,Oa=new vb(Oa),U.visibleLayers&&(cb="string"==typeof U.visibleLayers?U.visibleLayers.split(","):U.visibleLayers,-1<B.indexOf(cb,Ta.id)?Oa.defaultVisibility=!0:Oa.defaultVisibility=!1),Ha.push(Oa))}$a&&null!=$a.transparency&&(cb=
$a.drawingInfo||{},null==cb.transparency&&(cb.transparency=$a.transparency,$a.drawingInfo=cb));$a&&$a.source&&$a.drawingInfo&&(Xa=new Gb($a.drawingInfo),Sa[Ta.id]=Xa)},this);0<La.length&&xa.setLayerDefinitions(La);0<Ha.length?(xa.setDynamicLayerInfos(Ha,!0),0<Sa.length&&xa.setLayerDrawingOptions(Sa,!0)):(Ca=W(xa.layerInfos,Ca),xa.setVisibleLayers(Ca))}else Ca=W(xa.layerInfos,Ca),xa.setVisibleLayers(Ca);Fa.ignorePopups||ya(xa,U,Ga,Fa);return xa}function T(U,Ga,Fa){var xa=new Db;xa.bandIds=U.bandIds;
null!=U.format&&(xa.format=U.format,null!=U.compressionQuality&&(xa.compressionQuality=U.compressionQuality));if(U.renderingRule&&U.renderingRule.rasterFunction){var Ca=new bc(U.renderingRule);xa.renderingRule=Ca}U.mosaicRule&&(Ca=new Qb(U.mosaicRule),xa.mosaicRule=Ca);m.isDefined(U.noData)&&(xa.noData=U.noData);m.isDefined(U.noDataInterpretation)&&(xa.noDataInterpretation=U.noDataInterpretation);m.isDefined(U.interpolation)&&(xa.interpolation=U.interpolation);Ca=U.layerType?"ArcGISImageServiceVectorLayer"===
U.layerType:!1;m.isDefined(U.layerType)||(Ca=U.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===U.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===U.resourceInfo.serviceDataType));xa={resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,id:U.id,imageServiceParameters:xa,minScale:U.minScale,maxScale:U.maxScale,refreshInterval:U.refreshInterval};xa=Ca?new Jb(R(U.url),xa):new jb(R(U.url),xa);U.layerDefinition&&(U.layerDefinition.drawingInfo&&
U.layerDefinition.drawingInfo.renderer&&(Ca=z.fromJson(U.layerDefinition.drawingInfo.renderer),xa.setRenderer(Ca)),U.layerDefinition.definitionExpression&&xa.setDefinitionExpression(U.layerDefinition.definitionExpression,!0));Fa.ignorePopups||!U.popupInfo||U.disablePopup||xa.setInfoTemplate(new Ga(U.popupInfo));return xa}function S(U,Ga,Fa){var xa=[102113,102100,3857],Ca=Fa||new v(Ga[0].layerObject.fullExtent.spatialReference),Ma=new v(U.resourceInfo.fullExtent.spatialReference);return Ca.wkt==Ma.wkt&&
(Ca.wkid==Ma.wkid||m.isDefined(Ca.latestWkid)&&Ca.latestWkid==Ma.wkid||m.isDefined(Ma.latestWkid)&&Ca.wkid==Ma.latestWkid||m.isDefined(Ca.latestWkid)&&Ca.latestWkid==Ma.latestWkid)||Ca.wkid&&Ma.wkid&&B.some(xa,function(La){return La===Ma.wkid})&&B.some(xa,function(La){return La===Ca.wkid})?!0:!1}function ia(U,Ga,Fa){if(!Ga[0].layerObject.tileInfo)return!1;U=U.resourceInfo.tileInfo;Ga=Ga[0].layerObject.tileInfo;Fa=Fa.width>Fa.height?Fa.width:Fa.height;for(var xa=!1,Ca=!1,Ma=0;Ma<U.lods.length;Ma++){for(var La=
U.lods[Ma].scale/U.dpi,Ha=0;Ha<Ga.lods.length;Ha++){var Oa=Ga.lods[Ha].scale/Ga.dpi;if(Math.abs(Oa-La)/Oa<1/Fa)if(xa){Ca=!0;break}else xa=!0}if(Ca)break}return Ca||xa&&(1===U.lods.length||1===Ga.lods.length)?!0:!1}function na(U,Ga,Fa,xa,Ca,Ma){var La=Fa._clazz;if(la(U))var Ha=new gc({id:U.id,opacity:U.opacity,visible:null!==U.visibility&&void 0!==U.visibility?U.visibility:!0});else if(U&&("WFS"===U.layerType||"WFS"===U.type)){var Oa={customParameters:U.wfsInfo.customParameters,geometryType:U.layerDefinition.geometryType,
id:U.id,labelingInfo:U.layerDefinition.drawingInfo.labelingInfo,maxFeatures:U.wfsInfo.maxFeatures,mode:U.mode,name:U.wfsInfo.name,showLabels:!0,swapXY:U.wfsInfo.swapXY,title:U.title,url:U.url,version:U.wfsInfo.version,visible:U.visibility,wkid:U.layerDefinition.spatialReference.wkid};Ha=new hc;Ha.fromJson(Oa,function(){m.isDefined(U.opacity)&&Ha.setOpacity(U.opacity);m.isDefined(U.visibility)&&Ha.setVisibility(U.visibility);(U.minScale||U.maxScale)&&Ha.setScaleRange(U.minScale,U.maxScale);Ha.renderer=
z.fromJson(U.layerDefinition.drawingInfo.renderer,{geometryType:Oa.geometryType});!Fa.ignorePopups&&U.popupInfo&&Ha.setInfoTemplate(new La(U.popupInfo));Ha.emit("fromJsonComplete")})}else if(U&&("WMS"===U.layerType||"WMS"===U.type)){var Sa=[],Xa=[];B.forEach(U.layers,function(cb){Xa.push(new ic({name:cb.name,title:cb.title,legendURL:cb.legendURL||cb.legendUrl,queryable:cb.queryable,showPopup:cb.showPopup}));Sa.push(cb.name)},this);U.visibleLayers&&(Sa=U.visibleLayers);xa=new q(U.extent[0][0],U.extent[0][1],
U.extent[1][0],U.extent[1][1],new v({wkid:4326}));xa={customLayerParameters:U.customLayerParameters,customParameters:U.customParameters,extent:xa,layerInfos:Xa,version:U.version,maxWidth:U.maxWidth,maxHeight:U.maxHeight,featureInfoFormat:U.featureInfoFormat,getFeatureInfoURL:U.featureInfoUrl,getMapURL:U.mapUrl,spatialReferences:U.spatialReferences,title:U.title,copyright:U.copyright,minScale:U.minScale||0,maxScale:U.maxScale||0,format:U.format};Ha=new cc(U.url,{id:U.id,visibleLayers:Sa,format:"png",
transparent:U.firstLayer?!1:!0,opacity:U.opacity,visible:null!==U.visibility?U.visibility:!0,resourceInfo:xa,refreshInterval:U.refreshInterval});Ha.spatialReference.wkid=xa.spatialReferences[0]}else if(U&&("KML"===U.layerType||"KML"===U.type)){var bb=U.url;if(f.id){var Ta=f.id.findCredential(C.urlToObject(sb.arcgisUrl).path);Ta&&(Ga=sb.arcgisUrl.substring(sb.arcgisUrl.indexOf("//")+2,sb.arcgisUrl.indexOf("/",sb.arcgisUrl.indexOf("//")+3)),Ca=Ga.split("."),Ca=Ca[Ca.length-2]+"."+Ca[Ca.length-1],Ma=
bb.indexOf(Ca),-1<Ma&&(bb="https://"+Ga+bb.substring(Ma+Ca.length),bb+="?token\x3d"+Ta.token))}Ha=new Kb(bb,{id:U.id,visible:null!==U.visibility?U.visibility:!0,outSR:xa,refreshInterval:U.refreshInterval});A.connect(Ha,"onLoad",function(){(U.opacity||0===U.opacity)&&Ha.setOpacity(U.opacity);m.isDefined(U.minScale)&&m.isDefined(U.maxScale)&&Ha.setScaleRange(U.minScale,U.maxScale);U.visibleFolders&&B.forEach(Ha.folders,function(cb){-1<B.indexOf(U.visibleFolders,cb.id)?Ha.setFolderVisibility(cb,!0):
Ha.setFolderVisibility(cb,!1)},this)})}else if(!U||"WebTiledLayer"!==U.layerType&&"WebTiledLayer"!==U.type)if(!U||"GeoRSS"!==U.layerType&&"GeoRSS"!==U.type)if(U&&("CSV"===U.layerType||"CSV"===U.type)&&U.url)xa={layerDefinition:U.layerDefinition,columnDelimiter:U.columnDelimiter,id:U.id?U.id:null,visible:null!==U.visibility?U.visibility:!0,opacity:U.opacity,refreshInterval:U.refreshInterval},U.locationInfo&&(xa.latitudeFieldName=U.locationInfo.latitudeFieldName,xa.longitudeFieldName=U.locationInfo.longitudeFieldName),
!Fa.ignorePopups&&U.popupInfo&&(xa.infoTemplate=new La(U.popupInfo)),Ha=new Ab(U.url,xa);else if("VectorTileLayer"===U.layerType&&U.styleUrl)Ha=new $b(U.styleUrl,{id:U.id,minScale:U.minScale,maxScale:U.maxScale,opacity:U.opacity,visible:U.visibility});else if(U.layerDefinition&&!U.url)xa=l.fromJson(l.toJson(U)),delete xa.id,delete xa.opacity,delete xa.visibility,Ha=new ba(xa,{id:U.id,opacity:U.opacity,visible:U.visibility,outFields:["*"],autoGeneralize:!0}),Fa.ignorePopups||!xa.popupInfo||xa.disablePopup||
Ha.setInfoTemplate(new La(xa.popupInfo)),Va(Ha);else if(ca(U))Fa.bingMapsKey?(xa=Eb.MAP_STYLE_AERIAL_WITH_LABELS,Y(U)?xa=Eb.MAP_STYLE_AERIAL:ma(U)&&(xa=Eb.MAP_STYLE_ROAD),Ha=new Eb({bingMapsKey:Fa.bingMapsKey,mapStyle:xa,opacity:U.opacity,id:U.id}),A.connect(Ha,"onError",u.hitch(this,function(cb){cb.errors=cb.errors||[];cb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(cb?cb.layerType||cb.type:"")+"]"})},U))):(U.errors=
U.errors||[],U.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+(U?U.layerType||U.type:"")+"]"}));else if(U.resourceInfo&&(U.resourceInfo.mapName||""===U.resourceInfo.mapName))Ha=!0===U.resourceInfo.singleFusedMapCache&&(U.baseMapLayer||S(U,Ga,xa)&&ia(U,Ca,Ma))?X(U,La,Fa):sa(U,La,Fa);else if(U.resourceInfo&&U.resourceInfo.pixelSizeX)Ha=!0===U.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==U.layerType&&(U.baseMapLayer||
"Raster"===U.resourceInfo.cacheType||S(U,Ga,xa)&&ia(U,Ca,Ma))?X(U,La,Fa):T(U,La,Fa);else if(U.resourceInfo&&"Feature Layer"===U.resourceInfo.type){U.capabilities&&(U.resourceInfo.capabilities=U.capabilities);var $a;!1===Fa.editable?$a=!1:Fa.privileges&&-1===B.indexOf(Fa.privileges,"features:user:edit")&&f.id&&f.id.findCredential(U.url)&&($a=!1);Ha=new ba(R(U.url),{resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,id:U.id,mode:U.mode===ba.MODE_SELECTION?ba.MODE_SELECTION:ba.MODE_AUTO,
editable:$a,outFields:["*"],autoGeneralize:!0,refreshInterval:U.refreshInterval});Fa.ignorePopups||!U.popupInfo||U.disablePopup||Ha.setInfoTemplate(new La(U.popupInfo));U.layerDefinition&&(U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.renderer&&(xa=z.fromJson(U.layerDefinition.drawingInfo.renderer,{geometryType:Ha.geometryType}),xa.isMaxInclusive=!0,Ha.setRenderer(xa)),U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.labelingInfo&&(xa=B.map(U.layerDefinition.drawingInfo.labelingInfo,
function(cb){return new Rb(cb)}),Ha.setLabelingInfo(xa)),U.layerDefinition.definitionExpression&&Ha.setDefinitionExpression(U.layerDefinition.definitionExpression),m.isDefined(U.layerDefinition.minScale)&&Ha.setMinScale(U.layerDefinition.minScale),m.isDefined(U.layerDefinition.maxScale)&&Ha.setMaxScale(U.layerDefinition.maxScale));Va(Ha)}else U.resourceInfo&&U.resourceInfo.streamUrls&&(xa={resourceInfo:U.resourceInfo,opacity:U.opacity,visible:U.visibility,id:U.id},U.layerDefinition&&(bb=U.layerDefinition.drawingInfo,
U.layerDefinition.definitionGeometry&&(Ta=Ta||{},Ta.geometry=U.layerDefinition.definitionGeometry),m.isDefined(U.layerDefinition.definitionExpression)&&(Ta=Ta||{},Ta.where=U.layerDefinition.definitionExpression),m.isDefined(U.layerDefinition.maximumTrackPoints)&&(xa.maximumTrackPoints=U.layerDefinition.maximumTrackPoints)),Ta&&(xa.filter=Ta),U.purgeOptions&&(xa.purgeOptions=U.purgeOptions),Ha=new Vb(R(U.url),xa),bb&&bb.renderer&&(xa=bb.renderer,Ha.setRenderer(z.fromJson(xa,{geometryType:U.resourceInfo.geometryType}))),
bb&&bb.labelingInfo&&(xa=B.map(bb.labelingInfo,function(cb){return new Rb(cb)}),Ha.setLabelingInfo(xa)),Fa.ignorePopups||!U.popupInfo||U.disablePopup||Ha.setInfoTemplate(new La(U.popupInfo)),U.layerDefinition&&(m.isDefined(U.layerDefinition.minScale)&&Ha.setMinScale(U.layerDefinition.minScale),m.isDefined(U.layerDefinition.maxScale)&&Ha.setMaxScale(U.layerDefinition.maxScale)),g.once(Ha,"error",function(cb){U.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Ha=new Ub(U.url,
{id:U.id,opacity:U.opacity,outSpatialReference:xa,refreshInterval:U.refreshInterval}),A.connect(Ha,"onLoad",function(){!1===U.visibility&&Ha.hide();m.isDefined(U.minScale)&&m.isDefined(U.maxScale)&&Ha.setScaleRange(U.minScale,U.maxScale);var cb=Ha.getFeatureLayers();B.forEach(cb,function(fb){U.pointSymbol&&"esriGeometryPoint"===fb.geometryType?(fb.renderer.symbol=E.fromJson(U.pointSymbol),1===cb.length&&(Ha.pointSymbol=E.fromJson(U.pointSymbol))):U.lineSymbol&&"esriGeometryPolyline"===fb.geometryType?
(fb.renderer.symbol=E.fromJson(U.lineSymbol),1===cb.length&&(Ha.polylineSymbol=E.fromJson(U.lineSymbol))):U.polygonSymbol&&"esriGeometryPolygon"===fb.geometryType&&(fb.renderer.symbol=E.fromJson(U.polygonSymbol),1===cb.length&&(Ha.polygonSymbol=E.fromJson(U.polygonSymbol)))})});else if(Ha=new Tb(U.templateUrl,{id:U.id,visible:null!==U.visibility?U.visibility:!0,opacity:U.opacity,copyright:U.copyright,fullExtent:U.fullExtent&&new q(U.fullExtent),initialExtent:U.fullExtent&&new q(U.fullExtent),subDomains:U.subDomains,
tileInfo:U.tileInfo?new jc(U.tileInfo):null,refreshInterval:U.refreshInterval,wmtsInfo:U.wmtsInfo}),m.isDefined(U.minScale)||m.isDefined(U.maxScale))Ha.loaded?Ha.setScaleRange(U.minScale,U.maxScale):A.connect(Ha,"onLoad",function(){Ha.setScaleRange(U.minScale,U.maxScale)});Ha&&(Ha.arcgisProps={title:U.title},U.baseMapLayer&&(U.isReference?(Ha.attr("data-reference",!0),Ha._basemapGalleryLayerType="reference"):Ha._basemapGalleryLayerType="basemap"),Ha instanceof ba&&U.layerDefinition&&U.layerDefinition.featureReduction&&
"cluster"===U.layerDefinition.featureReduction.type&&(xa=U.layerDefinition.featureReduction,xa.clusterSize&&(xa.clusterSize=b.pt2px(xa.clusterSize)),xa.clusterRadius&&(xa.clusterRadius=b.pt2px(xa.clusterRadius)),xa.popupInfo&&(xa.infoTemplate=new D(xa.popupInfo),delete xa.popupInfo),Ha.setFeatureReduction(xa)));return Ha}function va(U,Ga,Fa,xa,Ca){B.forEach(U,function(Ha){Ha.layerObject=na(Ha,U,Ga,Fa,xa,Ca)});var Ma=B.filter(U,function(Ha){return!Ha.isReference}),La=B.filter(U,function(Ha){return!!Ha.isReference});
return U=Ma.concat(La)}function Ba(U){var Ga=null;U=U[0];U.url&&ta(U)&&U.resourceInfo.spatialReference&&(Ga=new v,U.resourceInfo.spatialReference.wkid&&(Ga.wkid=U.resourceInfo.spatialReference.wkid),U.resourceInfo.spatialReference.wkt&&(Ga.wkt=U.resourceInfo.spatialReference.wkt));ca(U)||la(U)?Ga=new v({wkid:102100}):U&&("WMS"===U.layerType||"WMS"===U.type)&&(Ga=new v({wkid:U.spatialReferences[0]}));return Ga}function Na(U,Ga,Fa,xa,Ca,Ma,La,Ha){B.forEach(Ga,function(Oa){Oa.url&&ta(Oa)&&(Oa.resourceInfo=
U[Oa.deferredsPos][1],delete Oa.deferredsPos)});Ma=Ma||Ba(Ga);Ga=va(Ga,Fa,Ma,La,Ha);Ca.callback(Ga);return Ca}function Va(U){!window.CanvasRenderingContext2D&&U.renderer&&"esri.renderer.HeatmapRenderer"===U.renderer.declaredClass&&U.setRenderer(z.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Da(U,Ga){var Fa=R(U);return h({url:Fa,
content:{f:"json"},callbackParamName:"callback",error:function(xa,Ca){xa.message=xa.message?xa.message+(" [url:"+Fa+"]"):"[url:"+Fa+"]";Ga.push(xa);t.defaults.io.errorHandler(xa,Ca)}})}function K(U){var Ga=sb.arcgisUrl+"/"+U.itemId+"/data";return h({url:Ga,content:{f:"json"},callbackParamName:"callback",error:function(Fa,xa){Fa.message=Fa.message?Fa.message+(" [url:"+Ga+"]"):"[url:"+Ga+"]";U.errors=U.errors||[];U.errors.push(Fa);t.defaults.io.errorHandler(Fa,xa)}})}function V(U,Ga,Fa){var xa=new p;
if(!(Fa.featureCollection&&Fa.featureCollection.layers||Fa.layers))return console.log("Invalid Feature Collection item data [item id: "+U.itemId+"]: ",Fa),U.errors=U.errors||[],U.errors.push({message:"Invalid Feature Collection item data. [item id: "+U.itemId+"]"}),xa.errback(),xa;Fa.layers&&(Fa.featureCollection={layers:Fa.layers},delete Fa.layers,m.isDefined(Fa.showLegend)&&(Fa.featureCollection.showLegend=Fa.showLegend,delete Fa.showLegend));ha(U,Fa.featureCollection,Ga).then(function(Ca){Fa.featureCollection=
Ca;U.featureCollection&&U.featureCollection.layers?B.forEach(Fa.featureCollection.layers,function(Ma,La){La=U.featureCollection.layers[La];La.popupInfo||La.layerDefinition?La.layerDefinition?(m.isDefined(La.layerDefinition.minScale)&&m.isDefined(La.layerDefinition.maxScale)&&(La.layerDefinition.minScale!==Ma.layerDefinition.minScale||La.layerDefinition.maxScale!==Ma.layerDefinition.maxScale)&&(delete Ma.layerDefinition.minScale,delete Ma.layerDefinition.maxScale),La.layerDefinition.drawingInfo&&l.toJson(La.layerDefinition.drawingInfo)!==
l.toJson(Ma.layerDefinition.drawingInfo)&&delete Ma.layerDefinition.drawingInfo,La.layerDefinition.showLegend!==Ma.layerDefinition.showLegend&&delete Ma.layerDefinition.showLegend,La.layerDefinition=u.mixin(La.layerDefinition,Ma.layerDefinition)):La.layerDefinition=Ma.layerDefinition:(La.popupInfo=Ma.popupInfo,La.layerDefinition=Ma.layerDefinition);La.featureSet=Ma.featureSet;La.nextObjectId=Ma.nextObjectId}):(U.featureCollection=U.featureCollection||{},U.featureCollection=u.mixin(U.featureCollection,
Fa.featureCollection));xa.callback(U)});return xa}function ha(U,Ga,Fa){var xa=new p;e(["./csv"],function(Ca){var Ma=[];B.forEach(Ga.layers,function(La){La.featureSet&&La.featureSet.features&&La.featureSet.features.length&&La.featureSet.features[0].geometry&&La.featureSet.features[0].geometry.spatialReference&&(La.deferredsPos=Ma.length,Ma.push(Ca.projectFeatureCollection(La,Fa,La.featureSet.features[0].geometry.spatialReference)))});(new d(Ma)).addCallback(function(){B.forEach(Ga.layers,function(La){m.isDefined(La.deferredsPos)&&
(Ma[La.deferredsPos].results&&Ma[La.deferredsPos].results.length?La=Ma[La.deferredsPos].results[0]:(console.log("Errors projecting feature collection. ["+U.title+" - "+La.layerDefinition.name+"]"),La.errors=La.errors||[],La.errors.push({message:"Errors projecting feature collection. ["+U.title+" - "+La.layerDefinition.name+"]"})),delete La.deferredsPos)});xa.callback(Ga)})});return xa}function N(U,Ga,Fa,xa,Ca){var Ma=new p,La=new p,Ha=[];B.forEach(U.operationalLayers,function(Sa){Sa.itemId&&"Feature Collection"==
Sa.type&&Ha.push(K(Sa).then(u.hitch(null,V,Sa,Fa)))});if(0===Ha.length)aa(U,Ga,Fa,xa,La,Ca);else{var Oa=new d(Ha);Oa.addCallback(function(Sa){aa(U,Ga,Fa,xa,La,Ca)})}La.then(function(Sa){Ha=[];B.forEach(Sa,function(bb){bb=bb.layerObject;if(bb instanceof ba&&!bb.loaded&&!bb.loadError){var Ta=new p;g.once(bb,"load, error",function(){Ta.callback(bb)});Ha.push(Ta)}else bb&&"esri.layers.WFSLayer"===bb.declaredClass&&!bb.loadError&&(Ta=new p,g.once(bb,"fromJsonComplete, error",function($a){Ta.callback(bb)}),
Ha.push(Ta))});if(Ha.length){var Xa=new p;Oa=new d(Ha);Oa.addCallback(function(){Xa.callback(Sa)});return Xa.promise}return Sa}).then(function(Sa){var Xa=[];B.forEach(Sa,function(bb){var Ta=bb.layerObject;Ta&&(Ta instanceof ba||"esri.layers.StreamLayer"===Ta.declaredClass)?Ta.loaded&&Ta.labelingInfo&&(bb.showLabels||Ta._collection?Xa.push(Ta):Ta.setShowLabels&&Ta.setShowLabels(!1)):Ta&&"esri.layers.WFSLayer"===Ta.declaredClass&&Ta.loaded&&Ta.labelingInfo&&Xa.push(Ta)});Xa.length?e(["../layers/LabelLayer"],
function(bb){var Ta=new bb;B.forEach(Xa,function($a){Ta.addFeatureLayer($a)});Sa.push({layerObject:Ta});Ma.callback(Sa)}):Ma.callback(Sa)});return Ma}function aa(U,Ga,Fa,xa,Ca,Ma){var La=[],Ha=[],Oa=[];B.forEach(U.operationalLayers,function(Sa,Xa){if(Sa.featureCollection&&Sa.featureCollection.layers){var bb=Sa.featureCollection.layers.length;B.forEach(Sa.featureCollection.layers,function(Ta,$a){var cb=!0;Sa.visibleLayers&&-1==B.indexOf(Sa.visibleLayers,$a)&&(cb=!1);Ta.visibility=(null!=Sa.visibility?
!!Sa.visibility:!0)&&cb;Ta.opacity=Sa.opacity;Ta.id=(Sa.id||"operational"+Xa)+"_"+$a;Sa.title&&(Ta.title=1!==bb&&Ta.layerDefinition.name&&Sa.title!==Ta.layerDefinition.name?Sa.title+" - "+Ta.layerDefinition.name:Sa.title);null==Ta.disablePopup&&(Ta.disablePopup=Sa.disablePopup);Oa.push(Ta)},this)}else Oa.push(Sa)});B.forEach(U.baseMap.baseMapLayers,function(Sa,Xa){Sa.baseMapLayer=!0;Sa.id=Sa.id||"base"+Xa;La.push(Sa)});B.forEach(Oa,function(Sa,Xa){Sa.id=Sa.id||"operational"+Xa;La.push(Sa)});B.forEach(La,
function(Sa){Sa.url&&ta(Sa)&&(Sa.deferredsPos=Ha.length,Sa.errors=Sa.errors||[],Ha.push(Da(Sa.url,Sa.errors)))});0===Ha.length?(Fa=Fa||Ba(La),La=va(La,Ga,Fa,xa,Ma),Ca.callback(La)):(new d(Ha)).addCallback(function(Sa){Na(Sa,La,Ga,Ha,Ca,Fa,xa,Ma)});return Ca}function ja(U,Ga,Fa,xa){var Ca=U.minScale,Ma=U.maxScale;if(10.1>=Fa.version&&Ga)for(U=Ga.length-1;0<=U;U--){if(Ga[U].id==xa)if(0==Ca&&0<Ga[U].minScale?Ca=Ga[U].minScale:0<Ca&&0==Ga[U].minScale?Ca=Fa.minScale:0<Ca&&0<Ga[U].minScale&&(Ca=Math.min(Ca,
Ga[U].minScale)),Ma=Math.max(Fa.maxScale||0,Ga[U].maxScale||0),Fa.setScaleRange(Ca,Ma),-1<Ga[U].parentLayerId)xa=Ga[U].parentLayerId;else break}else 10.1<Fa.version&&(B.forEach(U.layerInfos,function(La){La.id==xa&&(0==Ca&&0<La.minScale?Ca=La.minScale:0<Ca&&0==La.minScale||0<Ca&&0<La.minScale&&(Ca=Math.min(Ca,La.minScale)),Ma=Math.max(Ma||0,La.maxScale||0))}),Fa.setScaleRange(Ca,Ma))}function pa(U,Ga,Fa,xa){var Ca=U.url,Ma=U.__popupIds,La=U.__popupUrls,Ha=U.__popupWhereClauses,Oa=U.__popupMinScales,
Sa=U.__popupMaxScales,Xa=U.__resourceInfo,bb=[];B.forEach(U.__popups,function(Ta,$a){if(Ta){var cb=[];B.forEach(Ta.fieldInfos,function(tb){"shape"!==tb.fieldName.toLowerCase()&&cb.push(tb.fieldName)});if(U.dynamicLayerInfos&&0<U.dynamicLayerInfos.length){var fb=B.filter(U.dynamicLayerInfos,function(tb){return Ma[$a]==tb.id})[0].source;var Bb=new ba(Ca+"/dynamicLayer",{parentLayer:U,id:U.id+"_"+Ma[$a],source:fb,outFields:cb,mode:ba.MODE_SELECTION,infoTemplate:Ta&&new Fa(Ta),drawMode:!1,visible:U.visible,
autoGeneralize:!0});var dc=function(tb,Wb){0<Ha[tb].length&&Wb.setDefinitionExpression(Ha[tb]);if(m.isDefined(Oa[tb])||m.isDefined(Sa[tb]))if(m.isDefined(U.minScale)||m.isDefined(U.maxScale)){var Fb=U.minScale,Xb=U.maxScale;0==Fb&&0<Oa[tb]?Fb=Oa[tb]:0<Fb&&0==Oa[tb]||0<Fb&&0<Oa[tb]&&(Fb=Math.min(Fb,Oa[tb]));Xb=Math.max(Xb||0,Sa[tb]||0);Wb.setScaleRange(Fb,Xb)}else Wb.setScaleRange(Oa[tb],Sa[tb]);else ja(U,Ga||Xa.layers,Wb,Ma[tb])};Bb.loaded?dc($a,Bb):A.connect(Bb,"onLoad",function(tb){dc($a,Bb)})}else{var Yb=
null,pb=Ca+"/"+Ma[$a];if(La[$a].length)pb=La[$a];else if(Ga)for(fb=0;fb<Ga.length;fb++)if(Ga[fb].id===Ma[$a]){Yb=Ga[fb];break}Bb=new ba(R(pb),{parentLayer:U,id:U.id+"_"+Ma[$a],outFields:cb,mode:ba.MODE_SELECTION,infoTemplate:Ta&&new Fa(Ta),drawMode:!1,visible:U.visible,resourceInfo:Yb,autoGeneralize:!0});Bb.loaded?(0<Ha[$a].length&&Bb.setDefinitionExpression(Ha[$a]),ja(U,Ga||Xa.layers,Bb,Ma[$a])):A.connect(Bb,"onLoad",function(tb){0<Ha[$a].length&&Bb.setDefinitionExpression(Ha[$a]);ja(U,Ga||Xa.layers,
tb,Ma[$a])})}bb.push(Bb)}});0<bb.length&&(A.connect(U,"onVisibilityChange",u.hitch(this,function(Ta,$a){B.forEach(Ta,function(cb){$a?cb.show():cb.hide()})},bb)),A.connect(xa,"onLayerRemove",u.hitch(this,function(Ta,$a,cb){Ta.id===cb.id&&B.forEach($a,function(fb){xa.removeLayer(fb)})},U,bb)));delete U.__popups;delete U.__popupIds;delete U.__popupUrls;delete U.__popupWhereClauses;delete U.__popupMinScales;delete U.__popupMaxScales;delete U.__resourceInfo;return bb}function wa(U){return h({url:R(U.url+
"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Ja(U,Ga,Fa){var xa=[];B.forEach(U,function(Ma){var La=Ma.__popups;La&&1<La.length&&10<=Ma.version&&(Ma.__deferredsPos=xa.length,xa.push(wa(Ma)))});var Ca=[];0<xa.length?(new d(xa)).addCallback(function(Ma){B.forEach(U,function(La){La.__popups&&0<La.__popups.length&&(La.__deferredsPos||0===La.__deferredsPos?(Ca=Ca.concat(pa(La,Ma[La.__deferredsPos][1].layers,Fa,Ga)),delete La.__deferredsPos):Ca=Ca.concat(pa(La,
null,Fa,Ga)))});Ga.addLayers(Ca)}):(B.forEach(U,function(Ma){Ma.__popups&&0<Ma.__popups.length&&(Ca=Ca.concat(pa(Ma,null,Fa,Ga)))}),Ga.addLayers(Ca))}function Ea(U){B.forEach(U,function(Ga){var Fa=Ga.layer;Fa.toJson&&(Ga=Fa.toJson(),Ga.featureSet&&Fa.name&&-1<Fa.name.indexOf("Text")&&B.forEach(Ga.featureSet.features,function(xa,Ca){xa.attributes.TEXT&&(Ca=Fa.graphics[Ca],Ca.symbol.setText(xa.attributes.TEXT),xa.symbol.horizontalAlignment&&(Ca.symbol.align=xa.symbol.horizontalAlignment),Ca.setSymbol(Ca.symbol),
Ca.setAttributes(xa.attributes))},this))})}function Qa(U){var Ga=6;B.forEach(U,function(Fa){if(Fa=Fa.renderer)"esri.renderer.SimpleRenderer"===Fa.declaredClass?((Fa=Fa.symbol)&&Fa.xoffset&&(Ga=Math.max(Ga,Math.abs(Fa.xoffset))),Fa&&Fa.yoffset&&(Ga=Math.max(Ga,Math.abs(Fa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==Fa.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Fa.declaredClass||B.forEach(Fa.infos,function(xa){(xa=xa.symbol)&&xa.xoffset&&(Ga=Math.max(Ga,Math.abs(xa.xoffset)));xa&&xa.yoffset&&
(Ga=Math.max(Ga,Math.abs(xa.yoffset)))})});return Ga}function Ka(U){var Ga=this,Fa=Ga.infoWindow,xa=U.graphic;if(Ga.loaded){Fa.hide();Fa.clearFeatures();var Ca=[];B.forEach(Ga.graphicsLayerIds,function(Ta){(Ta=Ga.getLayer(Ta))&&Ta instanceof ba&&Ta.loaded&&Ta.visible&&(Ta.clearSelection(),Ta.infoTemplate&&!Ta.suspended&&Ca.push(Ta))});B.forEach(Ga.layerIds,function(Ta){(Ta=Ga.getLayer(Ta))&&(-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==Ta.declaredClass.indexOf("RasterXLayer"))&&
Ta.loaded&&Ta.visible&&Ta.infoTemplate&&Ca.push(Ta)});xa=xa&&xa.getInfoTemplate()?xa:null;if(Ca.length||xa){var Ma=Qa(Ca),La=U.screenPoint,Ha=Ga.toMap(new y(La.x-Ma,La.y+Ma));Ma=Ga.toMap(new y(La.x+Ma,La.y-Ma));var Oa=new q(Ha.x,Ha.y,Ma.x,Ma.y,Ga.spatialReference),Sa=new J;Sa.geometry=Oa;Sa.timeExtent=Ga.timeExtent;var Xa=!0;Ha=B.map(Ca,function(Ta){Ta=Ta&&Ta.isFeatureReductionActive&&Ta.isFeatureReductionActive()?Ta.getFeatureReductionLayer():Ta;if(-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")){Sa.geometry=
U.mapPoint;Xa=!1;var $a=Ta.queryVisibleRasters(Sa,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});$a.addCallback(function(){return Ta.getVisibleRasters()})}else if(-1!==Ta.declaredClass.indexOf("RasterXLayer"))$a=Ta.fetchPopupFromTiles({geometry:U.mapPoint});else if("function"===typeof Ta.selectFeatures)$a=Ta.selectFeatures(Sa),$a.addCallback(function(){return Ta.getSelectedFeatures()});else{$a=new p;var cb=B.filter(Ta.graphics,function(fb){return fb&&fb.visible&&Oa.intersects(fb.geometry)});
$a.resolve(cb)}return $a});xa&&(Ma=new p,Ma.callback([xa]),Ha.splice(0,0,Ma));if(!B.some(Ha,function(Ta){return-1===Ta.fired})){var bb=xa?1:0;B.forEach(Ca,function(Ta){bb=-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")?bb+Ta.getVisibleRasters().length:-1!==Ta.declaredClass.indexOf("RasterXLayer")?bb+Ta.getPopupFromTiles().length:bb+Ta.getSelectedFeatures().length});if(!bb)return}Fa.setFeatures(Ha);Fa.show(U.mapPoint,{closestFirst:Xa})}}}function Pa(U,Ga){var Fa=Ga.mapOptions||{};if(!Fa.infoWindow){var xa=
new F({visibleWhenEmpty:!1},c.create("div"));Fa.infoWindow=xa}m.isDefined(Fa.showInfoWindowOnClick)||Ga.usePopupManager||(Fa.showInfoWindowOnClick=!1);U=new r(U,Fa);A.connect(U,"onLayersAddResult",Ea);return U}function Ua(U,Ga,Fa,xa,Ca,Ma){if(xa.map){var La=xa.map;var Ha=xa.clickEventHandle;var Oa=xa.clickEventListener;var Sa=xa.errors}else{var Xa=Fa.itemData;!Ca.mapOptions.backgroundColor&&Xa.background&&Xa.background.color&&null!=Xa.background.color[0]&&(Ca.mapOptions.backgroundColor=n.toDojoColor(Xa.background.color));
La=Pa(xa,Ca);Ca.ignorePopups||Ca.disableClickBehavior||Ca.usePopupManager||(Ha=A.connect(La,"onClick",Ka),Oa=Ka)}La.addLayers(U);Ca.ignorePopups||Ca.usePopupManager||Ja(U,La,Ca._clazz);var bb=Sa||[];B.forEach(Ga,function(Ta){Ta.errors&&(bb=bb.concat(Ta.errors))},this);La.loaded?Ma.callback({map:La,itemInfo:Fa,errors:bb,clickEventHandle:Ha,clickEventListener:Oa}):A.connect(La,"onLoad",function(){Ma.callback({map:La,itemInfo:Fa,errors:bb,clickEventHandle:Ha,clickEventListener:Oa})})}function eb(U,Ga,
Fa,xa,Ca){var Ma=[];B.forEach(Ca,function(Oa){u.isArray(Oa.layerObject)?B.forEach(Oa.layerObject,function(Sa){Ma.push(Sa)}):Ma.push(Oa.layerObject)});if(ca(Ca[0]))var La=setInterval(function(){if(Ca[0].layerObject&&Ca[0].layerObject.loaded)clearInterval(La),ab(U,Ga,Fa,xa,Ca,Ma);else if(Ca[0].errors){clearInterval(La);var Oa="";Ca[0].errors&&Ca[0].errors.length&&(Oa=" ("+Ca[0].errors[0].message+")");xa.errback(Error(fa.arcgis.utils.baseLayerError+Oa))}},10);else if(!Ma[0]&&Ca[0].baseMapLayer){var Ha=
"";Ca[0].errors&&Ca[0].errors.length&&(Ha=" ("+Ca[0].errors[0].message+")");xa.errback(Error(fa.arcgis.utils.baseLayerError+Ha))}else ab(U,Ga,Fa,xa,Ca,Ma)}function ab(U,Ga,Fa,xa,Ca,Ma){try{var La=Fa.mapOptions||{};Fa.mapOptions=La;Ma=B.filter(Ma,m.isDefined);if(Ga.map||La.extent)Ua(Ma,Ca,U,Ga,Fa,xa);else{var Ha=Ma[0].spatialReference;if(La.center&&(null!=La.zoom||La.scale)&&(u.isArray(La.center)&&(La.center=new w(La.center)),x.canProject(La.center,Ha))){Ua(Ma,Ca,U,Ga,Fa,xa);return}var Oa=U.item;if(Oa&&
Oa.extent&&Oa.extent.length){var Sa=new q(Oa.extent[0][0],Oa.extent[0][1],Oa.extent[1][0],Oa.extent[1][1],new v({wkid:4326}));4326===Ha.wkid?(La.extent=Sa,Ua(Ma,Ca,U,Ga,Fa,xa)):900913===Ha.wkid||102100===Ha.wkid||102113===Ha.wkid||3857===Ha.wkid?(Sa.xmin=Math.max(Sa.xmin,-180),Sa.xmax=Math.min(Sa.xmax,180),Sa.ymin=Math.max(Sa.ymin,-89.99),Sa.ymax=Math.min(Sa.ymax,89.99),La.extent=x.geographicToWebMercator(Sa),Ua(Ma,Ca,U,Ga,Fa,xa)):Fa.geometryServiceURL||t.defaults.geometryService?(Fa.geometryServiceURL?
new L(Fa.geometryServiceURL):t.defaults.geometryService).project([Sa],Ha,function(Xa){Xa=Xa[0];La.extent=La.extent||Xa;Ua(Ma,Ca,U,Ga,Fa,xa)},function(){Ua(Ma,Ca,U,Ga,Fa,xa)}):xa.errback(Error(fa.arcgis.utils.geometryServiceError))}else Ua(Ma,Ca,U,Ga,Fa,xa)}}catch(Xa){xa.errback(Xa)}}function gb(U){var Ga=[];B.forEach(U.operationalLayers,function(Fa){Fa.featureCollection?Ga.push({featureCollection:Fa.featureCollection,visibility:null!=Fa.visibility?!!Fa.visibility:!0,title:Fa.title}):Fa.layerObject&&
Ga.push({layer:Fa.layerObject,visibility:null!=Fa.visibility?!!Fa.visibility:!0,title:Fa.title})});return Ga}function db(U){var Ga=[],Fa=U.baseMap.baseMapLayers;U.operationalLayers&&(Fa=Fa.concat(U.operationalLayers));B.forEach(Fa,function(xa){var Ca={};if(xa.featureCollection&&(!xa||"CSV"!==xa.layerType&&"CSV"!==xa.type))!0===xa.featureCollection.showLegend&&B.forEach(xa.featureCollection.layers,function(Ha){if(!1!==Ha.showLegend){var Oa=Ha.layerObject.renderer;Ca={layer:Ha.layerObject,title:xa.title,
defaultSymbol:Oa&&Oa.defaultSymbol&&Oa.defaultLabel?!0:!1};1<xa.featureCollection.layers.length&&(Ca.title+=" - "+Ha.layerDefinition.name);Ga.push(Ca)}});else if(xa.baseMapLayer&&!0===xa.showLegend&&xa.layerObject||!xa.baseMapLayer&&!1!==xa.showLegend&&xa.layerObject&&!(xa.layerObject instanceof ba&&xa.layerObject.mode===ba.MODE_SELECTION)){var Ma=xa.layerObject.renderer,La=xa.layerObject.declaredClass;Ma=!Ma||Ma&&Ma.defaultSymbol&&Ma.defaultLabel?!0:!1;if(10.1>xa.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===
La||"esri.layers.ArcGISTiledMapServiceLayer"===La)||"esri.layers.ArcGISImageServiceLayer"===La)Ma=!0;Ca={layer:xa.layerObject,title:xa.title,defaultSymbol:Ma};xa.layers&&(La=B.map(B.filter(xa.layers,function(Ha){return!1===Ha.showLegend}),function(Ha){return Ha.id}),La.length&&(Ca.hideLayers=La));Ga.push(Ca)}});return Ga}function kb(U,Ga){function Fa(Ha,Oa){B.forEach(Ha,function(Sa,Xa){switch(Sa){case "../layers/ArcGISDynamicMapServiceLayer":hb=Oa[Xa];break;case "../layers/ArcGISImageServiceLayer":jb=
Oa[Xa];break;case "../layers/ArcGISImageServiceVectorLayer":Jb=Oa[Xa];break;case "../layers/CSVLayer":Ab=Oa[Xa];break;case "../layers/DynamicLayerInfo":vb=Oa[Xa];break;case "../layers/GeoRSSLayer":Ub=Oa[Xa];break;case "../layers/ImageParameters":zb=Oa[Xa];break;case "../layers/ImageServiceParameters":Db=Oa[Xa];break;case "../layers/KMLLayer":Kb=Oa[Xa];break;case "../layers/LabelClass":Rb=Oa[Xa];break;case "../layers/LayerDrawingOptions":Gb=Oa[Xa];break;case "../layers/MosaicRule":Qb=Oa[Xa];break;
case "../layers/OpenStreetMapLayer":gc=Oa[Xa];break;case "../layers/RasterFunction":bc=Oa[Xa];break;case "../layers/RasterXLayer":ac=Oa[Xa];break;case "../layers/StreamLayer":Vb=Oa[Xa];break;case "../layers/TileInfo":jc=Oa[Xa];break;case "../layers/VectorTileLayer":$b=Oa[Xa];break;case "../virtualearth/VETiledLayer":Eb=Oa[Xa];break;case "../layers/WebTiledLayer":Tb=Oa[Xa];break;case "../layers/WFSLayer":hc=Oa[Xa];break;case "../layers/WMSLayer":cc=Oa[Xa];break;case "../layers/WMSLayerInfo":ic=Oa[Xa]}})}
var xa=new p;U=U.itemData;Ga=[];U.baseMap&&U.baseMap.baseMapLayers&&(Ga=Ga.concat(U.baseMap.baseMapLayers));U.operationalLayers&&(Ga=Ga.concat(U.operationalLayers));U=B.map(Ga,function(Ha){return Ha&&Ha.layerType});var Ca=[],Ma=[];Ga=!1;for(var La=0;La<U.length;La++){switch(U[La]){case "ArcGISFeatureLayer":-1===B.indexOf(Ca,"../layers/LabelClass")&&Ca.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===B.indexOf(Ca,"../layers/ArcGISImageServiceLayer")&&
(Ca.push("../layers/ArcGISImageServiceLayer"),Ma.push("../layers/ImageServiceParameters"),Ma.push("../layers/MosaicRule"),Ma.push("../layers/RasterFunction"),Ca.push("../layers/RasterXLayer"));break;case "ArcGISImageServiceVectorLayer":-1===B.indexOf(Ca,"../layers/ArcGISImageServiceVectorLayer")&&(Ca.push("../layers/ArcGISImageServiceVectorLayer"),Ma.push("../layers/ImageServiceParameters"),Ma.push("../layers/MosaicRule"),Ma.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===
B.indexOf(Ca,"../layers/ArcGISDynamicMapServiceLayer")&&(Ca.push("../layers/ArcGISDynamicMapServiceLayer"),Ma.push("../layers/DynamicLayerInfo"),Ma.push("../layers/ImageParameters"),Ma.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===B.indexOf(Ca,"../layers/StreamLayer")&&Ca.push("../layers/StreamLayer");-1===B.indexOf(Ca,"../layers/LabelClass")&&Ca.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===B.indexOf(Ca,"../virtualearth/VETiledLayer")&&
Ca.push("../virtualearth/VETiledLayer");break;case "CSV":-1===B.indexOf(Ca,"../layers/CSVLayer")&&(Ca.push("../layers/CSVLayer"),Ma.push("./csv"));break;case "GeoRSS":-1===B.indexOf(Ca,"../layers/GeoRSSLayer")&&Ca.push("../layers/GeoRSSLayer");break;case "KML":-1===B.indexOf(Ca,"../layers/KMLLayer")&&Ca.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===B.indexOf(Ca,"../layers/OpenStreetMapLayer")&&Ca.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===B.indexOf(Ca,"../layers/VectorTileLayer")&&
Ca.push("../layers/VectorTileLayer");break;case "WebTiledLayer":-1===B.indexOf(Ca,"../layers/WebTiledLayer")&&(Ca.push("../layers/WebTiledLayer"),Ma.push("../layers/TileInfo"));break;case "WFS":-1===B.indexOf(Ca,"../layers/WFSLayer")&&Ca.push("../layers/WFSLayer");break;case "WMS":-1===B.indexOf(Ca,"../layers/WMSLayer")&&(Ca.push("../layers/WMSLayer"),Ma.push("../layers/WMSLayerInfo"));break;default:Ga=!0}if(Ga)break}Ga&&(Ca=oc,Ma=Hb);Ca.length?e(Ca,function(){Fa(Ca,arguments);Ma.length?e(Ma,function(){Fa(Ma,
arguments);xa.resolve()}):xa.resolve()}):xa.resolve();return xa}function rb(U){U=U.itemData;var Ga=function(xa,Ca){"GroupLayer"===xa.layerType?B.forEach(xa.layers,function(Ma){Ma.visibility=!1===xa.visibility?!1:Ma.visibility;Ma.opacity=m.isDefined(xa.opacity)?m.isDefined(Ma.opacity)?Ma.opacity*xa.opacity:xa.opacity:Ma.opacity;Ga(Ma,Ca)}):Ca.push(xa)},Fa=[];B.forEach(U.operationalLayers,function(xa){Ga(xa,Fa)});U.operationalLayers=Fa}function mb(U,Ga,Fa,xa){rb(xa);var Ca=xa.itemData;Ca.baseMap&&Ca.baseMap.baseMapLayers&&
Ca.baseMap.baseMapLayers.length&&(Ca.baseMap.baseMapLayers[0].firstLayer=!0);var Ma=Ga.layerMixins,La=Ma&&Ma.length;if(La){var Ha=function(Oa){for(var Sa=0;Sa<La;Sa++){var Xa=Ma[Sa];if(Xa.mixin)if(Xa.hasOwnProperty("id")){if(Oa.id===Xa.id){u.mixin(Oa,Xa.mixin);break}}else if(Oa.url===Xa.url){u.mixin(Oa,Xa.mixin);break}}};B.forEach(Ca.baseMap&&Ca.baseMap.baseMapLayers,Ha);B.forEach(Ca.operationalLayers,Ha)}kb(xa,Ga).then(function(){return ka(xa,Ga)}).then(function(){return Z(xa,Ga)}).then(function(Oa){var Sa=
Oa[0],Xa=Oa[1];if(Sa.itemData.operationalLayers&&0!==Sa.itemData.operationalLayers.length){var bb=new p,Ta=Sa.itemData.baseMap.baseMapLayers.slice(),$a=B.filter(Sa.itemData.baseMap.baseMapLayers,function(cb){return!cb.isReference});Oa={item:Sa.item,itemData:{baseMap:{baseMapLayers:$a},background:u.clone(Sa.itemData.background)}};Sa.itemData.baseMap.baseMapLayers=B.filter(Sa.itemData.baseMap.baseMapLayers,function(cb){return cb.isReference});M(Oa,Xa).addCallback(function(cb){N(cb.itemData,Xa).addCallback(u.hitch(null,
eb,cb,U,Xa,bb))});bb.then(function(cb){M(Sa,Xa).addCallback(function(fb){N(fb.itemData,Xa,cb.map.spatialReference,$a,cb.map).addCallback(function(Bb){fb.itemData.baseMap.baseMapLayers=Ta;eb(fb,cb,Xa,Fa,Bb)})})},u.hitch(Fa,Fa.errback))}else M(Sa,Xa).addCallback(function(cb){N(cb.itemData,Xa).addCallback(u.hitch(null,eb,cb,U,Xa,Fa))})})}function Za(U,Ga){"undefined"===typeof Ga&&(Ga=!0);sb._arcgisUrl&&0<sb._arcgisUrl.length&&(sb.arcgisUrl=sb._arcgisUrl);var Fa={},xa=new p;h({url:sb.arcgisUrl+"/"+U,
content:{f:"json"},callbackParamName:"callback",load:function(Ca){Fa.item=Ca;Ga?h({url:sb.arcgisUrl+"/"+U+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Ma){Fa.itemData=Ma;xa.callback(Fa)},error:function(Ma){xa.errback(Ma)}}):xa.callback(Fa)},error:function(Ca){xa.errback(Ca)}});return xa}var hb,jb,Jb,Ab,vb,Ub,zb,Db,Kb,Rb,Gb,Qb,gc,bc,ac,Vb,jc,$b,Eb,Tb,hc,cc,ic,oc="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
Hb="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");var sb={arcgisUrl:C.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Za,createMap:function(U,Ga,Fa){var xa=new p;Fa=Fa||{};var Ca=Fa.infoTemplateClass;Fa._clazz=Ca&&(u.isObject(Ca)?Ca:u.getObject(Ca))||D;u.isString(U)?Za(U).addCallback(u.hitch(null,
mb,Ga,Fa,xa)).addErrback(u.hitch(xa,xa.errback)):mb(Ga,Fa,xa,U);xa.addCallback(function(Ma){var La=Ma.map;La&&(La.tables=u.getObject("itemInfo.itemData.tables",!1,Ma)||[])});return xa},getLayerList:function(U){return U&&U.itemInfo&&U.itemInfo.itemData?gb(U.itemInfo.itemData):[]},getLegendLayers:function(U){return U&&U.itemInfo&&U.itemInfo.itemData?db(U.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:M,_getItemData:za,_getBingKey:P,_portalUrlResponse:qa,_portalUrlFailure:ua,_processFSItemProperties:ea,
_processSSItemProperties:ra,_getLayers:N,_preBuildLayerObjects:Na,_buildLayerObjects:va,_preCreateMap:eb,_getMapSR:Ba,_createMap:Ua,_addSelectionLayers:Ja,_createSelectionFeatureLayers:pa,_getServiceInfo:Da,_getFeatureCollectionItem:K,_mergeFeatureCollectionItem:V,_projectFeatureCollection:ha,_getLayersInfo:wa,_initLayer:na,_loadAsCached:X,_loadAsDynamic:sa,_processPopups:ya,_onLayersAddResult:Ea,_sameSpatialReferenceAsBasemap:S,_sameTilingSchemeAsBasemap:ia,_showPopup:Ka,_calculateClickTolerance:Qa,
_getVisibleFeatureLayers:W,_updateLayerScaleInfo:ja,_checkUrl:R,_isHostedService:G,_isAgolService:I,_getLegendLayers:db};u.setObject("arcgis.utils",sb,f);return sb})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(e,u,B){e.DeferredList=function(A,p,l,k,g){var d=[];u.call(this);var c=this;0!==A.length||p||this.resolve([0,[]]);var a=0;B.forEach(A,function(b,f){function t(n,m){d[f]=[n,m];a++;a===A.length&&c.resolve(d)}b.then(function(n){p?c.resolve([f,
n]):t(!0,n)},function(n){l?c.reject(n):t(!1,n);if(k)return null;throw n;})})};e.DeferredList.prototype=new u;e.DeferredList.prototype.gatherResults=function(A){A=new e.DeferredList(A,!1,!0,!1);A.addCallback(function(p){var l=[];B.forEach(p,function(k){l.push(k[1])});return l});return A};return e.DeferredList})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(e,u,B,A,p,l,k,g,d){var c=u.getObject("dojox.gfx",!0),a=c._base={};c._hasClass=function(h,v){return(h=h.getAttribute("className"))&&0<=(" "+h+" ").indexOf(" "+v+" ")};c._addClass=function(h,v){var r=h.getAttribute("className")||"";(!r||0>(" "+r+" ").indexOf(" "+v+" "))&&h.setAttribute("className",r+(r?" ":"")+v)};c._removeClass=function(h,v){var r=h.getAttribute("className");r&&h.setAttribute("className",r.replace(new RegExp("(^|\\s+)"+v+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var h=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},v;if(A("ie")){var r=p.doc.documentElement.style.fontSize||"";r||(p.doc.documentElement.style.fontSize="100%")}var C=g.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},p.body());for(v in h)C.style.fontSize=v,h[v]=16*Math.round(12*C.offsetHeight/16)/12/
1E3;A("ie")&&(p.doc.documentElement.style.fontSize=r);p.body().removeChild(C);return h};var b=null;a._getCachedFontMeasurements=function(h){if(h||!b)b=a._getFontMeasurements();return b};var f=null,t={};a._getTextBox=function(h,v,r){var C=arguments.length,w;f||(f=g.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},p.body()));var y=f;y.className="";var q=y.style;q.borderWidth="0";q.margin="0";q.padding="0";q.outline="0";if(1<C&&v)for(w in v)w in t||(q[w]=v[w]);2<
C&&r&&(y.className=r);y.innerHTML=h;y.getBoundingClientRect?(q=y.getBoundingClientRect(),q={l:q.left,t:q.top,w:q.width||q.right-q.left,h:q.height||q.bottom-q.top}):q=d.getMarginBox(y);y.innerHTML="";return q};a._computeTextLocation=function(h,v,r,C){var w={};switch(h.align){case "end":w.x=h.x-v;break;case "middle":w.x=h.x-v/2;break;default:w.x=h.x}w.y=h.y-r*(C?.75:1);return w};a._computeTextBoundingBox=function(h){if(!c._base._isRendered(h))return{x:0,y:0,width:0,height:0};var v=h.getShape();var r=
h.getFont()||c.defaultFont;h=h.getTextWidth();r=c.normalizedLength(r.size);v=a._computeTextLocation(v,h,r,!0);return{x:v.x,y:v.y,width:h,height:r}};a._isRendered=function(h){for(h=h.parent;h&&h.getParent;)h=h.parent;return null!==h};var n=0;a._getUniqueId=function(){do var h=e._scopeName+"xUnique"+ ++n;while(k.byId(h));return h};var m=A("pointer-events")?"touchAction":A("MSPointer")?"msTouchAction":null;a._fixMsTouchAction=m?function(h){h.rawNode.style[m]="none"}:function(){};u.mixin(c,{defaultPath:{type:"path",
path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,
kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var h=
{};return function(v){var r=h[v];if(r)return new r;r=h[v]=function(){};r.prototype=c["default"+v];return new r}}(),normalizeColor:function(h){return h instanceof B?h:new B(h)},normalizeParameters:function(h,v){var r;if(v){var C={};for(r in h)r in v&&!(r in C)&&(h[r]=v[r])}return h},makeParameters:function(h,v){var r=null;if(!v)return u.delegate(h);var C={};for(r in h)r in C||(C[r]=u.clone(r in v?v[r]:h[r]));return C},formatNumber:function(h,v){var r=h.toString();if(0<=r.indexOf("e"))r=h.toFixed(4);
else{var C=r.indexOf(".");0<=C&&5<r.length-C&&(r=h.toFixed(4))}return 0>h?r:v?" "+r:r},makeFontString:function(h){return h.style+" "+h.variant+" "+h.weight+" "+h.size+" "+h.family},splitFontString:function(h){var v=c.getDefault("Font");h=h.split(/\s+/);if(!(5>h.length)){v.style=h[0];v.variant=h[1];v.weight=h[2];var r=h[3].indexOf("/");v.size=0>r?h[3]:h[3].substring(0,r);var C=4;0>r&&("/"==h[4]?C=6:"/"==h[4].charAt(0)&&(C=5));C<h.length&&(v.family=h.slice(C).join(" "))}return v},cm_in_pt:72/2.54,mm_in_pt:7.2/
2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(h){return h*c.px_in_pt()},px2pt:function(h){return h/c.px_in_pt()},normalizedLength:function(h){if(0===h.length)return 0;if(2<h.length){var v=c.px_in_pt(),r=parseFloat(h);switch(h.slice(-2)){case "px":return r;case "pt":return r*v;case "in":return 72*r*v;case "pc":return 12*r*v;case "mm":return r*c.mm_in_pt*v;case "cm":return r*c.cm_in_pt*v}}return parseFloat(h)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(h,v){return h&&v&&h===v},switchTo:function(h){var v="string"==typeof h?c[h]:h;v&&(l.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(r){c[r]=v[r]}),"string"==typeof h?c.renderer=h:l.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(r){return c.renderer=c[r]&&c[r].Surface===c.Surface?r:null}))}});return c})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(e,u,B,A){var p=e([u],{declaredClass:"esri.Color"});p.toJsonColor=function(l){return l&&[l.r,l.g,l.b,1<l.a?l.a:Math.round(255*l.a)]};p.toDojoColor=function(l){return l&&new p([l[0],l[1],l[2],l[3]/255])};B="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(e=0;e<B.length;e++)p[B[e]]=u[B[e]];return p})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(e,u,
B,A,p){function l(){}B=[-2.0037508342788905E7,2.0037508342788905E7];A=[-2.0037508342787E7,2.0037508342787E7];e=e(null,{declaredClass:"esri.SpatialReference",constructor:function(k){k&&(p.isObject(k)?p.mixin(this,k):p.isString(k)?this.wkt=k:this.wkid=k)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:B,origin:A,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:B,origin:A,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:B,origin:A,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:B,origin:A,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==u.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==u.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(k){var g=!1;k&&(g=this.isWebMercator()&&4326===k.wkid||k.isWebMercator()&&4326===this.wkid);return g},isWebMercator:function(){return this._isWebMercator()},equals:function(k){var g=!1;k&&(this===k&&
(g=!0),this.wkid||k.wkid?g=this.wkid===k.wkid||this.isWebMercator()&&k.isWebMercator()||this.wkid===k.latestWkid||k.wkid===this.latestWkid:this.wkt&&k.wkt&&(g=this.wkt.toUpperCase()===k.wkt.toUpperCase()));return g},toJson:function(){var k=null;null!=this.wkid?k={wkid:this.wkid}:null!=this.wkt&&(k={wkt:this.wkt});k&&null!=this.latestWkid&&(k.latestWkid=this.latestWkid);return k}});l.prototype=e.prototype;e.simpleConstructor=l;return e})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x){var E={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},z={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},D=A.connect,F=A.disconnect,J=f.create,L=n.set,Q=p.hitch,ba=t.getMarginBox,fa=u.deprecated,Y=p.mixin,ma=0;return B(y,{declaredClass:"esri.Map",constructor:function(ca,la){la=la||{};Y(this,{_slider:null,_navDiv:null,_mapParams:Y({attributionWidth:.45,slider:!0,nav:!1,logo:!0,
sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},la)});Y(this,{isMapNavigation:null!=la.isMapNavigation?la.isMapNavigation:!0,isDoubleClickZoom:null!=la.isDoubleClickZoom?la.isDoubleClickZoom:!0,isClickRecenter:null!=la.isClickRecenter?la.isClickRecenter:!0,isPan:null!=la.isPan?la.isPan:!0,isRubberBandZoom:null!=la.isRubberBandZoom?la.isRubberBandZoom:!0,isPinchZoom:null!=la.isPinchZoom?la.isPinchZoom:!0,isKeyboardNavigation:null!=la.isKeyboardNavigation?la.isKeyboardNavigation:
!0,isScrollWheel:null!=la.isScrollWheel?la.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});p.isFunction(v._css)&&(v._css=v._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);ca=C("esri-transforms")&&C("esri-transitions");this.navigationMode=this._mapParams.navigationMode||ca&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||ca||(this.navigationMode="classic");this.fadeOnZoom=w.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=la&&la.smartNavigation;if(!(w.isDefined(this.smartNavigation)||!C("mac")||C("esri-touch")||C("esri-pointer")||3.5>=C("ff"))){var ta=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);ta&&w.isDefined(ta[1])&&w.isDefined(ta[3])&&(ca=parseInt(ta[1],10),ta=parseInt(ta[3],10),this.smartNavigation=10<ca||10===ca&&
6<=ta)}this.showAttribution=w.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=D(this,"onLoad",this,"_onLoadInitNavsHandler");var za=J("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(ca=p.getObject("esri.dijit.Attribution",!1))this._initAttribution(ca,za);else{var P=ma++,ea=this;this._rids&&this._rids.push(P);e(["./dijit/Attribution"],function(ra){var M=ea._rids?l.indexOf(ea._rids,
P):-1;-1!==M&&(ea._rids.splice(M,1),ea._initAttribution(ra,za))})}this._mapParams.logo&&(ca={},6===C("ie")&&(ca.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+e.toUrl("./images/map/logo-med.png")+"')"),this._ogol=J("div",{style:ca,tabIndex:"0",title:"Esri"},za),this._setLogoSize(),this._onMapResizeLogo_connect=D(this,"onResize",this,"_setLogoSize"),this._ogol_connect=D(this._ogol,m,this,"_openLogoLink"));this.navigationManager=new q(this);
la&&la.basemap&&(this._onLoadFix=!0,this.setBasemap(la.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)la=this._getEnclosingResizableWidget(this.container)||window,ca=this.resize,this._rszSignal=g.pausable(la,"resize",ca),this._oriSignal=g.pausable(window,"orientationchange",ca),d.after(la,"resize",ca,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(ca){var la=
h.getEnclosingWidget(ca);return la?la.resize?la:this._getEnclosingResizableWidget(ca.parentNode):la},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(b.remove(this._ogol,"logo-med"),b.add(this._ogol,"logo-sm")):(b.remove(this._ogol,"logo-sm"),b.add(this._ogol,"logo-med")))},_initAttribution:function(ca,la){la=J("span",{class:"esriAttribution"},la,"first");L(la,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(D(la,m,
function(){b.contains(this,"esriAttributionOpen")?b.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&b.add(this,"esriAttributionOpen")}));this.attribution=new ca({map:this},la)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var ca=this._slider;ca&&ca.destroy&&!ca._destroyed&&ca.destroy();ca=this._navDiv;var la=this.attribution;ca&&f.destroy(ca);la&&la.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);
l.forEach(this._connects,F);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(ca){var la=this.getLevel();return!this.__tileInfo||!(la===this.getMinZoom()&&0>ca||la===this.getMaxZoom()&&0<ca)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();
this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var ca=-1!==this._getSliderClass(!0).indexOf("Horizontal");ca=[ca?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",ca?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",ca?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(l.some(ca,function(za){return!p.getObject(za,!1)})){ca=l.map(ca,function(za){return za.replace(/\./g,"/")});
var la=ma++,ta=this;this._rids&&this._rids.push(la);e(ca,function(){var za=ta._rids?l.indexOf(ta._rids,la):-1;-1!==za&&(ta._rids.splice(za,1),ta._createSlider.apply(ta,arguments))})}else ca=l.map(ca,function(za){return p.getObject(za,!1)}),this._createSlider.apply(this,ca)}F(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var ca,la=b.add,ta=this.id;this._navDiv=J("div",{id:ta+"_navdiv"},this.root);la(this._navDiv,"navDiv");var za=this.width/2,P=this.height/2;for(ca in E){var ea=
E[ca];var ra=J("div",{id:ta+"_pan_"+ca},this._navDiv);la(ra,"fixedPan "+ea);if("up"===ca||"down"===ca){var M=parseInt(ba(ra).w,10)/2;L(ra,{left:za-M+"px",zIndex:30})}else M=parseInt(ba(ra).h,10)/2,L(ra,{top:P-M+"px",zIndex:30});this._connects.push(D(ra,"onclick",Q(this,this[ea])))}this._onMapResizeNavHandler_connect=D(this,"onResize",this,"_onMapResizeNavHandler");for(ca in z)ea=z[ca],ra=J("div",{id:ta+"_pan_"+ca,style:{zIndex:30}},this._navDiv),la(ra,"fixedPan "+ea),this._connects.push(D(ra,"onclick",
Q(this,this[ea])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(ca,la,ta){ca=this.id;la/=2;ta/=2;var za=c.byId,P;for(P in E){var ea=za(ca+"_pan_"+P);if("up"===P||"down"===P){var ra=parseInt(ba(ea).w,10)/2;L(ea,"left",la-ra+"px")}else ra=parseInt(ba(ea).h,10)/2,L(ea,"top",ta-ra+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var ca=this._slider=J("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),la=J("div",{class:"esriSimpleSliderIncrementButton",
tabIndex:"0",role:"button"},ca),ta=J("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},ca);this._addZoomButtonTooltips(la,ta);this._incButton=la;this._decButton=ta;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var za=x.widgets.zoomSlider;this._addZoomButtonIcon(la,"+",za.zoomIn);this._addZoomButtonIcon(ta,"\x26minus;",za.zoomOut);8>C("ie")&&b.add(ta,"dj_ie67Fix");this._connects.push(D(la,m,this,this._simpleSliderChangeHandler));this._connects.push(D(ta,m,this,
this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(D(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>C("ie")&&c.setSelectable(ca,!1);this.root.appendChild(ca);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(ca){k.stop(ca);ca=-1!==ca.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:ca?1:-1})},_simpleSliderZoomHandler:function(ca,la,ta,za){var P;ca=this._incButton;la=this._decButton;-1<za&&za===
this.getMaxZoom()?P=ca:-1<za&&za===this.getMinZoom()&&(P=la);P?(b.add(P,"esriSimpleSliderDisabledButton"),b.remove(P===ca?la:ca,"esriSimpleSliderDisabledButton")):(b.remove(ca,"esriSimpleSliderDisabledButton"),b.remove(la,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(ca){ca=ca?"Large":"Simple";var la=this._mapParams.sliderOrientation,ta=this._mapParams.sliderPosition||"";la=la&&"horizontal"===la.toLowerCase()?"esri"+ca+"SliderHorizontal":"esri"+ca+"SliderVertical";if(ta)switch(ta.toLowerCase()){case "top-left":ta=
"esri"+ca+"SliderTL";break;case "top-right":ta="esri"+ca+"SliderTR";break;case "bottom-left":ta="esri"+ca+"SliderBL";break;case "bottom-right":ta="esri"+ca+"SliderBR"}return"esri"+ca+"Slider "+la+" "+ta},_addZoomButtonIcon:function(ca,la,ta){f.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:la},ca);f.create("span",{class:"esriIconFallbackText",innerHTML:ta},ca)},_addZoomButtonTooltips:function(ca,la){var ta=x.widgets.zoomSlider;a.set(ca,"title",ta.zoomIn);a.set(la,"title",ta.zoomOut)},
_createSlider:function(ca,la,ta){if(this._mapParams.slider){var za=J("div",{id:this.id+"_zoom_slider"},this.root),P=r.defaults.map,ea=this._getSliderClass(!0),ra=-1!==ea.indexOf("Horizontal"),M=this.getNumLevels();if(0<M){var Z,ka,qa=this._mapParams.sliderLabels,ua=!!qa,Aa=!1!==qa;if(Aa){var ya=ra?"bottomDecoration":"rightDecoration";if(!qa)for(qa=[],P=0;P<M;P++)qa[P]="";l.forEach([{class:"esriLargeSliderTicks",container:ya,count:M,dijitClass:la},{class:ua&&"esriLargeSliderLabels",container:ya,count:M,
labels:qa,dijitClass:ta}],function(I){var R=J("div"),X=I.dijitClass;delete I.dijitClass;za.appendChild(R);X===la?Z=new X(I,R):ka=new X(I,R)})}ca=this._slider=new ca({id:za.id,class:ea,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:M,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},za);ca.startup();Aa&&(Z.startup(),ka.startup());this._slider_connect=D(ca,"onChange",this,"_onSliderChangeHandler");this._connects.push(D(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));
this._connects.push(D(ca._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{ca=this._slider=new ca({id:za.id,class:ea,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:P.sliderChangeImmediate,style:"height:50px; z-index:30;"},za);ta=ca.domNode.firstChild.childNodes;for(P=1;3>=P;P++)L(ta[P],"visibility","hidden");ca.startup();this._slider_connect=D(ca,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(D(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}P=
ca.incrementButton;ta=ca.decrementButton;ra?this._addZoomButtonTooltips(P,ta):this._addZoomButtonTooltips(ta,P);P.style.outline="none";ta.style.outline="none";ca.sliderHandle.style.outline="none";ca._onKeyPress=function(){};if(ra=ca._movable){var G=ra.onMouseDown;ra.onMouseDown=function(I){9>C("ie")&&1!==I.button||G.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect);this._slider_connect=D(this._slider,"onChange",
this,"_onSliderChangeDragHandler");this._slidermovestop_connect=D(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(ca){this._extentUtil({targetLevel:ca})},_onSliderMoveEndHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect)},_onSliderChangeHandler:function(ca){this.setLevel(ca)},_updateSliderValue:function(ca,la){F(this._slider_connect);var ta=this._slider,za=ta._onChangeActive;ta._onChangeActive=!1;ta.set("value",ca);ta._onChangeActive=
za;this._slider_connect=D(ta,"onChange",this,la)},_onExtentChangeSliderHandler:function(ca,la,ta,za){F(this._slidermovestop_connect);this._updateSliderValue(za.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(ca){this._extentUtil({numLevels:0<ca?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(ca){window.open(r.defaults.map.logoLink,"_blank");k.stop(ca)},enableMapNavigation:function(){this.isMapNavigation||
(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(ca){if(this.isMapNavigation&&this["is"+ca])this.navigationManager["enable"+ca]();else this.navigationManager["disable"+ca]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||
(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(fa(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=
!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(fa(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=
!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||
(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||
(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||
this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(L(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&
(L(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(ca){ca.graphic||(ca.graphic=this.syncHitTestForWebGL(ca))}})})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q,ba,fa,Y,ma,ca,la,ta,za,P,ea,ra,M,Z,ka,qa,ua,Aa){function ya(N,aa){var ja=N.lods;ja.sort(function(Ea,Qa){return Ea.scale>Qa.scale?-1:Ea.scale<Qa.scale?1:0});var pa=[];ja=g.filter(ja,function(Ea){if(-1===S(pa,Ea.scale))return pa.push(Ea.scale),!0});var wa=aa.lods=[],Ja;g.forEach(ja,function(Ea,Qa){Ja=wa[Qa]=new M(Ea);Ja.level=Qa});aa.tileInfo=new ra(ia(N,{lods:wa}))}var G,I=za.toMapPoint,R=za.toScreenPoint,X=p.connect,W=p.disconnect,
sa=k.hitch,T=m.set,S=g.indexOf,ia=k.mixin,na=0,va=w.defaults.map,Ba=va.layerNamePrefix,Na=va.graphicsLayerNamePrefix,Va=new RegExp("^"+Ba+"(\\d+)$"),Da=new RegExp("^"+Na+"(\\d+)$"),K=function(){},V=0,ha=ua.isWebGLEnabled();return A([x,J],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:ha,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(N,aa){aa=aa||{};this.registerConnectEvents();ia(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ja=this.container=a.byId(N),pa=this.id=b.get(ja,"id")||v.getUniqueId(this.declaredClass);f.add(ja,"map");
var wa=n.getContentBox(ja);N=f.add;var Ja=t.create;this.position=new Y(0,0);this._reposition();var Ea=this.width=0<wa.w?wa.w:va.width,Qa=this.height=0<wa.h?wa.h:va.height,Ka=this.root=Ja("div",{id:pa+"_root",style:{width:Ea+"px",height:Qa+"px",direction:"ltr"}});N(Ka,"esriMapContainer");wa=this.__container=Ja("div",{id:pa+"_container"},Ka);T(wa,"position","absolute");N(wa,"esriMapContainer");ja.appendChild(Ka);aa=this._params=ia({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},aa);this.setWebGLEnabled(null!=aa.webglEnabled?aa.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=aa.maxWebGLContexts?aa.maxWebGLContexts:-1;this.wrapAround180=aa.wrapAround180;this.optimizePanAnimation=aa.optimizePanAnimation;this.setBackgroundColor(aa.backgroundColor);q.isDefined(aa.resizeDelay)&&(this.resizeDelay=aa.resizeDelay);aa.lods&&(ya({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:aa.lods},aa),this.__tileInfo=aa.tileInfo);this.extent=aa.extent;this._extentUtil({mapCenter:aa.center,targetLevel:aa.zoom,targetScale:aa.scale});this.__visibleRect=new ca(0,0,Ea,Qa);this.__visibleDelta=new ca(0,0,Ea,Qa);pa=this._layersDiv=Ja("div",{id:pa+"_layers"});N(pa,"esriMapLayers");wa.appendChild(pa);this._zoomAnimDiv=Ja("div",{style:{position:"absolute"}});aa.infoWindow?this.infoWindow=aa.infoWindow:(N=this.infoWindow=
new Aa(aa.popupOptions,Ja("div")),N.startup(),N._ootb=!0,T(N.domNode,"zIndex",40));if(aa.showLabels){var Pa=this;e(["./layers/LabelLayer"],function(Ua){G=Ua;Pa._createLabelLayer()});this.on("load",function(){Pa._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:aa.showInfoWindowOnClick});this._zoomStartHandler=sa(this,this._zoomStartHandler);this._zoomingHandler=sa(this,this._zoomingHandler);this._zoomEndHandler=sa(this,this._zoomEndHandler);this._panningHandler=
sa(this,this._panningHandler);this._panEndHandler=sa(this,this._panEndHandler);this._endTranslate=sa(this,this._endTranslate);this._timedResize=sa(this,this._timedResize);this._execResize=sa(this,this._execResize);this._processLabelLayers=sa(this,this._processLabelLayers);this._updateLabelLayers=sa(this,this._updateLabelLayers);this.resize=sa(this,this.resize);c.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(N){return e.toAbsMid?e.toAbsMid(N):u.id.replace(/\/[^\/]*$/ig,"/")+N},_cleanUp:function(){var N=
this.infoWindow;N&&(N._ootb&&N.destroy?N.destroy():N.unsetMap(this),delete this.infoWindow);W(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");t.destroy(this.root);this.root=null},_addLayer:function(N,aa,ja){if(N.id){var pa=N.id.match(N instanceof ea?Da:Va);pa&&pa[1]&&(pa=Number(pa[1]),na<=pa&&(na=pa+1))}var wa=N.id||(N instanceof ea?Na:Ba)+na++;N.id=wa;this._layers[wa]=N;N._isRefLayer="top"===ja;ja=!q.isDefined(ja)||0>ja||ja>aa.length||"top"===ja?aa.length:ja;var Ja;
if(!N._isRefLayer)for(;(Ja=this.getLayer(aa[ja-1]))&&Ja._isRefLayer;)ja--;if(pa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ja&&(aa===this.layerIds||aa===this.graphicsLayerIds))this._firstLayerId=wa;aa.splice(ja,0,wa);var Ea=sa(this,this._addLayerHandler),Qa=this;ja=this._connects;Ja=function(){N.loaded?Qa._onLoadFix?(Qa._onLoadFix=!1,setTimeout(function(){Ea(N)},0)):Ea(N):(Qa["_"+wa+"_addtoken_load"]=X(N,"onLoad",Qa,"_addLayerHandler"),Qa["_"+wa+"_addtoken_err"]=X(N,"onError",Qa,
function(Ka){Ea(N,Ka,aa)}))};this.loaded||pa||N.loaded&&-1===S(this.graphicsLayerIds,wa)?Ja():ja.push(X(this,"onLoad",Ja));return N},_forgetLayer:function(N){N=N.id;W(this["_"+N+"_addtoken_load"]);W(this["_"+N+"_addtoken_err"]);var aa=this._layerAddPromises[N];aa&&(delete this._layerAddPromises[N],aa.cancel())},_addLayerHandler:function(N,aa,ja){aa?this._attachLayerToMap(N,aa,ja):N._prepareToAttach?(this._layerAddPromises[N.id]=N._prepareToAttach(this)).always(k.hitch(this,function(pa){pa&&"cancel"===
pa.dojoType||this._attachLayerToMap(N,null,ja)})):N.declaredClass&&(-1<N.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<N.declaredClass.toLowerCase().indexOf("rasterxlayer")&&N.useWebGL)&&!this.isWebGLContextAvailable()?(aa=Error("Too many WebGL contexts. Unable to add the layer: ",N.url),this._attachLayerToMap(N,aa,this.layerIds)):this._attachLayerToMap(N,aa,ja)},_attachLayerToMap:function(N,aa,ja){var pa=this.id,wa=N.id,Ja=S(N instanceof ea?this.graphicsLayerIds:this.layerIds,wa),Ea=
Ja,Qa=!1,Ka=this._params;this._forgetLayer(N);if(aa)delete this._layers[wa],-1!==Ja&&(ja.splice(Ja,1),this.onLayerAddResult(N,aa));else{-1===Ja&&(Ja=S(this._internalLayerIds,wa),Ea=20+Ja,Qa=!0);if(wa===this._firstLayerId){aa=N.spatialReference;ja=this.extent&&this.extent.spatialReference;!ja||ja.equals(aa)||!N.tileInfo&&N.url||(ja=null);ja=this.spatialReference=ja||aa;this.wrapAround180=this.wrapAround180&&ja&&ja._isWrappable()?!0:!1;N.tileInfo&&(this.__tileInfo?(aa=this.__tileInfo.lods,this.__tileInfo=
ia({},N.tileInfo),this.__tileInfo.lods=aa):(ya(ia({},N.tileInfo),Ka),this.__tileInfo=Ka.tileInfo));if(this.wrapAround180){aa=this.__tileInfo;ja=ja._getInfo();if(!aa||Math.abs(ja.origin[0]-aa.origin.x)>ja.dx)this.wrapAround180=!1;this.wrapAround180&&aa&&D._addFrameInfo(aa,ja)}Ka.units=N.units;if((aa=this.__tileInfo&&this.__tileInfo.lods)&&aa.length){ja=Ka.minScale;Ja=Ka.maxScale;var Pa=-1,Ua=-1,eb=!1,ab=!1,gb;for(gb=0;gb<aa.length;gb++)0<ja&&!eb&&ja>=aa[gb].scale&&(Pa=aa[gb].level,eb=!0),0<Ja&&!ab&&
Ja>=aa[gb].scale&&(Ua=0<gb?aa[gb-1].level:-1,ab=!0);-1===Ka.minZoom&&(Ka.minZoom=0===ja?aa[0].level:Pa);-1===Ka.maxZoom&&(Ka.maxZoom=0===Ja?aa[aa.length-1].level:Ua);for(gb=0;gb<aa.length;gb++)Ka.minZoom===aa[gb].level&&(Ka.minScale=aa[gb].scale,this._minResolution=aa[gb].resolution),Ka.maxZoom===aa[gb].level&&(Ka.maxScale=aa[gb].scale,this._maxResolution=aa[gb].resolution)}else Ka.minZoom=Ka.maxZoom=Ka.zoom=-1}N instanceof ea?(this._gc||(this._gc=new ea._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=
pa+"_gc"),this._attachGraphicsLayer(N).id=pa+"_"+wa):(Ea=N._setMap(this,this._layersDiv,Ea,this.__LOD),Ea.id=pa+"_"+wa,this._layerDivs[wa]=Ea,this._reorderLayers(this.layerIds),Qa||-1===N.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(N));wa===this._firstLayerId&&(this.graphics=new ea({id:pa+"_graphics",displayOnPan:Ka.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(N===this.graphics){ja=this._layers[this._firstLayerId];pa=Ka.zoom;Ea=Ka.scale;aa=Ka.center;
ja=ja.initialExtent||ja.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&ja&&(aa&&(aa=this._convertGeometry(ja,aa)),aa&&(ja=ja.centerAt(aa),aa=null));if(aa=this.extent||ja&&new ma(ja.toJson()))-1<pa?aa=this.__getExtentForLevel(pa,null,aa).extent:0<Ea&&(aa=ta.getExtentForScale(this,Ea,aa));if(!aa){console.log("Map: "+this.invalidExtent);return}Ka=this._fixExtent(aa,Ka.fitExtent);this.extent=Ka.extent;this.__LOD=Ka.lod;this.__setExtent(this.extent);
this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Qa||(this.onLayerAdd(N),this.onLayerAddResult(N));W(this[wa+"_addLayerHandler_connect"])}},_convertGeometry:function(N,aa){N=N&&N.spatialReference;var ja=aa&&aa.spatialReference;N&&ja&&!N.equals(ja)&&(N._canProject(ja)?N.isWebMercator()?aa=P.geographicToWebMercator(aa):4326===N.wkid&&(aa=P.webMercatorToGeographic(aa,!0)):(console.log("Map: "+q.substitute({geometry:ja.wkid||ja.wkt,map:N.wkid||N.wkt},this.invalidGeometry)),
aa=null));return aa},_attachGraphicsLayer:function(N){var aa=N.id;N=N._setMap(this,this._gc._surface);this._layerDivs[aa]=N;this._reorderLayers(this.graphicsLayerIds);return N},_detachGraphicsLayer:function(N){N.loaded&&N.getMap()&&N._unsetMap(this,this._gc._surface)},_reorderLayers:function(N){var aa=this.onLayerReorder,ja=t.place,pa=this._layerDivs,wa=this._layers,Ja=this._gc?this._gc._surface.getEventSource():null;if(N===this.graphicsLayerIds)g.forEach(N,function(Ua,eb){var ab=pa[Ua];Ua=wa[Ua];
ab&&(this._gc._reorderLayer(Ua,ab,eb),aa(Ua,eb))},this);else{var Ea=this.graphics,Qa=Ea?Ea.id:null,Ka=this._layersDiv,Pa;g.forEach(N,function(Ua,eb){Pa=pa[Ua];Ua!==Qa&&Pa&&(ja(Pa,Ka,eb),aa(wa[Ua],eb))});this._mapImageLyr&&this._placeMapImageLyr();Ja&&(Ja=9>h("ie")?Ja.parentNode:Ja,ja(Ja,Ja.parentNode,"last"))}this.onLayersReordered([].concat(N))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(N){var aa=parseFloat(N.left),
ja=parseFloat(N.top);N=new ma(aa,ja-parseFloat(N.height),aa+parseFloat(N.width),ja,this.spatialReference);aa=this.extent.getWidth()/N.getWidth();this.__zoom(N,aa,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var N=this._zoomAnimDiv,aa=N.extent,ja=this.extent.getWidth()/aa.getWidth(),pa=N.anchor,wa=N.newLod,Ja=N.levelChange;N.extent=N.anchor=N.levelChange=N.startingExtent=N.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(aa,ja,pa,wa,Ja)},_panningHandler:function(N){if(isNaN(parseFloat(N.left))||
isNaN(parseFloat(N.top))){var aa=Math.round,ja=this._panAnim.node;N.left=-1*(this._delta.x-aa(this.width/2))+"px";N.top=-1*(this._delta.y-aa(this.height/2))+"px";m.set(ja,"left",N.left);m.set(ja,"top",N.top)}N=new Y(parseFloat(N.left),parseFloat(N.top));aa=this.toMap(N);this.onPan(this.extent.offset(this.extent.xmin-aa.x,this.extent.ymax-aa.y),N)},_panEndHandler:function(N){this.__panning=!1;var aa=Math.round;N=new Y(-aa(parseFloat(N.style.left)),-aa(parseFloat(N.style.top)));aa=N.x;var ja=N.y,pa=
this.__visibleRect,wa=this.__visibleDelta;pa.x+=-aa;pa.y+=-ja;wa.x+=-aa;wa.y+=-ja;T(this._zoomAnimDiv,{left:"0px",top:"0px"});pa=this.extent;wa=this._ratioW;var Ja=this._ratioH;pa=new ma(pa.xmin+aa/wa,pa.ymin-ja/Ja,pa.xmax+aa/wa,pa.ymax-ja/Ja,this.spatialReference);N.setX(-N.x);N.setY(-N.y);this._delta=this._panAnim=null;this._updateExtent(pa);this.onPanEnd(pa,N);this._fireExtChg([pa,N,!1,this.__LOD])},_fixExtent:function(N,aa){for(var ja=this._reshapeExtent(N),pa=1.25;!0===aa&&(ja.extent.getWidth()<
N.getWidth()||ja.extent.getHeight()<N.getHeight())&&0<ja.lod.level&&3>=pa;)ja=this._reshapeExtent(N.expand(pa)),pa+=.25;return ja},_getFrameWidth:function(){var N=-1,aa=this.spatialReference._getInfo();this.__LOD?(aa=this.__LOD._frameInfo)&&(N=aa[3]):aa&&(N=Math.round(2*aa.valid[1]/(this.extent.getWidth()/this.width)));return N},_fixAspectRatio:function(N){var aa=N.getWidth(),ja=N.getHeight(),pa=aa/ja,wa=this.width/this.height,Ja=0,Ea=0;this.width>this.height?aa>ja?wa>pa?Ja=ja*wa-aa:Ea=aa/wa-ja:Ja=
ja*wa-aa:this.width<this.height?aa<ja?wa>pa?Ja=ja*wa-aa:Ea=aa/wa-ja:Ea=aa/wa-ja:aa<ja?Ja=ja-aa:aa>ja&&(Ea=aa/wa-ja);Ja&&(N.xmin-=Ja/2,N.xmax+=Ja/2);Ea&&(N.ymin-=Ea/2,N.ymax+=Ea/2);return N},_reshapeExtent:function(N){N=this._fixAspectRatio(N);return this._getAdjustedExtent(N)},_getAdjustedExtent:function(N){if(this.__tileInfo)return D.getCandidateTileInfo(this,this.__tileInfo,N);var aa=ta.getScale(this,N),ja=this.getMinScale(),pa=this.getMaxScale();!ja||aa<=ja?!pa||aa>=pa||(N=ta.getExtentForScale(this,
pa,N)):N=ta.getExtentForScale(this,ja,N);return{extent:N}},_onBingLayerAdd:function(N){this["__"+N.id+"_vis_connect"]=p.connect(N,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(N.visible)},_onBingLayerRemove:function(N){p.disconnect(this["__"+N.id+"_vis_connect"]);delete this["__"+N.id+"_vis_connect"];var aa=g.some(this.layerIds,function(ja){return(N=this._layers[ja])&&N.visible&&-1!==N.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(aa)},_toggleBingLogo:function(N){N&&
!this._bingLogo?(N={left:this._mapParams&&this._mapParams.nav?"25px":""},6===h("ie")&&(N.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+e.toUrl("./images/map/bing-logo-lg.png")+"')"),N=this._bingLogo=t.create("div",{style:N},this.root),f.add(N,"bingLogo-lg")):!N&&this._bingLogo&&(t.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(N,aa){var ja=this._zoomAnim,pa=this._panAnim;if(ja&&ja._active)ja.stop(),ja._fire("onEnd",
[ja.node]);else if(pa&&pa._active){pa.stop();this._panAnim=null;aa=pa.curve.getValue(pa._getStep());N=Math.round(parseFloat(aa.left));aa=Math.round(parseFloat(aa.top));ja=this.navigationManager._dragOrigin;this.__pan(N,aa);ja&&(ja.x-=N,ja.y-=aa);return}this.__panning=!0;this.onPanStart(this.extent,new Y(N,aa))},__pan:function(N,aa){var ja=this.extent,pa=this._ratioW,wa=this._ratioH;this.onPan(new ma(ja.xmin-N/pa,ja.ymin+aa/wa,ja.xmax-N/pa,ja.ymax+aa/wa,this.spatialReference),new Y(N,aa))},__panEnd:function(N,
aa){var ja=this.__visibleRect,pa=this.__visibleDelta;ja.x+=N;ja.y+=aa;pa.x+=N;pa.y+=aa;ja=new Y(N,aa);pa=this.extent;var wa=this._ratioW,Ja=this._ratioH;pa=new ma(pa.xmin-N/wa,pa.ymin+aa/Ja,pa.xmax-N/wa,pa.ymax+aa/Ja,this.spatialReference);this.__panning=!1;this._updateExtent(pa);this.onPanEnd(pa,ja);this._fireExtChg([pa,ja,!1,this.__LOD])},__zoomStart:function(N,aa){this.__zooming=!0;this.onZoomStart(N,1,aa,this.__LOD?this.__LOD.level:null)},__zoom:function(N,aa,ja){this.onZoom(N,aa,ja)},__zoomEnd:function(N,
aa,ja,pa,wa){T(this._layersDiv,{left:"0px",top:"0px"});this._delta=new Y(0,0);this.__visibleRect.x=this.__visibleRect.y=0;N=new ma(N);this.__LOD=pa;this._ratioW=this.width/N.getWidth();this._ratioH=this.height/N.getHeight();var Ja=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(N,wa);this.onZoomEnd(N,aa,ja,pa?pa.level:null);this._fireExtChg([N,Ja,wa,pa])},_extentUtil:function(N,aa,ja,pa,wa){var Ja=new l,Ea=this.width,Qa=this.height;if(N){var Ka=N.numLevels;var Pa=N.targetLevel;var Ua=
q.isDefined(Pa);var eb=N.factor;var ab=N.mapAnchor;var gb=N.screenAnchor;var db=N.mapCenter;var kb=N.levelOrFactor;var rb=N.targetScale;var mb=q.isDefined(rb)&&0<rb}if(aa){var Za=aa.dx;var hb=aa.dy;db=aa.mapCenter}k.isArray(db)&&(db=new fa(db));var jb=this._panAnim;aa=(N=this._stopAnim())?N.divExtent:this.extent;var Jb=this.__tileInfo,Ab=this._params;if(!this.loaded){if(ja)aa&&(ja=this._convertGeometry(aa,ja)),ja&&(this.extent=ja,Ab.zoom=Ab.scale=-1,Ab.center=null);else if(db||Ua||mb){if(db)if(aa){if(db=
this._convertGeometry(aa,db))this.extent=aa.centerAt(db),Ab.center=null}else Ab.center=db;Ua&&-1<Pa?(Ab.zoom=Pa,Ab.scale=-1):mb&&(Ab.scale=rb,Ab.zoom=-1)}Ja.resolve();return Ja}if(db&&(db=this._convertGeometry(this,db),!db)||ab&&(ab=this._convertGeometry(this,ab),!ab)||ja&&(ja=this._convertGeometry(this,ja),!ja))return Ja.reject(),Ja;jb&&ab&&gb&&(ab=I(this.extent,Ea,Qa,gb));N&&ab&&gb&&(ab=I(N.divExtent,Ea,Qa,gb));if(Ua)if(Jb)Ka=this.getMinZoom(),Ua=this.getMaxZoom(),Pa<Ka?Pa=Ka:Pa>Ua&&(Pa=Ua),Ka=
Pa-(N?N.level:this.getLevel());else{Ka=0<Pa?-1:1;var vb=kb?Pa:null}if(!ja)if(q.isDefined(Ka))Jb?(Ea=N?N.level:this.getLevel(),Ea=this.__getExtentForLevel(Ea+Ka,db,aa).extent):(Ea=(N?N.end:this.extent).expand(vb||(0<Ka?.5*Ka:2*-Ka)),vb&&db&&(Ea=Ea.centerAt(db))),Ea&&(db?ja=Ea:(Za=ab||aa.getCenter(),Qa=Ea.getWidth(),hb=Ea.getHeight(),Ea=Za.x>=aa.xmin&&Za.x<=aa.xmax?(Za.x-aa.xmin)/aa.getWidth():.5,ja=Za.y>=aa.ymin&&Za.y<=aa.ymax?(Za.y-aa.ymin)/aa.getHeight():.5,Ea=Za.x-Ea*Qa,Za=Za.y-ja*hb,ja=new ma(Ea,
Za,Ea+Qa,Za+hb,this.spatialReference)));else if(mb)ja=ta.getExtentForScale(this,rb,aa);else if(q.isDefined(eb))ja=aa.expand(eb);else if(Za||hb)N?(ja=N.end,ab=ja.getCenter(),vb=R(ja,Ea,Qa,ab),vb.x+=Za,vb.y+=hb,vb=I(ja,Ea,Qa,vb),ja=ja.offset(vb.x-ab.x,vb.y-ab.y)):(Za=new Y(Ea/2+Za,Qa/2+hb),Za=I(aa,Ea,Qa,Za),Qa=aa.getWidth(),hb=aa.getHeight(),Ea=Za.x-Qa/2,Za=Za.y-hb/2,ja=new ma(Ea,Za,Ea+Qa,Za+hb,this.spatialReference));ja||(db?(aa=N?N.end:aa,Qa=aa.getWidth(),hb=aa.getHeight(),Ea=db.x-Qa/2,Za=db.y-hb/
2,ja=new ma(Ea,Za,Ea+Qa,Za+hb,this.spatialReference)):N&&(ja=N.end));ja?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,K),this._extentDfd.reject()),this._extentDfd=Ja,this.__setExtent(ja,null,gb,pa,N,wa)):Ja.reject();return Ja},__setExtent:function(N,aa,ja,pa,wa,Ja){try{if(this._firstLayerId)this.extent=N;else{var Ea=!0,Qa=this.spatialReference,Ka=wa?wa.divExtent:this.extent,Pa=this._fixExtent(N,pa||!1);N=Pa.extent;var Ua=N.getWidth(),eb=N.getHeight(),ab=Math.round;if(Ka){var gb=
ab(1E6*Ka.getWidth()),db=ab(1E6*Ua),kb=ab(1E6*Ka.getHeight()),rb=ab(1E6*eb);Ea=gb!==db||kb!==rb}var mb,Za=wa&&wa.rect,hb=wa&&wa.divExtent;if(va.zoomDuration&&Ea&&Ka){hb=hb||new ma(Ka);Za=Za||{left:Ka.xmin,top:Ka.ymax,width:Ka.getWidth(),height:Ka.getHeight()};var jb={left:N.xmin,top:N.ymax,width:Ua,height:eb};var Jb=new fa(N.xmin,N.ymax,Qa),Ab=new fa(N.xmin,N.ymin,Qa),vb=new fa(this.extent.xmin,this.extent.ymax,Qa),Ub=new fa(this.extent.xmin,this.extent.ymin,Qa);(mb=la.getLineIntersection(vb,Jb,Ub,
Ab,Qa))||wa||(Ea=!1)}this._ratioW=this.width/Ua;this._ratioH=this.height/eb;var zb=this._zoomAnimDiv;if(Ea)if(T(this._layersDiv,{left:"0px",top:"0px"}),aa=new Y(0,0),this.__visibleRect.x=this.__visibleRect.y=0,Za&&jb){this._delta=aa;zb.id="_zAD";zb.startingExtent=hb;zb.extent=N;zb.levelChange=Ea;zb.newLod=Pa.lod;zb.anchor=ja?ja:!mb&&wa?wa.anchor:R(this.extent,this.width,this.height,mb);var Db=this.extent.getWidth()/N.getWidth();va.zoomAnimationThrottled&&1024<(1>Db?1/Db:Db)?(this.__zoomStart(hb,zb.anchor),
this.__zoom(hb,1,zb.anchor),this._fireOnScale(1,zb.anchor,!0),this.__zoomEnd(N,Db,zb.anchor,Pa.lod,Ea)):(this._zoomAnim=E.resize({node:zb,start:Za,end:jb,duration:va.zoomDuration,rate:va.zoomRate,beforeBegin:wa?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(Db,zb.anchor,Ja))}else this._updateExtent(N,Ea,Ja),this._fireExtChg([this.extent,aa,Ea,this.__LOD=Pa.lod]);else if(!this.__panning)if(!1===this.loaded||Ja)this._updateExtent(N,Ea,
Ja),this._fireExtChg([this.extent,aa,Ea,this.__LOD=Pa.lod]);else{this.__panning=!0;Za=(new ca(0,0,this.width,this.height,this.spatialReference)).getCenter();Za.x=ab(Za.x);Za.y=ab(Za.y);var Kb=this._delta=this.toScreen(N.getCenter()),Rb=Math.abs(Za.x-Kb.x),Gb=Math.abs(Za.y-Kb.y);this.optimizePanAnimation&&(Rb>2*this.width||Gb>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,
this._updateExtent(N,!1,Ja),this.onPanEnd(this.extent,new Y(0,0)),this._fireExtChg([this.extent,new Y(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new Y(0,0)),this._panAnim=E.slideTo({node:zb,left:Za.x-Kb.x,top:Za.y-Kb.y,duration:va.panDuration,rate:va.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(Qb){console.log(Qb.stack),console.error(Qb)}},_fireOnScale:function(N,aa,ja){if("css-transforms"===this.navigationMode){var pa=this.__visibleDelta;
this.onScale(r.scaleAt(N,{x:-1*(this.width/2-(aa.x-pa.x)),y:-1*(this.height/2-(aa.y-pa.y))}),ja)}},_stopAnim:function(){var N=this._zoomAnim,aa=this._panAnim;if(N&&N._active){N.stop();aa=N.curve.getValue(N._getStep());var ja=parseFloat(aa.left),pa=parseFloat(aa.top);N=N.node;return{anchor:N.anchor,start:N.startingExtent,end:N.extent,level:N.newLod&&N.newLod.level,rect:aa,divExtent:new ma(ja,pa-parseFloat(aa.height),ja+parseFloat(aa.width),pa,this.spatialReference)}}aa&&aa._active&&(aa.stop(),aa._fire("onEnd",
[aa.node]))},__getExtentForLevel:function(N,aa,ja){var pa=this.__tileInfo;pa=pa&&pa.lods;N=q.isDefined(N)?N:0;ja=ja||this.extent;aa=aa||ja&&ja.getCenter();if(pa){if(aa){ja=this.getMinZoom();var wa=this.getMaxZoom();N>wa&&(N=wa);N<ja&&(N=ja);N=pa[N];pa=this.width*N.resolution/2;ja=this.height*N.resolution/2;return{extent:new ma(aa.x-pa,aa.y-ja,aa.x+pa,aa.y+ja,aa.spatialReference),lod:N}}}else if(ja)return{extent:ja.expand(!N||1>N?1:N).centerAt(aa)};console.log("Map: "+this.invalidExtent)},_jobs:0,
_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var N=--this._jobs;N?0>N&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(N,aa){this[N]&&this[N].apply(this,aa)},_updateExtent:function(N,aa,ja){this.extent=N;N=this.spatialReference;this._viewInfo={view:new ba({viewingMode:"map",scale:this.getScale()}),sr:N,version:aa?++V:V};(aa||ja)&&this._setClipRect();this._calcGeographicExtent()},
_calcGeographicExtent:function(){var N=this.spatialReference;N&&(N.isWebMercator()?this.geographicExtent=P.webMercatorToGeographic(this._getAvailExtent(),!0):4326===N.wkid&&(this.geographicExtent=new ma(this._getAvailExtent().toJson())))},_fireExtChg:function(N){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",N);if(N=this._extentDfd)delete this._extentDfd,N.resolve()},attr:function(N,aa){var ja=this.container;ja&&(null==aa?ja.removeAttribute(N):
ja.setAttribute(N,aa));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(N,aa,ja){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},
onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},
setCursor:function(N){T(this.__container,"cursor",this.cursor=N)},setMapCursor:function(N){this.setCursor(this._cursor=N)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(N){N&&!N.declaredClass&&(N=new L(N));this.backgroundColor=N||null;var aa="";N&&(aa=9>h("ie")?N.toHex():"rgba("+N.toRgba().join(",")+")");m.set(this.root,{backgroundColor:aa})},setInfoWindow:function(N){var aa=this.infoWindow;aa&&aa.unsetMap(this);this.infoWindow=N;this.loaded&&N&&N.setMap(this)},
setInfoWindowOnClick:function(N){this._params.showInfoWindowOnClick=N;this.popupManager&&this.popupManager.set("enabled",N)},getInfoWindowAnchor:function(N){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(N)||"upperright"},toScreen:function(N,aa){return R(this.extent,this.width,this.height,N,aa)},toMap:function(N){return I(this.extent,this.width,this.height,N)},addLayer:function(N,aa){N&&!this.getLayer(N.id)&&this._addLayer(N,N instanceof ea?this.graphicsLayerIds:this.layerIds,
aa);return N},addLayers:function(N){var aa=[],ja=N.length,pa,wa=N.length;var Ja=p.connect(this,"onLayerAddResult",function(Ea,Qa){-1!==g.indexOf(N,Ea)&&(ja--,aa.push({layer:Ea,success:!Qa,error:Qa}),ja||(p.disconnect(Ja),this.onLayersAddResult(aa)))});for(pa=0;pa<wa;pa++)this.addLayer(N[pa]);return this},removeLayer:function(N,aa){var ja=N.id,pa=N instanceof ea?this.graphicsLayerIds:this.layerIds,wa=S(pa,ja);0<=wa&&(this._forgetLayer(N),pa.splice(wa,1),this.loaded||this._firstLayerId!==ja||(this._firstLayerId=
null),N instanceof ea?this._detachGraphicsLayer(N):N.loaded&&(N.getMap()&&N._unsetMap(this,this._layersDiv),-1!==N.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(N)),delete this._layers[ja],delete this._layerDivs[ja],aa||this._reorderLayers(pa),this.onLayerRemove(N))},removeAllLayers:function(){var N=this.layerIds,aa;for(aa=N.length-1;0<=aa;aa--)this.removeLayer(this._layers[N[aa]],1);N=this.graphicsLayerIds;for(aa=N.length-1;0<=aa;aa--)this.removeLayer(this._layers[N[aa]],1);this.onLayersRemoved()},
reorderLayer:function(N,aa){k.isString(N)&&(B.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),N=this.getLayer(N));var ja=N.id,pa=N instanceof ea?this.graphicsLayerIds:this.layerIds;0>aa?aa=0:aa>=pa.length&&(aa=pa.length-1);N=S(pa,ja);-1!==N&&N!==aa&&(pa.splice(N,1),pa.splice(aa,0,ja),this._reorderLayers(pa))},getLayer:function(N){return this._layers[N]},setWebGLEnabled:function(N){var aa=
this.webglEnabled;this.webglEnabled=(N||!1)&&ha;if(aa!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ua.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(N){return-1!==g.indexOf(this._webglContextOwners,N)},acquireWebGLContext:function(N){return-1!==g.indexOf(this._webglContextOwners,N)?!0:this.isWebGLContextAvailable()?(ua.acquireContext(N),this._webglContextOwners.push(N),
!0):!1},releaseWebGLContext:function(N){var aa=g.indexOf(this._webglContextOwners,N);-1!==aa&&this._webglContextOwners.splice(aa,1);ua.releaseContext(N)},releaseAllWebGLContexts:function(){var N=this._webglContextOwners.slice(0);g.forEach(N,function(aa){this.releaseWebGLContext(aa)},this)},syncHitTestForWebGL:function(N){var aa,ja=N.screenPoint;N=this.graphicsLayerIds.slice(0).reverse();g.some(N,function(pa){pa=this.getLayer(pa);pa.loaded&&!pa.suspended&&pa.hasWebGLSurface()&&(aa=pa._div.syncHitTest(ja.x,
ja.y));return!!aa},this);return aa},setExtent:function(N,aa){N=new ma(N.toJson());var ja=N.getWidth(),pa=N.getHeight();return 0===ja&&0===pa?this.centerAt(new fa({x:N.xmin,y:N.ymin,spatialReference:N.spatialReference&&N.spatialReference.toJson()})):this._extentUtil(null,null,N,aa)},getTargetExtent:function(N){if(N)return N=new ma(N.toJson()),0!==N.getWidth()&&0!==N.getHeight()&&(N=(N=this._convertGeometry(this,N))&&this._fixExtent(N).extent),N},centerAt:function(N){return this._extentUtil(null,{mapCenter:N})},
centerAndZoom:function(N,aa){return this._extentUtil({targetLevel:aa,mapCenter:N,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:ta.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*ta.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var N=this.getResolution(),aa=this.getResolutionInMeters(),ja=aa/16;return 10>=
ja?0:N/aa*ja},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(N){return this._extentUtil({targetScale:N})},getLayersVisibleAtScale:function(N){var aa=[];(N=N||this.getScale())&&g.forEach(this.layerIds.concat(this.graphicsLayerIds),function(ja){ja=this.getLayer(ja);ja.isVisibleAtScale(N)&&
aa.push(ja)},this);return aa},getNumLevels:function(){var N=this.getMinZoom(),aa=this.getMaxZoom();return N===aa&&0>N?0:aa-N+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(N){if(-1<N)return this._extentUtil({targetLevel:N})},getZoom:function(){return this.getLevel()},setZoom:function(N){return this.setLevel(N)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(N){if(k.isObject(N)){var aa=N;N=aa.title}else aa=
y&&y[N];if(aa){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ja=[],pa=0;g.forEach(aa.baseMapLayers||aa.layers,function(Ja){var Ea={id:Ja.id,displayLevels:Ja.displayLevels,opacity:q.isDefined(Ja.opacity)?Ja.opacity:null,visible:q.isDefined(Ja.visibility)?Ja.visibility:null};if(Ea=this._createBaseLayerInstance(Ja,Ea,N))ja.push(Ea),Ja.isReference||pa++},this);ja.length&&pa?(this._basemapDfd=Q(ja).otherwise(sa(this,function(Ja){this._basemapPending=!1;Ja&&"cancel"===
Ja.dojoType&&g.forEach(ja,function(Ea){Ea.cancel()});throw Ja;})).then(function(Ja){var Ea=[],Qa=[];g.forEach(Ja,function(Ka){Ka&&(Ka.layerInfo&&Ea.push(Ka.layerInfo),Ka.layer&&Qa.push(Ka.layer))});return{basemapName:N,infos:Ea,layers:Qa}}).then(sa(this,this._waitForBaseLayers)).then(sa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled()):console.log("Map.setBasemap: "+q.substitute({basemapName:N},this.invalidBasemap))}else{aa=[];for(var wa in y)aa.push(wa);
console.log("Map.setBasemap: "+q.substitute({basemapName:N,list:aa.join(",")},this.unknownBasemap))}},_createBaseLayerInstance:function(N,aa,ja){var pa=new l;if(N.type)switch(N.type){case "OpenStreetMap":pa.resolve({layerInfo:N,layer:new qa(aa)});break;case "VectorTile":e(["./layers/VectorTileLayer"],function(Ja){wa=F.normalize(N.url);pa.promise.isFulfilled()||pa.resolve({layerInfo:N,layer:new Ja(wa,aa)})});break;default:return console.log("Map.setBasemap: "+q.substitute({basemapName:ja,type:N.type},
this.unknownLayerType)),null}else{var wa=F.normalize(N.url);pa.resolve({layerInfo:N,layer:new Z(wa,aa)})}return pa.promise},_waitForBaseLayers:function(N){var aa=new l(z._dfdCanceller);aa.promise.otherwise(function(pa){if(pa&&"cancel"===pa.dojoType){for(var wa in aa._layerEvents)pa=aa._layerEvents[wa],p.disconnect(pa[0]),p.disconnect(pa[1]);delete aa._layerEvents}});if(!this.loaded)return aa.resolve(N),aa.promise;var ja=function(pa){aa._pendingLayers--;pa=g.indexOf(N.layers,this);-1<pa&&(pa=aa._layerEvents[pa])&&
(p.disconnect(pa[0]),p.disconnect(pa[1]));0>=aa._pendingLayers&&(delete aa._layerEvents,aa.isFulfilled()||aa.resolve(N))};aa._pendingLayers=0;aa._layerEvents={};g.forEach(N.layers,function(pa,wa){pa&&aa._pendingLayers++});g.forEach(N.layers,function(pa,wa){pa&&(pa.loaded?ja(pa):aa._layerEvents[wa]=[p.connect(pa,"onLoad",pa,ja),p.connect(pa,"onError",pa,ja)])});return aa.promise},_setBasemap:function(N){var aa=N.layers,ja=N.infos,pa=0,wa=!0;this._basemapPending=!1;this.loaded&&(g.forEach(aa,function(Ea,
Qa){Ea.loaded&&(ja[Qa].isReference||pa++)}),wa=pa);if(wa){if(this.basemapLayerIds){var Ja={basemapName:this._basemap,infos:y&&y[this._basemap]&&y[this._basemap].baseMapLayers};Ja.basemapName||(g.forEach(this.basemapLayerIds,function(Ea){if(this.getLayer(Ea)instanceof qa)return Ja.basemapName="osm",Ja.infos=y&&y.osm&&y.osm.baseMapLayers,!1},this),Ja.basemapName||(Ja=null))}this._removeBasemap();this._basemap=N.basemapName;this.basemapLayerIds=this._addBasemapLayers(aa,ja);this.attr("data-basemap",
this.getBasemap());this.emit("basemap-change",{current:N,previous:Ja})}},_addBasemapLayers:function(N,aa){var ja=[],pa=[],wa=0;g.forEach(N,function(Ja,Ea){aa[Ea].isReference?ja.push(Ja):(this.addLayer(Ja,wa++),pa.push(Ja.id))},this);ja.length&&g.forEach(ja,function(Ja){Ja.attr("data-reference",!0);this.addLayer(Ja,"top");pa.push(Ja.id)},this);return pa},_removeBasemap:function(){var N=this.basemapLayerIds,aa;N&&N.length&&g.forEach(N,function(ja){(aa=this.getLayer(ja))&&this.removeLayer(aa)},this)},
getBasemap:function(){return this._basemap||""},translate:function(N,aa){N=N||0;aa=aa||0;if(!this._txTimer){this._tx=this._ty=0;var ja=this.toScreen(this.extent.getCenter());this.__panStart(ja.x,ja.y)}this._tx+=N;this._ty+=aa;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var N=this._tx,aa=this._ty;this._tx=this._ty=0;this.__panEnd(N,aa)},setTimeExtent:function(N){N=
(this.timeExtent=N)?new N.constructor(N.toJson()):null;this.onTimeExtentChange(N)},setTimeSlider:function(N){this.timeSlider&&(W(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);N&&(this.timeSlider=N,this.setTimeExtent(N.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=X(N,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(N){if(this.visible!==N){this.visible=N;N||(this._display=this.container.style.display);this.container.style.display=
N?this._display:"none";if(this.autoResize){var aa=N?"resume":"pause";this._rszSignal[aa]();this._oriSignal[aa]()}N&&this.resize()}return this},resize:function(N){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===N?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();
this.autoResize&&this._startResizeTimer()},_resize:function(){var N=this.width,aa=this.height,ja=m.get(this.container,"display"),pa=n.getContentBox(this.container);if(!("none"===ja||0>=pa.w||0>=pa.h||N===pa.w&&aa===pa.h)){if(ja=this._zoomAnim||this._panAnim)ja.stop(),ja._fire("onEnd",[ja.node]);T(this.root,{width:(this.width=pa.w)+"px",height:(this.height=pa.h)+"px"});pa=this.width;ja=this.height;this.attribution&&this.attribution.domNode&&m.set(this.attribution.domNode,"maxWidth",Math.floor(pa*this._mapParams.attributionWidth)+
"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,pa,ja);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,pa,ja);var wa=new ca(this.extent);N=(new ca(wa.x,wa.y,pa/N*wa.width,ja/aa*wa.height,this.spatialReference)).getExtent();this.onResize(N,pa,ja);this._extentUtil(null,null,N,null,!0)}},reposition:function(){var N=this.position,aa=N.x,ja=N.y;this._reposition();N=this.position;if(aa!==N.x||ja!==N.y)this.onReposition(N.x,N.y)},_reposition:function(){var N=
n.position(this.container,!0),aa=n.getPadBorderExtents(this.container);this.position.update(N.x+aa.l,N.y+aa.t)},_setClipRect:function(){delete this._clip;var N=7>=h("ie")||void 0===h("ie")&&7<=h("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var aa=this.width,ja=this.height,pa=this._getFrameWidth(),wa=aa-pa;0<wa&&(N=wa/2,N="rect(0px,"+(N+pa)+"px,"+ja+"px,"+N+"px)",ja=this.extent.getWidth(),aa=pa/aa*ja,this._clip=[(ja-aa)/2,aa])}T(this.__container,"clip",N)},_getAvailExtent:function(){var N=
this.extent,aa=this._clip;if(aa){if(!N._clip){var ja=new ca(N);ja.width=aa[1];ja.x+=aa[0];N._clip=ja.getExtent()}return N._clip}return N},_fixedPan:function(N,aa){return this._extentUtil(null,{dx:N,dy:aa})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,
.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(N){N=N||{};if("esri.SnappingManager"===N.declaredClass)this.snappingManager=N;else{var aa=na++,ja=this;this._rids&&this._rids.push(aa);e(["./SnappingManager"],function(pa){var wa=ja._rids?g.indexOf(ja._rids,aa):-1;-1!==wa&&(ja._rids.splice(wa,
1),ja.snappingManager=new pa(k.mixin({map:ja},N)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&G&&this.loaded&&(this._labels=new G({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=
setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),g.forEach(this.graphicsLayerIds,function(N){N=this.getLayer(N);"function"===typeof N.applyEdits?this._labels.addFeatureLayer(N):"esri.layers.WFSLayer"===N.declaredClass&&this._labels.addFeatureLayer(N)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ka,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());
return this._mapImageLyr},_placeMapImageLyr:function(){for(var N=this.layerIds,aa=this._layerDivs,ja=!1,pa,wa,Ja=N.length-1;0<=Ja;Ja--)if(pa=N[Ja],wa=this.getLayer(pa),pa=aa[pa],wa&&pa&&!wa._isReference){t.place(this._mapImageLyr._div,pa,"after");ja=!0;break}ja||t.place(this._mapImageLyr._div,this._layersDiv,"first")}})})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(e,u,B){var A=window,p={addOnWindowUnload:function(l,k){e.windowUnloaded||B(A,"unload",e.windowUnloaded=
function(){});B(A,"unload",u.hitch(l,k))},addOnUnload:function(l,k){B(A,"beforeunload",u.hitch(l,k))}};e.addOnWindowUnload=p.addOnWindowUnload;e.addOnUnload=p.addOnUnload;return p})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(e,u){var B=e.matrix={},A={};B._degToRad=function(p){return A[p]||(A[p]=Math.PI*p/180)};B._radToDeg=function(p){return p/Math.PI*180};B.Matrix2D=function(p){if(p)if("number"==typeof p)this.xx=this.yy=p;else if(p instanceof Array){if(0<p.length){for(var l=
B.normalize(p[0]),k=1;k<p.length;++k){var g=l,d=B.normalize(p[k]);l=new B.Matrix2D;l.xx=g.xx*d.xx+g.xy*d.yx;l.xy=g.xx*d.xy+g.xy*d.yy;l.yx=g.yx*d.xx+g.yy*d.yx;l.yy=g.yx*d.xy+g.yy*d.yy;l.dx=g.xx*d.dx+g.xy*d.dy+g.dx;l.dy=g.yx*d.dx+g.yy*d.dy+g.dy}u.mixin(this,l)}}else u.mixin(this,p)};u.extend(B.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});u.mixin(B,{identity:new B.Matrix2D,flipX:new B.Matrix2D({xx:-1}),flipY:new B.Matrix2D({yy:-1}),flipXY:new B.Matrix2D({xx:-1,yy:-1}),translate:function(p,l){return 1<arguments.length?
new B.Matrix2D({dx:p,dy:l}):new B.Matrix2D({dx:p.x,dy:p.y})},scale:function(p,l){return 1<arguments.length?new B.Matrix2D({xx:p,yy:l}):"number"==typeof p?new B.Matrix2D({xx:p,yy:p}):new B.Matrix2D({xx:p.x,yy:p.y})},rotate:function(p){var l=Math.cos(p);p=Math.sin(p);return new B.Matrix2D({xx:l,xy:-p,yx:p,yy:l})},rotateg:function(p){return B.rotate(B._degToRad(p))},skewX:function(p){return new B.Matrix2D({xy:Math.tan(p)})},skewXg:function(p){return B.skewX(B._degToRad(p))},skewY:function(p){return new B.Matrix2D({yx:Math.tan(p)})},
skewYg:function(p){return B.skewY(B._degToRad(p))},reflect:function(p,l){1==arguments.length&&(l=p.y,p=p.x);var k=p*p,g=l*l,d=k+g,c=2*p*l/d;return new B.Matrix2D({xx:2*k/d-1,xy:c,yx:c,yy:2*g/d-1})},project:function(p,l){1==arguments.length&&(l=p.y,p=p.x);var k=p*p,g=l*l,d=k+g,c=p*l/d;return new B.Matrix2D({xx:k/d,xy:c,yx:c,yy:g/d})},normalize:function(p){return p instanceof B.Matrix2D?p:new B.Matrix2D(p)},isIdentity:function(p){return 1==p.xx&&0==p.xy&&0==p.yx&&1==p.yy&&0==p.dx&&0==p.dy},clone:function(p){var l=
new B.Matrix2D,k;for(k in p)"number"==typeof p[k]&&"number"==typeof l[k]&&l[k]!=p[k]&&(l[k]=p[k]);return l},invert:function(p){p=B.normalize(p);var l=p.xx*p.yy-p.xy*p.yx;return p=new B.Matrix2D({xx:p.yy/l,xy:-p.xy/l,yx:-p.yx/l,yy:p.xx/l,dx:(p.xy*p.dy-p.yy*p.dx)/l,dy:(p.yx*p.dx-p.xx*p.dy)/l})},_multiplyPoint:function(p,l,k){return{x:p.xx*l+p.xy*k+p.dx,y:p.yx*l+p.yy*k+p.dy}},multiplyPoint:function(p,l,k){p=B.normalize(p);return"number"==typeof l&&"number"==typeof k?B._multiplyPoint(p,l,k):B._multiplyPoint(p,
l.x,l.y)},multiplyRectangle:function(p,l){var k=B.normalize(p);l=l||{x:0,y:0,width:0,height:0};if(B.isIdentity(k))return{x:l.x,y:l.y,width:l.width,height:l.height};p=B.multiplyPoint(k,l.x,l.y);var g=B.multiplyPoint(k,l.x,l.y+l.height),d=B.multiplyPoint(k,l.x+l.width,l.y);l=B.multiplyPoint(k,l.x+l.width,l.y+l.height);k=Math.min(p.x,g.x,d.x,l.x);var c=Math.min(p.y,g.y,d.y,l.y);return{x:k,y:c,width:Math.max(p.x,g.x,d.x,l.x)-k,height:Math.max(p.y,g.y,d.y,l.y)-c}},multiply:function(p){for(var l=B.normalize(p),
k=1;k<arguments.length;++k){var g=l,d=B.normalize(arguments[k]);l=new B.Matrix2D;l.xx=g.xx*d.xx+g.xy*d.yx;l.xy=g.xx*d.xy+g.xy*d.yy;l.yx=g.yx*d.xx+g.yy*d.yx;l.yy=g.yx*d.xy+g.yy*d.yy;l.dx=g.xx*d.dx+g.xy*d.dy+g.dx;l.dy=g.yx*d.dx+g.yy*d.dy+g.dy}return l},_sandwich:function(p,l,k){return B.multiply(B.translate(l,k),p,B.translate(-l,-k))},scaleAt:function(p,l,k,g){switch(arguments.length){case 4:return B._sandwich(B.scale(p,l),k,g);case 3:return"number"==typeof k?B._sandwich(B.scale(p),l,k):B._sandwich(B.scale(p,
l),k.x,k.y)}return B._sandwich(B.scale(p),l.x,l.y)},rotateAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.rotate(p),l,k):B._sandwich(B.rotate(p),l.x,l.y)},rotategAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.rotateg(p),l,k):B._sandwich(B.rotateg(p),l.x,l.y)},skewXAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.skewX(p),l,k):B._sandwich(B.skewX(p),l.x,l.y)},skewXgAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.skewXg(p),l,k):B._sandwich(B.skewXg(p),l.x,
l.y)},skewYAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.skewY(p),l,k):B._sandwich(B.skewY(p),l.x,l.y)},skewYgAt:function(p,l,k){return 2<arguments.length?B._sandwich(B.skewYg(p),l,k):B._sandwich(B.skewYg(p),l.x,l.y)}});e.Matrix2D=B.Matrix2D;return B})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(e,u,B,A){return{streets:{title:A.basemaps.streets,thumbnailUrl:e.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:A.basemaps.satellite,thumbnailUrl:e.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:A.basemaps.hybrid,thumbnailUrl:e.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:A.basemaps.terrain,thumbnailUrl:e.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:A.basemaps.topo,
thumbnailUrl:e.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:A.basemaps.gray,thumbnailUrl:e.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
isReference:!0}]},"dark-gray":{title:A.basemaps["dark-gray"],thumbnailUrl:e.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:A.basemaps.oceans,thumbnailUrl:e.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",
baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:A.basemaps["national-geographic"],thumbnailUrl:e.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:A.basemaps.osm,thumbnailUrl:e.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:A.basemaps["dark-gray"],thumbnailUrl:e.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:A.basemaps.gray,thumbnailUrl:e.toUrl("./images/basemap/gray.jpg"),
itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:A.basemaps.streets,thumbnailUrl:e.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:A.basemaps.topo,
thumbnailUrl:e.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:A.basemaps["streets-night-vector"],thumbnailUrl:e.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",
baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:A.basemaps["streets-relief-vector"],thumbnailUrl:e.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:A.basemaps["streets-navigation-vector"],
thumbnailUrl:e.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}}})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(e,u,B,A,p,l,k,g,d){return{animateRange:function(c){var a=c.range;return new u.Animation(B.mixin({curve:new u._Line(a.start,
a.end)},c))},resize:function(c){var a=c.node=A.byId(c.node),b=c.start,f=c.end;b||(b=p.getMarginBox(a),a=p.getPadBorderExtents(a),b=c.start={left:b.l+a.l,top:b.t+a.t,width:b.w-a.w,height:b.h-a.h});f||(f=c.anchor?c.anchor:{x:b.left,y:b.top},a=c.size,f=c.end={left:b.left-(a.width-b.width)*(f.x-b.left)/b.width,top:b.top-(a.height-b.height)*(f.y-b.top)/b.height,width:a.width,height:a.height});return u.animateProperty(B.mixin({properties:{left:{start:b.left,end:f.left},top:{start:b.top,end:f.top},width:{start:b.width,
end:f.width},height:{start:b.height,end:f.height}}},c))},slideTo:function(c){var a=c.node=A.byId(c.node),b=l.getComputedStyle,f=null,t=null,n=function(){return function(){var m="absolute"==a.style.position?"absolute":"relative";f="absolute"==m?a.offsetTop:parseInt(b(a).top)||0;t="absolute"==m?a.offsetLeft:parseInt(b(a).left)||0;"absolute"!=m&&"relative"!=m&&(m=p.position(a,!0),f=m.y,t=m.x,a.style.position="absolute",a.style.top=f+"px",a.style.left=t+"px")}}();n();c=u.animateProperty(B.mixin({properties:{top:{start:f,
end:c.top||0},left:{start:t,end:c.left||0}}},c));e.connect(c,"beforeBegin",c,n);return c},flash:function(c){c=B.mixin({end:"#f00",duration:500,count:1},c);c.duration/=2*c.count;var a=A.byId(c.node),b=c.start;b||(b=l.getComputedStyle(a).backgroundColor);var f=c.end,t=[],n=c.count;a={node:a,duration:c.duration};for(c=0;c<n;c++)t.push(u.animateProperty(B.mixin({properties:{backgroundColor:{start:b,end:f}}},a))),t.push(u.animateProperty(B.mixin({properties:{backgroundColor:{start:f,end:b}}},a)));return k.chain(t)}}})},
"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(e,u,B,A,p,l,k,g,d,c,a){B.isAsync||c(0,function(){a(["./fx/Toggler"])});B=B.fx={};c={_fire:function(t,n){this[t]&&this[t].apply(this,n||[]);return this}};var b=function(t){this._index=-1;this._animations=t||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;A.forEach(this._animations,function(n){n&&("undefined"!=
typeof n.duration&&(this.duration+=n.duration),n.delay&&(this.duration+=n.delay))},this)};b.prototype=new u;e.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=p.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx=p.after(this._current,
"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(t,n){this._current||(this._current=this._animations[this._index=0]);if(!n&&"playing"==this._current.status())return this;var m=p.after(this._current,"beforeBegin",e.hitch(this,function(){this._fire("beforeBegin")}),!0),h=p.after(this._current,"onBegin",e.hitch(this,function(r){this._fire("onBegin",arguments)}),!0),v=p.after(this._current,"onPlay",e.hitch(this,function(r){this._fire("onPlay",arguments);m.remove();h.remove();
v.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=p.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=p.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var t=p.after(this._current,"onPause",e.hitch(this,function(n){this._fire("onPause",arguments);t.remove()}),!0);this._current.pause()}return this},
gotoPercent:function(t,n){this.pause();var m=this.duration*t;this._current=null;A.some(this._animations,function(h,v){if(m<=h.duration)return this._current=h,this._index=v,!0;m-=h.duration;return!1},this);this._current&&this._current.gotoPercent(m/this._current.duration);n&&this.play();return this},stop:function(t){if(this._current){if(t){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var n=p.after(this._current,
"onStop",e.hitch(this,function(m){this._fire("onStop",arguments);n.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});e.extend(b,c);B.chain=function(t){return new b(e.isArray(t)?t:Array.prototype.slice.call(t,0))};var f=function(t){this._animations=t||[];this._connects=[];this.duration=this._finished=0;A.forEach(t,
function(m){var h=m.duration;m.delay&&(h+=m.delay);this.duration<h&&(this.duration=h);this._connects.push(p.after(m,"onEnd",e.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new l.Animation({curve:[0,1],duration:this.duration});var n=this;A.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(m){n._connects.push(p.after(n._pseudoAnimation,m,function(){n._fire(m,arguments)},!0))})};e.extend(f,{_doAction:function(t,n){A.forEach(this._animations,function(m){m[t].apply(m,
n)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(t,n){var m=this._pseudoAnimation;m[t].apply(m,n)},play:function(t,n){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(t,n){var m=this.duration*t;A.forEach(this._animations,function(h){h.gotoPercent(h.duration<m?1:m/h.duration,n)});
this._call("gotoPercent",arguments);return this},stop:function(t){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();A.forEach(this._connects,function(t){t.remove()})}});e.extend(f,c);B.combine=function(t){return new f(e.isArray(t)?t:Array.prototype.slice.call(t,0))};B.wipeIn=function(t){var n=t.node=k.byId(t.node),m=n.style,h;t=l.animateProperty(e.mixin({properties:{height:{start:function(){h=
m.overflow;m.overflow="hidden";if("hidden"==m.visibility||"none"==m.display)return m.height="1px",m.display="",m.visibility="",1;var r=g.get(n,"height");return Math.max(r,1)},end:function(){return n.scrollHeight}}}},t));var v=function(){m.height="auto";m.overflow=h};p.after(t,"onStop",v,!0);p.after(t,"onEnd",v,!0);return t};B.wipeOut=function(t){var n=(t.node=k.byId(t.node)).style,m;t=l.animateProperty(e.mixin({properties:{height:{end:1}}},t));p.after(t,"beforeBegin",function(){m=n.overflow;n.overflow=
"hidden";n.display=""},!0);var h=function(){n.overflow=m;n.height="auto";n.display="none"};p.after(t,"onStop",h,!0);p.after(t,"onEnd",h,!0);return t};B.slideTo=function(t){var n=null,m=null,h=function(v){return function(){var r=g.getComputedStyle(v),C=r.position;n="absolute"==C?v.offsetTop:parseInt(r.top)||0;m="absolute"==C?v.offsetLeft:parseInt(r.left)||0;"absolute"!=C&&"relative"!=C&&(r=d.position(v,!0),n=r.y,m=r.x,v.style.position="absolute",v.style.top=n+"px",v.style.left=m+"px")}}(t.node=k.byId(t.node));
h();t=l.animateProperty(e.mixin({properties:{top:t.top||0,left:t.left||0}},t));p.after(t,"beforeBegin",h,!0);return t};return B})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(e,u,B,A,p){return{_addFrameInfo:function(l,k){var g,d,c=2*k.origin[1],a=k.origin[0],b=l.origin.x,f=l.width,t;e.forEach(l.lods,function(n){g=Math.round(c/n.resolution);d=Math.ceil(g/f);t=Math.floor((a-b)/(f*n.resolution));n._frameInfo||(n._frameInfo=
[d,t,t+d-1,g])})},getContainingTileCoords:function(l,k,g){var d=l.origin;g=g.resolution;return{row:Math.floor((d.y-k.y)/(l.height*g)),col:Math.floor((k.x-d.x)/(l.width*g))}},getCandidateTileInfo:function(l,k,g){var d=l.width;var c=l.height,a=g.xmax-g.xmin,b=g.ymax-g.ymin,f=l.__tileInfo===k,t=f?l.getMinZoom():-1;f=f?l.getMaxZoom():-1;var n=-1,m=k.lods,h=Math.abs,v;f=-1<f?f:m.length-1;for(t=-1<t?t:0;t<=f;t++)if(v=m[t]){var r=a>b?h(b-c*v.resolution):h(a-d*v.resolution);if(0>n||r<=n){var C=v;n=r}else break}d=
C;C=d.resolution;c=(g.xmin+g.xmax)/2;a=(g.ymin+g.ymax)/2;b=l.width/2*C;C*=l.height/2;c=new p(c-b,a-C,c+b,a+C,g.spatialReference);g=new A(c.xmin,c.ymax,g.spatialReference);f=d.resolution;b=k.width;a=k.height;k=k.origin;l=l.__visibleDelta;C=Math.floor;m=b*f;h=a*f;f=C((k.y-g.y)/h);n=C((g.x-k.x)/m);t=k.y-f*h;k=C(Math.abs((g.x-(k.x+n*m))*b/m))+l.x;l=C(Math.abs((g.y-t)*a/h))+l.y;return{tile:{point:g,coords:{row:f,col:n},offsets:{x:k,y:l}},lod:d,extent:c}},getTileExtent:function(l,k,g,d){var c=l.origin;
k=l.lods[k].resolution;var a=l.width,b=l.height;return new p(d*k*a+c.x,c.y-(g+1)*k*b,(d+1)*k*a+c.x,c.y-g*k*b,l.spatialReference)}}})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(e,u,B,A,p,l,k,g){function d(t,n){89.99999<n?n=89.99999:-89.99999>n&&(n=-89.99999);n*=.017453292519943;return[111319.49079327169*t,3189068.5*Math.log((1+Math.sin(n))/(1-Math.sin(n)))]}function c(t,n,m){t=
t/6378137*57.29577951308232;return m?[t,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*n/6378137)))]:[t-360*Math.floor((t+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*n/6378137)))]}function a(){}function b(){}function f(t){var n=t._json;t._unquantizeFn?(n=t._unquantizeFn({x:n.x,y:n.y}),t._xVal=n.x,t._yVal=n.y,t._unquantizeFn=null):(t._xVal=n.x,t._yVal=n.y);t._json=null}e=e(k,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(t,
n,m){u.isArray(t)?(this.x=t[0],this.y=t[1],this.spatialReference=n):p.isObject(t)?(p.mixin(this,t),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference))):(this.x=t,this.y=n,this.spatialReference=m);this.verifySR()},offset:function(t,n){return new this.constructor(this.x+t,this.y+n,this.spatialReference)},setX:function(t){this.x=t;this.clearCache();return this},setY:function(t){this.y=
t;this.clearCache();return this},setLongitude:function(t){var n=this.spatialReference;n&&(n._isWebMercator()?this.setX(d(t,this.y)[0]):4326===n.wkid&&this.setX(t));return this},setLatitude:function(t){var n=this.spatialReference;n&&(n._isWebMercator()?this.setY(d(this.x,t)[1]):4326===n.wkid&&this.setY(t));return this},getLongitude:function(){var t=this.spatialReference;if(t)if(t._isWebMercator())var n=c(this.x,this.y)[0];else 4326===t.wkid&&(n=this.x);return n},getLatitude:function(){var t=this.spatialReference;
if(t)if(t._isWebMercator())var n=c(this.x,this.y)[1];else 4326===t.wkid&&(n=this.y);return n},update:function(t,n){this.x=t;this.y=n;this.clearCache();return this},normalize:function(){var t=this.x,n=this.spatialReference;if(n){var m=n._getInfo();m&&(t=this._normalizeX(t,m))}return new this.constructor(t,this.y,n)},_normalizeX:function(t,n){var m=n.valid[0],h=n.valid[1];n=2*h;t>h?(m=Math.ceil(Math.abs(t-h)/n),t-=m*n):t<m&&(m=Math.ceil(Math.abs(t-m)/n),t+=m*n);return t},toJson:function(){var t={x:this.x,
y:this.y},n=this.spatialReference;n&&(t.spatialReference=n.toJson());return t}});a.prototype=e.prototype;b.prototype=new a;Object.defineProperty(b.prototype,"x",{get:function(){this._json&&f(this);return this._xVal},set:function(t){this._xVal=t}});Object.defineProperty(b.prototype,"y",{get:function(){this._json&&f(this);return this._yVal},set:function(t){this._yVal=t}});b.prototype.setupLazyUnquantization=function(t,n){this._unquantizeFn=t;this._json=n};e.simpleConstructor=a;e.accessorConstructor=
b;e.lngLatToXY=d;e.xyToLngLat=c;e.defaultProps={type:"point",x:0,y:0};e.metersPerDegree=6378137*Math.PI/180;return e})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(l){this.spatialReference=l;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new p(4326))},
getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(l){return this.cache&&this.cache[l]},setCacheValue:function(l,k){this.cache||(this.cache={});this.cache[l]=k}})})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(e,u,B,A,p){function l(k){var g=!1;k&&(k.ics||k.icsid)&&(g=!0);return g}return{isICS:l,createSpatialReference:function(k){var g=null;k&&(g=l(k)?new u(k):new e(k));
return g}}})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),function(e,u,B,A,p,l){return e(l,{declaredClass:"esri.ImageSpatialReference",constructor:function(k){k&&u.isObject(k)&&u.mixin(this,k)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(k){var g=!1;if(k)if(this.icsid&&k.icsid){if(g=this.icsid===k.icsid,this.icsns||k.icsns)g=g&&this.icsns===
k.icsns}else this.ics&&k.ics&&(g=this.ics===k.ics);return g},toJson:function(k){var g=null,d=p.isDefined;k=d(k)?k:!0;d(this.icsid)?(g={icsid:this.icsid},d(this.icsns)&&(g.icsns=this.icsns)):d(this.ics)&&(g={ics:this.ics});d(this.url)&&d(g)&&k&&(g.url=this.url);return g}})})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(e,
u,B,A,p,l,k,g,d,c,a,b){function f(){}var t=e(g,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(n,m,h,v,r){l.isObject(n)?(l.mixin(this,n),this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference))):this.update(n,m,h,v,r);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new d((this.xmin+this.xmax)/2,
(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new d(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new d(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new d(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new d(this.xmax,this.ymin,this.spatialReference)},centerAt:function(n){var m=this.getCenter(),h=n.x-m.x;n=n.y-m.y;return new t(this.xmin+h,this.ymin+n,this.xmax+h,this.ymax+n,this.spatialReference)},
update:function(n,m,h,v,r){this.xmin=n;this.ymin=m;this.xmax=h;this.ymax=v;this.spatialReference=r;this.clearCache();return this},offset:function(n,m){return new t(this.xmin+n,this.ymin+m,this.xmax+n,this.ymax+m,this.spatialReference)},expand:function(n){var m=(1-n)/2;n=this.getWidth()*m;m*=this.getHeight();return new t(this.xmin+n,this.ymin+m,this.xmax-n,this.ymax-m,this.spatialReference)},intersects:function(n){if(!n)return!1;var m=n.type,h=this.spatialReference,v=n.spatialReference;h&&v&&!h.equals(v)&&
h._canProject(v)&&(n=h.isWebMercator()?c.geographicToWebMercator(n):c.webMercatorToGeographic(n,!0));switch(m){case "point":return this.contains(n);case "multipoint":return this._intersectsMultipoint(n);case "extent":return this._intersectsExtent(n);case "polygon":return this._intersectsPolygon(n);case "polyline":return this._intersectsPolyline(n)}},normalize:function(){var n=this._normalize(!1,!0);B.isArray(n)||(n=[n]);return n},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var n=
this.spatialReference,m=n&&n._getInfo(),h=[],v=0;if(m&&this._isOutOfBounds(m)){var r=this;v=r.xmin;var C=r.ymin,w=r.ymax,y=m.valid[0],q=m.valid[1];r.getWidth()>2*q&&(r=r.getCenter(),r=new t(r.x-q,C,r.x+q,w,new k(n.toJson())));v=r.xmin-v;var x=this._normalizeX(r.xmin,m);m=this._normalizeX(r.xmax,m);x.frameId===m.frameId?h.push(new t(x.x,C,m.x,w,new k(n.toJson()))):h.push(new t(x.x,C,q,w,new k(n.toJson())),new t(y,C,m.x,w,new k(n.toJson())))}else h.push(this.getExtent());return{extents:h,marginLeft:v}},
_intersectsMultipoint:function(n){var m=n.points.length,h;for(h=0;h<m;h++)if(this.contains(n.getPoint(h)))return!0;return!1},_intersectsExtent:function(n){var m,h,v=!1;if(this.xmin<=n.xmin){var r=n.xmin;this.xmax<r?v=!0:m=Math.min(this.xmax,n.xmax)-r}else r=this.xmin,n.xmax<r?v=!0:m=Math.min(this.xmax,n.xmax)-r;if(this.ymin<=n.ymin){var C=n.ymin;this.ymax<C?v=!0:h=Math.min(this.ymax,n.ymax)-C}else C=this.ymin,n.ymax<C?v=!0:h=Math.min(this.ymax,n.ymax)-C;return v?null:new t(r,C,r+m,C+h,this.spatialReference)},
_intersectsPolygon:function(n){var m=[this.xmin,this.ymax],h=[this.xmax,this.ymax],v=[this.xmin,this.ymin],r=[this.xmax,this.ymin],C=[m,h,v,r];m=[[v,m],[m,h],[h,r],[r,v]];v=n.rings;r=v.length;var w=new d(0,0,this.spatialReference);var y=C.length;for(h=0;h<y;h++)if(w.update(C[h][0],C[h][1]),n.contains(w))return!0;w.setSpatialReference(n.spatialReference);for(h=0;h<r;h++)if(C=v[h],y=C.length){var q=C[0];w.update(q[0],q[1]);if(this.contains(w))return!0;for(n=1;n<y;n++){var x=C[n];w.update(x[0],x[1]);
if(this.contains(w)||this._intersectsLine([q,x],m))return!0;q=x}}return!1},_intersectsPolyline:function(n){var m=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],h,v=n.paths,r=v.length,C,w=new d(0,0,n.spatialReference);for(n=0;n<r;n++){var y=v[n];if(C=y.length){var q=y[0];w.update(q[0],q[1]);if(this.contains(w))return!0;for(h=1;h<C;h++){var x=y[h];w.update(x[0],
x[1]);if(this.contains(w)||this._intersectsLine([q,x],m))return!0;q=x}}}return!1},_intersectsLine:function(n,m){var h=a._getLineIntersection2,v,r=m.length;for(v=0;v<r;v++)if(h(n,m[v]))return!0;return!1},contains:function(n){if(!n)return!1;var m=n.type;if("point"===m){var h=this.spatialReference,v=n.spatialReference;m=n.x;n=n.y;h&&v&&!h.equals(v)&&h._canProject(v)&&(n=h.isWebMercator()?d.lngLatToXY(m,n):d.xyToLngLat(m,n,!0),m=n[0],n=n[1]);return m>=this.xmin&&m<=this.xmax&&n>=this.ymin&&n<=this.ymax}return"extent"===
m?this._containsExtent(n):!1},_containsExtent:function(n){var m=n.xmin,h=n.ymin,v=n.xmax,r=n.ymax,C=n.spatialReference;n=new d(m,h,C);m=new d(m,r,C);r=new d(v,r,C);h=new d(v,h,C);return this.contains(n)&&this.contains(m)&&this.contains(r)&&this.contains(h)?!0:!1},union:function(n){return new t(Math.min(this.xmin,n.xmin),Math.min(this.ymin,n.ymin),Math.max(this.xmax,n.xmax),Math.max(this.ymax,n.ymax),this.spatialReference)},getExtent:function(){var n=this.spatialReference;return new t(this.xmin,this.ymin,
this.xmax,this.ymax,n&&new k(n.toJson()))},_shiftCM:function(n){var m=this.getCacheValue("_shifted");if(!m){m=new t(this.toJson());var h=m.spatialReference;if(n=n||h._getInfo()){var v=this._getCM(n);if(v){var r=h._isWebMercator()?c.webMercatorToGeographic(v):v;m.xmin-=v.x;m.xmax-=v.x;h._isWebMercator()||(r.x=this._normalizeX(r.x,n).x);m.setSpatialReference(new k(l.substitute({Central_Meridian:r.x},4326===h.wkid?n.altTemplate:n.wkTemplate)))}}this.setCacheValue("_shifted",m)}return m},_getCM:function(n){var m;
this._isOutOfBounds(n)&&(m=this.getCenter());return m},_isOutOfBounds:function(n){var m=n.valid[0];n=n.valid[1];var h=this.xmin,v=this.xmax;return!(h>=m&&h<=n&&v>=m&&v<=n)},_normalize:function(n,m,h){var v=new t(this.toJson()),r=v.spatialReference;if(r&&(h=h||r._getInfo())){var C=u.map(this._getParts(h),function(w){return w.extent});return 2<C.length?n?this._shiftCM(h):v.update(h.valid[0],v.ymin,h.valid[1],v.ymax,r):2===C.length?n?this._shiftCM(h):m?C:{rings:u.map(C,function(w){return[[w.xmin,w.ymin],
[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:r}:C[0]||v}return v},_getParts:function(n){var m=this.getCacheValue("_parts");if(!m){m=[];var h=this.xmin,v=this.xmax,r=this.ymin,C=this.ymax,w=this.spatialReference,y=this.getWidth(),q=h,x=v,E=0,z=0;n=n||w._getInfo();var D=n.valid[0];var F=n.valid[1];z=this._normalizeX(h,n);h=z.x;E=z.frameId;z=this._normalizeX(v,n);v=z.x;z=z.frameId;n=h===v&&0<y;if(y>2*F){y=new t(q<x?h:v,r,F,C,w);h=new t(D,r,q<x?v:h,C,w);F=new t(0,
r,F,C,w);r=new t(D,r,0,C,w);w=[];D=[];y.contains(F)&&w.push(E);y.contains(r)&&D.push(E);h.contains(F)&&w.push(z);h.contains(r)&&D.push(z);for(C=E+1;C<z;C++)w.push(C),D.push(C);m.push({extent:y,frameIds:[E]},{extent:h,frameIds:[z]},{extent:F,frameIds:w},{extent:r,frameIds:D})}else h>v||n?m.push({extent:new t(h,r,F,C,w),frameIds:[E]},{extent:new t(D,r,v,C,w),frameIds:[z]}):m.push({extent:new t(h,r,v,C,w),frameIds:[E]});this.setCacheValue("_parts",m)}return m},_normalizeX:function(n,m){var h=0,v=m.valid[0],
r=m.valid[1];m=2*r;n>r?(h=Math.ceil(Math.abs(n-r)/m),n-=h*m):n<v&&(h=Math.ceil(Math.abs(n-v)/m),n+=h*m,h=-h);return{x:n,frameId:h}},toJson:function(){var n={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},m=this.spatialReference;m&&(n.spatialReference=m.toJson());return n}});f.prototype=t.prototype;t.simpleConstructor=f;t.defaultProps={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};return t})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(e,u,B,A,p,l){function k(d,c,a,b){if("point"===d.type){var f=c(d.x,d.y,b);return new d.constructor(f[0],f[1],new p(a))}if("extent"===d.type){f=c(d.xmin,d.ymin,b);var t=c(d.xmax,d.ymax,b);return new d.constructor(f[0],f[1],t[0],t[1],new p(a))}if("polyline"===d.type||"polygon"===d.type){f="polyline"===d.type;var n=[],m;e.forEach(f?d.paths:d.rings,function(v){n.push(m=[]);e.forEach(v,function(r){m.push(c(r[0],r[1],b))})});return f?new d.constructor({paths:n,spatialReference:new p(a)}):new d.constructor({rings:n,
spatialReference:new p(a)})}if("multipoint"===d.type){var h=[];e.forEach(d.points,function(v){h.push(c(v[0],v[1],b))});return new d.constructor({points:h,spatialReference:new p(a)})}}function g(d,c){d=d&&(null!=d.wkid?d:d.spatialReference);c=c&&(null!=c.wkid?c:c.spatialReference);return d&&c?c.equals(d)?!0:c._canProject(d):!1}return{canProject:g,project:function(d,c){var a=d&&d.spatialReference;c=c&&(null!=c.wkid?c:c.spatialReference);a&&c?a.equals(c)?d=new d.constructor(d.toJson()):g(a,c)?c.isWebMercator()?
d=k(d,l.lngLatToXY,{wkid:102100}):4326===c.wkid&&(d=k(d,l.xyToLngLat,{wkid:4326})):d=null:d=null;return d},lngLatToXY:l.lngLatToXY,xyToLngLat:l.xyToLngLat,metersPerDegree:l.metersPerDegree,geographicToWebMercator:function(d){return k(d,l.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(d,c){return k(d,l.xyToLngLat,{wkid:4326},c)}}})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(e,u,B,A){function p(g,d,c){return g instanceof A?
new A(g.x+c*(d.x-g.x),g.y+c*(d.y-g.y)):[g[0]+c*(d[0]-g[0]),g[1]+c*(d[1]-g[1])]}function l(g,d){return 1E-8>Math.abs(g-d)}function k(g,d,c,a){var b=l(g[0],d[0])?1E10:(g[1]-d[1])/(g[0]-d[0]),f=l(c[0],a[0])?1E10:(c[1]-a[1])/(c[0]-a[0]),t=g[1]-b*g[0],n=c[1]-f*c[0];if(l(b,f)){if(l(t,n)){if(l(g[0],d[0]))if(Math.min(g[1],d[1])<Math.max(c[1],a[1])||Math.max(g[1],d[1])>Math.min(c[1],a[1])){g=(g[1]+d[1]+c[1]+a[1]-Math.min(g[1],d[1],c[1],a[1])-Math.max(g[1],d[1],c[1],a[1]))/2;var m=(g-t)/b}else return null;
else if(Math.min(g[0],d[0])<Math.max(c[0],a[0])||Math.max(g[0],d[0])>Math.min(c[0],a[0]))m=(g[0]+d[0]+c[0]+a[0]-Math.min(g[0],d[0],c[0],a[0])-Math.max(g[0],d[0],c[0],a[0]))/2,g=b*m+t;else return null;return[m,g]}return null}l(b,1E10)?(m=g[0],g=f*m+n):l(f,1E10)?(m=c[0],g=b*m+t):(m=-(t-n)/(b-f),g=g[1]===d[1]?g[1]:c[1]===a[1]?c[1]:b*m+t);return[m,g]}return{getLength:function(g,d){var c=d.x-g.x;g=d.y-g.y;return Math.sqrt(c*c+g*g)},_getLength:function(g,d){var c=d[0]-g[0];g=d[1]-g[1];return Math.sqrt(c*
c+g*g)},getPointOnLine:p,getMidpoint:function(g,d){return p(g,d,.5)},_equals:l,_getLineIntersection:k,getLineIntersection:function(g,d,c,a,b){(g=k([g.x,g.y],[d.x,d.y],[c.x,c.y],[a.x,a.y]))&&(g=new A(g[0],g[1],b));return g},_getLineIntersection2:function(g,d){var c=g[0],a=g[1],b=d[0],f=d[1];d=c[0];c=c[1];g=a[0];a=a[1];var t=b[0],n=b[1];b=f[0]-t;t=d-t;var m=g-d;f=f[1]-n;n=c-n;var h=a-c,v=f*m-b*h;if(0===v)return!1;b=(b*n-f*t)/v;t=(m*n-h*t)/v;return 0<=b&&1>=b&&0<=t&&1>=t?[d+b*(g-d),c+b*(a-c)]:!1},_pointLineDistance:function(g,
d){var c=d[0],a=d[1];d=c[0];var b=c[1];c=g[0];g=g[1];var f=a[0]-d,t=a[1]-b,n=c-d,m=g-b;a=Math.sqrt;var h=Math.pow,v=a(h(f,2)+h(t,2));n=(n*f+m*t)/(v*v);b+=n*t;return a(h(c-(d+n*f),2)+h(g-b,2))}}})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(e,u,B,A,p,l){function k(){u.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}k.prototype={addPlugin:function(g,d){var c=this,a=this._plugins,
b=new p;try{e([g],function(f){g in a?b.resolve({id:a[g].declaredId||g.replace(/\//g,".")}):(a[g]=f,l(f.add(c,d),function(){var t={id:f.declaredId||g.replace(/\//g,".")};c.emit("plugin-add",t);b.resolve(t)},function(t){b.reject(t)}))})}catch(f){b.reject(f)}return b.promise},removePlugin:function(g){if(g in this._plugins){var d=this._plugins[g];d.remove(this);delete this._plugins[g];this.emit("plugin-remove",{id:d.declaredId||g.replace(/\//g,".")})}},_pluginsHandler:function(){var g=this;B.some(arguments,
function(d){if(d&&d.plugins&&d.plugins instanceof Array){d=d.plugins;var c;for(c=0;c<d.length;c++){var a=d[c];var b=a instanceof Object?a.id:a;g.addPlugin(b,a.options)}return!0}})}};return k})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(e,u,B){var A=e.forEach;return function(p){function l(t,n){a[n]=t;b.progress([t,n]);0===--f&&b.resolve(a)}var k,g;p instanceof Array?g=p:p&&"object"===typeof p&&(k=p);var d=[];if(k){g=[];for(var c in k)Object.hasOwnProperty.call(k,
c)&&(d.push(c),g.push(k[c]));var a={}}else g&&(a=[]);if(!g||!g.length)return(new u).resolve(a);var b=new u;b.promise.always(function(){a=d=null});var f=g.length;A(g,function(t,n){k||d.push(n);B(t,function(m){b.isFulfilled()||l(m,d[n])},function(m){b.isFulfilled()||l(m,d[n])})});return b.promise}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(e,u,B,A,p){function l(g){var d=null;if(null!==g)if(A.isNumber(g))d=
A.toNumber(g);else if(A.isBoolean(g))d=A.toBoolean(g);else if(A.isString(g))d=A.toString(g);else if(A.isDate(g))d=A.toDate(g);else if(A.isArray(g)){d=[];for(var c=0;c<g.length;c++)d.push(l(g[c]))}else{if(0===Object.keys(g).length)return null;d=new k;d.immutable=!1;c=0;for(var a=Object.keys(g);c<a.length;c++){var b=a[c],f=g[b];void 0!==f&&d.setField(b,l(f))}d.immutable=!0}return d}var k=function(){function g(d){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=
!0;this.attributes=d instanceof g?d.attributes:void 0===d?{}:null===d?{}:d}g.prototype.field=function(d){var c=d.toLowerCase(),a=this.attributes[d];if(void 0!==a)return a;for(var b in this.attributes)if(b.toLowerCase()===c)return this.attributes[b];throw Error("Field not Found : "+d);};g.prototype.setField=function(d,c){if(this.immutable)throw Error("Dictionary is Immutable");var a=d.toLowerCase();if(void 0===this.attributes[d])for(var b in this.attributes)if(b.toLowerCase()===a){this.attributes[b]=
c;return}this.attributes[d]=c};g.prototype.hasField=function(d){var c=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var a in this.attributes)if(a.toLowerCase()===c)return!0;return!1};g.prototype.keys=function(){var d=[],c;for(c in this.attributes)d.push(c);return d=d.sort()};g.prototype.castToText=function(){var d="",c;for(c in this.attributes){""!==d&&(d+=",");var a=this.attributes[c];null==a?d+=JSON.stringify(c)+":null":A.isBoolean(a)||A.isNumber(a)||A.isString(a)?d+=JSON.stringify(c)+
":"+JSON.stringify(a):a instanceof p?d+=JSON.stringify(c)+":"+A.toStringExplicit(a):a instanceof B?d+=JSON.stringify(c)+":"+A.toStringExplicit(a):a instanceof Array?d+=JSON.stringify(c)+":"+A.toStringExplicit(a):a instanceof Date?d+=JSON.stringify(c)+":"+JSON.stringify(a):null!==a&&"object"===typeof a&&void 0!==a.castToText&&(d+=JSON.stringify(c)+":"+a.castToText())}return"{"+d+"}"};g.convertObjectToArcadeDictionary=function(d){var c=new g;c.immutable=!1;for(var a in d){var b=d[a];void 0!==b&&c.setField(a.toString(),
l(b))}c.immutable=!0;return c};return g}();return k})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(e,u){return function(){function B(A){void 0===A&&(A=[]);this._elements=A}B.prototype.length=function(){return this._elements.length};B.prototype.get=function(A){return this._elements[A]};B.prototype.toArray=function(){for(var A=[],p=0;p<this.length();p++)A.push(this.get(p));return A};return B}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){function n(P,ea,ra){return""===ea||null===ea||void 0===ea||ea===ra||ea===ra?P:P=P.split(ea).join(ra)}function m(P){return P instanceof la||P instanceof B||P instanceof ta}function h(P){return v(P)||C(P)||q(P)||r(P)||null===P||P===u.voidOperation||"number"===typeof P?!0:!1}function v(P){return"string"===typeof P||P instanceof String}function r(P){return"boolean"===typeof P}function C(P){return"number"===typeof P}function w(P){return P instanceof Array}function y(P){return P instanceof
A}function q(P){return P instanceof Date}function x(P,ea){if(!1===isNaN(P)){if(void 0===ea||null===ea||""===ea)return P.toString();ea=n(ea,"\u2030","");ea=n(ea,"\u00a4","");return t.format(P,{pattern:ea})}return P.toString()}function E(P,ea){P=u.MomentLibrary.Moment(P);return void 0===ea||null===ea||""===ea?P.format():P.format(z(ea))}function z(P){return P.replace(/(LTS)|L|l/g,function(ea){return"["+ea+"]"})}function D(P,ea,ra){switch(ra){case "\x3e":return P>ea;case "\x3c":return P<ea;case "\x3e\x3d":return P>=
ea;case "\x3c\x3d":return P<=ea}return!1}function F(P,ea){if(P===ea||null===P&&ea===u.voidOperation||null===ea&&P===u.voidOperation)return!0;if(q(P)&&q(ea))return P.getTime()===ea.getTime();if(P instanceof p||P instanceof l)return P.equalityTest(ea);if(P instanceof a&&ea instanceof a){var ra=P.getCacheValue("_arcadeCacheId"),M=ea.getCacheValue("_arcadeCacheId");if(void 0!==ra&&null!==ra)return ra===M}return void 0!==P&&void 0!==ea&&null!==P&&null!==ea&&"object"===typeof P&&"object"===typeof ea&&(P._arcadeCacheId===
ea._arcadeCacheId&&void 0!==P._arcadeCacheId&&null!==P._arcadeCacheId||P._underlyingGraphic===ea._underlyingGraphic&&void 0!==P._underlyingGraphic&&null!==P._underlyingGraphic)?!0:!1}function J(P,ea){if(v(P))return P;if(null===P)return"";if(C(P))return x(P,ea);if(r(P))return P.toString();if(q(P))return E(P,ea);if(P instanceof d)return JSON.stringify(P.toJson());if(w(P)){ea=[];for(var ra=0;ra<P.length;ra++)ea[ra]=Q(P[ra]);return"["+ea.join(",")+"]"}if(P instanceof A){ea=[];for(ra=0;ra<P.length();ra++)ea[ra]=
Q(P.get(ra));return"["+ea.join(",")+"]"}return null!==P&&"object"===typeof P&&void 0!==P.castToText?P.castToText():m(P)?"object, Function":""}function L(P,ea){if(v(P))return P;if(null===P)return"";if(C(P))return x(P,ea);if(r(P))return P.toString();if(q(P))return E(P,ea);if(P instanceof d)return P instanceof g?'{"xmin":'+P.xmin.toString()+',"ymin":'+P.ymin.toString()+","+(P.hasZ?'"zmin":'+P.zmin.toString()+",":"")+(P.hasM?'"mmin":'+P.mmin.toString()+",":"")+'"xmax":'+P.xmax.toString()+',"ymax":'+P.ymax.toString()+
","+(P.hasZ?'"zmax":'+P.zmax.toString()+",":"")+(P.hasM?'"mmax":'+P.mmax.toString()+",":"")+'"spatialReference":'+Y(P.spatialReference)+"}":Y(P.toJson(),function(M,Z){return M.key===Z.key?0:"spatialReference"===M.key?1:"spatialReference"===Z.key||M.key<Z.key?-1:M.key>Z.key?1:0});if(w(P)){ea=[];for(var ra=0;ra<P.length;ra++)ea[ra]=Q(P[ra]);return"["+ea.join(",")+"]"}if(P instanceof A){ea=[];for(ra=0;ra<P.length();ra++)ea[ra]=Q(P.get(ra));return"["+ea.join(",")+"]"}return null!==P&&"object"===typeof P&&
void 0!==P.castToText?P.castToText():m(P)?"object, Function":""}function Q(P){return null===P?"null":r(P)||C(P)||v(P)?JSON.stringify(P):P instanceof d||P instanceof A||P instanceof Array?L(P):P instanceof Date?JSON.stringify(E(P,"")):null!==P&&"object"===typeof P&&void 0!==P.castToText?P.castToText():"null"}function ba(P,ea){return C(P)?P:null===P||""===P?0:q(P)?NaN:r(P)?P?1:0:w(P)||""===P||void 0===P?NaN:void 0!==ea&&v(P)?(ea=n(ea,"\u2030",""),ea=n(ea,"\u00a4",""),t.parse(P,{pattern:ea})):P===u.voidOperation?
0:Number(P)}function fa(P,ea){var ra;ea.fields.some(function(M){M.name===P&&(ra=M.domain);return!!ra});return ra}function Y(P,ea){ea||(ea={});"function"===typeof ea&&(ea={cmp:ea});var ra="boolean"===typeof ea.cycles?ea.cycles:!1,M=ea.cmp&&function(ka){return function(qa){return function(ua,Aa){return ka({key:ua,value:qa[ua]},{key:Aa,value:qa[Aa]})}}}(ea.cmp),Z=[];return function ua(qa){qa&&qa.toJson&&"function"===typeof qa.toJson&&(qa=qa.toJson());if(void 0!==qa){if("number"===typeof qa)return isFinite(qa)?
""+qa:"null";if("object"!==typeof qa)return JSON.stringify(qa);var Aa;if(Array.isArray(qa)){var ya="[";for(Aa=0;Aa<qa.length;Aa++)Aa&&(ya+=","),ya+=ua(qa[Aa])||"null";return ya+"]"}if(null===qa)return"null";if(-1!==Z.indexOf(qa)){if(ra)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var G=Z.push(qa)-1,I=Object.keys(qa).sort(M&&M(qa));ya="";for(Aa=0;Aa<I.length;Aa++){var R=I[Aa],X=ua(qa[R]);X&&(ya&&(ya+=","),ya+=JSON.stringify(R)+":"+X)}Z.splice(G,1);
return"{"+ya+"}"}}(P)}function ma(P,ea){if(ea instanceof a)P.push([ea.x,ea.y]);else throw Error("Invalid Argument");}Object.defineProperty(u,"__esModule",{value:!0});u.binaryOperator=u.MomentLibrary=u.tick=u.toStringArray=u.autoCastArrayOfPointsToMultiPoint=u.autoCastArrayOfPointsToPolyline=u.autoCastArrayOfPointsToPolygon=u.autoCastFeatureToGeometry=u.stableStringify=u.getDomain=u.getDomainCode=u.getDomainValue=u.fixNullGeometry=u.fixSpatialReference=u.toBoolean=u.toDateM=u.toDate=u.toNumber=u.toStringExplicit=
u.toNumberArray=u.toString=u.equalityTest=u.greaterThanLessThan=u.standardiseDateFormat=u.formatDate=u.formatNumber=u.generateUUID=u.pcCheck=u.isDate=u.isImmutableArray=u.isFeatureSetCollection=u.isFeatureSet=u.isArray=u.isInteger=u.isNumber=u.isBoolean=u.isString=u.defaultUndefined=u.isSimpleType=u.isFunctionParameter=u.multiReplace=u.continueResult=u.breakResult=u.voidOperation=u.SizzleFunction=u.ReturnResult=u.ImplicitResult=u.NativeFunction=u.SizzleFunctionE=u.NativeFunctionE=u.ImplicitResultE=
u.ReturnResultE=void 0;e=function(){return function(P){this.value=P}}();u.ReturnResultE=e;var ca=function(){return function(P){this.value=P}}();u.ImplicitResultE=ca;var la=function(){return function(P){this.fn=P}}();u.NativeFunctionE=la;var ta=function(){return function(P){this.fn=P}}();u.SizzleFunctionE=ta;u.NativeFunction=la;u.ImplicitResult=ca;u.ReturnResult=e;u.SizzleFunction=ta;u.voidOperation={type:"VOID"};u.breakResult={type:"BREAK"};u.continueResult={type:"CONTINUE"};u.multiReplace=n;u.isFunctionParameter=
m;u.isSimpleType=h;u.defaultUndefined=function(P,ea){return void 0===P?ea:P};u.isString=v;u.isBoolean=r;u.isNumber=C;u.isInteger=function(P){return"number"===typeof P&&isFinite(P)&&Math.floor(P)===P};u.isArray=w;u.isFeatureSet=function(P){return!0===(P&&P.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===P.declaredRootClass)};u.isFeatureSetCollection=function(P){return!0===(P&&P.declaredRootClass&&"esri.arcade.featureSetCollection"===P.declaredRootClass)};u.isImmutableArray=y;u.isDate=
q;u.pcCheck=function(P,ea,ra){if(P.length<ea||P.length>ra)throw Error("Function called with wrong number of Parameters");};u.generateUUID=function(){var P=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ea){var ra=(P+16*Math.random())%16|0;P=Math.floor(P/16);return("x"===ea?ra:ra&3|8).toString(16)})};u.formatNumber=x;u.formatDate=E;u.standardiseDateFormat=z;u.greaterThanLessThan=function(P,ea,ra){if(null===P){if(null===ea||ea===u.voidOperation)return D(null,
null,ra);if(C(ea))return D(0,ea,ra);if(v(ea)||r(ea))return D(0,ba(ea),ra);if(q(ea))return D(0,ea.getTime(),ra)}if(P===u.voidOperation){if(null===ea||ea===u.voidOperation)return D(null,null,ra);if(C(ea))return D(0,ea,ra);if(v(ea)||r(ea))return D(0,ba(ea),ra);if(q(ea))return D(0,ea.getTime(),ra)}else if(C(P)){if(C(ea))return D(P,ea,ra);if(r(ea))return D(P,ba(ea),ra);if(null===ea||ea===u.voidOperation)return D(P,0,ra);if(v(ea))return D(P,ba(ea),ra);if(q(ea))return D(P,ea.getTime(),ra)}else if(v(P)){if(v(ea))return D(J(P),
J(ea),ra);if(q(ea))return D(ba(P),ea.getTime(),ra);if(C(ea))return D(ba(P),ea,ra);if(null===ea||ea===u.voidOperation)return D(ba(P),0,ra);if(r(ea))return D(ba(P),ba(ea),ra)}else if(q(P)){if(q(ea))return D(P,ea,ra);if(null===ea||ea===u.voidOperation)return D(P.getTime(),0,ra);if(C(ea))return D(P.getTime(),ea,ra);if(r(ea)||v(ea))return D(P.getTime(),ba(ea),ra)}else if(r(P)){if(r(ea))return D(P,ea,ra);if(C(ea))return D(ba(P),ba(ea),ra);if(q(ea))return D(ba(P),ea.getTime(),ra);if(null===ea||ea===u.voidOperation)return D(ba(P),
0,ra);if(v(ea))return D(ba(P),ba(ea),ra)}return!F(P,ea)||"\x3c\x3d"!==ra&&"\x3e\x3d"!==ra?!1:!0};u.equalityTest=F;u.toString=J;u.toNumberArray=function(P){var ea=[];if(!1===w(P))return null;if(P instanceof A){for(var ra=0;ra<P.length();ra++)ea[ra]=ba(P.get(ra));return ea}for(ra=0;ra<P.length;ra++)ea[ra]=ba(P[ra]);return ea};u.toStringExplicit=L;u.toNumber=ba;u.toDate=function(P,ea){return q(P)?P:v(P)&&(P=u.MomentLibrary.Moment(P,[void 0===ea||null===ea||""===ea?u.MomentLibrary.Moment.ISO_8601:ea]),
P.isValid())?P.toDate():null};u.toDateM=function(P,ea){return q(P)?u.MomentLibrary.Moment(P):v(P)&&(P=u.MomentLibrary.Moment(P,[void 0===ea||null===ea||""===ea?u.MomentLibrary.Moment.ISO_8601:ea]),P.isValid())?P:null};u.toBoolean=function(P){return r(P)?P:v(P)?(P=P.toLowerCase(),"true"===P?!0:!1):C(P)?0===P||isNaN(P)?!1:!0:!1};u.fixSpatialReference=function(P,ea){if(null===P||void 0===P)return null;if(null===P.spatialReference||void 0===P.spatialReference)P.spatialReference=ea;return P};u.fixNullGeometry=
function(P){if(null===P)return null;if(P instanceof a)return"NaN"===P.x||null===P.x||isNaN(P.x)?null:P;if(P instanceof b){if(0===P.rings.length)return null;for(var ea=0,ra=P.rings;ea<ra.length;ea++){var M=ra[ea];if(0<M.length)return P}return null}if(P instanceof f){if(0===P.paths.length)return null;ea=0;for(ra=P.paths;ea<ra.length;ea++)if(M=ra[ea],0<M.length)return P;return null}return P instanceof c?0===P.points.length?null:P:P instanceof g?"NaN"===P.xmin||null===P.xmin||isNaN(P.xmin)?null:P:null};
u.getDomainValue=function(P,ea){if(!P||!P.domain)return ea;var ra=null;if("string"===P.field.type||"esriFieldTypeString"===P.field.type)ea=J(ea);else{if(null===ea||void 0===ea)return null;if(""===ea)return ea;ea=ba(ea)}for(var M=0;M<P.domain.codedValues.length;M++){var Z=P.domain.codedValues[M];Z.code===ea&&(ra=Z)}return null===ra?ea:ra.name};u.getDomainCode=function(P,ea){if(!P||!P.domain)return ea;var ra=null;ea=J(ea);for(var M=0;M<P.domain.codedValues.length;M++){var Z=P.domain.codedValues[M];
Z.name===ea&&(ra=Z)}return null===ra?ea:ra.code};u.getDomain=function(P,ea,ra,M){void 0===ra&&(ra=null);if(!ea||!ea.fields)return null;for(var Z=null,ka=0;ka<ea.fields.length;ka++){var qa=ea.fields[ka];qa.name.toLowerCase()===P.toString().toLowerCase()&&(Z=qa)}if(null===Z)throw Error("Field not found");var ua,Aa;M||(M=ra&&ea.typeIdField&&ra._field(ea.typeIdField));null!=M&&ea.types.some(function(ya){return ya.id===M?((ua=ya.domains&&ya.domains[Z.name])&&"inherited"===ua.type&&(ua=fa(Z.name,ea),Aa=
!0),!0):!1});Aa||ua||(ua=fa(P,ea));return{field:Z,domain:ua}};u.stableStringify=Y;u.autoCastFeatureToGeometry=function(P){if(null===P)return null;for(var ea=[],ra=0;ra<P.length;ra++){var M=P[ra];M&&(M.declaredClass&&"esri.arcade.Feature"===M.declaredClass||"FeatureSetReader"===M.type)?ea.push(M.geometry()):ea.push(M)}return ea};u.autoCastArrayOfPointsToPolygon=function(P,ea){if(w(P)||y(P)){var ra=!1,M=!1,Z=[];if(w(P)){for(var ka=0;ka<P.length;ka++){var qa=P[ka];ma(Z,qa)}0<Z.length&&(ea=P[0].spatialReference,
ra=P[0].hasZ,M=P[0].hasM)}else if(P instanceof l)Z=P._elements,0<Z.length&&(ra=P._hasZ,M=P._hasM,ea=P.get(0).spatialReference);else if(y(P)){ka=0;for(var ua=P.toArray();ka<ua.length;ka++)qa=ua[ka],ma(Z,qa);0<Z.length&&(ea=P.get(0).spatialReference,ra=!0===P.get(0).hasZ,M=!0===P.get(0).hasM)}else throw Error("Invalid Argument");if(0===Z.length)return null;!1===(new b({rings:[],spatialReference:{wkid:4326}})).isClockwise(Z)&&(Z=Z.slice(0).reverse());return new b({rings:[Z],spatialReference:ea,hasZ:ra,
hasM:M})}return P};u.autoCastArrayOfPointsToPolyline=function(P,ea){if(w(P)||y(P)){var ra=!1,M=!1,Z=[];if(w(P)){for(var ka=0;ka<P.length;ka++){var qa=P[ka];ma(Z,qa)}0<Z.length&&(ea=P[0].spatialReference,ra=!0===P[0].hasZ,M=!0===P[0].hasM)}else if(P instanceof l)Z=P._elements,0<Z.length&&(ra=P._hasZ,M=P._hasM,ea=P.get(0).spatialReference);else if(y(P)){ka=0;for(var ua=P.toArray();ka<ua.length;ka++)qa=ua[ka],ma(Z,qa);0<Z.length&&(ea=P.get(0).spatialReference,ra=!0===P.get(0).hasZ,M=!0===P.get(0).hasM)}return 0===
Z.length?null:new f({paths:[Z],spatialReference:ea,hasZ:ra,hasM:M})}return P};u.autoCastArrayOfPointsToMultiPoint=function(P,ea){if(w(P)||y(P)){var ra=!1,M=!1,Z=[];if(w(P)){for(var ka=0;ka<P.length;ka++){var qa=P[ka];ma(Z,qa)}0<Z.length&&(ea=P[0].spatialReference,ra=!0===P[0].hasZ,M=!0===P[0].hasM)}else if(P instanceof l)Z=P._elements,0<Z.length&&(ra=P._hasZ,M=P._hasM,ea=P.get(0).spatialReference);else if(y(P)){ka=0;for(var ua=P.toArray();ka<ua.length;ka++)qa=ua[ka],ma(Z,qa);0<Z.length&&(ea=P.get(0).spatialReference,
ra=!0===P.get(0).hasZ,M=!0===P.get(0).hasM)}return 0===Z.length?null:new c({points:Z,spatialReference:ea,hasZ:ra,hasM:M})}return P};u.toStringArray=function(P,ea){void 0===ea&&(ea=!1);var ra=[];if(null===P)return ra;if(!0===w(P)){for(var M=0;M<P.length;M++){var Z=J(P[M]);""===Z&&!0!==ea||ra.push(Z)}return ra}if(P instanceof A){for(M=0;M<P.length();M++)Z=J(P.get(M)),""===Z&&!0!==ea||ra.push(Z);return ra}return h(P)?(Z=J(P),""===Z&&!0!==ea||ra.push(Z),ra):[]};var za=0;u.tick=function(P){za++;return 0===
za%100?(za=0,k.create(function(ea){setTimeout(function(){ea(P)},0)})):P};u.MomentLibrary={Moment:null};u.binaryOperator=function(P,ea,ra){switch(ra){case "\x26":return P&ea;case "|":return P|ea;case "^":return P^ea;case "\x3c\x3c":return P<<ea;case "\x3e\x3e":return P>>ea;case "\x3e\x3e\x3e":return P>>>ea}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(e,u){return function(){return function(B,A){this.context=this.definition=null;this.definition=B;this.context=A}}()})},
"esri/arcade/ImmutablePathArray":function(){var e=this&&this.__extends||function(){var u=function(B,A){u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var k in l)l.hasOwnProperty(k)&&(p[k]=l[k])};return u(B,A)};return function(B,A){function p(){this.constructor=B}u(B,A);B.prototype=null===A?Object.create(A):(p.prototype=A.prototype,new p)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(u,B,A,p){return function(l){function k(g,
d,c,a,b){g=l.call(this,g)||this;g._lazyPath=[];g._hasZ=!1;g._hasM=!1;g._hasZ=c;g._hasM=a;g._spRef=d;g._cacheId=b;return g}e(k,l);k.prototype.get=function(g){if(void 0===this._lazyPath[g]){var d=this._elements[g];if(void 0===d)return;this._lazyPath[g]=new p(d,this._spRef,this._hasZ,this._hasM,this._cacheId,g)}return this._lazyPath[g]};k.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof k?!1:g.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return k}(A)})},"esri/arcade/ImmutablePointArray":function(){var e=this&&this.__extends||function(){var u=function(B,A){u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var k in l)l.hasOwnProperty(k)&&(p[k]=l[k])};return u(B,A)};return function(B,A){function p(){this.constructor=B}u(B,A);B.prototype=null===A?Object.create(A):(p.prototype=A.prototype,new p)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(u,B,A,
p){return function(l){function k(g,d,c,a,b,f){g=l.call(this,g)||this;g._lazyPt=[];g._hasZ=!1;g._hasM=!1;g._spRef=d;g._hasZ=c;g._hasM=a;g._cacheId=b;g._partId=f;return g}e(k,l);k.prototype.get=function(g){if(void 0===this._lazyPt[g]){var d=this._elements[g];if(void 0===d)return;var c=this._hasZ,a=this._hasM,b=null;b=c&&!a?new p(d[0],d[1],d[2],void 0,this._spRef):a&&!c?new p(d[0],d[1],void 0,d[2],this._spRef):c&&a?new p(d[0],d[1],d[2],d[3],this._spRef):new p(d[0],d[1],this._spRef);b.setCacheValue("_arcadeCacheId",
this._cacheId.toString()+"-"+this._partId.toString()+"-"+g.toString());this._lazyPt[g]=b}return this._lazyPt[g]};k.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof k?!1:g.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return k}(A)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(e,u,B,A){function p(d,c){var a=
new B(c);d(function(b){return g(b).then(a.resolve)},a.reject);return a.promise}function l(d){if(d){if("function"!==typeof d.forEach){var c=Object.keys(d),a=c.map(function(f){return d[f]});return l(a).then(function(f){var t={};c.forEach(function(n,m){return t[n]=f[m]});return t})}var b=null;return p(function(f,t){var n=[],m=d.length;0===m&&f(n);d.forEach(function(h){var v={promise:h};n.push(v);h.then(function(r){v.value=r}).catch(function(r){v.error=r}).then(function(){--m;0===m&&(b?t(Error("AbortError")):
f(n))})})},function(f){b=f||"Invocation cancellation";d.forEach(function(t){return t.cancel(f)})})}}function k(d){void 0===d&&(d=void 0);var c=new B;c.resolve(d);return c.promise}function g(d){return d&&"function"===typeof d.then?d:k(d)}Object.defineProperty(u,"__esModule",{value:!0});u.createResolver=u.when=u.isPromiseLike=u.wrapCallback=u.timeout=u.after=u.resolve=u.reject=u.first=u.eachAlwaysValues=u.eachAlways=u.createDeferred=u.create=u.filter=u.all=void 0;u.all=function(d){return A(d)};u.filter=
function(d,c){var a=d.slice();return A(d.map(function(b,f){return c(b,f)})).then(function(b){return a.filter(function(f,t){return b[t]})})};u.create=p;u.createDeferred=function(d){var c=null;d=p(function(a,b){c={resolve:a,reject:b}},d);c.promise=d;c.cancel=function(){c.reject(Error("AbortError"))};return c};u.eachAlways=l;u.eachAlwaysValues=function(d){return l(d).then(function(c){return c.filter(function(a){return!!a.value}).map(function(a){return a.value})})};u.first=function(d){return d&&d.length?
p(function(c,a){for(var b=0;b<d.length;b++)d[b].then(c,a)}):k()};u.reject=function(d){var c=new B;c.reject(d);return c.promise};u.resolve=k;u.after=function(d,c){void 0===c&&(c=void 0);var a=0;return p(function(b){a=setTimeout(function(){b(c)},d)},function(){a&&(clearTimeout(a),a=0)})};u.timeout=function(d,c,a){var b=0,f=new B(d.cancel);d.then(function(t){f.isFulfilled()||(f.resolve(t),b&&(clearTimeout(b),b=0))});d.catch(function(t){f.isFulfilled()||(f.reject(t),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){f.reject(a||
Error("promiseUtils:timeout"))},c);return f.promise};u.wrapCallback=function(d){var c=!1;return p(function(){d(function(a){c||k(a)})},function(){return c=!0})};u.isPromiseLike=function(d){return d&&"function"===typeof d.then};u.when=g;u.createResolver=function(d){var c,a;d=p(function(f,t){c=f;a=t},d);var b=function(f){c(f)};b.resolve=function(f){return c(f)};b.reject=function(f){return a(f)};b.promise=d;return b}})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c){function a(){}function b(){}e=e(k,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(f){this.points=[];f&&(f.points?p.mixin(this,f):this.spatialReference=f,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(f){this.clearCache();u.isArray(f)?this.points.push(f):this.points.push([f.x,f.y]);return this},removePoint:function(f){if(this._validateInputs(f))return this.clearCache(),
new g(this.points.splice(f,1)[0],this.spatialReference)},getExtent:function(){var f=this.getCacheValue("_extent");if(f)return new d(f);f=this.points;var t=f.length;if(t){var n=f[0],m,h,v=m=n[0],r=h=n[1],C=Math.min,w=Math.max,y=this.spatialReference,q;for(q=0;q<t;q++){n=f[q];var x=n[0];n=n[1];v=C(v,x);r=C(r,n);m=w(m,x);h=w(h,n)}f={xmin:v,ymin:r,xmax:m,ymax:h,spatialReference:y?y.toJson():null};this.setCacheValue("_extent",f);return new d(f)}},_validateInputs:function(f){return null===f||0>f||f>=this.points.length?
!1:!0},getPoint:function(f){if(this._validateInputs(f))return f=this.points[f],new g(f[0],f[1],this.spatialReference)},setPoint:function(f,t){if(this._validateInputs(f))return this.clearCache(),this.points[f]=[t.x,t.y],this},toJson:function(){var f={points:p.clone2DArray(this.points)},t=this.spatialReference;t&&(f.spatialReference=t.toJson());return f}});a.prototype=e.prototype;b.prototype=new a;Object.defineProperty(b.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:p.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(f){this._pointsVal=f}});b.prototype.setupLazyUnquantization=function(f,t){this._unquantizeFn=f;this._pointsVal=t.points};e.simpleConstructor=a;e.accessorConstructor=b;e.defaultProps={type:"multipoint",points:null};return e})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(e,
u,B,A,p,l,k,g,d,c,a,b){function f(){}function t(){}var n=e(g,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(m){this.rings=[];this._ring=0;m&&(B.isArray(m)?this.rings=B.isArray(m[0][0])?m:[m]:m.rings?l.mixin(this,m):this.spatialReference=m,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(m){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];B.isArray(m[0])?u.forEach(m,
this._addPointArr,this):u.forEach(m,this._addPoint,this);return this},_addPointArr:function(m){this.rings[this._ring].push(m)},_addPoint:function(m){this.rings[this._ring].push([m.x,m.y])},_insertPoints:function(m,h){this.clearCache();this._ring=h;this.rings[this._ring]||(this.rings[this._ring]=[]);u.forEach(m,this._addPoint,this)},_validateInputs:function(m,h){return null!==m&&void 0!==m&&(0>m||m>=this.rings.length)||null!==h&&void 0!==m&&(0>h||h>=this.rings[m].length)?!1:!0},getPoint:function(m,
h){if(this._validateInputs(m,h))return new d(this.rings[m][h],this.spatialReference)},setPoint:function(m,h,v){if(this._validateInputs(m,h))return this.clearCache(),this.rings[m][h]=[v.x,v.y],this},insertPoint:function(m,h,v){if(this._validateInputs(m)&&null!=h&&0<=h&&h<=this.rings[m].length)return this.clearCache(),this.rings[m].splice(h,0,[v.x,v.y]),this},removeRing:function(m){if(this._validateInputs(m,null)){this.clearCache();m=this.rings.splice(m,1)[0];var h,v=m.length,r=this.spatialReference;
for(h=0;h<v;h++)m[h]=new d(m[h],r);return m}},removePoint:function(m,h){if(this._validateInputs(m,h))return this.clearCache(),new d(this.rings[m].splice(h,1)[0],this.spatialReference)},getExtent:function(){var m=this.getCacheValue("_extent");var h=this.getCacheValue("_partwise");if(m)return m=new c(m),m._partwise=h,m;m=this.rings;var v=m.length;if(v&&m[0].length){var r,C,w,y,q=r=m[0][0][0],x=C=m[0][0][1],E=Math.min,z=Math.max,D=this.spatialReference;h=[];var F,J;for(w=0;w<v;w++){var L=m[w];var Q=
F=L[0]&&L[0][0];var ba=J=L[0]&&L[0][1];var fa=L.length;for(y=0;y<fa;y++){var Y=L[y];var ma=Y[0];Y=Y[1];q=E(q,ma);x=E(x,Y);r=z(r,ma);C=z(C,Y);Q=E(Q,ma);ba=E(ba,Y);F=z(F,ma);J=z(J,Y)}h.push(new c({xmin:Q,ymin:ba,xmax:F,ymax:J,spatialReference:D?D.toJson():null}))}m={xmin:q,ymin:x,xmax:r,ymax:C,spatialReference:D?D.toJson():null};h=1<h.length?h:null;this.setCacheValue("_extent",m);this.setCacheValue("_partwise",h);m=new c(m);m._partwise=h;return m}},contains:function(m){var h=this.rings,v=!1,r,C,w,y=
h.length;var q=this.spatialReference;var x=m.spatialReference;var E=m.x;m=m.y;q&&x&&!q.equals(x)&&q._canProject(x)&&(m=q.isWebMercator()?d.lngLatToXY(E,m):d.xyToLngLat(E,m,!0),E=m[0],m=m[1]);for(w=0;w<y;w++){q=h[w];var z=q.length;for(C=r=0;C<z;C++){r++;r===z&&(r=0);x=q[C];var D=q[r];(x[1]<m&&D[1]>=m||D[1]<m&&x[1]>=m)&&x[0]+(m-x[1])/(D[1]-x[1])*(D[0]-x[0])<E&&(v=!v)}}return v},getCentroid:function(){var m=this.getCacheValue("_centroid");if(void 0!==m)return m;m=this.rings;var h,v,r=[],C,w,y=Infinity,
q=-Infinity,x=Infinity,E=-Infinity;u.forEach(m,function(F){z=h=v=0;u.forEach(F,function(J,L){L<F.length-1&&(C=F[L+1],w=J[0]*C[1]-C[0]*J[1],z+=(J[0]+C[0])*w,h+=(J[1]+C[1])*w,v+=w,J[0]<y&&(y=J[0]),J[0]>q&&(q=J[0]),J[1]<x&&(x=J[1]),J[1]>E&&(E=J[1]))});0<v&&(v*=-1);v&&r.push([z,h,v/2])});r.sort(function(F,J){return F[2]-J[2]});var z=h=void 0;if(r[0]){var D=6*r[0][2];z=r[0][0]/D;h=r[0][1]/D;if(z<y||z>q||h<x||h>E)z=h=void 0}if(void 0===z||void 0===h)if(m=m[0]&&m[0].length?this._getLineCentroid(m[0]):null)z=
m.x,h=m.y;m=isNaN(z)||isNaN(h)?null:new d(z,h,this.spatialReference);this.setCacheValue("_centroid",m);return m},_getLineCentroid:function(m){var h=0,v=0,r=0,C={x:0,y:0},w={x:0,y:0},y,q=m.length,x;for(y=0;y<q-1;y++){var E=m[y];var z=m[y+1];if(E&&z){C.x=E[0];C.y=E[1];w.x=z[0];w.y=z[1];var D=a.getLength(C,w);0<D&&(h+=D,E=a.getMidpoint(E,z),v+=D*E[0],r+=D*E[1])}}0<h?x={x:v/h,y:r/h}:m[0]&&(x={x:m[0][0],y:m[0][1]});return x},isClockwise:function(m){var h=0,v,r=m.length,C=B.isArray(m[0])?function(w,y){return w[0]*
y[1]-y[0]*w[1]}:function(w,y){return w.x*y.y-y.x*w.y};for(v=0;v<r;v++)h+=C(m[v],m[(v+1)%r]);return 0>=h/2},isSelfIntersecting:function(m){m=m||this;var h,v,r,C,w,y=m.rings.length;for(r=0;r<y;r++){for(h=0;h<m.rings[r].length-1;h++){var q=[[m.rings[r][h][0],m.rings[r][h][1]],[m.rings[r][h+1][0],m.rings[r][h+1][1]]];for(v=r+1;v<y;v++)for(C=0;C<m.rings[v].length-1;C++){var x=[[m.rings[v][C][0],m.rings[v][C][1]],[m.rings[v][C+1][0],m.rings[v][C+1][1]]];if((w=a._getLineIntersection2(q,x))&&!(w[0]===q[0][0]&&
w[1]===q[0][1]||w[0]===x[0][0]&&w[1]===x[0][1]||w[0]===q[1][0]&&w[1]===q[1][1]||w[0]===x[1][0]&&w[1]===x[1][1]))return!0}}C=m.rings[r].length;if(!(4>=C))for(h=0;h<C-3;h++){var E=C-1;0===h&&(E=C-2);q=[[m.rings[r][h][0],m.rings[r][h][1]],[m.rings[r][h+1][0],m.rings[r][h+1][1]]];for(v=h+2;v<E;v++)if(x=[[m.rings[r][v][0],m.rings[r][v][1]],[m.rings[r][v+1][0],m.rings[r][v+1][1]]],(w=a._getLineIntersection2(q,x))&&!(w[0]===q[0][0]&&w[1]===q[0][1]||w[0]===x[0][0]&&w[1]===x[0][1]||w[0]===q[1][0]&&w[1]===
q[1][1]||w[0]===x[1][0]&&w[1]===x[1][1]))return!0}}return!1},toJson:function(){var m={rings:l.clone3DArray(this.rings)},h=this.spatialReference;h&&(m.spatialReference=h.toJson());return m}});f.prototype=n.prototype;t.prototype=new f;Object.defineProperty(t.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:l.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(m){this._ringsVal=m}});t.prototype.setupLazyUnquantization=
function(m,h){this._unquantizeFn=m;this._ringsVal=h.rings};n.simpleConstructor=f;n.accessorConstructor=t;n.defaultProps={type:"polygon",rings:null};n.createEllipse=function(m){var h=m.center.x,v=m.center.y,r=m.longAxis,C=m.shortAxis,w=m.numberOfPoints,y=m.map,q;m=[];var x=2*Math.PI/w;for(q=0;q<w;q++){var E=Math.cos(q*x);var z=Math.sin(q*x);E=y.toMap({x:r*E+h,y:C*z+v});m.push(E)}m.push(m[0]);h=new n(y.spatialReference);h.addRing(m);return h};n.createCircle=function(m){return n.createEllipse({center:m.center,
longAxis:m.r,shortAxis:m.r,numberOfPoints:m.numberOfPoints,map:m.map})};n.fromExtent=function(m){var h=m.normalize();m=m.spatialReference;return new n({rings:u.map(h,function(v){return[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]}),spatialReference:m?m.toJson():null})};return n})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a){function b(){}function f(){}e=e(g,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(t){this.paths=[];this._path=0;t&&(B.isArray(t)?this.paths=B.isArray(t[0][0])?t:[t]:t.paths?l.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(t){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];B.isArray(t[0])?
u.forEach(t,this._addPointArr,this):u.forEach(t,this._addPoint,this);return this},_addPointArr:function(t){this.paths[this._path].push(t)},_addPoint:function(t){this.paths[this._path].push([t.x,t.y])},_insertPoints:function(t,n){this.clearCache();this._path=n;this.paths[this._path]||(this.paths[this._path]=[]);u.forEach(t,this._addPoint,this)},_validateInputs:function(t,n){return null!==t&&void 0!==t&&(0>t||t>=this.paths.length)||null!==n&&void 0!==t&&(0>n||n>=this.paths[t].length)?!1:!0},getPoint:function(t,
n){if(this._validateInputs(t,n))return new d(this.paths[t][n],this.spatialReference)},setPoint:function(t,n,m){if(this._validateInputs(t,n))return this.clearCache(),this.paths[t][n]=[m.x,m.y],this},insertPoint:function(t,n,m){if(this._validateInputs(t)&&null!=n&&0<=n&&n<=this.paths[t].length)return this.clearCache(),this.paths[t].splice(n,0,[m.x,m.y]),this},removePath:function(t){if(this._validateInputs(t,null)){this.clearCache();t=this.paths.splice(t,1)[0];var n,m=t.length,h=this.spatialReference;
for(n=0;n<m;n++)t[n]=new d(t[n],h);return t}},removePoint:function(t,n){if(this._validateInputs(t,n))return this.clearCache(),new d(this.paths[t].splice(n,1)[0],this.spatialReference)},getExtent:function(){var t=this.getCacheValue("_extent");var n=this.getCacheValue("_partwise");if(t)return t=new c(t),t._partwise=n,t;t=this.paths;var m=t.length;if(m&&t[0].length){var h,v,r,C,w=h=t[0][0][0],y=v=t[0][0][1],q=Math.min,x=Math.max,E=this.spatialReference;n=[];var z,D;for(r=0;r<m;r++){var F=t[r];var J=
z=F[0]&&F[0][0];var L=D=F[0]&&F[0][1];var Q=F.length;for(C=0;C<Q;C++){var ba=F[C];var fa=ba[0];ba=ba[1];w=q(w,fa);y=q(y,ba);h=x(h,fa);v=x(v,ba);J=q(J,fa);L=q(L,ba);z=x(z,fa);D=x(D,ba)}n.push(new c({xmin:J,ymin:L,xmax:z,ymax:D,spatialReference:E?E.toJson():null}))}t={xmin:w,ymin:y,xmax:h,ymax:v,spatialReference:E?E.toJson():null};n=1<n.length?n:null;this.setCacheValue("_extent",t);this.setCacheValue("_partwise",n);t=new c(t);t._partwise=n;return t}},toJson:function(){var t={paths:l.clone3DArray(this.paths)},
n=this.spatialReference;n&&(t.spatialReference=n.toJson());return t}});b.prototype=e.prototype;f.prototype=new b;Object.defineProperty(f.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:l.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(t){this._pathsVal=t}});f.prototype.setupLazyUnquantization=function(t,n){this._unquantizeFn=t;this._pathsVal=n.paths};e.simpleConstructor=b;e.accessorConstructor=f;e.defaultProps=
{type:"polyline",paths:null};return e})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(e,u,B,A,p){return e(p,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(e,u,B,A,p,l,k,g,d){var c=e(l,{declaredClass:"esri.geometry.Rect",type:"rect",
x:0,y:0,width:100,height:100,constructor:function(a,b,f,t,n){p.isObject(a)&&"extent"===a.type&&(b=a.ymax,f=a.getWidth(),t=a.getHeight(),n=a.spatialReference,a=a.xmin);p.isObject(a)?(p.mixin(this,a),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.width=f,this.height=t,this.spatialReference=n);this.verifySR()},getCenter:function(){return new k(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(a,b){return new c(this.x+
a,this.y+b,this.width,this.height,this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return new g(parseFloat(this.x),parseFloat(this.y)-parseFloat(this.height),parseFloat(this.x)+parseFloat(this.width),parseFloat(this.y),this.spatialReference)},update:function(a,b,f,t,n){this.x=a;this.y=b;this.width=f;this.height=t;this.spatialReference=n;this.clearCache();return this}});return c})},
"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(e,u,B,A,p){var l=6370997*Math.PI/180,k=A.defaults,g={getUnitValueForSR:function(d){return this.getUnitValue(d)||l},getUnitValue:function(d){if(d)if("object"===typeof d){var c=d.wkid;var a=d.wkt}else"number"===typeof d?c=d:"string"===typeof d&&(a=d);if(c)var b=p.values[p[c]];else a&&-1!==a.search(/^PROJCS/i)&&(d=/UNIT\[([^\]]+)\]\]$/i.exec(a))&&d[1]&&(b=parseFloat(d[1].split(",")[1]));
return b},getScale:function(d,c,a){if(1<arguments.length&&null!=c&&!c.declaredClass){var b=d;var f=c;c=null;var t=g.getUnitValue(a)}else b=c||d.extent,f=d.width,t=g.getUnitValue(b&&b.spatialReference);return b&&f?b.getWidth()/f*(t||l)*39.37*k.screenDPI:0},getExtentForScale:function(d,c,a){a=a||d.extent;var b=g.getUnitValue(d.spatialReference);return a.expand(c*d.width/(39.37*(b||l)*k.screenDPI)/a.getWidth())}};return g})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(e,
u){u={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,
2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,
3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,
3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,
3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,
5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,
6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,
6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,
6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,
6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,
7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,
7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,
8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,
8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,
8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,
24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,
32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,
103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,
103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,
103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,
103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(e=2E3;2045>=e;e++)u[e]=0;for(e=2056;2065>=e;e++)u[e]=0;for(e=2067;2135>=e;e++)u[e]=0;for(e=2137;2154>=e;e++)u[e]=0;for(e=2161;2170>=e;e++)u[e]=0;for(e=2172;2193>=e;e++)u[e]=
0;for(e=2195;2198>=e;e++)u[e]=0;for(e=2200;2203>=e;e++)u[e]=0;for(e=2205;2217>=e;e++)u[e]=0;for(e=2222;2224>=e;e++)u[e]=1;for(e=2225;2250>=e;e++)u[e]=2;for(e=2251;2253>=e;e++)u[e]=1;for(e=2257;2264>=e;e++)u[e]=2;for(e=2274;2279>=e;e++)u[e]=2;for(e=2280;2282>=e;e++)u[e]=1;for(e=2283;2289>=e;e++)u[e]=2;for(e=2290;2292>=e;e++)u[e]=0;for(e=2308;2313>=e;e++)u[e]=0;for(e=2315;2491>=e;e++)u[e]=0;for(e=2494;2866>=e;e++)u[e]=0;for(e=2867;2869>=e;e++)u[e]=1;for(e=2870;2888>=e;e++)u[e]=2;for(e=2891;2895>=e;e++)u[e]=
2;for(e=2896;2898>=e;e++)u[e]=1;for(e=2902;2908>=e;e++)u[e]=2;for(e=2915;2920>=e;e++)u[e]=2;for(e=2921;2923>=e;e++)u[e]=1;for(e=2924;2930>=e;e++)u[e]=2;for(e=2931;2962>=e;e++)u[e]=0;for(e=2964;2968>=e;e++)u[e]=2;for(e=2969;2973>=e;e++)u[e]=0;for(e=2975;2991>=e;e++)u[e]=0;for(e=2995;3051>=e;e++)u[e]=0;for(e=3054;3079>=e;e++)u[e]=0;for(e=3081;3088>=e;e++)u[e]=0;for(e=3092;3101>=e;e++)u[e]=0;for(e=3106;3138>=e;e++)u[e]=0;for(e=3146;3151>=e;e++)u[e]=0;for(e=3153;3166>=e;e++)u[e]=0;for(e=3168;3172>=e;e++)u[e]=
0;for(e=3174;3203>=e;e++)u[e]=0;for(e=3294;3358>=e;e++)u[e]=0;for(e=3367;3403>=e;e++)u[e]=0;for(e=3408;3416>=e;e++)u[e]=0;for(e=3417;3438>=e;e++)u[e]=2;for(e=3441;3446>=e;e++)u[e]=2;for(e=3447;3450>=e;e++)u[e]=0;for(e=3451;3459>=e;e++)u[e]=2;for(e=3460;3478>=e;e++)u[e]=0;for(e=3554;3559>=e;e++)u[e]=0;for(e=3560;3570>=e;e++)u[e]=2;for(e=3571;3581>=e;e++)u[e]=0;for(e=3594;3597>=e;e++)u[e]=0;for(e=3601;3604>=e;e++)u[e]=0;for(e=3637;3639>=e;e++)u[e]=0;for(e=3665;3667>=e;e++)u[e]=0;for(e=3693;3695>=e;e++)u[e]=
0;for(e=3701;3727>=e;e++)u[e]=0;for(e=3728;3739>=e;e++)u[e]=2;for(e=3740;3751>=e;e++)u[e]=0;for(e=3753;3760>=e;e++)u[e]=2;for(e=3761;3773>=e;e++)u[e]=0;for(e=3775;3777>=e;e++)u[e]=0;for(e=3779;3781>=e;e++)u[e]=0;for(e=3783;3785>=e;e++)u[e]=0;for(e=3788;3791>=e;e++)u[e]=0;for(e=3797;3802>=e;e++)u[e]=0;for(e=3814;3816>=e;e++)u[e]=0;for(e=3825;3829>=e;e++)u[e]=0;for(e=3832;3841>=e;e++)u[e]=0;for(e=3844;3852>=e;e++)u[e]=0;for(e=3873;3885>=e;e++)u[e]=0;for(e=3890;3893>=e;e++)u[e]=0;for(e=3907;3912>=e;e++)u[e]=
0;for(e=3942;3950>=e;e++)u[e]=0;for(e=3968;3970>=e;e++)u[e]=0;for(e=3973;3976>=e;e++)u[e]=0;for(e=3986;3989>=e;e++)u[e]=0;for(e=3994;3997>=e;e++)u[e]=0;for(e=4048;4051>=e;e++)u[e]=0;for(e=4056;4063>=e;e++)u[e]=0;for(e=4093;4096>=e;e++)u[e]=0;for(e=4390;4398>=e;e++)u[e]=0;for(e=4399;4413>=e;e++)u[e]=2;for(e=4418;4433>=e;e++)u[e]=2;for(e=4455;4457>=e;e++)u[e]=2;for(e=4484;4489>=e;e++)u[e]=0;for(e=4491;4554>=e;e++)u[e]=0;for(e=4568;4589>=e;e++)u[e]=0;for(e=4652;4656>=e;e++)u[e]=0;for(e=4766;4800>=e;e++)u[e]=
0;for(e=5014;5016>=e;e++)u[e]=0;for(e=5069;5072>=e;e++)u[e]=0;for(e=5105;5130>=e;e++)u[e]=0;for(e=5173;5188>=e;e++)u[e]=0;for(e=5253;5259>=e;e++)u[e]=0;for(e=5269;5275>=e;e++)u[e]=0;for(e=5292;5311>=e;e++)u[e]=0;for(e=5329;5331>=e;e++)u[e]=0;for(e=5343;5349>=e;e++)u[e]=0;for(e=5355;5357>=e;e++)u[e]=0;for(e=5387;5389>=e;e++)u[e]=0;for(e=5459;5463>=e;e++)u[e]=0;for(e=5479;5482>=e;e++)u[e]=0;for(e=5518;5520>=e;e++)u[e]=0;for(e=5530;5539>=e;e++)u[e]=0;for(e=5550;5552>=e;e++)u[e]=0;for(e=5562;5583>=e;e++)u[e]=
0;for(e=5623;5625>=e;e++)u[e]=2;for(e=5631;5639>=e;e++)u[e]=0;for(e=5649;5653>=e;e++)u[e]=0;for(e=5663;5680>=e;e++)u[e]=0;for(e=5682;5685>=e;e++)u[e]=0;for(e=5875;5877>=e;e++)u[e]=0;for(e=5896;5899>=e;e++)u[e]=0;for(e=5921;5940>=e;e++)u[e]=0;for(e=6050;6125>=e;e++)u[e]=0;for(e=6244;6275>=e;e++)u[e]=0;for(e=6328;6348>=e;e++)u[e]=0;for(e=6350;6356>=e;e++)u[e]=0;for(e=6366;6372>=e;e++)u[e]=0;for(e=6381;6387>=e;e++)u[e]=0;for(e=6393;6404>=e;e++)u[e]=0;for(e=6480;6483>=e;e++)u[e]=0;for(e=6511;6514>=e;e++)u[e]=
0;for(e=6579;6581>=e;e++)u[e]=0;for(e=6619;6624>=e;e++)u[e]=0;for(e=6625;6627>=e;e++)u[e]=2;for(e=6628;6632>=e;e++)u[e]=0;for(e=6634;6637>=e;e++)u[e]=0;for(e=6669;6692>=e;e++)u[e]=0;for(e=6707;6709>=e;e++)u[e]=0;for(e=6720;6723>=e;e++)u[e]=0;for(e=6732;6738>=e;e++)u[e]=0;for(e=6931;6933>=e;e++)u[e]=0;for(e=6956;6959>=e;e++)u[e]=0;for(e=7005;7007>=e;e++)u[e]=0;for(e=7057;7070>=e;e++)u[e]=2;for(e=7074;7082>=e;e++)u[e]=0;for(e=7109;7118>=e;e++)u[e]=0;for(e=7119;7127>=e;e++)u[e]=1;for(e=7374;7376>=e;e++)u[e]=
0;for(e=7528;7586>=e;e++)u[e]=0;for(e=7587;7645>=e;e++)u[e]=2;for(e=7692;7696>=e;e++)u[e]=0;for(e=7755;7787>=e;e++)u[e]=0;for(e=7791;7795>=e;e++)u[e]=0;for(e=7799;7801>=e;e++)u[e]=0;for(e=7803;7805>=e;e++)u[e]=0;for(e=7825;7831>=e;e++)u[e]=0;for(e=7845;7859>=e;e++)u[e]=0;for(e=8013;8032>=e;e++)u[e]=0;for(e=8065;8068>=e;e++)u[e]=1;for(e=8518;8529>=e;e++)u[e]=2;for(e=8533;8536>=e;e++)u[e]=2;for(e=8538;8540>=e;e++)u[e]=2;for(e=8677;8679>=e;e++)u[e]=0;for(e=8836;8840>=e;e++)u[e]=0;for(e=8857;8859>=e;e++)u[e]=
0;for(e=8908;8910>=e;e++)u[e]=0;for(e=9154;9159>=e;e++)u[e]=0;for(e=9205;9218>=e;e++)u[e]=0;for(e=9271;9273>=e;e++)u[e]=0;for(e=9295;9297>=e;e++)u[e]=0;for(e=20002;20032>=e;e++)u[e]=0;for(e=20062;20092>=e;e++)u[e]=0;for(e=20135;20138>=e;e++)u[e]=0;for(e=20248;20258>=e;e++)u[e]=0;for(e=20348;20358>=e;e++)u[e]=0;for(e=20436;20440>=e;e++)u[e]=0;for(e=20822;20824>=e;e++)u[e]=0;for(e=20934;20936>=e;e++)u[e]=0;for(e=21035;21037>=e;e++)u[e]=0;for(e=21095;21097>=e;e++)u[e]=0;for(e=21148;21150>=e;e++)u[e]=
0;for(e=21413;21423>=e;e++)u[e]=0;for(e=21453;21463>=e;e++)u[e]=0;for(e=21473;21483>=e;e++)u[e]=0;for(e=21780;21782>=e;e++)u[e]=0;for(e=21891;21894>=e;e++)u[e]=0;for(e=21896;21899>=e;e++)u[e]=0;for(e=22171;22177>=e;e++)u[e]=0;for(e=22181;22187>=e;e++)u[e]=0;for(e=22191;22197>=e;e++)u[e]=0;for(e=22234;22236>=e;e++)u[e]=0;for(e=22521;22525>=e;e++)u[e]=0;for(e=22991;22994>=e;e++)u[e]=0;for(e=23028;23038>=e;e++)u[e]=0;for(e=23830;23853>=e;e++)u[e]=0;for(e=23866;23872>=e;e++)u[e]=0;for(e=23877;23884>=
e;e++)u[e]=0;for(e=23886;23894>=e;e++)u[e]=0;for(e=23946;23948>=e;e++)u[e]=0;for(e=24311;24313>=e;e++)u[e]=0;for(e=24342;24347>=e;e++)u[e]=0;for(e=24370;24374>=e;e++)u[e]=10;for(e=24375;24381>=e;e++)u[e]=0;for(e=24718;24721>=e;e++)u[e]=0;for(e=24817;24821>=e;e++)u[e]=0;for(e=24877;24882>=e;e++)u[e]=0;for(e=24891;24893>=e;e++)u[e]=0;for(e=25391;25395>=e;e++)u[e]=0;for(e=25828;25838>=e;e++)u[e]=0;for(e=26191;26195>=e;e++)u[e]=0;for(e=26391;26393>=e;e++)u[e]=0;for(e=26701;26722>=e;e++)u[e]=0;for(e=26729;26799>=
e;e++)u[e]=2;for(e=26801;26803>=e;e++)u[e]=2;for(e=26811;26813>=e;e++)u[e]=2;for(e=26847;26870>=e;e++)u[e]=2;for(e=26891;26899>=e;e++)u[e]=0;for(e=26901;26923>=e;e++)u[e]=0;for(e=26929;26946>=e;e++)u[e]=0;for(e=26948;26998>=e;e++)u[e]=0;for(e=27037;27040>=e;e++)u[e]=0;for(e=27205;27232>=e;e++)u[e]=0;for(e=27258;27260>=e;e++)u[e]=0;for(e=27391;27398>=e;e++)u[e]=0;for(e=27561;27564>=e;e++)u[e]=0;for(e=27571;27574>=e;e++)u[e]=0;for(e=27581;27584>=e;e++)u[e]=0;for(e=27591;27594>=e;e++)u[e]=0;for(e=28191;28193>=
e;e++)u[e]=0;for(e=28348;28358>=e;e++)u[e]=0;for(e=28402;28432>=e;e++)u[e]=0;for(e=28462;28492>=e;e++)u[e]=0;for(e=29118;29122>=e;e++)u[e]=0;for(e=29168;29172>=e;e++)u[e]=0;for(e=29177;29185>=e;e++)u[e]=0;for(e=29187;29195>=e;e++)u[e]=0;for(e=29900;29903>=e;e++)u[e]=0;for(e=30161;30179>=e;e++)u[e]=0;for(e=30491;30494>=e;e++)u[e]=0;for(e=30729;30732>=e;e++)u[e]=0;for(e=31251;31259>=e;e++)u[e]=0;for(e=31265;31268>=e;e++)u[e]=0;for(e=31275;31279>=e;e++)u[e]=0;for(e=31281;31297>=e;e++)u[e]=0;for(e=31461;31469>=
e;e++)u[e]=0;for(e=31491;31495>=e;e++)u[e]=0;for(e=31917;31922>=e;e++)u[e]=0;for(e=31965;32E3>=e;e++)u[e]=0;for(e=32001;32003>=e;e++)u[e]=2;for(e=32005;32031>=e;e++)u[e]=2;for(e=32033;32060>=e;e++)u[e]=2;for(e=32064;32067>=e;e++)u[e]=2;for(e=32074;32077>=e;e++)u[e]=2;for(e=32081;32086>=e;e++)u[e]=0;for(e=32107;32130>=e;e++)u[e]=0;for(e=32133;32158>=e;e++)u[e]=0;for(e=32164;32167>=e;e++)u[e]=2;for(e=32180;32199>=e;e++)u[e]=0;for(e=32201;32260>=e;e++)u[e]=0;for(e=32301;32360>=e;e++)u[e]=0;for(e=32601;32662>=
e;e++)u[e]=0;for(e=32664;32667>=e;e++)u[e]=2;for(e=32701;32761>=e;e++)u[e]=0;for(e=53001;53004>=e;e++)u[e]=0;for(e=53008;53019>=e;e++)u[e]=0;for(e=53021;53032>=e;e++)u[e]=0;for(e=53034;53037>=e;e++)u[e]=0;for(e=53042;53046>=e;e++)u[e]=0;for(e=53074;53080>=e;e++)u[e]=0;for(e=54001;54004>=e;e++)u[e]=0;for(e=54008;54019>=e;e++)u[e]=0;for(e=54021;54032>=e;e++)u[e]=0;for(e=54034;54037>=e;e++)u[e]=0;for(e=54042;54046>=e;e++)u[e]=0;for(e=54048;54053>=e;e++)u[e]=0;for(e=54074;54080>=e;e++)u[e]=0;for(e=54098;54101>=
e;e++)u[e]=0;for(e=102001;102040>=e;e++)u[e]=0;for(e=102042;102063>=e;e++)u[e]=0;for(e=102065;102067>=e;e++)u[e]=0;for(e=102070;102117>=e;e++)u[e]=0;for(e=102122;102216>=e;e++)u[e]=0;for(e=102221;102377>=e;e++)u[e]=0;for(e=102382;102388>=e;e++)u[e]=0;for(e=102389;102398>=e;e++)u[e]=2;for(e=102399;102444>=e;e++)u[e]=0;for(e=102445;102447>=e;e++)u[e]=2;for(e=102448;102458>=e;e++)u[e]=0;for(e=102459;102468>=e;e++)u[e]=2;for(e=102469;102499>=e;e++)u[e]=0;for(e=102500;102519>=e;e++)u[e]=1;for(e=102520;102524>=
e;e++)u[e]=0;for(e=102525;102529>=e;e++)u[e]=2;for(e=102530;102588>=e;e++)u[e]=0;for(e=102590;102598>=e;e++)u[e]=0;for(e=102601;102603>=e;e++)u[e]=0;for(e=102605;102628>=e;e++)u[e]=0;for(e=102629;102646>=e;e++)u[e]=2;for(e=102648;102700>=e;e++)u[e]=2;for(e=102701;102703>=e;e++)u[e]=0;for(e=102707;102730>=e;e++)u[e]=2;for(e=102733;102758>=e;e++)u[e]=2;for(e=102767;102900>=e;e++)u[e]=0;for(e=102965;102969>=e;e++)u[e]=0;for(e=102971;102973>=e;e++)u[e]=0;for(e=102975;102989>=e;e++)u[e]=0;for(e=102990;102992>=
e;e++)u[e]=1;for(e=102997;103002>=e;e++)u[e]=0;for(e=103003;103008>=e;e++)u[e]=2;for(e=103009;103011>=e;e++)u[e]=0;for(e=103012;103014>=e;e++)u[e]=2;for(e=103019;103021>=e;e++)u[e]=0;for(e=103022;103024>=e;e++)u[e]=2;for(e=103029;103031>=e;e++)u[e]=0;for(e=103032;103034>=e;e++)u[e]=2;for(e=103065;103068>=e;e++)u[e]=0;for(e=103074;103076>=e;e++)u[e]=0;for(e=103077;103079>=e;e++)u[e]=1;for(e=103080;103082>=e;e++)u[e]=0;for(e=103083;103085>=e;e++)u[e]=2;for(e=103090;103093>=e;e++)u[e]=0;for(e=103097;103099>=
e;e++)u[e]=0;for(e=103100;103102>=e;e++)u[e]=2;for(e=103107;103109>=e;e++)u[e]=0;for(e=103110;103112>=e;e++)u[e]=2;for(e=103113;103116>=e;e++)u[e]=0;for(e=103117;103120>=e;e++)u[e]=2;for(e=103153;103157>=e;e++)u[e]=0;for(e=103158;103162>=e;e++)u[e]=2;for(e=103163;103165>=e;e++)u[e]=0;for(e=103166;103168>=e;e++)u[e]=1;for(e=103169;103171>=e;e++)u[e]=2;for(e=103186;103188>=e;e++)u[e]=0;for(e=103189;103191>=e;e++)u[e]=2;for(e=103192;103195>=e;e++)u[e]=0;for(e=103196;103199>=e;e++)u[e]=2;for(e=103200;103224>=
e;e++)u[e]=0;for(e=103225;103227>=e;e++)u[e]=1;for(e=103232;103237>=e;e++)u[e]=0;for(e=103238;103243>=e;e++)u[e]=2;for(e=103244;103246>=e;e++)u[e]=0;for(e=103247;103249>=e;e++)u[e]=2;for(e=103254;103256>=e;e++)u[e]=0;for(e=103257;103259>=e;e++)u[e]=2;for(e=103264;103266>=e;e++)u[e]=0;for(e=103267;103269>=e;e++)u[e]=2;for(e=103300;103375>=e;e++)u[e]=0;for(e=103381;103383>=e;e++)u[e]=0;for(e=103384;103386>=e;e++)u[e]=1;for(e=103387;103389>=e;e++)u[e]=0;for(e=103390;103392>=e;e++)u[e]=2;for(e=103397;103399>=
e;e++)u[e]=0;for(e=103400;103471>=e;e++)u[e]=2;for(e=103476;103478>=e;e++)u[e]=0;for(e=103479;103481>=e;e++)u[e]=2;for(e=103486;103488>=e;e++)u[e]=0;for(e=103489;103491>=e;e++)u[e]=2;for(e=103492;103495>=e;e++)u[e]=0;for(e=103496;103499>=e;e++)u[e]=2;for(e=103528;103543>=e;e++)u[e]=0;for(e=103544;103548>=e;e++)u[e]=2;for(e=103549;103551>=e;e++)u[e]=0;for(e=103552;103554>=e;e++)u[e]=1;for(e=103555;103557>=e;e++)u[e]=2;for(e=103558;103560>=e;e++)u[e]=0;for(e=103571;103573>=e;e++)u[e]=0;for(e=103574;103576>=
e;e++)u[e]=2;for(e=103577;103580>=e;e++)u[e]=0;for(e=103581;103583>=e;e++)u[e]=2;for(e=103595;103694>=e;e++)u[e]=0;for(e=103696;103699>=e;e++)u[e]=0;for(e=103700;103793>=e;e++)u[e]=2;for(e=103794;103872>=e;e++)u[e]=0;for(e=103900;103971>=e;e++)u[e]=2;return u})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(e,u,B,A,p,l,k,g,d,c){var a=function(){return 9>B("ie")?
function(b,f,t,n,m,h,v,r,C){var w=[],y=Math.round,q,x=v.length,E;for(q=0;q<x;q++){var z=v[q];var D=r?r(z[0][0],z[0][1],C):z[0];if(1<(E=z.length)){var F=y((D[0]-b)*t+m);var J=y((f-D[1])*n+h);D=r?r(z[1][0],z[1][1],C):z[1];var L=y((D[0]-b)*t+m);D=y((f-D[1])*n+h);w.push("M",F+","+J,"L",L+","+D);for(L=2;L<E;L++)D=r?r(z[L][0],z[L][1],C):z[L],F=y((D[0]-b)*t+m),J=y((f-D[1])*n+h),w.push(F+","+J)}else F=y((D[0]-b)*t+m),J=y((f-D[1])*n+h),w.push("M",F+","+J)}return w}:function(b,f,t,n,m,h,v,r,C,w){var y=[],q,
x,E=Math.round;var z=0;for(q=v?v.length:0;z<q;z++){var D=v[z];y.push("M");var F=0;for(x=D?D.length:0;F<x;F++){var J=r?r(D[F][0],D[F][1],C):D[F];y.push(E((J[0]-b)*t+m)+","+E((f-J[1])*n+h))}w||y.push("Z")}return y}}();return{toScreenPoint:function(b,f,t,n,m){var h=b.spatialReference,v=n.spatialReference,r=n.x;n=n.y;h&&v&&!h.equals(v)&&h._canProject(v)&&(h=h.isWebMercator()?p.lngLatToXY(r,n):p.xyToLngLat(r,n,!0),r=h[0],n=h[1]);r=(r-b.xmin)*(f/b.getWidth());n=(b.ymax-n)*(t/b.getHeight());m||(r=Math.round(r),
n=Math.round(n));return new l(r,n)},toScreenGeometry:function(b,f,t,n){var m=b.xmin,h=b.ymax,v=f/b.getWidth(),r=t/b.getHeight(),C=e.forEach,w=Math.round;if(n instanceof p)return new p(w((n.x-m)*v),w((h-n.y)*r));if(n instanceof d){b=new d;var y=b.points;C(n.points,function(D,F){y[F]=[w((D[0]-m)*v),w((h-D[1])*r)]});return b}if(n instanceof c)return new c(w((n.xmin-m)*v),w((h-n.ymin)*r),w((n.xmax-m)*v),w((h-n.ymax)*v));if(n instanceof k){b=new k;var q=b.paths,x;C(n.paths,function(D,F){x=q[F]=[];C(D,
function(J,L){x[L]=[w((J[0]-m)*v),w((h-J[1])*r)]})});return b}if(n instanceof g){b=new g;var E=b.rings,z;C(n.rings,function(D,F){z=E[F]=[];C(D,function(J,L){z[L]=[w((J[0]-m)*v),w((h-J[1])*r)]})});return b}},_toScreenPath:function(b,f,t,n,m,h){var v=n instanceof k,r=b.spatialReference,C=n.spatialReference;if(r&&C&&!r.equals(C)&&r._canProject(C))if(r.isWebMercator())var w=p.lngLatToXY;else{w=p.xyToLngLat;var y=!0}return a(b.xmin,b.ymax,f/b.getWidth(),t/b.getHeight(),m,h,v?n.paths:n.rings,w,y,v)},toMapPoint:function(b,
f,t,n){return new p(b.xmin+n.x/(f/b.getWidth()),b.ymax-n.y/(t/b.getHeight()),b.spatialReference)},toMapGeometry:function(b,f,t,n){var m=b.xmin,h=b.ymax,v=b.spatialReference,r=f/b.getWidth(),C=t/b.getHeight(),w=e.forEach;if(n instanceof p)return new p(m+n.x/r,h-n.y/C,v);if(n instanceof d){b=new d(v);var y=b.points;w(n.points,function(D,F){y[F]=[m+D[0]/r,h-D[1]/C]});return b}if(n instanceof c)return new c(m+n.xmin/r,h-n.ymin/C,m+n.xmax/r,h-n.ymax/C,v);if(n instanceof k){b=new k(v);var q=b.paths,x;w(n.paths,
function(D,F){x=q[F]=[];w(D,function(J,L){x[L]=[m+J[0]/r,h-J[1]/C]})});return b}if(n instanceof g){b=new g(v);var E=b.rings,z;w(n.rings,function(D,F){z=E[F]=[];w(D,function(J,L){z[L]=[m+J[0]/r,h-J[1]/C]})});return b}}}})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q){var ba=-1!==b.renderer.toLowerCase().indexOf("svg"),fa=-1!==b.renderer.toLowerCase().indexOf("canvas"),Y=fa?"canvas-2d":b.renderer,ma=9>C("ie");k=10===C("ie");var ca=void 0===C("ie")&&7==C("trident"),la=k||ca,ta=C("esri-touch"),za=!!C("chrome"),P=m.isWebGLEnabled(),ea=ba&&C("esri-will-change"),ra=P||fa;m=u(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(M,Z){var ka=this._connects=[];this._map=M;this._useWillChange=
this._useGlobalTransform="css-transforms"===M.navigationMode&&ea;if(ra){var qa=d.create("div",{style:{position:"absolute",overflow:"visible"}},Z);this._surface={getEventSource:function(){return qa}};fa&&(ka.push(A.connect(qa,"onmousedown",this,this._canvasDownHandler)),ka.push(A.connect(qa,"onmouseup",this,this._canvasUpHandler)),ka.push(A.connect(qa,"onclick",this,this._canvasClickHandler)));P&&(this._webglSurface=new h({map:M,node:qa}))}else qa=(this._surface=b.createSurface(Z,M.width,M.height)).getEventSource(),
this._useWillChange&&c.set(qa,"will-change","transform"),c.set(qa=ma?qa.parentNode:qa,{overflow:"visible",position:"absolute"});ka.push(A.connect(M,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ka.push(A.connect(M,"onPan",this,"_onPanHandler")),ka.push(A.connect(M,"onPanEnd",this,"_onPanEndHandler")),ka.push(A.connect(M,"onExtentChange",this,"_onExtentChangeHandler")));return qa},_reorderLayer:function(M,Z,ka){Z=Z.getEventSource();ra&&"svg"===M.surfaceType&&(Z=Z.parentNode);d.place(Z,
this._surface.getEventSource(),ka)},_onPanHandler:function(M,Z){var ka=this._map.__visibleRect;M=ka.x+Z.x;Z=ka.y+Z.y;this._panDx=M;this._panDy=Z;ra||c.set(this._surface.getEventSource(),v._css.names.transform,v._css.translate(M,Z))},_onPanEndHandler:function(M,Z){Z=this._map.__visibleRect;M=Z.x;Z=Z.y;this._panDx=M;this._panDy=Z;ra||c.set(this._surface.getEventSource(),v._css.names.transform,v._css.translate(M,Z))},_onExtentChangeHandler:function(M,Z,ka,qa){ka&&(this._panDy=this._panDx=0,ra||c.set(this._surface.getEventSource(),
v._css.names.transform,v._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(M,Z,ka){M=this._surface.getEventSource();var qa=this._map,ua;ma&&c.set(M=M.parentNode,{width:Z+"px",height:ka+"px",clip:"rect(0px "+Z+"px "+ka+"px 0px)"});g.set(M,"width",Z);g.set(M,"height",ka);this._surface.declaredClass||l.forEach(M.childNodes,function(Aa){g.set(Aa,"width",Z);g.set(Aa,"height",ka)});qa.loaded&&(qa.graphics.suspended||(qa.graphics._resized=
!0),l.forEach(qa.graphicsLayerIds,function(Aa){ua=qa.getLayer(Aa);ua.suspended||(ua._resized=!0,ua._childLayer&&(ua._childLayer._resized=!0));ua._updateSVGFilters(null,null,Z,ka)}),qa.graphics._updateSVGFilters(null,null,Z,ka),qa._labels&&qa._labels._updateSVGFilters(null,null,Z,ka))},_cleanUp:function(){l.forEach(this._connects,A.disconnect,A);this._map=this._surface=null},_processEvent:function(M){var Z=this._map;M.screenPoint=new D(M.pageX-Z.position.x,M.pageY-Z.position.y);M.mapPoint=Z.toMap(M.screenPoint)},
_canvasDownHandler:function(M){this._processEvent(M);this._downPt=M.screenPoint.x+","+M.screenPoint.y},_canvasUpHandler:function(M){this._processEvent(M);this._upPt=M.screenPoint.x+","+M.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(M,Z,ka,qa){if(!M.visible||!Z)return!1;var ua=Z.getTransformedBoundingBox();if(ua){var Aa=new F(ua[0].x,ua[0].y,ua[2].x,ua[2].y);delete Aa.spatialReference;return ta?Aa.intersects(ka):Aa.contains(qa)}return l.some(Z.children||[],function(ya){ua=ya.getTransformedBoundingBox();
Aa=new F(ua[0].x,ua[0].y,ua[2].x,ua[2].y);delete Aa.spatialReference;return ta?Aa.intersects(ka):Aa.contains(qa)})},_canvasClickHandler:function(M){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(M);var Z=this._map,ka=l.map(Z.graphicsLayerIds,function(W){return Z.getLayer(W)});ka.push(Z.graphics);ka.reverse();ka=l.filter(ka,function(W){return W.loaded&&!W.hasWebGLSurface()&&W._mouseEvents&&!W.suspended&&(!r.isDefined(W.opacity)||0<W.opacity)});var qa=M.screenPoint,ua=this._tolerance,
Aa=qa.x-ua,ya=qa.y+ua,G=qa.x+ua;ua=qa.y-ua;var I=new F(Aa,ua,G,ya);Aa=Z.toMap(new D(Aa,ya));G=Z.toMap(new D(G,ua));ya=Aa.spatialReference._getInfo();var R=new F(F.prototype._normalizeX(Aa.x,ya).x,Aa.y,F.prototype._normalizeX(G.x,ya).x,G.y,Aa.spatialReference),X;delete I.spatialReference;l.some(ka,function(W){W=l.filter(W.graphics,function(T){return this._isPrimaryMatch(T,T.getDojoShape(),I,qa)||!(!T._bgShape||!this._isPrimaryMatch(T,T._bgShape,I,qa))},this);W.reverse();if(0<W.length){var sa;l.some(W,
function(T){return T.geometry&&R.intersects(T.geometry)?(sa=T,!0):!1});if(sa)return X=sa,!0}return!1},this);X&&(ka=X.getLayer())&&(M.graphic=X,ka.onClick(M))}}});n=u(n,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:Y,webglEnabled:P,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(M,Z){M=M||{};if(p.isString(M)||p.isObject(M)&&(M.layerDefinition||M.query))M=Z;this._params=
p.mixin({displayOnPan:!0,drawMode:!0,styling:!0},M);Z=this._params.dataAttributes;"string"===typeof Z&&(Z=[Z]);this.styling=ba?this._params.styling:!0;this.dataAttributes=Z;this.infoTemplate=M&&M.infoTemplate;this.graphics=[];this._draw=p.hitch(this,this._draw);this._refresh=p.hitch(this,this._refresh);this._acquireSVGMarker=p.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=p.hitch(this,this._evalSurfaceType);this._setSurfaceType=p.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=
this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(M){this._params.drawMode=M},suspendGraphics:function(M){this._suspendGraphics=M;l.forEach(this.graphics,function(Z){Z._suspended=M})},setWebGLEnabled:function(M){var Z=this.webglEnabled;this.webglEnabled=(M||!1)&&P;Z!==this.webglEnabled&&(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===
this.surfaceType},_getSurfaceType:function(M){return M&&"webgl"===M.surfaceType?"webgl":Y},_evalSurfaceType:function(M){P&&(M?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;var M=this._canUseWebGLSurface()?"webgl":Y;this.surfaceType!==M?(this.surfaceType=
M,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(p.hitch(this,function(M){this._webglDepsPromise=null;M&&"cancel"===M.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var M=
this._map,Z=this._div;M&&Z&&this._getSurfaceType(Z)!==this.surfaceType&&(M._detachGraphicsLayer(this),M._attachGraphicsLayer(this))},_canUseWebGLSurface:function(M){M=M||this._map;return this.webglEnabled&&(!M||M.webglEnabled&&(M.ownsWebGLContext(this)||M.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(M){var Z=new B;!this.webglDeps&&this._canUseWebGLSurface(M)?e(["./support/webglDeps"],p.hitch(this,function(ka){this.webglDeps=
ka;Z.isFulfilled()||Z.resolve()})):Z.resolve();return Z.promise},_setMap:function(M,Z){this.inherited(arguments);this._map=M;this._evalSurfaceType(!0);this._webglChangeMapHandle=M.on("webgl-enabled-change",p.hitch(this,function(){this._evalSurfaceType()}));this._wrap=M.wrapAround180;this._srInfo=M.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())M.acquireWebGLContext(this),this._div=M._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,M.width,
M.height,this);else{if("svg"===this.surfaceType)if(ra){Z=b.createSurface(Z.getEventSource(),M.width,M.height);var ka=Z.getEventSource();c.set(ka,{position:"absolute",overflow:"visible",pointerEvents:"none"});M._gc._useWillChange&&c.set(ka,"will-change","transform");this._div=Z.createGroup();c.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=Z.createGroup();else Z=b.createSurface(Z.getEventSource(),M.width,M.height),c.set(Z.rawNode,"position","absolute"),this._div=Z.createGroup(),
this._renderProto=this._div.constructor.prototype._render,this._div._render=p.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(M,Z){M.releaseWebGLContext(this);"webgl"===this._div.surfaceType?M._gc._webglSurface.destroyRenderer(this._div):(l.forEach(this.graphics,function(ka){ka._shape=null}),"svg"===this.surfaceType?ra?(Z=this._div.parent,this._div.clear(),Z.remove(this._div),
d.destroy(this._div.getEventSource()),d.destroy(Z.getEventSource())):(this._div.clear(),Z.remove(this._div),d.destroy(this._div.getEventSource())):(Z=this._div.getParent(),Z._parent={},d.destroy(Z.rawNode),Z.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();
this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var M=this.opacity;r.isDefined(M)&&1>M&&this.setOpacity(M,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||y.hide(this._div.getEventSource())},_onExtentChangeHandler:function(M,Z,ka,qa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ka?(M=this._map.__visibleRect,Z=this._div,this._evalSDRenderer(),this._refresh(!0),this._params._child||this._updateTransform(Z,M.x,M.y,!0),this._renderProto&&Z.surface.pendingRender?
this._dirty=!0:this.suspended||y.show(Z.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var M=this._div;this._dirty&&(delete this._dirty,this.suspended||y.show(M.getEventSource()));return this._renderProto.apply(M,arguments)},_refresh:function(M){if(!this.hasWebGLSurface()){var Z=this.graphics,ka=Z.length,qa,ua=this._draw;for(qa=0;qa<ka;qa++)ua(Z[qa],M)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=
!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var M={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&(M=this._div.getTransform()):M=this._map._gc._getTransform());return M},_onPanHandler:function(M,Z){this._panDx=
Z.x;this._panDy=Z.y;M=this._map.__visibleRect;this._updateTransform(this._div,M.x+Z.x,M.y+Z.y);ca&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(M,Z){M=this._map.__visibleRect;this._params._child||Z.x===this._panDx&&Z.y===this._panDy?(this._updateSVGFilters(-M.x,-M.y),this._updateSVGMarkers()):this._updateTransform(this._div,M.x,M.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){y.hide(this._div.getEventSource())},_onPanEndHandler:function(){var M=
this._map.__visibleRect,Z=this._div;this._updateTransform(Z,M.x,M.y,!0);this._refresh(!1);this._renderProto&&Z.surface.pendingRender?this._dirty=!0:y.show(Z.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(M,Z,ka,qa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?M.setTransform(f.translate({x:Z,y:ka})):ra&&c.set(this._div.parent.getEventSource(),v._css.names.transform,v._css.translate(Z,ka)),qa&&(this._updateSVGFilters(-Z,-ka),this._updateSVGMarkers()))},
onSuspend:function(){this.inherited(arguments);y.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(M){this.inherited(arguments);M.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(p.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var M=this._map,Z=A.connect;this._disableDrawConnectors();
this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=Z(M,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=Z(M,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=Z(M,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=Z(M,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=Z(M,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=Z(M,"onExtentChange",this,"_onExtentChangeHandler")},
_disableDrawConnectors:function(){var M=A.disconnect;M(this._onExtentChangeHandler_connect);M(this._onZoomStartHandler_connect);M(this._onPanHandler_connect);M(this._onPanStartHandler_connect);M(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(M){var Z=M.geometry;if(!Z)M._extent=null;else if(!(M._extent=Z.getExtent())){if("esri.geometry.Point"===
Z.declaredClass){var ka=Z.x;var qa=Z.y}else if("esri.geometry.Multipoint"===Z.declaredClass)ka=Z.points[0][0],qa=Z.points[0][1];else{M._extent=null;return}M._extent=new F(ka,qa,ka,qa,Z.spatialReference)}},_intersects:function(M,Z,ka){var qa=M.spatialReference,ua=Z.spatialReference,Aa=qa&&ua&&!qa.equals(ua)&&qa._canProject(ua)&&4326===ua.wkid;if(this._wrap&&!ka){ka=[];qa=M._getFrameWidth();var ya=this._srInfo,G=M._clip?M._getAvailExtent():M.extent,I,R=[];var X=Z._partwise;Aa&&(G=M.geographicExtent,
ya=ua._getInfo());M=G._getParts(ya);if(X&&X.length)for(Z=[],ua=0,Aa=X.length;ua<Aa;ua++)Z=Z.concat(X[ua]._getParts(ya));else Z=Z._getParts(ya);ua=0;for(Aa=Z.length;ua<Aa;ua++){var W=Z[ua];ya=0;for(G=M.length;ya<G;ya++){var sa=M[ya];if(sa.extent.intersects(W.extent))for(X=0,I=W.frameIds.length;X<I;X++)ka.push((sa.frameIds[0]-W.frameIds[X])*qa)}}ua=0;for(Aa=ka.length;ua<Aa;ua++)X=ka[ua],l.indexOf(ka,X)===ua&&R.push(X);return R.length?R:null}return(Aa?M.geographicExtent:M.extent).intersects(Z)?[0]:null},
_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(M,Z){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ka=M._extent,qa,ua,Aa=!ba||this.styling,ya=ba&&this.dataAttributes,G=M.getDojoShape(),I;if(!M._suspended&&M.visible&&ka&&(qa=this._intersects(this._map,ka,M.geometry._originOnly))&&(ua=Aa?this._getSymbol(M):this._defaultMarker)){if(M._offsets&&M._offsets.join(",")===
qa.join(",")?I=!0:M._offsets=qa,!G||Z||!I){var R=M.geometry.type;Z={graphic:M};var X=M._bgShape,W=Aa&&!M.symbol?this._getRenderer(M):null,sa=W&&W.backgroundFillSymbol;if("point"===R)this._isInvalidShape(ua,G)&&this._removeShape(M),M._shape=this._drawPoint(this._div,M.geometry,ua,M.getDojoShape(),qa,W,M),Aa&&this._symbolizePoint(M.getDojoShape(),ua,W,M);else if("multipoint"===R)this._drawMarkers(M,ua,qa,W),Aa&&this._symbolizeMarkers(M,ua,W);else{var T;R=ua;var S;Aa&&(R=(T="simplemarkersymbol"===ua.type||
"picturemarkersymbol"===ua.type||"textsymbol"===ua.type?ua:null)?sa:ua);if(Aa&&R&&-1<R.type.indexOf("fillsymbol")){var ia=this._bgGroup;var na=!(!ia||!T)}X&&!na&&this._removeBgShape(M);if(R){!na&&(this._isInvalidShape(R,M._shape)||M._shape&&M._shape._isCentroidMarker)&&this._removeShape(M,!1);if(S=this._drawShape(M,qa,ia||this._div,na?X:M.getDojoShape()))S._isCentroidMarker=!1;Aa&&this._symbolizeShape(S,R,W,R===sa,M);M[na?"_bgShape":"_shape"]=S}if(T){(this._isInvalidShape(T,M._shape)||M._shape&&!M._shape._isCentroidMarker)&&
this._removeShape(M,!1);var va=M.geometry.getCentroid();if(S=va&&this._drawPoint(this._div,va,T,M._shape,qa,W,M))S._isCentroidMarker=!0,this._symbolizePoint(S,T,W,M);M._shape=S}}fa||(M._bgShape&&this._initNode(M,M._bgShape,M._bgShape!==X,Z,ya),M._shape&&this._initNode(M,M._shape,M._shape!==G,Z,ya));M._applyDataAttrs();Z.node=M.getNode();this.onGraphicDraw(Z)}}else G&&this._removeShape(M)}catch(Ba){this._errorHandler(Ba,M)}},_initNode:function(M,Z,ka,qa,ua){if(Z=Z&&Z.getNode())Z.e_graphic=M,this._addDataAttrs(M,
ua,Z),ka&&(qa.node=Z,this.onGraphicNodeAdd(qa))},_removeShape:function(M,Z,ka){var qa=M.getDojoShape(),ua=qa&&qa.getNode();qa&&!ka&&(qa.removeShape(),qa.destroy());M._shape=M._offsets=null;!1!==Z&&this._removeBgShape(M,ka);if(ua&&(ua.e_graphic=null,!fa))this.onGraphicNodeRemove({graphic:M,node:ua})},_removeBgShape:function(M,Z){var ka=M._bgShape,qa=ka&&ka.getNode();ka&&!Z&&(ka.removeShape(),ka.destroy());M._bgShape=null;if(qa&&(qa.e_graphic=null,!fa))this.onGraphicNodeRemove({graphic:M,node:qa})},
_addDataAttrs:function(M,Z,ka){var qa=M.attributes,ua,Aa=Z?Z.length:0,ya=this._getRenderer(M);if(ka&&qa){for(ua=0;ua<Aa;ua++)(ka=Z[ua])&&M.attr("data-"+ka,qa[ka]);!this.styling&&ya&&(ya.getBreakIndex?(Z=ya.getBreakIndex(M),M.attr("data-class-break",-1!==Z?Z:null)):ya.getUniqueValueInfo&&(Z=ya.getUniqueValueInfo(M),M.attr("data-unique-value",Z?Z.value:null)))}},_drawShape:function(M,Z,ka,qa){M=M.geometry;var ua=M.type,Aa=this._map,ya=Aa.extent,G=Aa.width,I=Aa.height;Aa=Aa.__visibleRect;var R=[],X;
var W="extent"===ua;if("rect"===ua||W)R={x:0,y:0,spatialReference:M.spatialReference},R.x=W?M.xmin:M.x,R.y=W?M.ymax:M.y,ua=L.toScreenPoint(ya,G,I,R),R.x=W?M.xmax:M.x+M.width,R.y=W?M.ymin:M.y+M.height,M=L.toScreenPoint(ya,G,I,R),Z={x:ua.x-Aa.x+Z[0],y:ua.y-Aa.y,width:Math.abs(M.x-ua.x),height:Math.abs(M.y-ua.y)},0===Z.width&&(Z.width=1),0===Z.height&&(Z.height=1),qa=this._drawRect(ka,qa,Z);else if("polyline"===ua||"polygon"===ua){W=0;for(X=Z.length;W<X;W++)R=R.concat(L._toScreenPath(ya,G,I,M,-Aa.x+
Z[W],-Aa.y));qa=this._drawPath(ka,qa,R);this._rendererLimits&&("polyline"===ua?this._clipPolyline(qa,M):this._clipPolygon(qa,M))}return qa},_drawRect:function(M,Z,ka){return Z?Z.setShape(ka):M.createRect(ka)},_drawImage:function(M,Z,ka){return Z?Z.setShape(ka):M.createImage(ka)},_drawCircle:function(M,Z,ka){return Z?Z.setShape(ka):M.createCircle(ka)},_drawPath:function(){return ma?function(M,Z,ka,qa){ka=qa?ka:ka.join(" ");if(Z)return Z.setShape(ka);Z=M.createObject(qa?b.Path:b.EsriPath,ka);M._overrideSize(Z.getEventSource());
return Z}:function(M,Z,ka,qa){ka=qa?ka:ka.join(" ");return Z?Z.setShape(ka):M.createPath(ka)}}(),_drawText:function(M,Z,ka){return Z?Z.setShape(ka):M.createText(ka)},_evalSDRenderer:function(M){var Z=this._map,ka=this.renderer,qa,ua=this._rndForScale;Z&&Z.loaded&&ka&&ka.getRendererInfo&&(qa="zoom"===ka.rangeType?ka.getRendererInfoByZoom(Z.getZoom()):ka.getRendererInfoByScale(Z.getScale()));this._rndForScale=qa&&qa.renderer;M||this._rndForScale==ua||this.emit("renderer-change",{renderer:this._rndForScale})},
_getRenderer:function(M){var Z=this._rndForScale||this.renderer;M&&Z&&Z.getObservationRenderer&&(Z=Z.getObservationRenderer(M));return Z},_getSymbol:function(M){var Z=this._getRenderer();return M.symbol||Z&&Z.getSymbol(M)},_getVariable:function(M,Z,ka){if(M)var qa=(M=M.getVisualVariablesForType(Z,ka))&&M[0];return qa},_applyOpacity:function(M,Z,ka,qa){Z=Z.getOpacity(qa,{opacityInfo:ka});null!=Z&&(M=new w(M),M.a=Z);return M},_symbolizeShape:function(M,Z,ka,qa,ua){var Aa=Z.getStroke(),ya=Z.getFill(),
G=Z.type,I=-1!==G.indexOf("linesymbol"),R=-1!==G.indexOf("fillsymbol")?null:this._getVariable(ka,"sizeInfo",!1),X=this._getVariable(ka,"colorInfo",!1),W=this._getVariable(ka,"opacityInfo",!1),sa=I?"none"!==Z.style:Z.outline&&"none"!==Z.outline.style,T=I?null:this._getVariable(ka,"sizeInfo","outline");R=(R=qa?T:T||R)?ka.getSize(ua,{sizeInfo:R,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;qa&&(X=W=null);if((X||W)&&"picturefillsymbol"!==G)if(I){var S=Aa&&Aa.color;X&&
(S=ka.getColor(ua,{colorInfo:X})||S);S&&W&&(S=this._applyOpacity(S,ka,W,ua))}else if(ya&&ya.toCss){var ia=ya;X&&(ia=ka.getColor(ua,{colorInfo:X})||ia);ia&&W&&(ia=this._applyOpacity(ia,ka,W,ua))}M.setStroke(!sa||null==R&&!S?Aa:p.mixin({},Aa,null!=R?{width:R}:null,S&&{color:S})).setFill(ia||ya);I&&E.applyLineMarker(M,Z,S,this._acquireSVGMarker)},_smsToPath:function(){return ma?function(M,Z,ka,qa,ua,Aa,ya,G,I){switch(Z){case M.STYLE_SQUARE:return["M",ua+","+ya,"L",Aa+","+ya,Aa+","+G,ua+","+G,"X","E"];
case M.STYLE_CROSS:return["M",ka+","+ya,"L",ka+","+G,"M",ua+","+qa,"L",Aa+","+qa,"E"];case M.STYLE_X:return["M",ua+","+ya,"L",Aa+","+G,"M",ua+","+G,"L",Aa+","+ya,"E"];case M.STYLE_DIAMOND:return["M",ka+","+ya,"L",Aa+","+qa,ka+","+G,ua+","+qa,"X","E"];case M.STYLE_TARGET:return["M",ua+","+ya,"L",Aa+","+ya,Aa+","+G,ua+","+G,ua+","+ya,"M",ua-I+","+qa,"L",ua+","+qa,"M",ka+","+(ya-I),"L",ka+","+ya,"M",Aa+I+","+qa,"L",Aa+","+qa,"M",ka+","+(G+I),"L",ka+","+G,"E"]}}:function(M,Z,ka,qa,ua,Aa,ya,G,I){switch(Z){case M.STYLE_SQUARE:return["M",
ua+","+ya,Aa+","+ya,Aa+","+G,ua+","+G,"Z"];case M.STYLE_TRIANGLE:return["M",ka+","+ya,Aa+","+G,ua+","+G,"Z"];case M.STYLE_CROSS:return["M",ka+","+ya,ka+","+G,"M",ua+","+qa,Aa+","+qa];case M.STYLE_X:return["M",ua+","+ya,Aa+","+G,"M",ua+","+G,Aa+","+ya];case M.STYLE_DIAMOND:return["M",ka+","+ya,Aa+","+qa,ka+","+G,ua+","+qa,"Z"];case M.STYLE_TARGET:return M=["M",ua+","+ya,Aa+","+ya,Aa+","+G,ua+","+G,ua+","+ya],I&&M.push("M",ua-I+","+qa,ua+","+qa,"M",ka+","+(ya-I),ka+","+ya,"M",Aa+I+","+qa,Aa+","+qa,
"M",ka+","+(G+I),ka+","+G),M}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(M,Z){Z=Z&&Z.shape&&Z.shape.type;var ka=M&&M.type;M=M&&M.style;"rect"===Z&&(Z="path");ka&&(M=this._typeMaps[ka]||M);this._pathStyles[M]&&(M="path");return"shieldlabelsymbol"===ka?!0:!(!Z||!M||Z===M)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,
_fallbackFont:"Arial",_drawPoint:function(M,Z,ka,qa,ua,Aa,ya){var G=ka.type,I=this._map,R=I.__visibleRect,X=L.toScreenPoint(I.extent,I.width,I.height,Z).offset(-R.x+ua[0],-R.y);R=X.x;var W=X.y;Z=[];var sa=this._getVariable(Aa,"rotationInfo",!1);sa=sa?Aa.getRotationAngle(ya,{rotationInfo:sa}):null;var T=this._getVariable(Aa,"sizeInfo",!1);I=null!=ya.size?ya.size:T&&Aa.getSize(ya,{sizeInfo:T,shape:ka.style,resolution:I.getResolutionInMeters(),scale:I.getScale()});sa&&Z.push(f.rotategAt(sa,X));if(0!==
ka.xoffset||0!==ka.yoffset){var S=f.translate(ka.xoffset,-ka.yoffset);Z.push(S)}0!==ka.angle&&Z.push(f.rotategAt(ka.angle,X));if("simplemarkersymbol"===G){var ia=ka.style;Aa=Math.round;null!=I?S&&(null!=S.dx&&(S.dx=S.dx/ka.size*I),null!=S.dy&&(S.dy=S.dy/ka.size*I)):I=ka.size;switch(ia){case x.STYLE_SQUARE:case x.STYLE_TRIANGLE:case x.STYLE_CROSS:case x.STYLE_X:case x.STYLE_DIAMOND:ka=isNaN(I)?16:I/2;ia=this._drawPath(M,qa,this._smsToPath(x,ia,R,W,Aa(R-ka),Aa(R+ka),Aa(W-ka),Aa(W+ka)));break;case x.STYLE_TARGET:ya=
ka._targetWidth/2;S=ka._targetHeight/2;ia=this._drawPath(M,qa,this._smsToPath(x,ia,R,W,Aa(R-ya),Aa(R+ya),Aa(W-S),Aa(W+S),ka._spikeSize));break;case x.STYLE_PATH:ia=this._drawPath(M,qa,ka.path,!0);ka=ia.getBoundingBox();M=this._getScaleMatrix(ka,I);1===M.xx&&1===M.yy||Z.push(f.scaleAt(M.xx,M.yy,X));Z.push(f.translate(-(ka.x+ka.width/2)+R,-(ka.y+ka.height/2)+W));break;default:ka=isNaN(I)?16:I/2,ia=this._drawCircle(M,qa,{cx:R,cy:W,r:ka})}}else if("shieldlabelsymbol"===G)ia=ka.width,X=ka.height,qa=M.createGroup(),
ia=M.createImage({x:R-ia/2,y:W-X/2,width:ia,height:X,src:ka.url}),qa.add(ia),null!=ka.font&&(W+=.2*ka.getHeight(),M=M.createText({type:"text",text:ka.text,x:R,y:W,align:"middle",decoration:ka.decoration,rotated:ka.rotated,kerning:ka.kerning}),M.setFont(ka.font),M.setFill(ka.color),qa.add(M)),ia=qa;else if("picturemarkersymbol"===G){if(null==I?(ia=ka.width,X=ka.height):(X=I,ia=ka.width/ka.height*X,S&&(null!=S.dx&&(S.dx=S.dx/ka.width*ia),null!=S.dy&&(S.dy=S.dy/ka.height*X))),ia=this._drawImage(M,qa,
{x:R-ia/2,y:W-X/2,width:ia,height:X,src:ka.url}),ba&&(M=ia.getNode()))ka=(ka=this._getVariable(Aa,"opacityInfo",!1))?Aa.getOpacity(ya,{opacityInfo:ka}):null,null!=ka?M.setAttribute("opacity",ka):M.setAttribute("opacity",1)}else if("textsymbol"===G){if(Aa=ka.font){ia=null!=I;ya=Aa.family&&!this._reArialFont.test(Aa.family);if(ia||ya||fa)Aa=new Aa.constructor(Aa.toJson());ia&&Aa.setSize(I);fa&&(Aa.size+="px");ya&&Aa.setFamily(Aa.family+","+this._fallbackFont)}ia=this._drawText(M,qa,{type:"text",text:ka.text,
x:R,y:W,align:ka.getSVGAlign(),decoration:ka.decoration||Aa&&Aa.decoration,rotated:ka.rotated,kerning:ka.kerning});Aa&&ia.setFont(Aa);ba&&(M=ia.getNode(),R=ka.getSVGBaseline(),W=ka.getSVGBaselineShift(),M&&(M.setAttribute("dominant-baseline",R),W&&M.setAttribute("baseline-shift",W),this._applyHalo(ia,ka.haloColor,ka.haloSize)))}ia.setTransform(f.multiply(Z));ia._wrapOffsets=ua;return ia},_acquireSVGMarker:function(M,Z,ka,qa){M=this._getSVGMarkerId(Z,qa);var ua=this._getSVGMarker(M);ua||(ua=E.createSVGMarker(Z,
M,ka,qa),this._div.getParent().defNode.appendChild(ua),this._lineMarkers[M]=ua);return ua},_getSVGMarkerId:function(M,Z){return"marker_"+this._map.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+Z},_getSVGMarker:function(M){return this._lineMarkers[M]},_updateSVGMarkers:function(){if(ba&&la){var M=this._lineMarkers,Z;for(Z in M){var ka=M[Z];ka.setAttribute("id",Z+"_temp");ka.setAttribute("id",Z)}}},_applyHalo:function(M,Z,ka){var qa=Z&&ka?this._getHaloId(Z,ka):null;M.setFilter(Z&&ka?C("webkit")||C("ff")?this._getDilateFilter(Z,
ka,qa):this._getOffsetFilter(Z,ka,qa):null)},_getDilateFilter:function(M,Z,ka){var qa=this._getSVGFilter(ka);qa||(qa=this._createSVGFilter({id:ka},[t.feMorphology({operator:"dilate",radius:Z,result:"dilated"}),t.feFlood({"flood-color":M.toCss(!0)}),t.feComposite({in2:"dilated",operator:"in",result:"composite"}),t.feMerge("composite","SourceGraphic")]));return qa},_getOffsetFilter:function(M,Z,ka){var qa=this._getSVGFilter(ka);if(!qa){M=M.toCss(!0);qa=this._offsetPrimitives;var ua,Aa=qa.length,ya=
[],G=[];for(ua=0;ua<Aa;ua++){var I=qa[ua],R="offset"+I.dir,X="composite"+I.dir;G.push(X);ya.push(t.feOffset({dx:I.dx*Z,dy:I.dy*Z,"in":"SourceAlpha",result:R}),t.feFlood({"flood-color":M}),t.feComposite({in2:R,operator:"in",result:X}))}G.push("SourceGraphic");ya.push(t.feMerge.apply(t.feMerge,G));qa=this._createSVGFilter({id:ka},ya)}return qa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",
dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(M,Z){return"halo_"+this._map.id+"_"+this.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+M.a+"_"+Z},_getSVGFilter:function(M){return this._svgFilters[M]},_createSVGFilter:function(M,Z){Z=t.createFilter(M,Z);var ka=this._map,qa=ka.__visibleRect;Z.x=-qa.x;Z.y=-qa.y;Z.width=ka.width;Z.height=ka.height;return this._svgFilters[M.id]=Z},_updateSVGFilters:function(M,Z,ka,qa){var ua=this._svgFilters,Aa,ya,G;for(ya in ua)if(Aa=ua[ya]){if(G=a.byId(ya))null!=M&&G.setAttribute("x",
M),null!=Z&&G.setAttribute("y",Z),null!=ka&&G.setAttribute("width",ka),null!=qa&&G.setAttribute("height",qa);null!=M&&(Aa.x=M);null!=Z&&(Aa.y=Z);null!=ka&&(Aa.width=ka);null!=qa&&(Aa.height=qa)}},_getScaleMatrix:function(M,Z){var ka=M.width/M.height,qa=1,ua=1;isNaN(Z)||(1<ka?(qa=Z/M.width,ua=Z/ka/M.height):(ua=Z/M.height,qa=Z*ka/M.width));return{xx:qa,yy:ua}},_symbolizePoint:function(M,Z,ka,qa){var ua=Z.type,Aa=Z.style;if("shieldlabelsymbol"!==ua&&"picturemarkersymbol"!==ua){var ya=Z.getStroke();
Z=Z.getFill();Aa=Aa===x.STYLE_X||Aa===x.STYLE_CROSS;var G=ya&&ya.color,I=Aa?G:Z;if(ka){var R=this._getVariable(ka,"colorInfo",!1),X=this._getVariable(ka,"opacityInfo",!1);R&&(I=ka.getColor(qa,{colorInfo:R})||I);I&&X&&(I=this._applyOpacity(I,ka,X,qa));I&&(Aa?I!==G&&(ya=ya?p.mixin({},ya):{},ya.color=I):I!==Z&&(Z=I))}"textsymbol"===ua?M.setFill(Z):"simplemarkersymbol"===ua&&M.setFill(Z).setStroke(ya)}},_drawMarkers:function(M,Z,ka,qa){var ua=M.geometry,Aa=ua.points,ya=M.getDojoShape()||this._div.createGroup(),
G,I=Aa.length,R=[],X=0,W,sa=ka?ka.length:0;ya.children[0]&&this._isInvalidShape(Z,ya.children[0])&&ya.clear();for(G=0;G<I;G++){var T=Aa[G];for(W=0;W<sa;W++)R[0]=ka[W],this._drawPoint(ya,{x:T[0],y:T[1],spatialReference:ua.spatialReference},Z,ya.children[X++],R,qa,M)}Z=ya.children.length;if(I*ka.length<Z)for(G=Z-1;G>=I*ka.length;G--)ya.children[G].removeShape();M._shape=ya},_symbolizeMarkers:function(M,Z,ka){var qa=M.getDojoShape().children,ua,Aa=qa.length;for(ua=0;ua<Aa;ua++)this._symbolizePoint(qa[ua],
Z,ka,M)},_errorHandler:function(M,Z){Z&&(M.message="Unable to draw graphic (geometry:"+(Z.geometry?Z.geometry.declaredClass:null)+", symbol:"+(Z.symbol?Z.symbol.declaredClass:null)+"): "+M.message);this.inherited(arguments)},_rendererLimits:function(){if(ma){var M=1E5;var Z=-1E5;var ka=1E5}else C("chrome")&&6>C("chrome")&&(M=8150,Z=-1E4,ka=1E4);if(M)return{clipLimit:M,rangeMin:Z,rangeMax:ka,clipBBox:[-M,-M,M,M],clipSegments:[[[-M,-M],[M,-M]],[[M,-M],[M,M]],[[M,M],[-M,M]],[[-M,M],[-M,-M]]]}}(),_clipPolyline:function(M,
Z){Z=this._getCorners(M,Z);var ka=Z.br,qa=this._rendererLimits,ua=qa.rangeMin,Aa=qa.rangeMax,ya=qa.clipBBox,G=qa.clipSegments;qa=this._isPointWithinRange;var I=this._isPointWithinBBox,R=this._getClipperIntersection,X=this._getPlaneIndex;if(!qa(Z.tl,ua,Aa)||!qa(ka,ua,Aa)){ma&&this._createSegments(M);var W=[];l.forEach(M.segments,function(sa){sa=sa.args;var T=sa.length,S=[],ia;for(ia=0;ia<T;ia+=2){var na=[sa[ia],sa[ia+1]],va=[sa[ia+2],sa[ia+3]],Ba=I(na,ya),Na=I(va,ya);if(Ba^Na){if(Na=R([na,va],G))Ba?
(ia?S.push(Na[1]):S.push(na,Na[1]),W.push(S),S=[]):S.push(Na[1],va)}else Ba?ia?S.push(va):S.push(na,va):(Na=X(na,ya),Ba=X(va,ya),-1!==Na&&-1!==Ba&&Na!==Ba&&(na=R([na,va],G,!0),0<na.length&&(na[Na]||(Na=na[Na[0]]?Na[0]:Na[1]),na[Ba]||(Ba=na[Ba[0]]?Ba[0]:Ba[1]),va=na[Na],na=na[Ba],va&&S.push(va),na&&(S.push(na),W.push(S),S=[]))))}W.push(S)});M.setShape(this._getPathStringFromPaths(W))}},_clipPolygon:function(M,Z){Z=this._getCorners(M,Z);var ka=Z.br,qa=this._rendererLimits,ua=qa.clipLimit,Aa=qa.rangeMin,
ya=qa.rangeMax,G=qa.clipBBox,I=qa.clipSegments;qa=this._isPointWithinRange;var R=this._isPointWithinBBox,X=this._getClipperIntersection,W=this._getPlaneIndex,sa=J._pointLineDistance;qa(Z.tl,Aa,ya)&&qa(ka,Aa,ya)||(ma&&this._createSegments(M),Z=l.filter(M.segments,function(T){return T.args&&T.args.length}),Z=l.map(Z,function(T){var S=T.args,ia=S.length,na=[];T=[];var va;for(va=0;va<ia;va+=2){var Ba=[S[va],S[va+1]],Na=[S[va+2],S[va+3]];if(va===ia-2){na.push(Ba);break}var Va=R(Ba,G),Da=R(Na,G);na.push(Ba);
if(Va^Da){if(Da=X([Ba,Na],I))Ba=Da[1],Ba[Va?"inOut":"outIn"]=!0,na.push(Ba),T.push([Va?"INOUT":"OUTIN",na.length-1,Da[0]])}else if(!Va){Va=W(Ba,G);var K=W(Na,G);-1!==Va&&-1!==K&&Va!==K&&(Da=X([Ba,Na],I,!0),0<Da.length?(Da[Va]||(Va=Da[Va[0]]?Va[0]:Va[1]),Da[K]||(K=Da[K[0]]?K[0]:K[1]),Ba=Da[Va],Na=Da[K],Ba&&(Ba.outIn=!0,na.push(Ba),T.push(["OUTIN",na.length-1,Va])),Na&&(Na.inOut=!0,na.push(Na),T.push(["INOUT",na.length-1,K]))):p.isArray(Va)&&p.isArray(K)&&(Da=Va.concat(K),Da.sort(),"0123"===Da.join("")&&
(Da=[],3===Va[0]+Va[1]?Da.push([ua,-ua],[-ua,ua]):Da.push([-ua,-ua],[ua,ua]),Va=sa(Da[0],[Ba,Na]),Ba=sa(Da[1],[Ba,Na]),na.push(Va<Ba?Da[0]:Da[1]))))}}var V=G[0],ha=G[1],N=G[2],aa=G[3];l.forEach(na,function(wa){wa[0]<V&&(wa[1]>=ha&&wa[1]<=aa?wa[0]=V:(wa[0]=V,wa[1]=wa[1]<ha?ha:aa))});l.forEach(na,function(wa){wa[1]<ha&&(wa[0]>=V&&wa[0]<=N?wa[1]=ha:(wa[1]=ha,wa[0]=wa[0]<V?V:N))});l.forEach(na,function(wa){wa[0]>N&&(wa[1]>=ha&&wa[1]<=aa?wa[0]=N:(wa[0]=N,wa[1]=wa[1]<ha?ha:aa))});l.forEach(na,function(wa){wa[1]>
aa&&(wa[0]>=V&&wa[0]<=N?wa[1]=aa:(wa[1]=aa,wa[0]=wa[0]<V?V:N))});S=0;ia=T.length;if(0<ia){do{Na=T[S];va=T[(S+1)%ia];if(Na[2]===va[2]&&"INOUT"===Na[0]&&"OUTIN"===va[0])if(Ba=Na[1],va=va[1],Ba<va)for(Ba+=1;Ba<va;Ba++)na[Ba][2]=!0;else if(Ba>va){for(Ba+=1;Ba<na.length;Ba++)na[Ba][2]=!0;for(Ba=0;Ba<va;Ba++)na[Ba][2]=!0}S=(S+1)%ia}while(0!==S)}ia=na[0];S=na[na.length-1];ia[2]&&(S[2]=!0,l.some(T,function(wa){return 1===wa[1]?(na.splice(na.length-1,0,p.clone(na[1])),!0):!1}));na=l.filter(na,function(wa){return wa[2]?
!1:!0});for(S=0;S<na.length-1;S++)ia=na[S],(va=na[S+1])&&ia[0]===va[0]&&ia[1]===va[1]&&(va.outIn?ia.outIn=!0:va.inOut&&(ia.inOut=!0),na.splice(S+1,1));ia=Math.abs;T=[];for(S=0;S<na.length-1;S++){Na=na[S];Ba=Na[0];Na=Na[1];Va=ia(Ba)===ua;Da=ia(Na)===ua;va=na[S+1];K=va[0];va=va[1];var ja=ia(K)===ua,pa=ia(va)===ua;Va&&pa?T.push([S+1,[Ba,va]]):Da&&ja&&T.push([S+1,[K,Na]])}for(S=T.length-1;0<=S;S--)va=T[S],Ba=na[va[0]-1],ia=na[va[0]],Ba.outIn||Ba.inOut||ia.outIn||ia.inOut||na.splice(va[0],0,va[1]);ia=
na[0];S=na[na.length-1];ia[0]===S[0]&&ia[1]===S[1]||na.push(ia);return na}),M.setShape(this._getPathStringFromPaths(Z)))},_getCorners:function(M,Z){if(ma){M=this._map;var ka=Z.getExtent(),qa=ka.spatialReference;Z=M.toScreen(new z(ka.xmin,ka.ymax,qa));M=M.toScreen(new z(ka.xmax,ka.ymin,qa));return{tl:Z,br:M}}M=M.getTransformedBoundingBox();return{tl:M[0],br:M[2]}},_createSegments:function(M){M.shape.path=M.vmlPath;M.segmented=!1;M._confirmSegmented();var Z=M.segments;1<Z.length&&(M.segments=l.filter(Z,
function(ka,qa,ua){qa=ua[qa+1];return"M"===ka.action&&qa&&"L"===qa.action?(ka.args=ka.args.concat(qa.args),!0):!1}))},_getPathStringFromPaths:function(M){ma?(M=l.map(M,function(Z){return"m "+l.map(Z,function(ka,qa){return(1===qa?"l ":"")+ka.join(",")}).join(" ")}),M.push("e")):M=l.map(M,function(Z){return"M "+l.map(Z,function(ka){return ka.join(",")}).join(" ")});return M.join(" ")},_isPointWithinBBox:function(M,Z){var ka=Z[1],qa=Z[2],ua=Z[3],Aa=M[0];M=M[1];return Aa>Z[0]&&Aa<qa&&M>ka&&M<ua?!0:!1},
_isPointWithinRange:function(M,Z,ka){var qa=M.x;M=M.y;return qa<Z||M<Z||qa>ka||M>ka?!1:!0},_getClipperIntersection:function(M,Z,ka){var qa,ua=J._getLineIntersection2,Aa=Math.round,ya={length:0};for(qa=0;4>qa;qa++){var G=ua(M,Z[qa]);if(G)if(G[0]=Aa(G[0]),G[1]=Aa(G[1]),ka)ya[qa]=G,ya.length++;else return[qa,G]}return ka?ya:null},_getPlaneIndex:function(M,Z){var ka=M[0];M=M[1];var qa=Z[0],ua=Z[1],Aa=Z[2];Z=Z[3];return ka<=qa?M>=ua&&M<=Z?3:M<ua?[0,3]:[2,3]:M<=ua?ka>=qa&&ka<=Aa?0:ka<qa?[3,0]:[1,0]:ka>=
Aa?M>=ua&&M<=Z?1:M<ua?[0,1]:[2,1]:M>=Z?ka>=qa&&ka<=Aa?2:ka<qa?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(M){this.infoTemplate=M;this._evalSurfaceType();this.onInfoTemplateChange()},
add:function(M,Z){if(M._graphicsLayer===this)return M;M._suspended=this._suspendGraphics;Z||this.graphics.push(M);M._graphicsLayer=this;M._sourceLayer||(M._layer&&"esri.layers.GraphicsLayer"!==M._layer.declaredClass?M._sourceLayer=M._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(M._sourceLayer=this));M._layer=this;this.hasWebGLSurface()||(this._updateExtent(M),this._draw(M));if(!Z)this.onGraphicAdd(M);return M},remove:function(M,Z,ka){if(!Z&&!ka){Z=this.graphics;var qa;if(-1===(qa=l.indexOf(Z,
M)))return null;if(!za||64<=za)Z.splice(qa,1);else{var ua=Z.length;if(ua){for(;qa<ua;)Z[qa]=Z[qa+1],qa++;Z.length--}}}this.hasWebGLSurface()||M.getDojoShape()&&this._removeShape(M,null,ka);M._shape=M._graphicsLayer=null;this.onGraphicRemove(M);return M},clear:function(M,Z){M=this.graphics;var ka,qa=!ma;for(ka=M.length-1;0<=ka;ka--)this.remove(M[ka],null,qa);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!Z)this.onGraphicsClear()},_destroyAllNodes:function(){if(!ma&&this._div){var M;
this._childLayer&&(M=this._childLayer.getNode())&&M.parentNode&&M.parentNode.removeChild(M);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();M&&this._div.getEventSource().appendChild(M);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var M=this.graphics,Z=M.length,ka;for(ka=0;ka<Z;ka++)this._removeShape(M[ka],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(M){},_setIEOpacity:function(M,Z){var ka=M&&M.getNode();if(ka){var qa=
M.strokeStyle,ua=ka.stroke;qa&&ua&&(ua.opacity=qa.color.a*Z);M=M.fillStyle;qa=ka.fill;M&&qa&&("tile"===qa.type?c.set(ka,"opacity",Z):qa.opacity=M.a*Z)}},setOpacity:function(M,Z){if(Z||this.opacity!=M){var ka=this._div;ka&&!this.hasWebGLSurface()&&(ma?(l.forEach(this.graphics,function(qa){this._setIEOpacity(qa._shape,M);this._setIEOpacity(qa._bgShape,M)},this),ka._esriIeOpacity=M,this._bgGroup._esriIeOpacity=M):"canvas-2d"===this.surfaceType?c.set(ka.getEventSource(),"opacity",M):ka.getEventSource().setAttribute("opacity",
M));this.opacity=M;if(!Z)this.onOpacityChange(M)}},setRenderer:function(M){this.renderer=M;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||M})}});u=u([n,Q],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=p.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var M=this.inherited("_setMap",arguments);this.enableMouseEvents();return M},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(M){var Z=this._map,ka=M.target,qa;M.screenPoint=new D(M.pageX-Z.position.x,M.pageY-Z.position.y);for(M.mapPoint=Z.toMap(M.screenPoint);ka&&!(qa=ka.e_graphic);)ka=ka.parentNode;if(qa)return M.graphic=qa,M},_onMouseOverHandler:function(M){if(this._processEvent(M))this.onMouseOver(M)},_onMouseMoveHandler:function(M){if(this._processEvent(M))this.onMouseMove(M)},_onMouseDragHandler:function(M){if(this._processEvent(M))this.onMouseDrag(M)},
_onMouseOutHandler:function(M){if(this._processEvent(M))this.onMouseOut(M)},_onMouseDownHandler:function(M){this._downGr=this._downPt=null;this._processEvent(M)&&(A.disconnect(this._onmousemove_connect),A.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=A.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=M.graphic,this._downPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseDown(M))},_onMouseUpHandler:function(M){this._upGr=this._upPt=null;this._processEvent(M)&&
(A.disconnect(this._onmousedrag_connect),A.disconnect(this._onmousemove_connect),this._onmousemove_connect=A.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=M.graphic,this._upPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseUp(M))},_onClickHandler:function(M){if(this._processEvent(M)){var Z=this._downGr,ka=this._upGr;Z&&ka&&Z===ka&&this._downPt===this._upPt&&(ma&&(v._ieGraphic=M.graphic),this.onClick(M))}},_onDblClickHandler:function(M){if(this._processEvent(M))this.onDblClick(M)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var M=A.connect,Z=this._div.getEventSource();fa||(this._onmouseover_connect=M(Z,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=M(Z,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=M(Z,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=M(Z,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=M(Z,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=M(Z,"onclick",this,"_onClickHandler"),this._ondblclick_connect=M(Z,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var M=A.disconnect;M(this._onmouseover_connect);M(this._onmousemove_connect);M(this._onmousedrag_connect);M(this._onmouseout_connect);M(this._onmousedown_connect);
M(this._onmouseup_connect);M(this._onclick_connect);M(this._ondblclick_connect);this._mouseEvents=!1}}});u._GraphicsContainer=m;u._GraphicsLayer=n;return u})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(e,u,B){u.switchTo(B);return u})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(e,u,B,A,p){var l=null;B.add("vml",function(k,g,d){d.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';
k="adj"in d.firstChild;d.innerHTML="";return k});return{load:function(k,g,d){function c(){g(["dojox/gfx/"+a],function(t){e.renderer=a;l=t;d(t)})}if(l&&"force"!=k)d(l);else{var a=p.forceGfxRenderer;k=!a&&(u.isString(p.gfxRenderer)?p.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var b,f;!a&&k.length;)switch(k.shift()){case "svg":"SVGAngle"in A.global&&(a="svg");break;case "vml":B("vml")&&(a="vml");break;case "silverlight":try{B("ie")?(b=new ActiveXObject("AgControl.AgControl"),b.IsVersionSupported("1.0"))&&
(f=!0):navigator.plugins["Silverlight Plug-In"]&&(f=!0)}catch(t){f=!1}finally{b=null}f&&(a="silverlight");break;case "canvas":A.global.CanvasRenderingContext2D&&(a="canvas")}"canvas"===a&&!1!==p.canvasEvents&&(a="canvasWithEvents");p.isDebug&&console.log("gfx renderer \x3d "+a);"svg"==a&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(c):c()}}}})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(e,u){e.add("esri-svg",function(){return-1!==u.renderer.toLowerCase().indexOf("svg")});
return e})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){var m=e([g],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},
constructor:function(h,v){this._attrs={};h&&A.isString(h)?this._url=f.urlToObject(this.url=f.normalize(h)):(this.url=this._url=null,(v=v||h)&&(v.layerDefinition||v.query)&&(v=null));this.spatialReference=new t(4326);this.initialExtent=new n(-180,-90,180,90,new t(4326));this._map=this._div=null;this.normalization=!0;v&&(v.id&&(this.id=v.id),this.arcgisProps=v.arcgisProps,this.parentLayer=v.parentLayer,!1===v.visible&&(this.visible=!1),c.isDefined(v.opacity)&&(this.opacity=v.opacity),c.isDefined(v.minScale)&&
this.setMinScale(v.minScale),c.isDefined(v.maxScale)&&this.setMaxScale(v.maxScale),this.attributionDataUrl=v.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,c.isDefined(v.showAttribution)&&(this.showAttribution=v.showAttribution),this.className=v.className,this.refreshInterval=v.refreshInterval||0);this._errorHandler=A.hitch(this,this._errorHandler);this._scheduledRefresh=A.hitch(this,this._scheduledRefresh);this.refresh=A.hitch(this,this.refresh);if(this.managedSuspension){var r=
this._setMap;this._setMap=function(C){var w=r.apply(this,arguments);this._fireAttach(C);this.evaluateSuspension();if(this.suspended&&!C.loaded)var y=B.connect(C,"onLoad",this,function(){B.disconnect(y);y=null;this.evaluateSuspension()});return w}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(h){this.loaded||
(this.loadError=h);this.onError(h)},_setMap:function(h,v,r,C){this._map=h;this._lyrZEHandle=B.connect(h,"onZoomEnd",this,this._processMapScale);if(h.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var w=B.connect(h,"onLoad",this,function(){B.disconnect(w);w=null;this._processMapScale()})},_unsetMap:function(h,v){B.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(h)},_fireAttach:function(h){this.attached=!0;this.onAttach({map:h})},
_fireDetach:function(h){this.attached=!1;this.onDetach({map:h})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(h,v){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(h,v),this._map&&this._map._decr())},_getToken:function(){var h=this._url,v=this.credential;return h&&h.query&&h.query.token||
v&&v.token||void 0},_findCredential:function(){this.credential=d.id&&this._url&&d.id.findCredential(this._url.path)},_useSSL:function(){var h=this._url,v=/^http:/i;this.url&&(this.url=this.url.replace(v,"https:"));h&&h.path&&(h.path=h.path.replace(v,"https:"))},refresh:function(h){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(h){this.setScaleRange(h)},setMaxScale:function(h){this.setScaleRange(null,h)},setScaleRange:function(h,v){var r=c.isDefined(h),
C=c.isDefined(v);this.loaded||(this._hasMin=this._hasMin||r,this._hasMax=this._hasMax||C);var w=this.minScale,y=this.maxScale;this.minScale=(r?h:this.minScale)||0;this.maxScale=(C?v:this.maxScale)||0;if(w!==this.minScale||y!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&
this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var h=void 0===this._resumedOnce,v=this.className,r=this._attrs,C=this.getNode(),w;if(h){this._resumedOnce=!0;if(v&&C){var y=C.getAttribute("class")||"";
(new RegExp("(^|\\s)"+v+"(\\s|$)","i")).test(y)||C.setAttribute("class",y+((y?" ":"")+v))}if(r&&C)for(w in r)r.hasOwnProperty(w)&&C.setAttribute(w,r[w])}this._refreshRT();this.onResume({firstOccurrence:h});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var h=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();h!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(h){return h?m.prototype._isMapAtVisibleScale.apply(this,
arguments):!1},_isMapAtVisibleScale:function(h,v){if(!(h||this._map&&this._map.loaded))return!1;var r=this._map;h=h||r.getScale();var C=this.minScale,w=this.maxScale,y=!C,q=!w,x;v&&(x=r.width>r.height?r.width:r.height);y||(h<=C?y=!0:v&&(y=Math.abs(C-h)/C<1/x));q||(h>=w?q=!0:v&&(q=Math.abs(w-h)/w<1/x));return y&&q},getAttributionData:function(){var h=this.attributionDataUrl,v=new p(b._dfdCanceller);this.hasAttributionData&&h?(v._pendingDfd=a({url:h,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),
v._pendingDfd.then(function(r){v.callback(r)},function(r){v.errback(r)})):(h=Error("Layer does not have attribution data"),h.log=!!u.isDebug,v.errback(h));return v},getResourceInfo:function(){var h=this.resourceInfo;return A.isString(h)?l.fromJson(h):A.clone(h)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(h,v){var r=this.getNode();if("data-reference"===h&&11>k("ie"))return this;r&&(null==v?r.removeAttribute(h):r.setAttribute(h,v));this._attrs&&(null==v?delete this._attrs[h]:
this._attrs[h]=v);return this},setRefreshInterval:function(h){var v=this.refreshInterval;this.refreshInterval=h;this._toggleRT(!1);h&&this._toggleRT(!0);if(v!==h)this.onRefreshIntervalChange();return this},_toggleRT:function(h){h&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},
_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(h){var v=this._refreshTS;v&&(h=this._reCheckTS.test(h)?h.replace(this._reReplaceTS,"$$$1"+v):h+((-1===h.indexOf("?")?"?":"\x26")+"_ts\x3d"+v));return h},setNormalization:function(h){this.normalization=h},setVisibility:function(h){this.visible!==h&&(this.visible=h,this.onVisibilityChange(this.visible),
this.evaluateSuspension());this.attr("data-hidden",h?null:"")},onLoad:function(){},onAttach:function(h){},onDetach:function(h){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});return m})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../../kernel"],function(e,u,B,A){var p=!1,l=B("esri-webgl-max-contexts");l=null!=l?l:B("esri-mobile")?8:16;var k={isWebGLSupported:function(){return!!p},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!B("esri-featurelayer-webgl")},createCanvas:function(g,d){var c=document.createElement("canvas");c.style.width=g+"px";c.style.height=d+"px";return c},createWebGLContext:function(g){var d;u.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(c){try{d=
g.getContext?g.getContext(c):null}catch(a){d=null}return!!d});return d},_contextOwners:[],isContextAvailable:function(){return-1===l||0<l&&k._contextOwners.length<l},acquireContext:function(g){return-1!==u.indexOf(k._contextOwners,g)?!0:k.isContextAvailable()?(k._contextOwners.push(g),!0):!1},releaseContext:function(g){g=u.indexOf(k._contextOwners,g);-1!==g&&k._contextOwners.splice(g,1)}};p=k.createWebGLContext(k.createCanvas());return k})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(e,u,B,A,p){return e(null,{map:null,node:null,renderers:null,constructor:function(l){u.mixin(this,l);this.renderers=[]},destroy:function(){B.forEach(this.renderers,function(l){l.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(l,k,g,d){l=new l({surface:this,width:k,height:g,map:this.map,layer:d});this.renderers.push(l);return l},destroyRenderer:function(l){var k=B.indexOf(this.renderers,
l);-1<k&&(l.destroy(),this.renderers.splice(k,1))},_createNode:function(){var l=document.createElement("div");l.style.pointerEvents="auto";l.style.position="absolute";return l}})})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(e,u,B,A,p,l){return e(l,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(k){k&&u.isObject(k)&&(this.size="auto"===this.size?
this.size:A.pt2px(this.size),this.xoffset=A.pt2px(this.xoffset),this.yoffset=A.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(k){this.angle=k;return this},setSize:function(k){this.size=k;return this},setOffset:function(k,g){this.xoffset=k;this.yoffset=g;return this},toJson:function(){var k=A.px2pt(this.size);k=isNaN(k)?void 0:k;var g=A.px2pt(this.xoffset);g=isNaN(g)?void 0:g;var d=A.px2pt(this.yoffset);d=isNaN(d)?void 0:d;return u.mixin(this.inherited("toJson",arguments),{size:"auto"===
this.size?this.size:k,angle:this.angle&&-1*this.angle,xoffset:g,yoffset:d})}})})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(e,u,B,A,p,l){return e(null,{declaredClass:"esri.symbol.Symbol",color:new l([0,0,0,1]),type:null,constructor:function(k){k&&u.isObject(k)&&(u.mixin(this,k),this.color&&p.isDefined(this.color[0])&&(this.color=l.toDojoColor(this.color)),(k=this.type)&&0===k.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",
esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[k]))},setColor:function(k){this.color=k;return this},toJson:function(){return{color:l.toJsonColor(this.color)}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(e,u,B,A,p,l,k,g,d){var c={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},a={style:c.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};e=e(g,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",
path:"esriSMSPath"},constructor:function(b,f,t,n){b?u.isString(b)?(this.style=b,f&&(this.size=f),t&&(this.outline=t),n&&(this.color=n)):(this.style=k.valueOf(this._styles,this.style),b.outline&&(this.outline=new d(b.outline))):(u.mixin(this,a),this.size=p.pt2px(this.size),this.outline=new d(this.outline),this.color=new B(this.color));this.style||(this.style=c.STYLE_CIRCLE)},setStyle:function(b){this.style=b;return this},setPath:function(b){this.path=b;this.setStyle(c.STYLE_PATH);return this},setOutline:function(b){this.outline=
b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(b,f,t){this._targetWidth=b;this._targetHeight=f;this._spikeSize=t},getShapeDescriptors:function(){var b,f=this.style,t=(this.size||p.pt2px(a.size))/2,n=0-t,m=0+t,h=0-t,v=0+t;switch(f){case c.STYLE_CIRCLE:var r={type:"circle",cx:0,cy:0,r:t};var C=this.getFill();if(b=this.getStroke())b.style=b.style||"Solid";break;case c.STYLE_CROSS:r={type:"path",path:"M "+n+",0 L "+
m+",0 M 0,"+h+" L 0,"+v+" E"};C=null;b=this.getStroke();break;case c.STYLE_DIAMOND:r={type:"path",path:"M "+n+",0 L 0,"+h+" L "+m+",0 L 0,"+v+" L "+n+",0 Z"};C=this.getFill();b=this.getStroke();break;case c.STYLE_SQUARE:r={type:"path",path:"M "+n+","+v+" L "+n+","+h+" L "+m+","+h+" L "+m+","+v+" L "+n+","+v+" Z"};C=this.getFill();b=this.getStroke();break;case c.STYLE_TRIANGLE:r={type:"path",path:"M "+n+","+v+" L 0,"+h+" L "+m+","+v+" L "+n+","+v+" Z"};C=this.getFill();b=this.getStroke();break;case c.STYLE_X:r=
{type:"path",path:"M "+n+","+v+" L "+m+","+h+" M "+n+","+h+" L "+m+","+v+" E"};C=null;b=this.getStroke();break;case c.STYLE_PATH:r={type:"path",path:this.path||""},C=this.getFill(),b=this.getStroke()}return{defaultShape:r,fill:C,stroke:b}},toJson:function(){var b=this.style,f=this.outline,t=u.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[b]||"esriSMSCircle"});f&&(t.outline=f.toJson());"x"===b||"cross"===b?delete t.color:"target"===b&&(t.style="esriSMSSquare",delete t.color,
0<this._targetHeight&&0<this._targetWidth&&(t.size=p.px2pt(Math.max(this._targetHeight,this._targetWidth))));t.path=this.path;return k.fixJson(t)}});u.mixin(e,c);e.defaultProps=a;return e})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(e,u,B,A,p,l,k,g){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",
STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},c={color:[0,0,0,1],style:d.STYLE_SOLID,width:1};e=e(g,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",
shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(a,b,f){a?u.isString(a)?(this.style=a,b&&(this.color=b),f&&(this.width=f)):(this.style=k.valueOf(this._styles,a.style)||d.STYLE_SOLID,this.marker=a.marker):(u.mixin(this,c),this.color=new B(this.color),this.width=p.pt2px(this.width))},setStyle:function(a){this.style=a;return this},setMarker:function(a){this.marker=
a},getStroke:function(){return this.style===d.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return k.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?u.clone(this.marker):void 0}))}});u.mixin(e,d);e.defaultProps=c;return e})},
"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(e,u,B,A,p,l){return e(l,{declaredClass:"esri.symbol.LineSymbol",constructor:function(k){u.isObject(k)?this.width=A.pt2px(this.width):this.width=12},setWidth:function(k){this.width=k;return this},toJson:function(){var k=A.px2pt(this.width);k=isNaN(k)?void 0:k;return u.mixin(this.inherited("toJson",arguments),{width:k})}})})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),
function(e,u,B,A,p,l){function k(f){f.removeAttribute("marker-start");f.removeAttribute("marker-end");f.removeAttribute("opacity")}function g(f,t){for(var n in t)f.setAttribute(n,t[n])}function d(f,t,n){t="url(#"+t.getAttribute("id")+")";f.rawNode.setAttribute("marker-"+n,t)}var c=-1!==A.renderer.toLowerCase().indexOf("svg"),a=9===B("ie"),b={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",
refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};return{applyLineMarker:function(f,t,n,m){if(c&&!a){var h=f&&f.rawNode,v=t.marker;n=n||t.color;h&&"none"!==t.style&&n&&v&&"arrow"===v.style&&v.placement?h.getTotalLength&&0===h.getTotalLength()?k(h):(t=-1!==v.placement.indexOf("begin"),v=-1!==v.placement.indexOf("end"),t||v?(h.removeAttribute("stroke-opacity"),
h.setAttribute("opacity",n.a),t?(t=m(f,n,"spear","start"),d(f,t,"start")):h.removeAttribute("marker-start"),v?(n=m(f,n,"spear","end"),d(f,n,"end")):h.removeAttribute("marker-end")):k(h)):h&&k(h)}},createSVGMarker:function(f,t,n,m){n=b[n];var h=u.doc.createElementNS("http://www.w3.org/2000/svg","marker");h.setAttribute("id",t);g(h,b.marker);g(h,n.marker[m]);t=u.doc.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("fill",f.toCss());g(t,n.path.common);g(t,n.path[m]);h.appendChild(t);
return h},create2DColorRamp:function(f){var t=f.surface.createGroup(),n=f.colors,m=f.numClasses;f=(f.size||75)/m;for(var h=0;h<m;h++)for(var v=h*f,r=0;r<m;r++){var C=n[h][r];t.createRect({x:r*f,y:v,width:f,height:f}).setFill(C).setStroke(null)}return t},setSymbolFillColor:function(f,t){if(f)switch(t=t?new l(t):null,f.type){case "simplemarkersymbol":"cross"===f.style||"x"===f.style?f.outline&&f.outline.setColor(t):f.setColor(t);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":f.setColor(t)}}}})},
"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(e,u,B,A,p,l,k,g,d){return e(null,{declaredClass:"esri.layers.TileInfo",constructor:function(c){u.mixin(this,c);this.width=this.cols;this.height=this.rows;this._levelToLOD={};c=this.spatialReference;var a=this.origin;c&&(c=this.spatialReference=new k(c.toJson?c.toJson():c));a&&(this.origin=new g(a.toJson?a.toJson():
a),!a.spatialReference&&c&&this.origin.setSpatialReference(new k(c.toJson())));this.lods=B.map(this.lods,function(t){return new d(t)});B.forEach(this.lods,function(t){this._levelToLOD[t.level]=t},this);c=!1;a=this.spatialReference;var b=this.origin;if(a&&b){var f=a._getInfo();f&&(c=a._isWrappable()&&Math.abs(f.origin[0]-b.x)<=f.dx)}this.isWrappable=c;this._initializeUpsampleLevels()},toJson:function(){return l.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&B.map(this.lods,function(c){return c.toJson()})})},lodAt:function(c){return this._levelToLOD&&this._levelToLOD[c]||null},updateTileInfo:function(c){var a=this.lodAt(c.level),b=a.resolution*this.width;a=a.resolution*this.height;c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=[0,0,0,0]);c.extent[0]=this.origin.x+c.col*b;c.extent[1]=this.origin.y-(c.row+1)*a;c.extent[2]=
c.extent[0]+b;c.extent[3]=c.extent[1]+a},upsampleTile:function(c){var a=this._upsampleLevels[c.level];if(!a||-1===a.parentLevel)return!1;c.level=a.parentLevel;c.row=Math.floor(c.row/a.factor+.001);c.col=Math.floor(c.col/a.factor+.001);this.updateTileInfo(c);return!0},_initializeUpsampleLevels:function(){var c=this.lods;this._upsampleLevels=[];for(var a=null,b=0;b<c.length;b++){var f=c[b];this._upsampleLevels[f.level]={parentLevel:a?a.level:-1,factor:a?a.resolution/f.resolution:0};a=f}}})})},"esri/layers/LOD":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.layers.LOD",constructor:function(l){u.mixin(this,l)},toJson:function(){return p.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}})})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){return u([a,b],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(m,h){h&&(h.roundrobin&&(e.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),h.tileServers=h.roundrobin),this._setTileServers(h.tileServers),
this._loadCallback=h.loadCallback);this._params=B.mixin({},this._url.query);this._initLayer=B.hitch(this,this._initLayer);(m=h&&h.resourceInfo)?this._initLayer(m):(this._load=B.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(m){if(m&&0<m.length){this.tileServers=m;var h,v=m.length;for(h=0;h<v;h++)m[h]=d.urlToObject(m[h]).path}},_initLayer:function(m,h){this.inherited(arguments);this.resourceInfo=
p.toJson(m);this.tileInfo=new f(m.tileInfo);!1!==this.resampling&&(m.capabilities&&-1<m.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new n(this)):this.resampling=!!m.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new c(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;m.timeInfo&&(this.timeInfo=new t(m.timeInfo));m.mensurationCapabilities&&(this.mensurationCapabilities=
m.mensurationCapabilities);var v=this._url.path,r=this._loadCallback,C=d.getProtocolForWebResource(!0),w=v.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);w=w&&w[2];if(!this.tileServers)if(m.tileServers)this._setTileServers(m.tileServers);else{var y=-1!==v.search(/^https?:\/\/server\.arcgisonline\.com/i),q=-1!==v.search(/^https?:\/\/services\.arcgisonline\.com/i);(y||q)&&this._setTileServers([v,v.replace(y?/server\.arcgisonline/i:
/services\.arcgisonline/i,y?"services.arcgisonline":"server.arcgisonline")])}if(w){w=w.toLowerCase();for(v=0;v<this._agolAttrs.length;v++)if(y=this._agolAttrs[v],y.toLowerCase()===w){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||C+"//static.arcgis.com/attribution/"+y;break}for(v=0;v<this._referenceLayers.length;v++)if(y=this._referenceLayers[v],y.toLowerCase()===w){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);r&&(delete this._loadCallback,r(this))},getTileUrl:function(m,
h,v){var r=this.tileServers,C=this._getToken(),w=this._url.query;m=(r?r[h%r.length]:this._url.path)+"/tile/"+m+"/"+h+"/"+v;m=d.upgradeToHTTPS(m);this.resampling&&!this.tileMap&&(m+="?blankTile\x3dfalse");w&&(m=this.resampling&&!this.tileMap?m+("\x26"+k.objectToQuery(w)):m+("?"+k.objectToQuery(w)));!C||w&&w.token||(m+=(-1===m.indexOf("?")?"?":"\x26")+"token\x3d"+C);m=this.addTimestampToURL(m);return d.addProxy(m)}})})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w){return e(w,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(y,q){u.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=q?q.displayLevels:null)?this._displayLevels[0]:0;this.resampling=q?q.resampling:void 0;this._resamplingTolerance=q?q.resamplingTolerance:null;this.exclusionAreas=q?q.exclusionAreas:null;y=B.hitch;this._addImage=y(this,this._addImage);this._tileLoadHandler=y(this,this._tileLoadHandler);
this._tileErrorHandler=y(this,this._tileErrorHandler);this._popTile=y(this,this._popTile);this._cleanUpRemovedImages=y(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=y(this,this._fireOnUpdateEvent);this._transitionEnd=y(this,this._transitionEnd);this._tileMapCallback=y(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var y=this.tileInfo,q=y.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=y.width;this._tileH=
y.height;var x=this.scales=[],E=this._displayLevels,z=-Infinity,D=Infinity,F=this.fullExtent,J=new v(F.xmin,F.ymax);F=new v(F.xmax,F.ymin);var L=h.getContainingTileCoords,Q,ba=q.length;for(Q=0;Q<ba;Q++){var fa=q[Q];var Y=L(y,J,fa);fa.startTileRow=0>Y.row?0:Y.row;fa.startTileCol=0>Y.col?0:Y.col;Y=L(y,F,fa);fa.endTileRow=Y.row;fa.endTileCol=Y.col;E&&-1===A.indexOf(E,fa.level)||(x[Q]=fa.scale,z=fa.scale>z?fa.scale:z,D=fa.scale<D?fa.scale:D)}-Infinity===z||this._hasMin||this.setMinScale(z);Infinity===
D||this._hasMax||this.setMaxScale(D);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=n("ie")&&7>n("ie")&&(this.isPNG32||"Mixed"===y.format)},isVisibleAtScale:function(y){return y?w.prototype._isMapAtVisibleScale.call(this,y,!0):!1},_isMapAtVisibleScale:function(y){var q=this.inherited(arguments,[y,!0]);if(q){var x=this._map;q=this.scales;var E=x.getScale(),z=!1,D=x.width>x.height?x.width:x.height;for(x=0;x<q.length;x++)if(Math.abs(q[x]-E)/q[x]<1/D){z=!0;break}q=z}return q},_setMap:function(y,
q,x,E){this.inherited(arguments);this._map=y;var z=this._div=l.create("div",null,q),D=y.__visibleDelta,F=u.connect,J=f._css.names,L={position:"absolute",width:y.width+"px",height:y.height+"px",overflow:"visible"},Q=t.defaults.map.zoomDuration;"css-transforms"===y.navigationMode?(L[J.transform]=f._css.translate(-D.x,-D.y),d.set(z,L),delete L[J.transform],L[J.transition]=J.transformName+" "+Q+"ms ease",d.set(this._active=l.create("div",null,z),L),this._active._remove=0,this._passives=[]):(L.left=-D.x+
"px",L.top=-D.y+"px",d.set(z,L));this._onResizeHandler_connect=F(y,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=F(this,"onOpacityChange",this,"_opacityChangeHandler");D=this.tileInfo;F=D.spatialReference;J=F._getInfo();(this._wrap=y.wrapAround180&&F._isWrappable()&&Math.abs(J.origin[0]-D.origin.x)<=J.dx)&&h._addFrameInfo(D,J);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!y.loaded)var ba=u.connect(y,"onLoad",this,function(){u.disconnect(ba);
ba=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return z},_unsetMap:function(y,q){this.suspended||this._suspendImpl();l.destroy(this._div);this._map=this._div=null;var x=u.disconnect;x(this._onResizeHandler_connect);x(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){m.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();
var y=this._tiles,q=this._tileIds,x=this._loadingList,E,z,D=u.disconnect,F=l.destroy;x&&0<x.count&&(x.forEach(function(L){if(E=y[L])D(E._onload_connect),D(E._onerror_connect),D(E._onabort_connect),E._onload_connect=E._onerror_connect=E._onabort_connect=null}),x.clear(),this._fireUpdateEnd());this._removeList.clear();for(x=q.length-1;0<=x;x--)(E=(z=q[x])&&y[z])&&F(E);if("css-transforms"===this._map.navigationMode){q=this._active;z=this._passives;this._noDom=0;for(x=z.length-1;0<=x;x--){var J=z[x];
J._endHandle&&D(J._endHandle);J._matrix=J._multiply=J._endHandle=null;J._marked=J._remove=0;z.splice(x,1);F(J)}q._matrix=q._multiply=null;q._marked=q._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new a;this._loadingList=new a;m.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||
setTimeout(B.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var y=this._map,q=u.connect;if("css-transforms"===y.navigationMode){if(this._onScaleHandler_connect=q(y,"onScale",this,this._onScaleHandler),n("esri-mobile")){this._standby=[];var x=this,E=function(){x._noDom=1};this._onPanStartHandler_connect=q(y,"onPanStart",E);this._onZoomStartHandler_connect=q(y,"onZoomStart",E)}}else this._onZoomHandler_connect=
q(y,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=q(y,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=q(y,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var y=u.disconnect;y(this._onPanHandler_connect);y(this._onZoomHandler_connect);y(this._onScaleHandler_connect);y(this._onExtentChangeHandler_connect);y(this._onPanStartHandler_connect);y(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=
this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(y,q,x){y={width:q+"px",height:x+"px"};q=d.set;q(this._div,y);if("css-transforms"===this._map.navigationMode)for(this._active&&q(this._active,y),x=this._passives.length-1;0<=x;x--)q(this._passives[x],y)},_onExtentChangeHandler:function(y,q,x,E){q=this._map;var z=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!q._isPanningOrZooming()){if("css-transforms"===
q.navigationMode){if(x)for(E=this._passives.length-1;0<=E;E--){var D=this._passives[E];d.set(D,f._css.names.transition,"none");D._marked?(this._passives.splice(E,1),D.parentNode&&D.parentNode.removeChild(D),l.destroy(D)):0<D.childNodes.length&&(D._multiply=D._multiply?b.multiply(D._matrix,D._multiply):D._matrix)}this._noDom=0;if(z&&z.length)for(E=z.length-1;0<=E;E--)D=z[E],d.set(D,"visibility","inherit"),this._popTile(D),z.splice(E,1)}this._fireUpdateStart();this._rrIndex=0;E=h.getCandidateTileInfo(q,
this.tileInfo,y);y=q.__visibleDelta;if(!this._ct||E.lod.level!==this._ct.lod.level||x){D=E&&this._ct&&E.lod.level!==this._ct.lod.level;this._ct=E;var F=this._tiles,J=this._tileIds,L=this._tileBounds,Q=this._removeList,ba=J.length;this._cleanUpRemovedImages();for(E=0;E<ba;E++){z=J[E];var fa=F[z];L[z]=J[E]=null;"css-transforms"===q.navigationMode&&D&&fa.parentNode&&q.fadeOnZoom&&(fa._fadeOut=D,fa.parentNode._remove++);Q.add(fa)}x&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}E=y.x;x=y.y;"css-transforms"===
q.navigationMode?(z={},z[f._css.names.transform]=f._css.translate(E,x),d.set(this._div,z)):d.set(this._div,{left:E+"px",top:x+"px"});this.__coords_dx=E;this.__coords_dy=x;this._updateImages(new r(0,0,y.width,y.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;x=this._tileW;F=this._tileH;y=new r(-y.x,-y.y,y.width,y.height);for(E=this._tileIds.length-1;0<=E;E--)(z=this._tileIds[E])?(D=this._tiles[z],J=g.getMarginBox(D),J=
new r(J.l,J.t,x,F),"css-transforms"===q.navigationMode&&(J.x=D._left,J.y=D._top),y.intersects(J)?this._tileBounds[z]=J:(this._loadingList.contains(z)&&this._popTile(D),l.destroy(D),this._tileIds.splice(E,1),delete this._tileBounds[z],delete this._tiles[z])):(this._tileIds.splice(E,1),delete this._tileBounds[z],delete this._tiles[z])}},_onPanHandler:function(y,q){y=this._map;q=y.__visibleDelta.offset(q.x,q.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===y.navigationMode?(y={},y[f._css.names.transform]=
f._css.translate(q.x,q.y),d.set(this._div,y),n("esri-mobile")||this._updateImages({x:-q.x,y:-q.y,width:q.width,height:q.height})):(d.set(this._div,{left:q.x+"px",top:q.y+"px"}),this._updateImages({x:-q.x,y:-q.y,width:q.width,height:q.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(y,q){var x,E={},z=f._css.names,D=this._map,F=t.defaults.map.zoomDuration;for(x=this._passives.length-1;0<=x;x--){var J=this._passives[x];0===J.childNodes.length?
(this._passives.splice(x,1),l.destroy(J)):("none"===J.style[z.transition]&&d.set(J,z.transition,z.transformName+" "+F+"ms ease"),d.set(J,z.transition,q?"none":z.transformName+" "+F+"ms ease"),J._matrix=y,E[z.transform]=f._css.matrix(J._multiply?b.multiply(y,J._multiply):y),d.set(J,E))}this._active&&0===this._active.childNodes.length||(d.set(this._active,z.transition,q?"none":z.transformName+" "+F+"ms ease"),this._active._matrix=y,E[z.transform]=f._css.matrix(this._active._matrix),d.set(this._active,
E),this._passives.push(this._active),E={position:"absolute",width:D.width+"px",height:D.height+"px",overflow:"visible"},E[z.transition]=z.transformName+" "+F+"ms ease",d.set(this._active=l.create("div",null,this._div),E),this._active._remove=0,D.fadeOnZoom&&l.place(this._active,this._div,"first"))},_onZoomHandler:function(y,q,x){y=g.getMarginBox(this._div);x=x.offset(-y.l,-y.t);this._previousScale&&1!==q||(this._previousScale=1);var E,z=this._tileW*q,D=this._tileH*q,F=this._tileBounds,J=this._tiles,
L=this._previousScale,Q=this._multiple,ba=d.set,fa,Y;if((y=n("ie"))&&8>y)A.forEach(this._tileIds,function(za){Y="";E=F[za];fa=J[za].style.margin.split(" ");A.forEach(fa,function(P){""!==Y&&(Y+=" ");P=parseFloat(P);Y+=P/L*q+"px"});ba(J[za],{left:E.x-(z-E.width)*(x.x-E.x)/E.width+"px",top:E.y-(D-E.height)*(x.y-E.y)/E.height+"px",margin:1!==Q&&-1===Y.indexOf("NaN")?Y:"",zoom:q})});else{var ma=z*Q,ca=D*Q,la,ta;A.forEach(this._tileIds,function(za){Y="";E=F[za];la=E.x-(z-E.width)*(x.x-E.x)/E.width;ta=E.y-
(D-E.height)*(x.y-E.y)/E.height;fa=J[za].style.margin.split(" ");A.forEach(fa,function(P){""!==Y&&(Y+=" ");P=parseFloat(P);Y+=P/L*q+"px"});ba(J[za],{left:la+"px",top:ta+"px",margin:1!==Q&&-1===Y.indexOf("NaN")?Y:"",width:ma+"px",height:ca+"px"})})}this._previousScale=q},_updateImages:function(y){if(this._ct){var q=this._tileW,x=this._tileH,E=this._ct;var z=E.lod;E=E.tile;var D=E.offsets,F=E.coords,J=F.row;F=F.col;var L=z.level,Q=this.opacity,ba=this._tileIds,fa=this._loadingList,Y=this._addImage,
ma=this._map.id,ca=this.id,la=y.x,ta=y.y,za=z.startTileRow,P=z.endTileRow,ea=z.startTileCol,ra=z.endTileCol,M=A.indexOf,Z=D.x-this.__coords_dx,ka=D.y-this.__coords_dy;var qa=q-Z+-y.x;var ua=x-ka+-y.y;var Aa=Math.ceil;qa=0<qa?qa%q:q-Math.abs(qa)%q;ua=0<ua?ua%x:x-Math.abs(ua)%x;la=0<la?Math.floor((la+Z)/q):Aa((la-(q-Z))/q);ta=0<ta?Math.floor((ta+ka)/x):Aa((ta-(x-ka))/x);ka=la+Aa((y.width-qa)/q);y=ta+Aa((y.height-ua)/x);if(this._wrap){var ya=z._frameInfo;var G=ya[0];var I=ya[1];ya=ya[2]}for(ua=la;ua<=
ka;ua++)for(la=ta;la<=y;la++)Aa=J+la,qa=F+ua,this._wrap&&(qa<I?(qa%=G,qa=qa<I?qa+G:qa):qa>ya&&(qa%=G)),!this._isExcluded(L,Aa,qa)&&Aa>=za&&Aa<=P&&qa>=ea&&qa<=ra&&(z=ma+"_"+ca+"_tile_"+L+"_"+la+"_"+ua,-1===M(ba,z)&&(fa.add(z),ba.push(z),Y(L,la,Aa,ua,qa,z,q,x,Q,E,D)))}},_cleanUpRemovedImages:function(){var y=this._removeList,q=l.destroy,x,E=f._css.names;y.forEach(function(D){D._fadeOut||(D.style.filter="",D.style.zoom=1,q(D))});if("css-transforms"===this._map.navigationMode)for(x=this._passives.length-
1;0<=x;x--){var z=this._passives[x];0===z.childNodes.length?(this._passives.splice(x,1),q(z)):this._map.fadeOnZoom&&!z._marked&&z._remove===z.childNodes.length&&(z._marked=1,2048>f._css.getScaleFromMatrix(d.get(z,E.transform))?(d.set(z,E.transition,"opacity 0.65s"),d.set(z,"opacity",0),u.disconnect(z._endHandle),z._endHandle=u.connect(z,E.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:z}))}y.clear()},_transitionEnd:function(y){var q=y.target;"opacity"===y.propertyName&&
(u.disconnect(q._endHandle),q._endHandle=null,y=A.indexOf(this._passives,q),-1<y&&this._passives.splice(y,1),q.parentNode&&q.parentNode.removeChild(q),l.destroy(q))},_addImage:function(y,q,x,E,z,D,F,J,L,Q,ba){if(this._patchIE)Q=this._tiles[D]=l.create("div"),Q.id=D,k.add(Q,"layerTile"),d.set(Q,{left:F*E-ba.x+"px",top:J*q-ba.y+"px",width:F+"px",height:J+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(y,x,z)+"', sizingMethod\x3d'scale')"}),1>L&&d.set(Q,"opacity",
L),y=Q.appendChild(l.create("div")),d.set(y,{opacity:0,width:F+"px",height:J+"px"}),this._div.appendChild(Q),Q=null,this._loadingList.remove(D),this._fireOnUpdateEvent();else{Q=this._tiles[D]=l.create("img");var fa=u.connect;Q.id=D;Q._uid=y+"_"+x+"_"+z;Q.alt="";k.add(Q,"layerTile");E=F*E-ba.x;ba=J*q-ba.y;q=this._map;var Y=f._css.names;F={width:F+"px",height:J+"px",visibility:"hidden"};"css-transforms"===q.navigationMode?(F[Y.transform]=f._css.translate(E,ba),d.set(Q,F),Q._left=E,Q._top=ba):(F.left=
E+"px",F.top=ba+"px",d.set(Q,F));1>L&&d.set(Q,"opacity",L);Q._onload_connect=fa(Q,"onload",this,"_tileLoadHandler");Q._onerror_connect=fa(Q,"onerror",B.hitch(this,"_tileErrorHandler",x,z));Q._onabort_connect=fa(Q,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(y,x,z,D,this._tileMapCallback);else if(D=this.getTileUrl(y,x,z,Q))this._failedRequests&&this._failedRequests[D]?(d.set(Q,this._failedRequests[D].css),Q.src=this._failedRequests[D].src,this._multiple=parseInt(this._failedRequests[D].css.width)/
this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,Q.src=D);"css-transforms"===q.navigationMode?this._active.appendChild(Q):this._div.appendChild(Q);Q=null}},_tileMapCallback:function(y,q){if(!this.suspended){var x=this._tiles[q.id]||c.byId(q.id);var E=q.level+"_"+q.row+"_"+q.col;x&&x._uid===E?(this._multiple=2*(q.level-y.level)||1,this.isResampling=1!==this._multiple,q=this.tileMap.style(y,q),d.set(x,q),x.src=this.getTileUrl(y.level,y.row,y.col)):this._popTile(q)}},
getTileUrl:function(y,q,x){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(y){var q=u.disconnect;q(y._onload_connect);q(y._onerror_connect);q(y._onabort_connect);y._onload_connect=y._onerror_connect=y._onabort_connect=null;this._loadingList.remove(y.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(y){y=y.currentTarget;this._noDom?this._standby.push(y):(d.set(y,"visibility","inherit"),
this._popTile(y))},_tileAbortHandler:function(y){y=y.currentTarget;this.onError(Error("Unable to load tile: "+y.src));d.set(y,"visibility","hidden");this._popTile(y)},_tileErrorHandler:function(y,q,x){x=x.currentTarget;var E=!0;if(this.tileMap||!this.resampling)E=!1;else{var z=new p(x.src);z=z.path.split("/");z=parseInt(z[z.length-3]);var D=this._ct.lod.level-z+1;this._multiple=Math.pow(2,D);if(z===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/
Math.LN2>this._resamplingTolerance)E=!1}E?(this.isResampling=!0,this._resample(x,y,q)):(this.onError(Error("Unable to load tile: "+x.src)),d.set(x,"visibility","hidden"),this._popTile(x))},_resample:function(y,q,x){var E=(new p(y.src)).path.split("/"),z=this._multiple,D=parseInt(E[E.length-3])-1,F=parseInt(q/z),J=parseInt(x/z);E=x%z;var L=q%z;F=this.getTileUrl(D,F,J);q=this.getTileUrl(D+Math.log(z)/Math.LN2,q,x);z={width:this._tileW*z+"px",height:this._tileH*z+"px",margin:"-"+this._tileW*L+"px 0 0 -"+
(this._tileH*E+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[q]={src:F,css:z};d.set(y,z);n("chrome")&&y.setAttribute("src",null);y.src=F},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(y){if(this.opacity!=y)this.onOpacityChange(this.opacity=y)},onOpacityChange:function(){},_opacityChangeHandler:function(y){var q=d.set,x,E;if("css-transforms"===
this._map.navigationMode){if(this._active){var z=this._active.childNodes;for(x=z.length-1;0<=x;x--)q(z[x],"opacity",y)}for(x=this._passives.length-1;0<=x;x--)for(z=this._passives[x].childNodes,E=z.length-1;0<=E;E--)q(z[E],"opacity",y)}else for(z=this._div.childNodes,x=z.length-1;0<=x;x--)q(z[x],"opacity",y)},setExclusionAreas:function(y){this.exclusionAreas=y;if(this.loaded&&this._map&&this._map.loaded){var q=this._map.spatialReference,x=this.tileInfo,E=x.origin,z=x.lods,D=z[0].level,F=z[z.length-
1].level,J,L,Q;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var ba=0;for(J=y.length;ba<J;ba++){var fa=y[ba];if((Q=fa.geometry)&&"extent"===Q.type&&Q.xmin<=Q.xmax&&Q.ymin<=Q.ymax){if(!q.equals(Q.spatialReference))if(q._canProject(Q.spatialReference)){if(q.isWebMercator()){var Y=v.lngLatToXY(Q.xmin,Q.ymin);Q=v.lngLatToXY(Q.xmax,Q.ymax)}else Y=v.xyToLngLat(Q.xmin,Q.ymin,!0),Q=v.xyToLngLat(Q.xmax,Q.ymax,!0);Q=new C(Y[0],Y[1],Q[0],Q[1],q)}else continue;var ma=-1;if(fa.minZoom&&
-1!==fa.minZoom)ma=fa.minZoom;else if(fa.minScale&&-1!==fa.minScale){var ca=0;for(L=z.length;ca<L;ca++)if(z[ca].scale<=fa.minScale){ma=z[ca].level;break}}ma=Math.max(ma,D);Y=-1;if(fa.maxZoom&&-1!==fa.maxZoom)Y=fa.maxZoom;else if(fa.maxScale&&-1!==fa.maxScale)for(ca=0,L=z.length;ca<L;ca++)if(z[ca].scale<fa.maxScale){Y=z[ca-1].level;break}else if(z[ca].scale===fa.maxScale){Y=z[ca].level;break}Y=-1===Y?F:Math.min(Y,F);for(fa=ma;fa<=Y;fa++){ca=0;for(L=z.length;ca<L;ca++)if(z[ca].level===fa){var la=z[ca];
break}la&&(this._exclusionsPerZoom[fa]||(this._exclusionsPerZoom[fa]=[]),ca=1/la.resolution/x.rows,L=1/la.resolution/x.cols,this._exclusionsPerZoom[fa].push({rowFrom:Math.floor((E.y-Q.ymax)*ca),rowTo:Math.ceil((E.y-Q.ymin)*ca),colFrom:Math.floor((Q.xmin-E.x)*L),colTo:Math.ceil((Q.xmax-E.x)*L)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(y,q,x){var E;if(!this._exclusionsPerZoom)return!1;var z=this._exclusionsPerZoom[y];
if(!z)return!1;var D=0;for(E=z.length;D<E;D++)if(y=z[D],q>=y.rowFrom&&q<y.rowTo&&x>=y.colFrom&&x<y.colTo)return!0;return!1}})})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(e,u,B){B.ArrayList=function(A){var p=[];A&&(p=p.concat(A));this.count=p.length;this.add=function(l){p.push(l);this.count=p.length};this.addRange=function(l){if(l.getIterator)for(l=l.getIterator();!l.atEnd();)this.add(l.get());else for(var k=0;k<l.length;k++)p.push(l[k]);
this.count=p.length};this.clear=function(){p.splice(0,p.length);this.count=0};this.clone=function(){return new B.ArrayList(p)};this.contains=function(l){for(var k=0;k<p.length;k++)if(p[k]==l)return!0;return!1};this.forEach=function(l,k){e.forEach(p,l,k)};this.getIterator=function(){return new B.Iterator(p)};this.indexOf=function(l){for(var k=0;k<p.length;k++)if(p[k]==l)return k;return-1};this.insert=function(l,k){p.splice(l,0,k);this.count=p.length};this.item=function(l){return p[l]};this.remove=
function(l){l=this.indexOf(l);0<=l&&p.splice(l,1);this.count=p.length};this.removeAt=function(l){p.splice(l,1);this.count=p.length};this.reverse=function(){p.reverse()};this.sort=function(l){l?p.sort(l):p.sort()};this.setByIndex=function(l,k){p[l]=k;this.count=p.length};this.toArray=function(){return[].concat(p)};this.toString=function(l){return p.join(l||",")}};return B.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(e,
u,B){e=u.getObject("dojox.collections",!0);e.DictionaryEntry=function(A,p){this.key=A;this.value=p;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};e.Iterator=function(A){var p=0;this.element=A[p]||null;this.atEnd=function(){return p>=A.length};this.get=function(){return this.atEnd()?null:this.element=A[p++]};this.map=function(l,k){return B.map(A,l,k)};this.reset=function(){p=0;this.element=A[p]}};e.DictionaryIterator=function(A){var p=[],l={},k;for(k in A)l[k]||
p.push(A[k]);var g=0;this.element=p[g]||null;this.atEnd=function(){return g>=p.length};this.get=function(){return this.atEnd()?null:this.element=p[g++]};this.map=function(d,c){return B.map(p,d,c)};this.reset=function(){g=0;this.element=p[g]}};return e})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(e,u,B,A,p,l,k,g,d,c){return e(null,
{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);a=this._params={};if(b=this._url.query?this._url.query.token:null)a.token=b},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){k({url:this._url.path,content:u.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,
description:null,units:null,_initLayer:function(a,b){try{this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();this.description=a.description;this.copyright=a.copyrightText;this.spatialReference=a.spatialReference&&new g(a.spatialReference);this.initialExtent=a.initialExtent&&new d(a.initialExtent);this.fullExtent=a.fullExtent&&new d(a.fullExtent);this.units=a.units;this.maxRecordCount=a.maxRecordCount;this.maxImageHeight=a.maxImageHeight;this.maxImageWidth=a.maxImageWidth;
this.supportsDynamicLayers=a.supportsDynamicLayers;var f=this.layerInfos=[],t=a.layers,n=this._defaultVisibleLayers=[];B.forEach(t,function(m,h){f[h]=new c(m);m.defaultVisibility&&n.push(m.id)});this.visibleLayers||(this.visibleLayers=n);this.version=a.currentVersion;this.cimVersion=a.cimVersion;this.version||(this.version="capabilities"in a||"tables"in a?10:"supportedImageFormatTypes"in a?9.31:9.3);this.capabilities=a.capabilities;l.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);
l.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale)}catch(m){this._errorHandler(m)}}})})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(l){u.mixin(this,l)},toJson:function(){return p.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,
subLayerIds:this.subLayerIds})}})})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(e,u,B,A,p,l,k){e=e(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(g){null!==g&&(u.mixin(this,g),g.exportOptions&&(this.exportOptions=new k(g.exportOptions)),this.timeExtent=null,g.timeExtent&&2===g.timeExtent.length&&(this.timeExtent=new p(g.timeExtent)),this.timeReference=new l(g.timeReference))}});
u.mixin(e,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});return e})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"./kernel"],function(e,u,B,A){var p=e(null,{declaredClass:"esri.TimeExtent",constructor:function(l){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(l)if(u.isArray(l)){var k=l[0],g=l[1];this.startTime=null===k||"null"===k?null:new Date(k);this.endTime=null===g||"null"===g?null:new Date(g)}else l instanceof Date&&this._create(l,null)},offset:function(l,k){var g=new p,d=this.startTime,c=this.endTime;d&&(g.startTime=this._getOffsettedDate(d,l,k));c&&(g.endTime=this._getOffsettedDate(c,
l,k));return g},intersection:function(l){return this._intersection(this,l)},toJson:function(){var l=[],k=this.startTime;l.push(k?k.getTime():"null");k=this.endTime;l.push(k?k.getTime():"null");return l},_create:function(l,k){this.startTime=l?new Date(l.getTime()):null;this.endTime=k?new Date(k.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},
esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(l,k){if(l&&k){var g=l.startTime;l=l.endTime;var d=k.startTime;k=k.endTime;g=g?g.getTime():-Infinity;d=d?d.getTime():-Infinity;l=l?l.getTime():Infinity;k=k?k.getTime():Infinity;var c,a;d>=g&&d<=l?c=d:g>=d&&g<=k&&(c=g);l>=d&&l<=k?a=l:k>=g&&k<=l&&(a=k);if(isNaN(c)||isNaN(a))return null;g=new p;g.startTime=-Infinity===c?null:new Date(c);g.endTime=Infinity===
a?null:new Date(a);return g}return null},_getOffsettedDate:function(l,k,g){var d=this._refData;l=new Date(l.getTime());k&&g&&(d=d[g],l[d.setter](l[d.getter]()+k*d.multiplier));return l}});return p})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,u,B,A){return e(null,{declaredClass:"esri.layers.TimeReference",constructor:function(p){p&&u.mixin(this,p)}})})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(l){l&&u.mixin(this,l)},toJson:function(){return p.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}})})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),
function(e,u,B,A,p,l,k){return e(null,{declaredClass:"esri.layers.TileMap",constructor:function(g){this.layer=g;this._tileMaps={}},getTile:function(g,d,c,a,b){g={id:a,level:g,row:d,col:c};d=this._getResamplingBudget();0<d?this._process({tile:g,requestedTile:g,callback:b,resamplingBudget:d}):(b||this.callback).call(this,g,g)},statusOf:function(g,d,c){var a=this._getResamplingBudget();g={level:g,row:d,col:c};if(0===a)return 1;for(;0<=a;){d=this._tileToTileMap(g);if(!this._tileMaps[d.uid])return-1;d=
this._tileMaps[d.uid];if(!d.promise.isFulfilled())return-1;if(this._isTileAvailable(g,d))return 1;g=this._parentTile(g);if(!g)break;a--}return 0},style:function(g,d){if(g.level!==d.level||g.row!==d.row||g.col!==d.col){var c=this.layer.tileInfo,a=c.lods,b=c.cols;c=c.rows;for(var f,t,n=a.length-1;!f||!t;)f||a[n].level!==g.level||(f=a[n]),t||a[n].level!==d.level||(t=a[n]),n--;a=Math.round(f.resolution/t.resolution);g=d.col%a*-1*b;d=d.row%a*-1*c;a={width:b*a+"px",height:c*a+"px",margin:d+"px 0 0 "+g+
"px","will-change":"transform"};g=0===g?0:-1*g;d=0===d?0:-1*d;a.clip="rect("+d+"px,"+(g+b)+"px,"+(d+c)+"px,"+g+"px)";return a}},_process:function(g){var d=g.tile,c=this._tileToTileMap(d),a=this._parentTile(d);this._getTileMap(c).then(u.hitch(this,function(b){c=b;this._isTileAvailable(d,c)?(g.callback||this.callback).call(this,d,g.requestedTile):0<g.resamplingBudget&&a?(g.resamplingBudget--,g.tile=a,this._process(g)):(g.callback||this.callback).call(this,g.requestedTile,g.requestedTile)}),u.hitch(this,
function(){(g.callback||this.callback).call(this,g.requestedTile,g.requestedTile)}))},_getTileMap:function(g){var d,c,a=null;if(this._tileMaps[g.uid]){g=this._tileMaps[g.uid];var b=g.promise}else{this._tileMaps[g.uid]=g;var f=new A;l({url:this._getTileMapUrl(g.level,g.row,g.col),handleAs:"json",content:{f:"json"},callbackParamName:"callback",timeout:3E3,load:function(t){u.mixin(g,t);if(g.data&&0<g.data.length){c=g.data.length;if(1===c)a=g.data[0];else for(a=g.data[0],d=1;d<c;d++)if(g.data[d]!==a){a=
null;break}null!==a&&(delete g.data,g.value=a);null==g.valid&&(g.valid=!0)}f.resolve(g)},error:function(t){t&&422===t.code?(u.mixin(g,{location:{top:g.row,left:g.col,width:8,height:8},valid:!0,value:0}),f.resolve(g)):f.reject()}});b=g.promise=f.promise}return b},_parentTile:function(g){var d=this.layer.tileInfo.lods,c,a,b=null;B.some(d,function(f,t){return g.level===f.level?(c=f,a=t,!0):!1});0<a&&(d=d[a-1],b={id:g.id,level:d.level,row:Math.floor(g.row*c.resolution/d.resolution+.01),col:Math.floor(g.col*
c.resolution/d.resolution+.01)});return b},_tileToTileMap:function(g){var d=8*Math.floor(g.row/8),c=8*Math.floor(g.col/8);return{uid:g.level+"_"+d+"_"+c,level:g.level,row:d,col:c}},_isTileAvailable:function(g,d){if(d.valid)if(void 0!==d.value)g=d.value;else{var c=d.location.left;var a=d.location.top;g=(g.row-a)*d.location.width+(g.col-c);g=g<d.data.length?d.data[g]:0}else g=0;return g},_getTileMapUrl:function(g,d,c){var a=this.layer,b=a.tileServers,f=a._getToken(),t=a._url.query;g=(b?b[d%b.length]:
a._url.path)+"/tilemap/"+g+"/"+d+"/"+c+"/8/8";t&&(g+="?"+p.objectToQuery(t));!f||t&&t.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+f);return g=a.addTimestampToURL(g)},_getResamplingBudget:function(){var g=this.layer,d=0;g.resampling&&(d=g._resamplingTolerance,null===d||void 0===d)&&(d=g.tileInfo.lods.length);return d}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f){var t=e([f],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(n){this.inherited(arguments,[null,n]);this._mapImages=[];var m=B.hitch;this._panStart=m(this,this._panStart);this._pan=m(this,this._pan);this._extentChange=m(this,this._extentChange);this._zoom=m(this,this._zoom);this._zoomStart=m(this,this._zoomStart);this._scale=m(this,this._scale);this._resize=m(this,this._resize);u.connect(this,"onSuspend",this,this._onSuspend);
u.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(n){var m=this._mapImages.push(n);--m;n._idx=m;n._layer=this;this._div&&this._createImage(n,m)},removeImage:function(n){if(n){var m=n._idx,h=this._mapImages;if(h[m]===n){delete h[m];if(m=n._node)this._clearEvents(m),m.e_idx=m.e_bl=m.e_tr=m.e_l=m.e_t=m.e_w=m.e_h=null,m.parentNode&&(m.parentNode.removeChild(m),p.destroy(m));n._node=n._idx=n._layer=null}}},removeAllImages:function(){var n=this._mapImages,
m,h=n.length;for(m=0;m<h;m++){var v=n[m];v&&this.removeImage(v)}this._mapImages=[]},getImages:function(){var n=this._mapImages,m=[],h,v=n.length;for(h=0;h<v;h++)n[h]&&m.push(n[h]);return m},setOpacity:function(n){this.opacity!=n&&(this._opacityChanged(this.opacity=n),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(n){var m=this._div;if(m)if(!d("ie")||8<d("ie"))l.set(m,"opacity",n);else{var h=m.childNodes;var v=h.length;for(m=0;m<v;m++)l.set(h[m],"opacity",n)}},_createImage:function(n,
m){var h=p.create("img");l.set(h,{position:"absolute"});1>n.opacity?l.set(h,"opacity",n.opacity):8>=d("ie")&&l.set(h,"opacity",this.opacity);!n.rotation||9>d("ie")||l.set(h,k._css.names.transform,k._css.rotate(360-n.rotation));n._node=h;h.e_idx=m;h.e_layer=this;h.e_load=u.connect(h,"onload",t.prototype._imageLoaded);h.e_error=u.connect(h,"onerror",t.prototype._imageError);h.e_abort=u.connect(h,"onabort",t.prototype._imageError);h.src=n.href},_imageLoaded:function(n,m){n=m||n.target||n.currentTarget;
m=n.e_layer;var h=m._mapImages[n.e_idx],v=m._map;v&&(v.__zooming||v.__panning||!m._sr)?m._standby.push(n):(m._clearEvents(n),h&&h._node===n&&v&&m._attach(h))},_imageError:function(n){n=n.target||n.currentTarget;var m=n.e_layer,h=m._mapImages[n.e_idx];m._clearEvents(n);h&&(h._node=null)},_clearEvents:function(n){var m=u.disconnect;m(n.e_load);m(n.e_error);m(n.e_abort);n.e_load=n.e_error=n.e_abort=n.e_layer=null},_attach:function(n){var m=n.extent,h=m.spatialReference,v=this._sr,r=this._div,C=n._node,
w=new a({x:m.xmin,y:m.ymin,spatialReference:h});m=new a({x:m.xmax,y:m.ymax,spatialReference:h});v.equals(h)||(v.isWebMercator()&&4326===h.wkid?(w=b.geographicToWebMercator(w),m=b.geographicToWebMercator(m)):h.isWebMercator()&&4326===v.wkid&&(w=b.webMercatorToGeographic(w),m=b.webMercatorToGeographic(m)));C.e_bl=w;C.e_tr=m;n.visible&&(this._setPos(C,r._left,r._top),(this._active||r).appendChild(C))},_setPos:function(n,m,h){var v=n.e_bl,r=n.e_tr,C=this._map;v=C.toScreen(v);r=C.toScreen(r);m=v.x-m;h=
r.y-h;var w=Math.abs(r.x-v.x);v=Math.abs(v.y-r.y);r={width:w+"px",height:v+"px"};var y=this._mapImages[n.e_idx];"css-transforms"===C.navigationMode?r[k._css.names.transform]=k._css.translate(m,h)+(y.rotation?" "+k._css.rotate(360-y.rotation):""):(r.left=m+"px",r.top=h+"px");l.set(n,r);n.e_l=m;n.e_t=h;n.e_w=w;n.e_h=v},managedSuspension:!0,_setMap:function(n,m){this.inherited(arguments);var h=this._div=p.create("div",null,m),v=k._css.names,r={position:"absolute"},C=n.__visibleDelta;if(!d("ie")||8<d("ie"))r.opacity=
this.opacity;"css-transforms"===n.navigationMode?(r[v.transform]=k._css.translate(C.x,C.y),l.set(h,r),h._left=C.x,h._top=C.y,r={position:"absolute",width:n.width+"px",height:n.height+"px",overflow:"visible"},this._active=p.create("div",null,h),l.set(this._active,r),this._passive=p.create("div",null,h),l.set(this._passive,r)):(h._left=0,h._top=0,l.set(h,r));this._standby=[];v=this._mapImages;C=v.length;for(r=0;r<C;r++){var w=v[r];w._node||this._createImage(w,w._idx)}c.hide(h);return h},_unsetMap:function(n,
m){this._disconnect();var h=this._div;if(h){var v=this._mapImages,r,C=v.length;for(r=0;r<C;r++){var w=v[r];if(w){var y=w._node;y&&(this._clearEvents(y),y.e_idx=y.e_bl=y.e_tr=y.e_l=y.e_t=y.e_w=y.e_h=null);w._node=null}}m.removeChild(h);p.destroy(h)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();c.hide(this._div)},_onResume:function(n){n.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
n=this._map;var m=this._div,h=n.__visibleDelta;"css-transforms"===n.navigationMode&&(m._left=h.x,m._top=h.y,l.set(m,k._css.names.transform,k._css.translate(m._left,m._top)));this._redraw("css-transforms"===n.navigationMode);this._connect(n);c.show(m)},_connect:function(n){if(!this._connections){var m=u.connect,h="css-transforms"===n.navigationMode;this._connections=[m(n,"onPanStart",this._panStart),m(n,"onPan",this._pan),m(n,"onExtentChange",this._extentChange),h&&m(n,"onZoomStart",this._zoomStart),
h?m(n,"onScale",this._scale):m(n,"onZoom",this._zoom),h&&m(n,"onResize",this._resize)];h&&this._resize(n.extent,n.width,n.height)}},_disconnect:function(){this._connections&&(A.forEach(this._connections,u.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(n,m){n=this._div;n._left=this._panL+m.x;n._top=this._panT+m.y;"css-transforms"===this._map.navigationMode?l.set(n,k._css.names.transform,k._css.translate(n._left,n._top)):
l.set(n,{left:n._left+"px",top:n._top+"px"})},_extentChange:function(n,m,h){h?this._redraw("css-transforms"===this._map.navigationMode):m&&this._pan(n,m);this._processStandbyList()},_processStandbyList:function(){var n,m=this._standby;if(m&&m.length)for(n=m.length-1;0<=n;n--)this._imageLoaded(null,m[n]),m.splice(n,1)},_redraw:function(n){if(n){n=this._passive;var m=k._css.names;l.set(n,m.transition,"none");this._moveImages(n,this._active);l.set(n,m.transform,"none")}n=this._active||this._div;m=this._div._left;
var h=this._div._top,v,r=n.childNodes.length;for(v=0;v<r;v++){var C=n.childNodes[v];this._setPos(C,m,h)}},_zoom:function(n,m,h){n=this._div;var v=n._left,r=n._top,C,w=n.childNodes.length;for(C=0;C<w;C++){var y=n.childNodes[C];var q=y.e_w*m,x=y.e_h*m,E=(h.x-v-y.e_l)*(q-y.e_w)/y.e_w,z=(h.y-r-y.e_t)*(x-y.e_h)/y.e_h;E=isNaN(E)?0:E;z=isNaN(z)?0:z;l.set(y,{left:y.e_l-E+"px",top:y.e_t-z+"px",width:q+"px",height:x+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(n,
m){n=n.childNodes;var h=n.length;if(0<h)for(--h;0<=h;h--)m.appendChild(n[h])},_scale:function(n,m){var h=k._css.names,v=this._passive;l.set(v,h.transition,m?"none":h.transformName+" "+g.defaults.map.zoomDuration+"ms ease");({})[h.transform]=k._css.matrix(n);l.set(v,h.transform,k._css.matrix(n))},_resize:function(n,m,h){l.set(this._active,{width:m+"px",height:h+"px"});l.set(this._passive,{width:m+"px",height:h+"px"})}});return t})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(e,u,B,A,p,l,k,g,d){return e(g,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(c){this.spatialReference=new l({wkid:102100});this.tileInfo=new d({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=
new k({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new k({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=c&&c.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=c?c.displayLevels:null;this.copyright=c&&c.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
this.loaded=!0;this.onLoad(this);(c=c&&c.loadCallback)&&c(this)},getTileUrl:function(c,a,b){c=this.tileServers[a%this.serversLength]+"/"+c+"/"+b+"/"+a+".png";c=p.normalize(c);c=this.addTimestampToURL(c);return p.addProxy(c)}})})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom require require".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z){return e([x,E,g],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(D,F){this.initialize();u.mixin(this,D);this.domNode=c.byId(F);F=this._nls=u.mixin({},z.widgets.popup);D=this.domNode;b.add(D,"esriPopup");(this._isRTL=
!t.isBodyLtr())&&n.set(D,"direction","rtl");a.set(D,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+F.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+F.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+F.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
F.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+F.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+F.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+F.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=p.query(".sizer",D);F=p.query(".titlePane",D)[0];this._title=p.query(".title",F)[0];this._prevFeatureButton=p.query(".prev",F)[0];this._nextFeatureButton=p.query(".next",F)[0];this._maxButton=p.query(".maximize",F)[0];this._spinner=p.query(".spinner",F)[0];this._contentPane=p.query(".contentPane",D)[0];this._positioner=p.query(".esriPopupWrapper",D)[0];this._pointer=p.query(".pointer",D)[0];this._outerPointer=p.query(".outerPointer",D)[0];this._actionList=p.query(".actionsPane .actionList",
D)[0];this._contentUpdateHandles={};this._eventConnections=[A.connect(p.query(".close",F)[0],"onclick",this,this.hide),A.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),A.connect(this._nextFeatureButton,"onclick",this,this.selectNext),A.connect(this._maxButton,"onclick",this,this._toggleSize),A.connect(p.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),A.connect(this,"onClearFeatures",this,this._featuresCleared),A.connect(this,"onSelectionChange",this,this._featureSelected),
A.connect(this,"onDfdComplete",this,this._updateUI)];l("esri-touch")&&(D=r.setScrollable(this._contentPane),this._eventConnections.push(D[0],D[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(D){this.inherited(arguments);f.place(this.domNode,D.root);this.highlight&&this.enableHighlight(D);this._maxHeight=n.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(D){this.popupWindow&&
(v.isDefined(D)&&""!==D||(D="\x26nbsp;"),this.destroyDijits(this._title),this.place(D,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(D){this.popupWindow&&(v.isDefined(D)&&""!==D||(D="\x26nbsp;"),this._destroyContent(),this.place(D,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(D,F){if(this.popupWindow)if(this._delayHide=!1,D){var J=this.map;D.spatialReference?(this.location=D,D=J.toScreen(D)):this.location=
J.toMap(D);var L=J._getFrameWidth();if(-1!==L&&(D.x%=L,0>D.x&&(D.x+=L),J.width>L))for(J=(J.width-L)/2;D.x<J;)D.x+=L;this._maximized?this.restore():this._setPosition(D);F&&F.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(D,F){this.popupWindow&&(this._sizers.style({width:D+"px"}),n.set(this._contentPane,"maxHeight",F+"px"),this._maxHeight=F,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(D){return B.map(D,function(F){var J=f.create("a",{href:"javascript:void(0);",className:"action "+
F.className,title:F.title,innerHTML:F.title},this._actionList);A.connect(J,"onclick",F.callback);return{action:F,node:J}},this)},removeActions:function(D){B.forEach(D,function(F){f.destroy(F.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var D=this.map;if(D&&!this._maximized&&this.popupWindow){this._maximized=!0;var F=this._maxButton;b.remove(F,"maximize");b.add(F,"restore");a.set(F,"title",this._nls.NLS_restore);F=this.marginLeft;var J=this.marginTop,L=D.width-2*F;
D=D.height-2*J;n.set(this.domNode,{left:this._isRTL?null:F+"px",right:this._isRTL?F+"px":null,top:J+"px",bottom:null});n.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=n.get(this._sizers[0],"width");this._savedHeight=n.get(this._contentPane,"maxHeight");this._sizers.style({width:L+"px"});n.set(this._contentPane,{maxHeight:D-65+"px",height:D-65+"px"});this._showPointer("");this._unfollowMap();b.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var D=this._maxButton;b.remove(D,"restore");b.add(D,"maximize");a.set(D,"title",this._nls.NLS_maximize);n.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();b.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();B.forEach(this._eventConnections,A.disconnect);f.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(D,F){this._transientAnchor=
F&&F.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(D){D||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(D){var F=this.highlight,J=this.map;this.highlight=D;if(J&&D!==F)if(D){if(this.enableHighlight(J),D=this.features&&this.features[this.selectedIndex])this.updateHighlight(J,D),this.showHighlight()}else this.disableHighlight(J)},_pagingControlsSetter:function(D){var F=this.pagingControls,J=this.map;this.pagingControls=D;
J&&D!==F&&this._updatePagingControls()},_pagingInfoSetter:function(D){var F=this.pagingInfo,J=this.map;this.pagingInfo=D;J&&D!==F&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(D){var F=this.popupWindow,J=this.map;this.popupWindow=D;J&&D!==F&&(D?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(D){var F=this.anchor;this.anchor=D;this.map&&D!==F&&this.reposition()},_startupContent:function(){var D=this._contentPane;
this.startupDijits(D);B.forEach(this._getPopupRendererDijits(D),function(F){if(!this._contentUpdateHandles[F.id]){var J=F.on("content-update",u.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[F.id]=J}},this)},_destroyContent:function(){var D=this._contentPane;B.forEach(this._getPopupRendererDijits(D),function(F){var J=this._contentUpdateHandles[F.id];J&&(J.remove(),delete this._contentUpdateHandles[F.id])},this);this.destroyDijits(D)},_getPopupRendererDijits:function(D){D=this.getDijits(D);
return D=B.filter(D,function(F){return F&&F.set&&/_PopupRenderer/.test(F.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var D=this.selectedIndex;if(0<=D){var F=this.features[D].getContent();if(!this.titleInBody&&F&&u.isString(F.id)){var J=m.byId(F.id);J&&J.set&&/_PopupRenderer/.test(J.declaredClass)&&
J.set("showTitle",!1)}this.setContent(F);this.updateHighlight(this.map,this.features[D]);this.showHighlight()}},_toggleVisibility:function(D){this._setVisibility(D);this.isShowing=D},_setVisibility:function(D){b.toggle(this.domNode,"esriPopupVisible",D);b.toggle(this.domNode,"esriPopupHidden",!D)},_waitAndHide:function(D){var F=this;this._delayHide=!0;setTimeout(function(){F._delayHide&&(F._delayHide=!1,F.hide())},D)},_followMap:function(){this._unfollowMap();var D=this.map;this._handles=[A.connect(D,
"onPanStart",this,this._onPanStart),A.connect(D,"onPan",this,this._onPan),A.connect(D,"onZoomStart",this,this._onZoomStart),A.connect(D,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var D=this._handles;D&&(B.forEach(D,A.disconnect),this._handles=null)},_onPanStart:function(){var D=this.domNode.style;this._panOrigin={left:D.left,top:D.top,right:D.right,bottom:D.bottom}},_onPan:function(D,F){var J=this._panOrigin;D=F.x;F=F.y;var L=J.left,Q=J.top,ba=J.right;J=J.bottom;L&&(L=parseFloat(L)+
D+"px");Q&&(Q=parseFloat(Q)+F+"px");ba&&(ba=parseFloat(ba)-D+"px");J&&(J=parseFloat(J)-F+"px");n.set(this.domNode,{left:L,top:Q,right:ba,bottom:J})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(D,F,J){J&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(D){var F=
D.x,J=D.y;D=this.offsetX||0;var L=this.offsetY||0,Q=0,ba=0,fa=this.map,Y=fa.position.x,ma=fa.position.y,ca=fa.width,la=fa.height;fa="Left";var ta="bottom",za="right",P="top",ea=t.getContentBox(this._positioner),ra=ea.w/2,M=ea.h/2,Z=n.get(this._sizers[0],"height")+this._maxHeight+n.get(this._sizers[2],"height"),ka=Z/2,qa=0,ua=0,Aa=ca,ya=la,G=F,I=J,R=this._getTargetAnchor().toLowerCase();if("auto"===R){if(R=k.getBox)R=R(),qa=Math.max(R.l,Y),Aa=Math.min(R.l+R.w,Y+ca),ua=Math.max(R.t,ma),ya=Math.min(R.t+
R.h,ma+la),G+=Y,I+=ma;Y=I-ua>=Z;ma=ya-I>=Z;ca=Aa-G>=ea.w;ea=G-qa>=ea.w;I-ua>ka&&ya-I>=ka&&(ca?(ta="",fa="Left",P="",za="right"):ea&&(ta="",fa="Right",P="",za="left"));fa&&ta&&G-qa>ra&&Aa-G>=ra&&(Y?(fa="",ta="bottom",za="",P="top"):ma&&(fa="",ta="top",za="",P="bottom"));fa&&ta&&(ca&&Y?(fa="Left",ta="bottom",za="right",P="top"):ca&&ma?(fa="Left",ta="top",za="right",P="bottom"):ea&&ma?(fa="Right",ta="top",za="left",P="bottom"):ea&&Y&&(fa="Right",ta="bottom",za="left",P="top"));this._anchor=P&&za?P+"-"+
za:P||za}else ta=fa="",-1!==R.indexOf("top")?ta="bottom":-1!==R.indexOf("bottom")&&(ta="top"),-1!==R.indexOf("left")?fa="Right":-1!==R.indexOf("right")&&(fa="Left"),this._anchor=this._getTargetAnchor();za=ta+fa;switch(za){case "top":case "bottom":ba=14;break;case "Left":case "Right":Q=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":ba=14,Q=-16}n.set(this.domNode,{left:F+"px",top:J+"px",right:null,bottom:null});F={left:null,right:null,top:null,bottom:null};fa?F[fa.toLowerCase()]=
Q+D+"px":F.left=-ra+"px";ta?F[ta]=ba+L+"px":F.top=-M+"px";n.set(this._positioner,F);this._showPointer(za)},_showPointer:function(D){b.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));b.remove(this._outerPointer,["right","left","hidden"]);"Right"===D||"Left"===D?(D=D.toLowerCase(),b.add(this._outerPointer,D)):b.add(this._pointer,D)},_setPagerCallbacks:function(D,F,J){if(this.pagingControls&&(D!==this||this._pagerScope&&this._pagerScope!==this)&&
D!==this._pagerScope){this._pagerScope=D;D===this&&(F=this.selectPrevious,J=this.selectNext);var L=this._eventConnections;A.disconnect(L[1]);A.disconnect(L[2]);F&&(L[1]=A.connect(this._prevFeatureButton,"onclick",D,F));J&&(L[2]=A.connect(this._nextFeatureButton,"onclick",D,J))}},_getLocation:function(D){var F=D&&D.geometry;if(F)switch(F.type){case "point":var J=F;if(D.isAggregate()){D=D.getChildGraphics();var L=D[0];D=(L=L.geometry&&L.geometry.spatialReference)&&new y({points:B.map(D,function(Q){Q=
Q.geometry;return[Q.x,Q.y]}),spatialReference:L.toJson()});L=q.getDenormalizedExtent(D)}break;case "multipoint":J=F.getPoint(0);L=q.getDenormalizedExtent(F);break;case "polyline":case "polygon":J=F.getPoint(0,0),L=q.getDenormalizedExtent(F)}return[J,L]},_zoomToFeature:function(D){D.preventDefault();var F=this.features,J=this.selectedIndex;D=this.map;if(F)if(J=this._getLocation(F[J]),F=J[0],J=J[1],F||(F=this.location),J&&J.intersects(this.location)||(this.location=F),J&&J.getWidth()&&J.getHeight())D.setExtent(J,
!0);else{var L=D.getNumLevels();J=D.getLevel();var Q=D.getMaxZoom(),ba=this.zoomFactor||1;0<L?J!==Q&&(L=J+ba,L>Q&&(L=Q),D.navigationManager._wheelZoom({value:L-J,mapPoint:F},!0)):D.navigationManager._wheelZoom({value:1/Math.pow(2,ba)*2,mapPoint:F},!0)}},_updatePagingControls:function(){var D=this._prevFeatureButton,F=this._nextFeatureButton,J=this.selectedIndex,L=this.features?this.features.length:0;this.pagingControls&&1<L?(0===J?b.add(D,"hidden"):b.remove(D,"hidden"),J===L-1?b.add(F,"hidden"):b.remove(F,
"hidden")):(b.add(D,"hidden"),b.add(F,"hidden"))},_updatePagingInfo:function(){var D=this.features?this.features.length:0,F=this._nls,J="\x26nbsp;";this.pagingInfo&&1<D&&F.NLS_pagingInfo&&(J=v.substitute({index:this.selectedIndex+1,total:D},F.NLS_pagingInfo));D&&(F=this.getSelectedFeature(),D=F.getInfoTemplate(),F=F.getTitle(),D&&!/esri\.InfoTemplate/.test(D.declaredClass)&&this.titleInBody||!F||(J=F+("\x26nbsp;"===J?"":" "+J)));this.setTitle(J)},_updateUI:function(){if(this.popupWindow){var D=this.features,
F=this.deferreds,J=D?D.length:0,L=this._spinner,Q=this._actionList,ba=this._nls;this._updatePagingControls();this._updatePagingInfo();J?b.remove(Q,"hidden"):b.add(Q,"hidden");F&&F.length?D?b.remove(L,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+ba.NLS_searching+"...\x3c/div\x3e"):b.add(L,"hidden");J||F&&F.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+ba.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}})})},
"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b){function f(x,E){return Math.ceil((x-E)/(2*E))}function t(x,E){var z=x.paths||x.rings,D,F,J=z.length;for(D=0;D<J;D++){var L=z[D].length;for(F=0;F<L;F++){var Q=x.getPoint(D,F);x.setPoint(D,F,Q.offset(E,0))}}return x}function n(x,E){if(!(x instanceof
d||x instanceof c))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var z=x instanceof d,D=[],F;e.forEach(z?x.paths:x.rings,function(J){D.push(F=[]);F.push([J[0][0],J[0][1]]);var L,Q;for(L=0;L<J.length-1;L++){var ba=J[L][0];var fa=J[L][1];var Y=J[L+1][0];var ma=J[L+1][1];var ca=Math.sqrt((Y-ba)*(Y-ba)+(ma-fa)*(ma-fa));var la=(ma-fa)/ca;var ta=(Y-ba)/ca;var za=ca/E;if(1<
za){for(Q=1;Q<=za-1;Q++){var P=Q*E;var ea=ta*P+ba;P=la*P+fa;F.push([ea,P])}Q=(ca+Math.floor(za-1)*E)/2;ea=ta*Q+ba;P=la*Q+fa;F.push([ea,P])}F.push([Y,ma])}});return z?new d({paths:D,spatialReference:x.spatialReference}):new c({rings:D,spatialReference:x.spatialReference})}function m(x,E,z){E&&(x=n(x,1E6),x=a.webMercatorToGeographic(x,!0));z&&(x=t(x,z));return x}function h(x,E,z){var D=x.x||x[0];if(D>E){var F=f(D,E);x.x?x=x.offset(-2*F*E,0):x[0]=D+-2*F*E}else D<z&&(F=f(D,z),x.x?x=x.offset(-2*F*z,0):
x[0]=D+-2*F*z);return x}function v(x,E){var z=-1;e.forEach(E.cutIndexes,function(D,F){var J=E.geometries[F];e.forEach(J.rings||J.paths,function(L,Q){e.some(L,function(ba){if(!(180>ba[0])){ba=0;var fa,Y=L.length;for(fa=0;fa<Y;fa++){var ma=L[fa][0];ba=ma>ba?ma:ba}ba=Number(ba.toFixed(9));ba=-360*f(ba,180);Y=L.length;for(fa=0;fa<Y;fa++)ma=J.getPoint(Q,fa),J.setPoint(Q,fa,ma.offset(ba,0))}return!0})});D===z?J.rings?e.forEach(J.rings,function(L){x[D]=x[D].addRing(L)}):e.forEach(J.paths,function(L){x[D]=
x[D].addPath(L)}):(z=D,x[D]=J)});return x}function r(x,E,z,D){var F=new B;F.addCallbacks(z,D);E=E||l.defaults.geometryService;var J=[],L=[],Q,ba,fa,Y,ma,ca,la,ta,za=0;e.forEach(x,function(M){if(M)if(Q||(Q=M.spatialReference,ba=Q._getInfo(),Y=(fa=Q._isWebMercator())?2.0037508342788905E7:180,ma=fa?-2.0037508342788905E7:-180,ca=fa?102100:4326,la=new d({paths:[[[Y,ma],[Y,Y]]],spatialReference:{wkid:ca}}),ta=new d({paths:[[[ma,ma],[ma,Y]]],spatialReference:{wkid:ca}})),ba){var Z=b.fromJson(M.toJson()),
ka=M.getExtent();"point"===M.type?J.push(h(Z,Y,ma)):"multipoint"===M.type?(Z.points=e.map(Z.points,function(qa){return h(qa,Y,ma)}),J.push(Z)):"extent"===M.type?(Z=ka._normalize(null,null,ba),J.push(Z.rings?new c(Z):Z)):ka?(M=2*f(ka.xmin,ma)*Y,Z=0===M?Z:t(Z,M),ka=ka.offset(M,0),ka.intersects(la)&&ka.xmax!==Y?(za=ka.xmax>za?ka.xmax:za,Z=m(Z,fa),L.push(Z),J.push("cut")):ka.intersects(ta)&&ka.xmin!==ma?(za=2*ka.xmax*Y>za?2*ka.xmax*Y:za,Z=m(Z,fa,360),L.push(Z),J.push("cut")):J.push(Z)):J.push(Z)}else J.push(M);
else J.push(M)});z=new d;D=f(za,Y);for(var P=-90,ea=D;0<D;){var ra=-180+360*D;z.addPath([[ra,P],[ra,-1*P]]);P*=-1;D--}0<L.length&&0<ea?E?E.cut(L,z,function(M){L=v(L,M);var Z=[];e.forEach(J,function(ka,qa){"cut"===ka&&(ka=L.shift(),x[qa].rings&&1<x[qa].rings.length&&ka.rings.length>=x[qa].rings.length?(J[qa]="simplify",Z.push(ka)):J[qa]=!0===fa?a.geographicToWebMercator(ka):ka)});0<Z.length?E.simplify(Z,function(ka){e.forEach(J,function(qa,ua){"simplify"===qa&&(J[ua]=!0===fa?a.geographicToWebMercator(ka.shift()):
ka.shift())});F.callback(J)},function(ka){F.errback(ka)}):F.callback(J)},function(M){F.errback(M)}):F.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(e.forEach(J,function(M,Z){"cut"===M&&(M=L.shift(),J[Z]=!0===fa?a.geographicToWebMercator(M):M)}),F.callback(J));return F}function C(x,E,z,D){var F=!1,J;u.isObject(x)&&x&&(u.isArray(x)?x.length&&((J=x[0]&&x[0].declaredClass)&&-1!==J.indexOf("Graphic")?(x=e.map(x,function(L){return L.geometry}),F=x.length?
!0:!1):J&&-1!==J.indexOf("esri.geometry.")&&(F=!0)):(J=x.declaredClass)&&-1!==J.indexOf("FeatureSet")?(x=e.map(x.features||[],function(L){return L.geometry}),F=x.length?!0:!1):J&&-1!==J.indexOf("esri.geometry.")&&(F=!0));F&&E.push({index:z,property:D,value:x})}function w(x,E){var z=[];e.forEach(E,function(D){var F=D.i,J=x[F];D=D.p;var L;if(u.isObject(J)&&J)if(D)if("*"===D[0])for(L in J)J.hasOwnProperty(L)&&C(J[L],z,F,L);else e.forEach(D,function(Q){C(u.getObject(Q,!1,J),z,F,Q)});else C(J,z,F)});return z}
function y(x,E){var z=0,D={};e.forEach(E,function(F){var J=F.index,L=F.property,Q=F.value,ba=Q.length||1,fa=x.slice(z,z+ba);u.isArray(Q)||(fa=fa[0]);z+=ba;delete F.value;L?(D[J]=D[J]||{},D[J][L]=fa):D[J]=fa});return D}function q(x){for(var E=[],z=0,D=0,F=Math.min,J=Math.max,L=0;L<x.length;L++){for(var Q=x[L],ba=null,fa=0;fa<Q.length;fa++)ba=Q[fa],E.push(ba),0===fa?D=z=ba[0]:(z=F(z,ba[0]),D=J(D,ba[0]));ba&&E.push([(z+D)/2,0])}return E}return{normalizeCentralMeridian:r,_foldCutResults:v,_prepareGeometryForCut:m,
_offsetMagnitude:f,_pointNormalization:h,_updatePolyGeometry:t,_straightLineDensify:n,_createWrappers:function(x){var E=u.isObject(x)?x.prototype:u.getObject(x+".prototype");e.forEach(E.__msigns,function(z){var D=E[z.n];E[z.n]=function(){var F=this,J=[],L,Q=new B(k._dfdCanceller);z.f&&k._fixDfd(Q);for(L=0;L<z.c;L++)J[L]=arguments[L];var ba={dfd:Q};J.push(ba);var fa=[],Y;if(F.normalization&&!F._isTable){var ma=w(J,z.a);e.forEach(ma,function(ca){fa=fa.concat(ca.value)});fa.length&&(Y=r(fa))}Y?(Q._pendingDfd=
Y,Y.addCallbacks(function(ca){Q.canceled||(ba.assembly=y(ca,ma),Q._pendingDfd=D.apply(F,J))},function(ca){var la=F.declaredClass;la&&-1!==la.indexOf("FeatureLayer")?F._resolve([ca],null,J[z.e],Q,!0):F._errorHandler(ca,J[z.e],Q)})):Q._pendingDfd=D.apply(F,J);return Q}})},_disassemble:w,_addToBucket:C,_reassemble:y,getDenormalizedExtent:function(x){if(!x)return null;var E=x.getExtent();if(!E)return null;var z=x.spatialReference&&x.spatialReference._getInfo();if(!z)return E;var D=z.valid[0];z=z.valid[1];
var F=2*z,J=E.getWidth(),L=E.xmax,Q=E.xmin;if("extent"===x.type||0===J||J<=z||J>F||L<D||Q>z)return E;switch(x.type){case "polygon":if(1<x.rings.length)var ba=q(x.rings);else return E;break;case "polyline":if(1<x.paths.length)ba=q(x.paths);else return E;break;case "multipoint":ba=x.points}x=Math.min;D=Math.max;F=new g(E.toJson());for(var fa=0;fa<ba.length;fa++){var Y=ba[fa][0];0>Y?(Y+=z,Q=D(Y,Q)):(Y-=z,L=x(Y,L))}F.xmin=L;F.xmax=Q;return F.getWidth()<J?(F.xmin-=z,F.xmax-=z,F):E}}})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(e,u,B,A,p,l,k,g,d){function c(t,n,m){var h=t.rings||t.paths,v,r;var C=0;for(v=h.length;C<v;C++){var w=h[C];var y=0;for(r=w.length;y<r;y++){var q=w[y];if(0<y)x+=q[0],E+=q[1];else{var x=q[0];var E=q[1]}q[0]=n(x);q[1]=m(E)}}return t}var a={esriGeometryPoint:function(t,n,m){t.x=n(t.x);t.y=m(t.y);return t},esriGeometryPolyline:c,esriGeometryPolygon:c,esriGeometryEnvelope:function(t,n,m){t.xmin=n(t.xmin);t.ymin=m(t.ymin);t.xmax=n(t.xmax);t.ymax=m(t.ymax);return t},esriGeometryMultipoint:function(t,
n,m){var h=t.points,v;var r=0;for(v=h.length;r<v;r++){var C=h[r];if(0<r)w+=C[0],y+=C[1];else{var w=C[0];var y=C[1]}C[0]=n(w);C[1]=m(y)}return t}},b={esriGeometryPoint:function(t,n,m){t.x=n(t.x);t.y=m(t.y);return t}},f={createInstance:function(t,n){t=new t;n&&A.mixin(t,n);return t},fromJson:function(t){if(void 0!==t.x&&void 0!==t.y)return new p(t);if(void 0!==t.paths)return new l(t);if(void 0!==t.rings)return new k(t);if(void 0!==t.points)return new g(t);if(void 0!==t.xmin&&void 0!==t.ymin&&void 0!==
t.xmax&&void 0!==t.ymax)return new d(t)},getJsonType:function(t){return t instanceof p?"esriGeometryPoint":t instanceof l?"esriGeometryPolyline":t instanceof k?"esriGeometryPolygon":t instanceof d?"esriGeometryEnvelope":t instanceof g?"esriGeometryMultipoint":null},getGeometryType:function(t){return"esriGeometryPoint"===t?p:"esriGeometryPolyline"===t?l:"esriGeometryPolygon"===t?k:"esriGeometryEnvelope"===t?d:"esriGeometryMultipoint"===t?g:null},supportsLazyUnquantization:function(t){return"esriGeometryPoint"===
t||"esriGeometryPolyline"===t||"esriGeometryPolygon"===t||"esriGeometryMultipoint"===t},unquantizeFunction:function(t,n){if(t&&n){var m=n.translate[0],h=n.translate[1],v=n.scale[0],r=n.scale[1],C=function(q){return q*v+m},w=function(q){return h-q*r},y=a[t];return function(q){return q?y(q,C,w):null}}},unquantize:function(t,n,m){if(n=f.unquantizeFunction(n,m)){var h=t.length;for(m=0;m<h;m++)n(t[m].geometry)}},quantizeFunction:function(t,n){if(t&&"esriGeometryPoint"===t&&n){var m=n.translate[0],h=n.translate[1],
v=n.scale[0],r=n.scale[1],C=function(q){return Math.round((q-m)/v)},w=function(q){return Math.round((h-q)/r)},y=b[t];return function(q){return q?y(q,C,w):null}}},quantize:function(t,n,m){if(n=f.quantizeFunction(n,m)){var h=t.length;for(m=0;m<h;m++)n(t[m].geometry)}}};return f})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a){return e(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var b=u.hitch;this.__set_title=b(this,this.__set_title);this.__err_title=b(this,this.__err_title);this.__set_content=b(this,this.__set_content);this.__err_content=b(this,this.__err_content)},setMap:function(b){this.map=b},unsetMap:function(b){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},
place:function(b,f){c.isDefined(b)?u.isObject(b)?l.place(b,f,"only"):f.innerHTML=b:f.innerHTML=""},startupDijits:function(b){this._processDijits(b)},destroyDijits:function(b){this._processDijits(b,!0)},getDijits:function(b){var f=[];b&&1===b.children.length&&(b=b.children[0])&&(f=(f=g.byNode(b))?[f]:g.findWidgets(b));return f},_processDijits:function(b,f){b=this.getDijits(b);B.forEach(b,function(t){if(f){if(t._started&&!t._destroyed)try{t.destroyRecursive?t.destroyRecursive():t.destroy&&t.destroy()}catch(n){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+
n.message)}}else if(!t._started)try{t.startup()}catch(n){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+n.message)}})},__registerMapListeners:function(){this.__unregisterMapListeners();var b=this.map;this.__handles=[A.connect(b,"onPan",this,this.__onMapPan),A.connect(b,"onZoomStart",this,this.__onMapZmStart),A.connect(b,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var b=this.__handles;b&&(B.forEach(b,A.disconnect,A),this.__handles=
null)},__onMapPan:function(b,f){this.move(f,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new a(this.coords));this.hide(null,!0)},__onMapExtChg:function(b,f,t){b=this.map;var n=this.mapCoords;n?this.show(n,null,!0):(f=t?b.toScreen(this.__mcoords):this.coords.offset(f&&f.x||0,f&&f.y||0),this.show(f,null,!0))},__setValue:function(b,f){this[b].innerHTML="";var t="_dfd"+b,n=this[t];n&&-1===n.fired&&(n.cancel(),this[t]=null);c.isDefined(f)&&(f instanceof p?(this[t]=f,f.addCallbacks(this["__set"+
b],this["__err"+b])):this.__render(b,f))},__set_title:function(b){this._dfd_title=null;this.__render("_title",b)},__err_title:function(b){this._dfd_title=null},__set_content:function(b){this._dfd_content=null;this.__render("_content",b)},__err_content:function(b){this._dfd_content=null},__render:function(b,f){var t=this[b];this.place(f,t);this.isShowing&&(this.startupDijits(t),"_title"===b&&this._adjustContentArea&&this._adjustContentArea())}})})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented require".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v){function r(C){return"sizeInfo"===C.type}return e(v,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",u.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",u.hitch(this,this._processFeatures));this.on("set-features",u.hitch(this,this._processFeatures));this.on("selection-change",u.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(C){if(C&&C.length){this.clearFeatures(!0);var w,y;C[0]instanceof p?y=C:w=C;w?this._updateFeatures(null,w):(this.deferreds=y,y=y.slice(0),B.forEach(y,function(q){q.addBoth(u.hitch(this,
this._updateFeatures,q))},this))}},clearFeatures:function(C){this.features=this.deferreds=this._marked=null;this.count=0;var w=this.selectedIndex;this.selectedIndex=-1;if(-1<w)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!C})},getSelectedFeature:function(){var C=this.features;if(C)return C[this.selectedIndex]},select:function(C){0>C||C>=this.count||(this.selectedIndex=C,this.onSelectionChange())},enableHighlight:function(C){this._highlighted=C.graphics.add(new g(new d(0,0,C.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(C);this.markerSymbol||(C=this.markerSymbol=new f,C.setStyle(f.STYLE_TARGET),C._setDim(16,16,0),C.setOutline(new n(t.STYLE_SOLID,new A([0,255,255]),2,n.CAP_ROUND,n.JOIN_ROUND)),C.setColor(new A([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new t(t.STYLE_SOLID,new A([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new m(m.STYLE_NULL,new t(t.STYLE_SOLID,new A([0,255,255]),2),new A([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new m(m.STYLE_SOLID,new t(t.STYLE_SOLID,new A([0,255,255]),1.33),null))},disableHighlight:function(C){var w=this._highlighted;w&&(w.hide(),C.graphics.remove(w),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var C=this.features&&this.features[this.selectedIndex];this._highlighted&&C&&C.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(C,w){var y=w.geometry,q=this._highlighted;if(y&&q){q.hide();!q._graphicsLayer&&C&&C.graphics.add(q);q.setGeometry(c.fromJson(y.toJson()));switch(y.type){case "point":case "multipoint":var x=w.getLayer(),E=w.symbol||x&&x._getSymbol(w);if(x&&E){var z;y=E.xoffset||0;var D=E.yoffset||0,F=E.angle||0;switch(E.type){case "simplemarkersymbol":var J=z=E.size||0;break;case "picturemarkersymbol":J=E.width||0;z=E.height||0;break;case "textsymbol":J=z=E.font&&E.font.size||0}var L=w.symbol?
null:x._getRenderer(w);(x=this._getSizeInfo(L))?C=w=L.getSize(w,{sizeInfo:x,shape:E.style,resolution:C&&C.getResolutionInMeters&&C.getResolutionInMeters()}):null!=w.size?C=w=w.size:(C=J,w=z);L=this.markerSymbol;C&&w&&(y&&(y=y/J*C),D&&(D=D/z*w),L._setDim(C+4,w+4,0));L.setOffset(y,D);L.setAngle(F)}break;case "polyline":L=this.lineSymbol;break;case "polygon":L=this.fillSymbol}q.setSymbol(L)}else q&&q.hide()},showClosestFirst:function(C){var w=this.features;if(w&&w.length){if(1<w.length){var y,q=Infinity,
x=-1,E,z=a.getLength,D=C.spatialReference;C=C.normalize();for(y=w.length-1;0<=y;y--)if(E=w[y].geometry){var F=E.spatialReference;var J=0;try{var L="point"===E.type?E:E.getExtent().getCenter();L=L.normalize();D&&F&&!D.equals(F)&&D._canProject(F)&&(L=D.isWebMercator()?b.geographicToWebMercator(L):b.webMercatorToGeographic(L));J=z(C,L)}catch(Q){}0<J&&J<q&&(q=J,x=y)}0<x&&(w.splice(0,0,w.splice(x,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=C)},_trackMapLevelChange:function(C){this._untrackMapLevelChange();
this._mapLevelChangeHandle=C.on("extent-change",u.hitch(this,function(w){w.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(C){C=B.indexOf(this.deferreds,C);if(-1!==C)return this.deferreds.splice(C,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(C){var w=this._marked;w&&(this._marked=null,this.showClosestFirst(w));this.onDfdComplete(C)},
_updateFeatures:function(C,w){if(C){if(this.deferreds&&(C=this._unbind(C)))if(w&&w instanceof Error){if(this._fireComplete(w),2===C)this.onSetFeatures()}else if(w&&w.length)if(this.features){if(w=B.filter(w,function(y){return-1===B.indexOf(this.features,y)},this),this.features=this.features.concat(w),this.count=this.features.length,this._fireComplete(),2===C)this.onSetFeatures()}else{this.features=w;this.count=w.length;this.selectedIndex=0;this._fireComplete();if(2===C)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===C)this.onSetFeatures()}else this.features=w,this.count=w.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(C){return C?C.sizeInfo||B.filter(C.visualVariables,r)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};B.forEach(this._updateEndHandles,function(C){C.remove()});this._updateEndHandles=[]},_processFeatures:function(){B.forEach(this.features,function(C){(C=C.getLayer())&&!this._featureLayers[C.id]&&(1===C.currentMode||0===C.currentMode&&
6===C.mode)&&C.objectIdField&&C.hasXYFootprint&&C.queryFeatures&&(this._featureLayers[C.id]=C,C=C.on("update-end",u.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(C))},this)},_fLyrUpdateEndHandler:function(C){if(!C.error){var w=this,y=C.target,q=y.getSelectedFeatures(),x=0===y.currentMode&&6===y.mode,E={},z=[];B.forEach(this.features,function(D){if(D.getLayer()===y){var F=D.attributes[y.objectIdField];E[F]=D;z.push(F)}});z.length&&(C=new h,C.objectIds=z,y.queryFeatures(C,function(D){B.forEach(D.features,
function(F){var J=E[F.attributes[y.objectIdField]],L=!1;J.geometry!==F.geometry||y.hasWebGLSurface()?(J.setGeometry(F.geometry),L=!0):x&&q&&-1!==B.indexOf(q,F)&&(L=!0);L&&this._highlighted&&J===this.getSelectedFeature()&&this._highlighted.setGeometry(F.geometry)},w)}))}},_checkFeatureResolution:function(){var C=this.getSelectedFeature(),w=this.map;if(C&&w){var y=C.getLayer();if(y){var q=C.getResolution();2===y.currentMode&&C.geometry&&q&&q>w.getResolution()&&(w=w.getResolutionForPopup(),(y=this._refetchFeature(C,
w,y))&&y.then(u.hitch(this,this._updateFeatureResolution,C,w)))}}},_refetchFeature:function(C,w,y){if(C=this._createQueryForCustomResolution(C,w,y))return y.queryFeatures(C).then(function(q){return q&&q.features[0]})},_createQueryForCustomResolution:function(C,w,y){y=y.objectIdField;var q=C.attributes;q=q&&y&&q[y];if(null==q)return null;var x=new h;x.objectIds=[q];x.maxAllowableOffset=w;x.outFields=[y];x.outSpatialReference=C.geometry.spatialReference;return x},_updateFeatureResolution:function(C,
w,y){C.getResolution()!==w&&(C.setResolution(w),C.setGeometry(y.geometry),this._highlighted&&C===this.getSelectedFeature()&&this._highlighted.setGeometry(C.geometry))}})})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(e,u,B,A,p,l,k,g,d){function c(){}e=e(null,{declaredClass:"esri.Graphic",constructor:function(a,b,f,t){this._construct();a&&!a.declaredClass?(this.geometry=
a.geometry?g.fromJson(a.geometry):null,this.symbol=a.symbol?d.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new k(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=f,this.infoTemplate=t)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,
_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(a){this._parentGraphic=a},setSize:function(a){this.size=a;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(a){this._aggregationSourceLayer=a;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(a){this._aggregationInfo=
a;return this},getChildGraphics:function(){var a=this.getAggregationSourceLayer();return a?a.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,f,t=a.length,n=[];for(f=0;f<t;f++)(b=a[f]&&a[f].getNode())&&b.nodeType&&n.push(b);return n},getLayer:function(){return this._layer},
getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var a=new this.constructor(this.toJson());a.visible=this.visible;a._layer=this._layer;a._sourceLayer=this._sourceLayer;a._aggregationSourceLayer=this._aggregationSourceLayer;a._aggregationInfo=this._aggregationInfo;a._resolution=this._resolution;return a},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;this._geomVersion++;var b=this._graphicsLayer;b&&
(b._updateExtent(this),this.draw(),a&&"polyline"===a.type&&b._updateSVGMarkers());return this},setResolution:function(a){this._resolution=a;return this},getResolution:function(){return this._resolution},setSymbol:function(a,b){var f=this._graphicsLayer,t=this._shape;this.symbol=a;f&&(b&&t&&f._removeShape(this),this.draw());return this},setAttributes:function(a){this.attributes=a;this.clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(u.isFunction(b))b=b.call(a,this);else if(u.isString(b)){var f=(a=this.getLayer())&&a._getDateOpts;b=l.substitute(this.attributes,b,{first:!0,dateFormat:f&&f.call(a)})}return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(u.isFunction(b))b=b.call(a,this);else if(u.isString(b)){var f=(a=this.getLayer())&&a._getDateOpts;
b=l.substitute(this.attributes,b,{dateFormat:f&&f.call(a)})}return b},attr:function(a,b){null==b||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[a]=b,this._setDataAttr(a,b));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var a;if(this.getShapes().length){var b=this.getNodes();var f=b.length;for(a=0;a<
f;a++)p.show(b[a])}else this.draw();(b=this._graphicsLayer)&&b._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var a=this._graphicsLayer,b,f;if(a){if("canvas-2d"===a.surfaceType)a._removeShape(this);else{var t=this.getNodes();if(f=t.length)for(b=0;b<f;b++)p.hide(t[b])}a._graphicVisibilityChanged(this)}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=u.mixin({},this.attributes));
this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_setDataAttr:function(a,b){var f=this.getNodes(),t,n=f.length;for(t=0;t<n;t++)this._setDOMDataAttr(f[t],a,b)},_setDOMDataAttr:function(a,b,f){null==f?a.removeAttribute(b):a.setAttribute(b,f)},_applyDataAttrs:function(){var a=this._dataAttrs;if(a){var b=this.getNodes(),f,t=b.length;for(f=0;f<t;f++)for(var n in a)this._setDOMDataAttr(b[f],n,a[n])}},_getViewInfo:function(a){return(a=
(a=a||this.getLayer())&&a.getMap())&&a.getViewInfo()},evaluateExpression:function(a,b){return this._getDataValue(a._attributeDef,a._attributeCache,null,null,a,b)},_getDataValue:function(a,b,f,t,n,m){var h=b.id,v=this.attributes,r=a.field,C=b.isNumeric,w=null;if(h){var y=this._computedAttributes,q=this._computedVersion,x=this._computedGeomVersion;t=this._getViewInfo(t);var E=!(!n||!n.async),z=m&&m.skipCache||E,D=!m||!1!==m.strictReturnType,F=b.dependsOnView||b.isJSFunc,J=b.dependsOnGeometry;y||(y=
this._computedAttributes={});F&&!q&&(q=this._computedVersion={});J&&!x&&(x=this._computedGeomVersion={});var L=F&&q[h]!==t.version||J&&x[h]!==this._geomVersion;w=y[h];if(void 0===w||L||z)w=null,b.hasExpr?w=n?n.evaluate(m&&m.context):f.executeFunction(b.compiledFunc,f.createExecContext(this,t)):b.isJSFunc?w=r(this,a):v&&(w=v[r],C&&this._isValidNumber(w)&&(b=a.normalizationType||"field",f=w,w=null,n=a.normalizationTotal,a=v[a.normalizationField],"log"===b&&0!==f?w=Math.log(f)*Math.LOG10E:"percent-of-total"===
b&&this._isValidNumber(n)&&0!==n?w=f/n*100:"field"===b&&this._isValidNumber(a)&&0!==a&&(w=f/a))),D&&(E?C&&(this._construct(),w=w.then(this._sanitizeNumericValue)):w=this._sanitizeValue(w,C)),z||(y[h]=w,F&&(q[h]=t.version),J&&(x[h]=this._geomVersion))}else v&&(w=this._sanitizeValue(v[r],C));return w},_sanitizeValue:function(a,b){b&&!this._isValidNumber(a)&&(a=null);return a},_sanitizeNumericValue:function(a){return this._sanitizeValue(a,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=
u.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a},clearCache:function(a){if(null!=a){var b=this._computedAttributes,f=this._computedVersion,t=this._computedGeomVersion;b&&(b[a]=void 0);f&&(f[a]=void 0);t&&(t[a]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});e.prototype.getShape=e.prototype.getDojoShape;c.prototype=e.prototype;e.simpleConstructor=
c;return e})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.InfoTemplate",constructor:function(l,k){l&&u.isObject(l)&&!u.isFunction(l)?u.mixin(this,l):(this.title=l||"${*}",this.content=k||"${*}")},setTitle:function(l){this.title=l;return this},setContent:function(l){this.content=l;return this},toJson:function(){return p.fixJson({title:this.title,content:this.content})}})})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a){var b={createDefaultSymbol:function(f){switch(f){case "esriGeometryPoint":case "esriGeometryMultipoint":var t=b.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":t=b.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":t=b.createDefaultFillSymbol()}return t},createDefaultMarkerSymbol:function(){return new p},createDefaultLineSymbol:function(){return new k},createDefaultFillSymbol:function(){return new d},
getFirstSupportedSymbol:function(f){var t;u.some(f,function(n){n&&-1<b.supportedSymbolTypes.indexOf(n.type)&&(t=n);return!!t});return t},isPointSymbol:function(f){return f?-1<b.supportedPointSymbolTypes.indexOf(f.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(f,t){var n=null;switch(f.type){case "esriSMS":n=new p(f);break;case "esriPMS":n=new l(f);break;case "esriTS":n=new a(f);
break;case "esriSLS":n=void 0!==f.cap?new g(f):new k(f);break;case "esriCLS":n=new g(f);break;case "esriSFS":n=new d(f);break;case "esriPFS":n=new c(f);break;default:n=(f=t&&t.geometryType)?b.createDefaultSymbol(f):null}return n},getShapeDescriptors:function(f){return f&&f.getShapeDescriptors?f.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};return b})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),
function(e,u,B,A,p,l,k,g){var d={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};e=e(g,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(c,a,b){c?u.isString(c)?(this.url=c,a&&(this.width=a),b&&(this.height=b)):(this.width=A.pt2px(null==c.width?d.width:c.width),this.height=A.pt2px(null==c.height?d.height:c.height),a=c.imageData,9>B("ie")||!a||(b=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+a,this.imageData=b)):(u.mixin(this,d),
this.width=A.pt2px(this.width),this.height=A.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(c){this.width=c;return this},setHeight:function(c){this.height=c;return this},setUrl:function(c){c!==this.url&&(delete this.imageData,delete this.contentType);this.url=c;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var c=this.url,a=this.imageData;if(0===c.indexOf("data:")){var b=c;c=a;a=b.indexOf(";base64,")+8;a=b.substr(a)}!u.isString(c)||0!==c.indexOf("/")&&0!==c.indexOf("//")&&0!==c.indexOf("./")&&0!==c.indexOf("../")||(c=k.getAbsoluteUrl(c));b=A.px2pt(this.width);b=isNaN(b)?void 0:b;var f=A.px2pt(this.height);f=isNaN(f)?void 0:f;c=l.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:c,imageData:a,contentType:this.contentType,width:b,height:f}));
delete c.color;delete c.size;c.imageData||delete c.imageData;return c}});e.defaultProps=d;return e})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(e,u,B,A,p,l,k,g){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",
STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},c={color:[0,0,0,1],style:d.STYLE_SOLID,width:1,cap:d.CAP_BUTT,join:d.JOIN_MITER,miterLimit:10};e=e(g,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},
_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(a,b,f,t,n,m){a?u.isString(a)?(this.style=a,b&&(this.color=b),void 0!==f&&(this.width=f),t&&(this.cap=t),n&&(this.join=n),void 0!==m&&(this.miterLimit=m)):(this.cap=k.valueOf(this._caps,a.cap),this.join=k.valueOf(this._joins,a.join),this.width=p.pt2px(a.width),this.miterLimit=p.pt2px(a.miterLimit)):(u.mixin(this,c),this.color=new B(this.color),this.width=p.pt2px(this.width),this.miterLimit=p.pt2px(this.miterLimit))},
setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return u.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===d.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=p.px2pt(this.miterLimit);a=isNaN(a)?
void 0:a;return k.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});u.mixin(e,d);e.defaultProps=c;return e})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(e,u,B,A,p,l,k,g,d,c){var a={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",
STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},b={style:a.STYLE_SOLID,color:[0,0,0,.25]};e=e(g,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",
forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(f,t,n){f?u.isString(f)?(this.style=f,void 0!==t&&(this.outline=t),void 0!==n&&(this.color=n)):this.style=k.valueOf(this._styles,f.style):(u.mixin(this,b),this.outline=new d(this.outline),this.color=new B(this.color))},setStyle:function(f){this.style=f;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var f=
this.style;return f===a.STYLE_NULL?null:f===a.STYLE_SOLID?this.color:u.mixin({},p.defaultPattern,{src:c.toUrl("../images/symbol/sfs/"+f+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return k.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});u.mixin(e,a);e.defaultProps=b;return e})},
"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(e,u,B,A,p,l){return e(p,{declaredClass:"esri.symbol.FillSymbol",constructor:function(k){k&&u.isObject(k)&&k.outline&&(this.outline=new l(k.outline))},setOutline:function(k){this.outline=k;return this},toJson:function(){var k=this.inherited("toJson",arguments);this.outline&&(k.outline=this.outline.toJson());return k}})})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(e,u,B,A,p,l,k,g){var d={xoffset:0,yoffset:0,width:12,height:12};e=e(g,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(c,a,b,f){c?u.isString(c)?(this.url=c,void 0!==a&&(this.outline=a),void 0!==b&&(this.width=b),void 0!==f&&(this.height=f)):(this.xoffset=A.pt2px(c.xoffset),this.yoffset=A.pt2px(c.yoffset),this.width=A.pt2px(c.width),this.height=A.pt2px(c.height),a=c.imageData,9>B("ie")||!a||(b=this.url,this.url=
"data:"+(c.contentType||"image")+";base64,"+a,this.imageData=b)):(u.mixin(this,d),this.width=A.pt2px(this.width),this.height=A.pt2px(this.height))},setWidth:function(c){this.width=c;return this},setHeight:function(c){this.height=c;return this},setOffset:function(c,a){this.xoffset=c;this.yoffset=a;return this},setUrl:function(c){c!==this.url&&(delete this.imageData,delete this.contentType);this.url=c;return this},setXScale:function(c){this.xscale=c;return this},setYScale:function(c){this.yscale=c;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return u.mixin({},A.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var c=this.url,a=this.imageData;if(0===c.indexOf("data:")){var b=c;c=a;a=b.indexOf(";base64,")+
8;a=b.substr(a)}!u.isString(c)||0!==c.indexOf("/")&&0!==c.indexOf("//")&&0!==c.indexOf("./")&&0!==c.indexOf("../")||(c=k.getAbsoluteUrl(c));b=A.px2pt(this.width);b=isNaN(b)?void 0:b;var f=A.px2pt(this.height);f=isNaN(f)?void 0:f;var t=A.px2pt(this.xoffset);t=isNaN(t)?void 0:t;var n=A.px2pt(this.yoffset);n=isNaN(n)?void 0:n;c=l.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:c,imageData:a,contentType:this.contentType,width:b,height:f,xoffset:t,yoffset:n,xscale:this.xscale,yscale:this.yscale}));
c.imageData||delete c.imageData;return c}});e.defaultProps=d;return e})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(e,u,B,A,p,l,k,g,d){var c={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:A.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},a={start:"left",middle:"center",end:"right"},b={left:"start",center:"middle",right:"end",
justify:"start"},f={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},t=document.createElement("canvas");e=e(g,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(n,m,h){u.mixin(this,c);this.font=new d(this.font);this.color=new k(this.color);n&&(u.isObject(n)?(u.mixin(this,n),this.color&&l.isDefined(this.color[0])&&(this.color=k.toDojoColor(this.color)),this.type="textsymbol",this.font=new d(this.font),this.xoffset=A.pt2px(this.xoffset),
this.yoffset=A.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=A.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=k.toDojoColor(this.haloColor))):(this.text=n,m&&(this.font=m),h&&(this.color=h)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(n){this.font=n;return this},setSize:function(n){this.font.size=n;return this},setAngle:function(n){this.angle=n;return this},setOffset:function(n,m){this.xoffset=n;this.yoffset=m;return this},setHaloColor:function(n){this.haloColor=
n;return this},setHaloSize:function(n){this.haloSize=n;return this},setAlign:function(n){this.align=n;this.setHorizontalAlignment(n&&a[n.toLowerCase()]||"center");return this},setHorizontalAlignment:function(n){this.horizontalAlignment=n;return this},getSVGAlign:function(){var n=this.horizontalAlignment;return n=n&&b[n.toLowerCase()]||"middle"},setVerticalAlignment:function(n){this.verticalAlignment=n;return this},getSVGBaseline:function(){var n=this.verticalAlignment;return n&&f[n.toLowerCase()]||
"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(n){this.decoration=n;this.font||this.setFont(new d);this.font.setDecoration(n);return this},setRotated:function(n){this.rotated=n;return this},setKerning:function(n){this.kerning=n;return this},setText:function(n){this.text=n;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var n=t&&t.getContext&&t.getContext("2d");if(n){var m=
this.font;n.font=(m.style?m.style:A.defaultFont.style)+" "+(m.weight?m.weight:A.defaultFont.weight)+" "+(m.size?m.size:A.defaultFont.size)+"px "+(m.family?m.family:A.defaultFont.family);return n.measureText(this.text).width}n=this.getHeight();m=0;var h;for(h=0;h<this.text.length;h++){var v=this.text.charAt(h);m=v==v.toUpperCase()?m+.7*n:m+.5*n}return m},getHeight:function(){return A.normalizedLength(this.font.size)},getShapeDescriptors:function(){var n=this.font;if(n){var m={};n.size&&(m.size=n.size);
n.style&&(m.style=n.style);n.variant&&(m.variant=n.variant);n.decoration&&(m.decoration=n.decoration);n.weight&&(m.weight=n.weight);n.family&&(m.family=n.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||n&&n.decoration,rotated:this.rotated,kerning:this.kerning},font:m,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var n=A.px2pt(this.xoffset),m=A.px2pt(this.yoffset),h=A.px2pt(this.haloSize);n=isNaN(n)?void 0:
n;m=isNaN(m)?void 0:m;h=isNaN(h)?void 0:h;return l.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:h,haloColor:this.haloColor&&k.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:n,yoffset:m,text:this.text,rotated:this.rotated,
kerning:this.kerning,font:this.font.toJson()}))}});u.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});e.defaultProps=c;return e})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(e,u,B,A,p,l){e=e(null,{declaredClass:"esri.symbol.Font",constructor:function(k,g,d,c,
a){k?u.isObject(k)?u.mixin(this,k):(this.size=k,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==g&&(this.style=g),void 0!==d&&(this.variant=d),void 0!==c&&(this.weight=c),void 0!==a&&(this.family=a)):u.mixin(this,A.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>B("ie")&&this.size&&u.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=A.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(k){this.size=this._convert2PxSize(k);
return this},_convert2PxSize:function(k){var g;parseFloat(k)==k?g=k:u.isString(k)&&(-1<k.indexOf("pt")?g=A.pt2px(parseFloat(k)):-1<k.indexOf("px")?g=parseFloat(k):-1<k.indexOf("em")?g=A.pt2px(12*parseFloat(k)):-1<k.indexOf("%")&&(g=A.pt2px(.12*parseFloat(k))));return g},setStyle:function(k){this.style=k;return this},setVariant:function(k){this.variant=k;return this},setWeight:function(k){this.weight=k;return this},setFamily:function(k){this.family=k;return this},setDecoration:function(k){this.decoration=
k;return this},toJson:function(){return l.fixJson({size:A.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});u.mixin(e,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return e})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship require require require".split(" "),
function(e,u,B,A,p,l,k,g){var d=e(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=d.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(c){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},b=c&&c.geometry||this.geometry,f=this.objectIds,t=this.outFields,n=this.outSpatialReference,m=this.groupByFieldsForStatistics,h=this.orderByFields,v=this.outStatistics;c=this.distance;b&&(a.geometry=b,a.geometryType=k.getJsonType(b),a.inSR=b.spatialReference.wkid||A.toJson(b.spatialReference.toJson()));f&&(a.objectIds=f.join(","));t&&(a.outFields=t.join(","));null!=this.returnCentroid&&(a.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(a.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(a.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(a.maxRecordCountFactor=this.maxRecordCountFactor);m&&(a.groupByFieldsForStatistics=m.join(","));h&&(a.orderByFields=h.join(","));if(v){var r=[];B.forEach(v,function(C){r.push(C.toJson())});a.outStatistics=A.toJson(r)}n?a.outSR=n.wkid||A.toJson(n.toJson()):b&&(a.outSR=b.spatialReference.wkid||A.toJson(b.spatialReference.toJson()));b=
this.timeExtent;a.time=b?b.toJson().join(","):null;(b=this.relationParam)&&this.spatialRelationship===d.SPATIAL_REL_RELATION&&(a.relationParam=b);c&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),a.units=this._units.meters));this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1\x3d1"));this.hasOwnProperty("num")&&
(a.resultRecordCount=this.num);a.resultType=this.resultType;null!=this.cacheHint&&(a.cacheHint=this.cacheHint);a.pixelSize=this.pixelSize?A.toJson(this.pixelSize.toJson()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=A.toJson(this.quantizationParameters));a._ts=this._ts;return a}});u.mixin(d,g);return d})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(e,u,B){return{SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",
SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"}})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(e){return{add:function(u,B){u.popupManager||
(u.popupManager=new e(B),u.popupManager.setMap(u))},remove:function(u){var B=u.popupManager;B&&(B.unsetMap(),u.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){var m;return g(t,{declaredClass:"esri.PopupManager",
enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(h){this._mapClickHandler=c.hitch(this,this._mapClickHandler)},setMap:function(h){if(this.map)if(h!==this.map)this.unsetMap();else return;this.map=h;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(h){var v;if(h&&(v=h.getLayer())&&(h=v.id,this._featureLayersCache[h])){var r=h.lastIndexOf("_");
-1<r&&(h=h.substring(0,r),v=this.map.getLayer(h))}return v},_enabledSetter:function(h){this.enabled=h;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(h){var v=this.map.infoWindow,r=h.graphic;v&&this.map.loaded&&(v.clearFeatures&&v.setFeatures?this._showPopup(h):r&&r.getInfoTemplate()&&this._showInfoWindow(r,
h.mapPoint))},_showPopup:function(h){var v=this.map,r=v.infoWindow,C=this,w=[],y=[v.graphics].concat(k.map(v.graphicsLayerIds,v.getLayer,v));k.forEach(y,function(E){var z=E.getFeatureReduction&&E.getFeatureReduction();E&&E.loaded&&E.infoTemplate&&!E.suspended&&(!z||!C._isReductionEnabled(E)||z.infoTemplate&&!z.disablePopup)&&w.push(E)});var q=[];k.forEach(v.layerIds,function(E){(E=v.getLayer(E))&&E.loaded&&!E.suspended&&(C._isImageServiceLayer(E)&&E.infoTemplate?w.push(E):"esri.layers.WMSLayer"===
E.declaredClass&&E.getFeatureInfoURL?w.push(E):"esri.layers.ArcGISDynamicMapServiceLayer"!==E.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==E.declaredClass||!E.infoTemplates||q.push(E))});var x=v.getResolutionForPopup();this._getSubLayerFeatureLayers(q,x).then(function(E){w=w.concat(E);E=h.graphic&&h.graphic.getParentGraphic()||h.graphic;var z=null;E&&E.getInfoTemplate()&&!C._isImageServiceLayer(E.getLayer())&&(z=E);if(w.length||z){var D=C._calculateClickTolerance(w),F=h.screenPoint;E=
v.toMap(new u(F.x-D,F.y+D));D=v.toMap(new u(F.x+D,F.y-D));var J=new e(E.x,E.y,D.x,D.y,v.spatialReference);if(J=J.intersects(v.extent)){var L=new p,Q=!!z,ba=!0;E=k.map(w,function(fa){L.timeExtent=fa.useMapTime?v.timeExtent:null;var Y=C._isReductionEnabled(fa);fa=Y?fa.getFeatureReductionLayer():fa;var ma=C._featureLayersCache[fa.id];if(C._isImageServiceLayer(fa)){L.geometry=h.mapPoint;ba=!1;var ca={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};C._isTiledImageServiceLayer(fa)?ca=fa.fetchPopupFromTiles(L):
(ca=fa.queryVisibleRasters(L,ca),ca.addCallback(function(){var ta=fa.getVisibleRasters();Q=Q||0<ta.length;return ta}))}else if("esri.layers.WMSLayer"===fa.declaredClass){ca=new d;var la=fa._getPopupGraphic(v,h.screenPoint);la?(ca.resolve([la]),Q=!0):ca.resolve([])}else ma||"function"===typeof fa.queryFeatures&&(0===fa.currentMode||1===fa.currentMode)?(L.geometry=J,ca=fa.queryFeatures(L),ca.addCallback(function(ta){var za=[];k.forEach(ta.features,function(P){P.visible&&(za.push(P),ma&&P.setResolution(x))});
Q=Q||0<za.length;return za})):(ca=new d,la=k.filter(fa.graphics,function(ta){return ta&&ta.visible&&J.intersects(ta.geometry)}),Y&&C._isParentLayer(fa,z)&&(Y=C._findGraphicById(la,z,"cluster_id"))&&(z=Y),Q=Q||0<la.length,ca.resolve(la));return ca});z&&(D=new d,D.resolve([z]),E.unshift(D));k.some(E,function(fa){return!fa.isFulfilled()})||Q?(r.setFeatures(E),r.show(h.mapPoint,{closestFirst:ba})):(r.hide(),r.clearFeatures())}}})},_getSubLayerFeatureLayers:function(h,v,r){v=v||null;var C=r||new d,w=[];
r=h.length;var y=this.map.getScale(),q=!1,x=this,E=0;a:for(;E<r;E++){var z=h[E],D=z.dynamicLayerInfos||z.layerInfos;if(D){var F=null;z._params&&(z._params.layers||z._params.dynamicLayers)&&(F=z.visibleLayers);F=A._getVisibleLayers(D,F);for(var J=A._getLayersForScale(y,D),L=D.length,Q=0;Q<L;Q++){var ba=D[Q],fa=ba.id,Y=z.infoTemplates[fa];if(!ba.subLayerIds&&Y&&Y.infoTemplate&&-1<k.indexOf(F,fa)&&-1<k.indexOf(J,fa)){if(!m){q=!0;break a}var ma=z.id+"_"+fa,ca=this._featureLayersCache[ma];ca&&ca.loadError||
(ca||((ca=Y.layerUrl)||(ca=ba.source?this._getLayerUrl(z.url,"/dynamicLayer"):this._getLayerUrl(z.url,fa)),ca=new m(ca,{parentLayer:z,id:ma,drawMode:!1,mode:m.MODE_SELECTION,outFields:this._getOutFields(Y.infoTemplate),resourceInfo:Y.resourceInfo,source:ba.source}),this._featureLayersCache[ma]=ca),ca.setDefinitionExpression(z.layerDefinitions&&z.layerDefinitions[fa]),ca.setGDBVersion(z.gdbVersion),ca.setInfoTemplate(Y.infoTemplate),ca.setMaxAllowableOffset(v),ca.setUseMapTime(!!z.useMapTime),z.layerDrawingOptions&&
z.layerDrawingOptions[fa]&&z.layerDrawingOptions[fa].renderer&&ca.setRenderer(z.layerDrawingOptions[fa].renderer),w.push(ca))}}}}if(q){var la=new d;n(["./layers/FeatureLayer"],function(za){m=za;la.resolve()});la.then(function(){x._getSubLayerFeatureLayers(h,v,C)})}else{var ta=[];k.forEach(w,function(za){if(!za.loaded){var P=new d;b.once(za,"load, error",function(){P.resolve()});ta.push(P.promise)}});ta.length?f(ta).then(function(){w=k.filter(w,function(za){return!za.loadError&&za.isVisibleAtScale(y)});
C.resolve(w)}):(w=k.filter(w,function(za){return za.isVisibleAtScale(y)}),C.resolve(w))}return C.promise},_getLayerUrl:function(h,v){var r=h.indexOf("?");return-1===r?h+"/"+v:h.substring(0,r)+"/"+v+h.substring(r)},_getOutFields:function(h){var v=h.info&&h.info.fieldInfos;if(v&&v.length&&"esri.dijit.PopupTemplate"===h.declaredClass){var r=[];k.forEach(v,function(C){var w=C.fieldName&&C.fieldName.toLowerCase();w&&"shape"!==w&&0!==w.indexOf("relationships/")&&r.push(C.fieldName)})}else r=["*"];return r},
_calculateClickTolerance:function(h){var v=a("esri-touch")?9:6,r,C;k.forEach(h,function(w){if(r=w.renderer)"esri.renderer.SimpleRenderer"===r.declaredClass?((C=r.symbol)&&C.xoffset&&(v=Math.max(v,Math.abs(C.xoffset))),C&&C.yoffset&&(v=Math.max(v,Math.abs(C.yoffset)))):"esri.renderer.UniqueValueRenderer"!==r.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==r.declaredClass||k.forEach(r.infos,function(y){(C=y.symbol)&&C.xoffset&&(v=Math.max(v,Math.abs(C.xoffset)));C&&C.yoffset&&(v=Math.max(v,Math.abs(C.yoffset)))})});
return v},_showInfoWindow:function(h,v){var r=this.map.infoWindow,C=h.geometry;v=C&&"point"===C.type?C:v;C=h.getContent();r.setTitle(h.getTitle());C&&c.isString(C.id)&&(h=l.byId(C.id))&&h.set&&/_PopupRenderer/.test(h.declaredClass)&&h.set("showTitle",!1);r.setContent(C);r.show(v)},_findGraphicById:function(h,v,r){var C,w=(v=v.attributes)&&v[r];k.some(h,function(y){var q=y.attributes;q&&q[r]===w&&(C=y);return!!C});return C},_isParentLayer:function(h,v){v=v&&v.getLayer();return h&&v===h},_isReductionEnabled:function(h){return h&&
h.isFeatureReductionActive&&h.isFeatureReductionActive()},_isImageServiceLayer:function(h){return"esri.layers.ArcGISImageServiceLayer"===h.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===h.declaredClass||"esri.layers.RasterXLayer"===h.declaredClass},_isTiledImageServiceLayer:function(h){return"esri.layers.RasterXLayer"===h.declaredClass}})})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(e,u,B,A,p){return{_serializeLayerDefinitions:function(l,
k){var g=[],d=/[:;]/;if(l&&(u.forEach(l,function(a,b){a&&(g.push([b,a]),!k&&d.test(a)&&(k=!0))}),0<g.length)){if(k){var c={};u.forEach(g,function(a){c[a[0]]=a[1]});c=B.toJson(c)}else c=[],u.forEach(g,function(a){c.push(a[0]+":"+a[1])}),c=c.join(";");return c}return null},_serializeTimeOptions:function(l,k){if(l){var g=[];u.forEach(l,function(d,c){d&&(d=d.toJson(),k&&-1!==u.indexOf(k,c)&&(d.useTime=!1),g.push('"'+c+'":'+B.toJson(d)))});if(g.length)return"{"+g.join(",")+"}"}},_getVisibleLayers:function(l,
k){var g=[],d;if(!l)return g;if(k)for(g=k.concat(),d=0;d<l.length;d++){k=l[d];var c=u.indexOf(l,k.id);k.subLayerIds&&-1<c&&(g.splice(c,1),g=g.concat(k.subLayerIds))}else g=this._getDefaultVisibleLayers(l);return g},_getDefaultVisibleLayers:function(l){var k=[],g;if(!l)return k;for(g=0;g<l.length;g++)0<=l[g].parentLayerId&&-1===u.indexOf(k,l[g].parentLayerId)&&u.some(l,function(d){return d.id===l[g].parentLayerId})||l[g].defaultVisibility&&k.push(l[g].id);return k},_getLayersForScale:function(l,k){var g=
[];if(0<l&&k){var d;for(d=0;d<k.length;d++)if(!(0<=k[d].parentLayerId&&-1===u.indexOf(g,k[d].parentLayerId)&&u.some(k,function(f){return f.id===k[d].parentLayerId}))&&0<=k[d].id){var c=!0,a=k[d].maxScale,b=k[d].minScale;if(0<a||0<b)0<a&&0<b?c=a<=l&&l<=b:0<a?c=a<=l:0<b&&(c=l<=b);c&&g.push(k[d].id)}}return g}}})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q){var x=A.connect,E=A.disconnect,z=t("chrome"),D=t("safari"),F=[k.NUMPAD_PLUS,61,187,k.NUMPAD_MINUS,173,189,k.UP_ARROW,k.NUMPAD_8,k.RIGHT_ARROW,k.NUMPAD_6,k.DOWN_ARROW,k.NUMPAD_2,k.LEFT_ARROW,k.NUMPAD_4,k.PAGE_UP,k.NUMPAD_9,k.PAGE_DOWN,k.NUMPAD_3,k.END,k.NUMPAD_1,k.HOME,k.NUMPAD_7];return e(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(J,L){this.map=J;u.mixin(this,L);L=J.__container;t("esri-pointer")?(this.pointerEvents=
new b(L,{map:J}),this.eventModel="pointer"):t("esri-touch")?(t("ios")||(this.mouseEvents=new c(L,{map:J})),this.touchEvents=new a(L,{map:J,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new c(L,{map:J}),this.eventModel="mouse");this._zoomRect=new h(null,new q(f.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=u.hitch(this,this._adjustPinch);this._adjustPinchEnd=u.hitch(this,this._adjustPinchEnd)},_panInit:function(J){var L=this.mouseEvents;l.isLeft(J)&&
this.map.isPan&&!J.shiftKey&&(this._dragOrigin=new r(0,0),u.mixin(this._dragOrigin,J.screenPoint),E(this._panStartHandle),E(this._panHandle),E(this._panEndHandle),this._panStartHandle=x(L,"onMouseDragStart",this,this._panStart),this._panHandle=x(L,"onMouseDrag",this,this._pan),this._panEndHandle=x(L,"onMouseUp",this,this._panEnd),z||D)&&(J.preventDefault(),g.curNode&&g.curNode.blur())},_panStart:function(J){this.map.setCursor("move");this.map.__panStart(J.screenPoint.x,J.screenPoint.y)},_pan:function(J){this.map.__pan(J.screenPoint.x-
this._dragOrigin.x,J.screenPoint.y-this._dragOrigin.y)},_panEnd:function(J){E(this._panStartHandle);E(this._panHandle);E(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var L=this.map;L.__panning&&(L.__panEnd(J.screenPoint.x-this._dragOrigin.x,J.screenPoint.y-this._dragOrigin.y),L.resetMapCursor())},_zoomInit:function(J){var L=this.map,Q=this.pointerEvents||this.mouseEvents;(l.isLeft(J)||J.pointerType)&&L.isRubberBandZoom&&J.shiftKey&&(L.setCursor("crosshair"),this._dragOrigin=
u.mixin({},J.screenPoint),this._zoomDir=J.ctrlKey||J.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=x(Q,"onSwipeMove",this,this._zoom),this._zoomEndHandle=x(Q,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=x(Q,"onMouseDrag",this,this._zoom),this._zoomEndHandle=x(Q,"onMouseUp",this,this._zoomEnd)),z&&J.preventDefault())},_zoom:function(J){var L=this.map,Q=this._normalizeRect(J).offset(L.__visibleRect.x,L.__visibleRect.y);J=L.graphics;var ba=this._zoomRect;ba.geometry||L.setCursor("crosshair");
ba.geometry&&J.remove(ba,!0);var fa=L.toMap(new r(Q.x,Q.y));Q=L.toMap(new r(Q.x+Q.width,Q.y+Q.height));Q=new w(fa.x,fa.y,Q.x-fa.x,fa.y-Q.y,L.spatialReference);Q._originOnly=!0;ba.setGeometry(Q);J.add(ba,!0)},_zoomEnd:function(J){var L=this._zoomRect,Q=this.map,ba=Q.extent,fa=Q.spatialReference;E(this._zoomHandle);E(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(Q._canZoom(this._zoomDir)&&L.getDojoShape()){Q.graphics.remove(L);L.geometry=null;J=this._normalizeRect(J);J.x+=Q.__visibleRect.x;
J.y+=Q.__visibleRect.y;if(-1===this._zoomDir){var Y=ba.getWidth();J=(Y*Q.width/J.width-Y)/2;fa=new C(ba.xmin-J,ba.ymin-J,ba.xmax+J,ba.ymax+J,fa)}else ba=Q.toMap({x:J.x,y:J.y+J.height}),J=Q.toMap({x:J.x+J.width,y:J.y}),fa=new C(ba.x,ba.y,J.x,J.y,fa);Q._extentUtil(null,null,fa)}L.getDojoShape()&&Q.graphics.remove(L,!0);this._zoomDir=0;Q.resetMapCursor()},_wheelZoom:function(J,L){var Q=this.map;if(!L){if(Q.smartNavigation&&!J.shiftKey&&!Q._isPanningOrZooming()){Q.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(J);return}L=J.timeStamp;if(!n.isDefined(L)||0>=L)L=(new Date).getTime();if(100>(this._mwts?L-this._mwts:L))return;this._mwts=L}Q._canZoom(J.value)&&Q._extentUtil({numLevels:J.value,mapAnchor:J.mapPoint,screenAnchor:J.screenPoint})},_wheelPan:function(J){var L=this.map;if(J.shiftKey&&!L._isPanningOrZooming())this._setScrollWheelPan(!1),L.enableScrollWheelZoom(),this._wheelZoom(J);else{var Q=0,ba=0;t("ff")?J.axis===J.HORIZONTAL_AXIS?Q=-J.detail:ba=-J.detail:(Q=J.wheelDeltaX,ba=J.wheelDeltaY);
L.translate(Q,ba)}},_setScrollWheelPan:function(J){this.map.isScrollWheelPan=J;this.mouseEvents&&this.mouseEvents.enableMouseWheel(J);E(this._mwMacHandle);this._mwMacHandle=null;J&&(this._mwMacHandle=x(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(J){J.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(J.mapPoint)},_recenterZoom:function(J){J.shiftKey&&!this.map._isPanningOrZooming()&&(J.value=J.ctrlKey||J.metaKey?-1:1,this._wheelZoom(J,!0))},
_dblClickZoom:function(J){this.map._isPanningOrZooming()||(J.value=1,this._wheelZoom(J,!0))},_twoFingerTap:function(J){this.map._isPanningOrZooming()||(J.value=-1,this._wheelZoom(J,!0))},_keyDown:function(J){var L=J.keyCode,Q=this.map;if(-1!==B.indexOf(F,L)){if(L===k.NUMPAD_PLUS||61===L||187===L)Q._extentUtil({numLevels:1});else if(L===k.NUMPAD_MINUS||173===L||189===L)Q._extentUtil({numLevels:-1});else{Q.__panning||Q.__panStart(0,0);switch(L){case k.UP_ARROW:case k.NUMPAD_8:this._keyDy+=10;break;
case k.RIGHT_ARROW:case k.NUMPAD_6:this._keyDx-=10;break;case k.DOWN_ARROW:case k.NUMPAD_2:this._keyDy-=10;break;case k.LEFT_ARROW:case k.NUMPAD_4:this._keyDx+=10;break;case k.PAGE_UP:case k.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case k.PAGE_DOWN:case k.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case k.END:case k.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case k.HOME:case k.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}Q.__pan(this._keyDx,this._keyDy)}p.stop(J)}},_keyEnd:function(J){var L=
this.map;L.__panning&&J.keyCode!==k.SHIFT&&(L.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(J){var L=this.map;L=L._zoomAnim||L._panAnim;if(J.shiftKey)return!1;L&&L._active&&(L.stop(),L._fire("onEnd",[L.node]));this._dragOrigin=new r(0,0);u.mixin(this._dragOrigin,J.screenPoint);E(this._swipeHandle);E(this._swipeEndHandle);this._swipeHandle=x(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=x(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(J){var L=this.map;L.__panning?(this._panX=J.screenPoint.x,this._panY=J.screenPoint.y,L.__pan(J.screenPoint.x-this._dragOrigin.x,J.screenPoint.y-this._dragOrigin.y)):(L.setCursor("move"),L.__panStart(J.screenPoint.x,J.screenPoint.y))},_swipeEnd:function(J){E(this._swipeHandle);E(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var L=this.map;L.__panning&&(L.resetMapCursor(),L.__panEnd(J.screenPoint.x-this._dragOrigin.x,J.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(J){var L=this.map,Q=L._zoomAnim||L._panAnim;Q&&Q._active?(Q.stop(),Q._fire("onEnd",[Q.node])):L.__panning&&(J.screenPoint=new r(this._panX,this._panY),J.mapPoint=L.toMap(J.screenPoint),this._swipeEnd(J));E(this._pinchHandle);E(this._pinchEndHandle);this._pinchHandle=x(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=x(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(J){var L=this.map;
if(J.screenPoints){this.currLength=y.getLength(J.screenPoints[0],J.screenPoints[1]);if(L.__zooming){var Q=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(L.extent,Q,this._dragOrigin);L.__zoom(this._zoomStartExtent,Q,this._dragOrigin)}else this._dragOrigin=new r((J.screenPoints[0].x+J.screenPoints[1].x)/2,(J.screenPoints[0].y+J.screenPoints[1].y)/2),this._length=this.currLength,L.__zoomStart(L.extent,this._dragOrigin);this._pinchScale=Q;L._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(J){J=this.map;E(this._pinchHandle);E(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(J.__zooming&&null===J._zoomAnim){var L=this.currLength/this._length,Q=J.extent.getWidth();this._zoomAnimAnchor=J.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(J.extent,1/L,this._zoomAnimAnchor);if(J.__tileInfo){var ba=v.getCandidateTileInfo(J,J.__tileInfo,this._zoomStartExtent),fa=J.__getExtentForLevel(ba.lod.level,
this._zoomAnimAnchor),Y=J.getMinZoom(),ma=J.getMaxZoom(),ca=fa.extent;fa=fa.lod;var la=Q/ca.getWidth(),ta=ba.lod.level;1>L?la>L&&ta--:la<L&&ta++;ta<Y?ta=Y:ta>ma&&(ta=ma);ta!==ba.lod.level&&(fa=J.__getExtentForLevel(ta,this._zoomAnimAnchor),ca=fa.extent,fa=fa.lod);this._zoomEndExtent=ca;this._zoomEndLod=fa;J._zoomAnim=m.animateRange({range:{start:Q/this._zoomStartExtent.getWidth(),end:la},duration:f.defaults.map.zoomDuration,rate:f.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});
J._zoomAnim.play();J._fireOnScale(J.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,J._fireOnScale(J.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(J){var L=this.__scaleExtent(this.map.extent,J,this._zoomAnimAnchor);this.map.__zoom(L,J,this._dragOrigin)},_adjustPinchEnd:function(){var J=this.map,L=J.extent.getWidth()/this._zoomEndExtent.getWidth(),Q=this.__scaleExtent(J.extent,
1/L,this._zoomAnimAnchor),ba=this._dragOrigin,fa=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=J._zoomAnim=this._zoomAnimAnchor=null;J.__zoomEnd(Q,L,ba,fa,!0)},__scaleExtent:function(J,L,Q){Q=Q||J.getCenter();L=J.expand(L);var ba=J.xmin-(L.getWidth()-J.getWidth())*(Q.x-J.xmin)/J.getWidth();Q=J.ymax-(L.getHeight()-J.getHeight())*(Q.y-J.ymax)/J.getHeight();return new C(ba,Q-L.getHeight(),ba+L.getWidth(),Q,J.spatialReference)},_normalizeRect:function(J){J=
J.screenPoint;var L=this._dragOrigin.x,Q=this._dragOrigin.y;J=new w((J.x<L?J.x:L)-this.map.__visibleRect.x,(J.y<Q?J.y:Q)-this.map.__visibleRect.y,Math.abs(J.x-L),Math.abs(J.y-Q));delete J.spatialReference;0===J.width&&(J.width=1);0===J.height&&(J.height=1);return J},setImmediateClick:function(J){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(J);break;case "touch":this.touchEvents.setImmediateTap(J);this.mouseEvents&&this.mouseEvents.setImmediateClick(J);break;case "pointer":this.pointerEvents.setImmediateTap(J)}},
enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=x(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=x(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=x(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=x(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){E(this._panInitHandle);this._panInitHandle=null;E(this._swipeInitHandle);
this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?x(this.pointerEvents,"onSwipeStart",this,this._zoomInit):x(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){E(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=x(this.touchEvents||this.pointerEvents,"onPinchStart",
this,this._pinchInit)},disablePinchZoom:function(){E(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=x(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){E(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var J=this.map;J&&J.loaded&&J.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var J=
this.map;J&&J.loaded&&J.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=x(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=x(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=x(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=x(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);
break;case "pointer":this._dblTapHandle=x(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=x(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){E(this._dblClickHandle);E(this._zoomOutHandle);this._dblTapHandle&&E(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=x(this.pointerEvents||this.mouseEvents,
"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){E(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=x(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){E(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=x(this.pointerEvents||this.mouseEvents,"onKeyDown",
this,this._keyDown);this._keyEndHandle=x(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){E(this._keyHandle);E(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var J=this.map;J&&(J.smartNavigation?this.enableScrollWheelPan():J.enableScrollWheelZoom())},disableScrollWheel:function(){var J=this.map;J&&(J.disableScrollWheelZoom(),J.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var J=
this.map;J&&J.loaded&&(J._evalNavigationFeature("DoubleClickZoom"),J._evalNavigationFeature("ClickRecenter"),J._evalNavigationFeature("Pan"),J._evalNavigationFeature("RubberBandZoom"),J._evalNavigationFeature("PinchZoom"),J._evalNavigationFeature("KeyboardNavigation"),J._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var J=this.map;J&&J.loaded&&(J._evalNavigationFeature("DoubleClickZoom"),J._evalNavigationFeature("ClickRecenter"),J._evalNavigationFeature("Pan"),J._evalNavigationFeature("RubberBandZoom"),
J._evalNavigationFeature("PinchZoom"),J._evalNavigationFeature("KeyboardNavigation"),J._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var J,L=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,
this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(J=0;J<L.length;J++)E(L[J]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=
this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}})})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(e,u,B,A,p,l,k,g,d,c){var a=p.connect,b=p.disconnect;return e([g],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==A("mac")?1:3,wheelDivisor:2>A("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(f,t){this.node=f;B.mixin(this,t);t=function(n){l.stop(n);return!1};A("mozilla")&&u.style(f,"MozUserSelect","none");this._handles=[a(f,"onselectstart",t),a(f,"ondragstart",t),a(f,"onmouseenter",this,this._onMouseEnterHandler),
a(f,"onmouseleave",this,this._onMouseLeaveHandler),a(f,"onmousedown",this,this._onMouseDownHandler),a(f,"onclick",this,this._onClickHandler),a(f,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=a(f,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(f,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=B.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(f=this.map)?f.isScrollWheelZoom||
f.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(f,t){if(!this._preventClick||"onClick"!==f&&"onDblClick"!==f){if(this[f])this[f](t);if(this.map&&this.map[f])this.map[f](t)}},_processEvent:function(f){f=l.fix(f,f.target);var t=this.map,n=t&&t.position;n&&("DOMMouseScroll"===f.type&&3>A("ff")?f.screenPoint=new c(window.scrollX+f.screenX-n.x,window.scrollY+f.screenY-n.y):f.screenPoint=new c(f.pageX-n.x,f.pageY-n.y),f.mapPoint=t.extent?t.toMap(f.screenPoint):new d);
f.numPoints=0;return f},_onMouseEnterHandler:function(f){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=a(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=a(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(f))},_onMouseLeaveHandler:function(f){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(f))},_onMouseMoveHandler:function(f){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(f))},_onMouseDownHandler:function(f){b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDragHandler);this._startX=f.pageX;this._startY=f.pageY;this._fire("onMouseDown",this._processEvent(f))},_onMouseUpHandler:function(f){var t=this.node;t.releaseCapture&&t.releaseCapture();
b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=a(t,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(f))},_onMouseDragHandler:function(f){b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDraggingHandler);b(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=a(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=a(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(f))},_onMouseDraggingHandler:function(f){l.stop(f);this._fire("onMouseDrag",this._processEvent(f))},_onDragMouseUpHandler:function(f){var t=this.node;t.releaseCapture&&t.releaseCapture();this._dragEnd=!0;b(this._docLeaveConnect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
a(t,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(t,"onmouseup",this,this._onMouseUpHandler);f=this._processEvent(f);this._fire("onMouseDragEnd",f);this._fire("onMouseUp",f)},_onDocMouseOut:function(f){var t=9>A("ie")?f.toElement:f.relatedTarget,n=t&&t.nodeName.toLowerCase();(!t||(A("chrome")||A("safari"))&&"html"===n)&&this._onDragMouseUpHandler(f)},_onClickHandler:function(f){f=this._processEvent(f);if(f.pageX===this._startX&&f.pageY===this._startY){clearTimeout(this._clickTimer);
var t={},n="movementX"in f,m;for(m in f)"mozInputSource"===m||"mozPressure"===m||n&&("webkitMovementX"===m||"webkitMovementY"===m)||(t[m]=f[m]);this._clickEvent=t;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>A("ie")&&(this._clickEvent.graphic=k._ieGraphic,delete k._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(f){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(f))},
_onMouseWheelHandler:function(f){var t=this.map;(t?t.isScrollWheelZoom||t.isScrollWheelPan:this.preventPageScroll)&&l.stop(f);t=A("ff")||A("mozilla")?-f.detail/this.mozWheelDivisor:f.wheelDelta/this.wheelDivisor;var n=Math.abs(t);n=n<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;f.value=0>t?-n:n;this._fire("onMouseWheel",this._processEvent(f))},_onKeyDownHandler:function(f){this._fire("onKeyDown",f)},_onKeyUpHandler:function(f){this._fire("onKeyUp",f)},enableMouseWheel:function(f){b(this._scrollHandle);
this._scrollHandle=a(this.node,A("ff")||A("mozilla")?f?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(f){this.doubleClickDuration=f?0:this._initialDuration},preventClickEvents:function(f){this._preventClick=f},destroy:function(){var f=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
t;for(t=0;t<f.length;t++)b(f[t]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}})})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(e,u,B,A,p,l,k,g){e.byId=u.byId;e.isDescendant=
u.isDescendant;e.setSelectable=u.setSelectable;e.getAttr=A.get;e.setAttr=A.set;e.hasAttr=A.has;e.removeAttr=A.remove;e.getNodeProp=A.getNodeProp;e.attr=function(d,c,a){return 2==arguments.length?A["string"==typeof c?"get":"set"](d,c):A.set(d,c,a)};e.hasClass=l.contains;e.addClass=l.add;e.removeClass=l.remove;e.toggleClass=l.toggle;e.replaceClass=l.replace;e._toDom=e.toDom=k.toDom;e.place=k.place;e.create=k.create;e.empty=function(d){k.empty(d)};e._destroyElement=e.destroy=function(d){k.destroy(d)};
e._getPadExtents=e.getPadExtents=g.getPadExtents;e._getBorderExtents=e.getBorderExtents=g.getBorderExtents;e._getPadBorderExtents=e.getPadBorderExtents=g.getPadBorderExtents;e._getMarginExtents=e.getMarginExtents=g.getMarginExtents;e._getMarginSize=e.getMarginSize=g.getMarginSize;e._getMarginBox=e.getMarginBox=g.getMarginBox;e.setMarginBox=g.setMarginBox;e._getContentBox=e.getContentBox=g.getContentBox;e.setContentSize=g.setContentSize;e._isBodyLtr=e.isBodyLtr=g.isBodyLtr;e._docScroll=e.docScroll=
g.docScroll;e._getIeDocumentElementOffset=e.getIeDocumentElementOffset=g.getIeDocumentElementOffset;e._fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft;e.position=g.position;e.marginBox=function(d,c){return c?g.setMarginBox(d,c):g.getMarginBox(d)};e.contentBox=function(d,c){return c?g.setContentSize(d,c):g.getContentBox(d)};e.coords=function(d,c){e.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");d=u.byId(d);var a=B.getComputedStyle(d);a=g.getMarginBox(d,a);d=
g.position(d,c);a.x=d.x;a.y=d.y;return a};e.getProp=p.get;e.setProp=p.set;e.prop=function(d,c,a){return 2==arguments.length?p["string"==typeof c?"get":"set"](d,c):p.set(d,c,a)};e.getStyle=B.get;e.setStyle=B.set;e.getComputedStyle=B.getComputedStyle;e.__toPixelValue=e.toPixelValue=B.toPixelValue;e.style=function(d,c,a){switch(arguments.length){case 1:return B.get(d);case 2:return B["string"==typeof c?"get":"set"](d,c)}return B.set(d,c,a)};return e})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(e,u,B,A,p,l,k,g,d){return e([k],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(c,a){this.node=c;B.mixin(this,a);u.setSelectable(c,!1);this._touchStart=B.hitch(this,this._touchStart);this._touchMove=B.hitch(this,this._touchMove);this._touchEnd=B.hitch(this,this._touchEnd);this._touchCancel=B.hitch(this,this._touchCancel);this._fireClickEvent=B.hitch(this,this._fireClickEvent);c.addEventListener("touchstart",
this._touchStart,!1);c.addEventListener("touchmove",this._touchMove,!1);c.addEventListener("touchend",this._touchEnd,!1);c.addEventListener("touchcancel",this._touchCancel,!1);this.map&&A("ios")&&(this._mouseOver=B.hitch(this,this._mouseOver),this._mouseOut=B.hitch(this,this._mouseOut),this._mouseDown=B.hitch(this,this._mouseDown),this._mouseUp=B.hitch(this,this._mouseUp),this._mouseClick=B.hitch(this,this._mouseClick),c.addEventListener("mouseover",this._mouseOver,!1),c.addEventListener("mouseout",
this._mouseOut,!1),c.addEventListener("mousedown",this._mouseDown,!1),c.addEventListener("mouseup",this._mouseUp,!1),c.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(c){var a=this._touches,b,f=c.changedTouches.length,t,n,m=(new Date).getTime();this._touchStartTS=m;if(!(A("android")&&A("safari")&&1===c.targetTouches.length&&c.touches.length===c.targetTouches.length&&c.targetTouches.length===
c.changedTouches.length&&0===c.changedTouches[0].identifier&&a[c.changedTouches[0].identifier])){this._addTouch(c);for(b=0;b<f;b++){var h=c.changedTouches[b];var v=a[h.identifier]={};v.startX=h.pageX;v.startY=h.pageY;v.startTS=m;-1===this._touchIds.indexOf(h.identifier)&&this._touchIds.push(h.identifier)}this._swipeActive&&(t=this._nodeTouches[0]);this._pinchActive&&(n=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,
t))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[t,n]))):2===this._numTouches?this._swipeActive&&(t&&(v=a[this._touchIds[0]],v.startX=t.pageX,v.startY=t.pageY,v.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,t))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,t))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[t,n])))}},_touchMove:function(c){c.preventDefault();
this._updateTouch(c);var a=this._touches,b,f=c.changedTouches.length,t;if(!(A("android")&&A("safari")&&1===c.targetTouches.length&&c.touches.length===c.targetTouches.length&&c.targetTouches.length===c.changedTouches.length&&0===c.changedTouches[0].identifier&&a[c.changedTouches[0].identifier]&&1<this._touchIds.length)){for(b=0;b<f;b++){var n=c.changedTouches[b];if(t=a[n.identifier]){var m=Math.abs(n.pageX-t.startX);n=Math.abs(n.pageY-t.startY);!t.moved&&(m>=this.tapRadius||n>=this.tapRadius)&&(t.moved=
t.absMoved=!0);var h=h?h:t.moved}}1===this._numTouches?(a=c.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(c,a)):h&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(c,a)))):2===this._numTouches&&(b=this._nodeTouches[0],f=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(c,[b,f])):h&&(h=a[b.identifier],t=a[f.identifier],a=Math.abs(h.startX-t.startX),h=Math.abs(h.startY-t.startY),t=Math.abs(b.pageX-f.pageX),
m=Math.abs(b.pageY-f.pageY),Math.abs(Math.sqrt(t*t+m*m)-Math.sqrt(a*a+h*h))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(c,[b,f])))))}},_touchEnd:function(c){this._removeTouch(c);var a=this._touches,b=c.changedTouches,f,t=b.length,n,m,h=(new Date).getTime(),v=this._touchIds;for(f=0;f<t;f++)if(m=a[b[f].identifier])m.absMoved&&(n=!0),m.pageX=b[f].pageX,m.pageY=b[f].pageY,m.endTS=h;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(c,b[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,b));else{if(!n){t=Infinity;n=-Infinity;h=Infinity;var r=-Infinity,C=this.tapStartTolerance,w=[],y=!0;for(f=0;f<v.length;f++)m=a[v[f]],w.push(m),m.startTS<t&&(t=m.startTS),m.startTS>n&&(n=m.startTS),m.endTS<h&&(h=m.endTS),m.endTS>r&&(r=m.endTS),delete a[v[f]];1===w.length&&b[0]&&(a=Math.abs(b[0].pageY-w[0].startY),Math.abs(b[0].pageX-w[0].startX)>=
this.tapRadius||a>=this.tapRadius)&&(y=!1);y&&Math.abs(n-t)<=C&&Math.abs(r-h)<=C&&this._basicTap(c,w)}}else 1===this._numTouches&&this._pinchActive&&(f=this._nodeTouches[0],m=a[f.identifier],m.startX=f.pageX,m.startY=f.pageY,this._pinchActive=m.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[b[0],f])))},_touchCancel:function(c){this._numTouches&&this._touchEnd(c)},_basicTap:function(c,a){var b=(new Date).getTime(),f=this;c=this._processTouchEvent(c,a);this._taps.push({touchInfos:a,ts:b,
event:c});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",c);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var t=f;f=null;clearTimeout(t._tapTimer);t._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(c){var a=this._taps,b=a[0],f=a[1],t=b.touchInfos,n=f&&f.touchInfos;a.length&&(c||(this._taps=[]),b&&f?t.length===n.length?f.ts-b.ts<=this.doubleTapDuration?(1===t.length?
(c=Math.abs(t[0].startX-n[0].startX),t=Math.abs(t[0].startY-n[0].startY),t=c<=this.doubleTapRadius&&t<=this.doubleTapRadius):t=!0,t?this._processedDoubleTap(a):this._processedTap(f)):this._processedTap(f):this._processedTap(f):this._processedTap(b||f))},_processedTap:function(c){var a=c.event;this._fire("onProcessedTap",a);1===c.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===c.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(c){var a=1===c[1].touchInfos.length;
if(a){var b=[this._fixEvent(c[0].event),this._fixEvent(c[1].event)];b[1].relatedEvents=b}c=[c[0].event,c[1].event];c[1].relatedEvents=c;this._fire("onProcessedDoubleTap",c[1]);a&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_addTouch:function(c){var a=c.changedTouches,b=this._nodeTouches,f;this._numTouches+=a.length;for(c=0;c<a.length;c++){var t=b.length;var n=!1;for(f=0;f<t&&!(n=b[f].identifier===a[c].identifier);f++);n?this._numTouches--:b.push(a[c])}for(c=b.length-1;0<=c;c--)p.isDescendant(b[c].target,
document.body)||(b.splice(c,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(c){var a=[],b=[],f=c.changedTouches,t=this._nodeTouches;this._numTouches-=f.length;0>this._numTouches&&(this._numTouches=0);for(c=0;c<f.length;c++)a.push(f[c].identifier);for(c=t.length-1;0<=c;c--)-1!==a.indexOf(t[c].identifier)&&b.push(t.splice(c,1)[0]);return b},_updateTouch:function(c){var a=[],b=c.changedTouches,f=this._nodeTouches;for(c=0;c<b.length;c++)a.push(b[c].identifier);for(c=
0;c<f.length;c++){var t=a.indexOf(f[c].identifier);-1!==t&&f.splice(c,1,b[t])}},_mouseOver:function(c){this._fire("onMouseOver",this._processMouseEvent(c))},_mouseOut:function(c){this._fire("onMouseOut",this._processMouseEvent(c))},_mouseDown:function(c){this._fire("onMouseDown",this._processMouseEvent(c))},_mouseUp:function(c){this._fire("onMouseUp",this._processMouseEvent(c))},_mouseClick:function(c){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(c)):(this._clickEvent=c,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(c,a){"onDblClick"===c&&clearTimeout(this._clickTimer);if("onDblClick"===c&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var b=this;setTimeout(function(){b.mouseEvents.preventClickEvents(!1)},350)}if(this[c])this[c](a);if(this.map&&
this.map[c])this.map[c](a)},_fixEvent:function(c){var a={},b;for(b in c)a[b]=c[b];this.map&&(a.screenPoint=a.screenPoints[0],a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(c,a){var b=this.map,f=b&&b.position,t=0;if(f&&a)if(B.isArray(a)){var n;c.screenPoints=[];c.mapPoints=[];for(n=0;n<a.length;n++)if(a[n]){var m=new d(a[n].pageX-f.x,a[n].pageY-f.y);c.screenPoints.push(m);c.mapPoints.push(b.extent?b.toMap(m):new g)}else t++}else c.screenPoint=new d(a.pageX-f.x,a.pageY-f.y),c.mapPoint=
b.extent?b.toMap(c.screenPoint):new g;c.numPoints=a?B.isArray(a)?a.length-t:1:0;return c},_processMouseEvent:function(c){var a=this.map,b=a&&a.position;b&&(c.screenPoint=new d(c.pageX-b.x,c.pageY-b.y),c.mapPoint=a.extent?a.toMap(c.screenPoint):new g);return c},setImmediateTap:function(c){this._immediate=c},destroy:function(){var c=this.node;c.removeEventListener("touchstart",this._touchStart,!1);c.removeEventListener("touchmove",this._touchMove,!1);c.removeEventListener("touchend",this._touchEnd,
!1);c.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(c.removeEventListener("mouseover",this._mouseOver,!1),c.removeEventListener("mouseout",this._mouseOut,!1),c.removeEventListener("mousedown",this._mouseDown,!1),c.removeEventListener("mouseup",this._mouseUp,!1),c.removeEventListener("click",this._mouseClick,!1));u.setSelectable(c,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}})})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(e,u,B,A,p,l,k,g){return e([l],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==A("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(d,c){this.node=d;
u.mixin(this,c);void 0!==d.style.msTouchAction?d.style.msTouchAction="none":void 0!==d.style.touchAction&&(d.style.touchAction="none");c=navigator.msPointerEnabled;var a=function(b){b.preventDefault()};d.addEventListener("selectstart",a,!1);d.addEventListener("dragstart",a,!1);this._pointerDown=u.hitch(this,this._pointerDown);this._pointerMove=u.hitch(this,this._pointerMove);this._pointerUp=u.hitch(this,this._pointerUp);this._pointerCancel=u.hitch(this,this._pointerCancel);d.addEventListener(c?"MSPointerDown":
"pointerdown",this._pointerDown,!1);d.addEventListener(c?"MSPointerMove":"pointermove",this._pointerMove,!1);d.addEventListener(c?"MSPointerUp":"pointerup",this._pointerUp,!1);d.addEventListener(c?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=u.hitch(this,this._mouseOver),this._mouseOut=u.hitch(this,this._mouseOut),this._mouseLeave=u.hitch(this,this._mouseLeave),this._mouseDown=u.hitch(this,this._mouseDown),this._mouseUp=u.hitch(this,this._mouseUp),this._mouseClick=
u.hitch(this,this._mouseClick),this._mouseWheel=u.hitch(this,this._mouseWheel),this._mouseMove=u.hitch(this,this._mouseMove),this._mouseEnter=u.hitch(this,this._mouseEnter),this._onKeyDown=u.hitch(this,this._onKeyDown),this._onKeyUp=u.hitch(this,this._onKeyUp),d.addEventListener("mouseover",this._mouseOver,!1),d.addEventListener("mouseout",this._mouseOut,!1),d.addEventListener("mouseleave",this._mouseLeave,!1),d.addEventListener("mousedown",this._mouseDown,!1),d.addEventListener("mouseup",this._mouseUp,
!1),d.addEventListener("click",this._mouseClick,!1),d.addEventListener("mousewheel",this._mouseWheel,!1),d.addEventListener("mousemove",this._mouseMove,!1),d.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(d){if(-1<B.indexOf(this._touchIds,d.pointerId))this._pointerUp(d);else{var c=this._touches,a=d.target,b=d.pointerId,f=this._touchIds,t=(new Date).getTime();var n=c[b]={};n.pointerId=
b;n.startX=n.pageX=d.pageX;n.startY=n.pageY=d.pageY;n.startTS=t;f.push(b);this._numTouches++;a.setPointerCapture?a.setPointerCapture(b):a.msSetPointerCapture&&a.msSetPointerCapture(b);a=c[f[0]];c=c[f[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(a&&(a.startX=a.pageX,a.startY=a.pageY,a.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,a))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,a))):this._pinchActive&&
(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[a,c]))))}},_pointerMove:function(d){var c=this._touches,a=this._touchIds,b;if((b=c[d.pointerId])&&(b.pageX!==d.pageX||b.pageY!==d.pageY)){b.pageX=d.pageX;b.pageY=d.pageY;var f=Math.abs(b.pageX-b.startX);var t=Math.abs(b.pageY-b.startY);!b.moved&&(f>=this.tapRadius||t>=this.tapRadius)&&(b.moved=b.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(d,d)):b.moved&&(this._swipeActive=
!0,this._fire("onSwipeStart",this._processTouchEvent(d,d)));else if(2===this._numTouches)if(b=c[a[0]],c=c[a[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(d,[b,c]));else if(b.moved||c.moved){a=Math.abs(b.startX-c.startX);f=Math.abs(b.startY-c.startY);t=Math.abs(b.pageX-c.pageX);var n=Math.abs(b.pageY-c.pageY);Math.abs(Math.sqrt(t*t+n*n)-Math.sqrt(a*a+f*f))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(d,[b,c])))}}},_pointerUp:function(d){var c=
this._touches,a,b=this.node,f=d.target,t=d.pointerId,n=this._touchIds,m=n.slice(0),h=B.map(m,function(w){return c[w]}),v=(new Date).getTime();if(a=c[t])if(a.pageX=d.pageX,a.pageY=d.pageY,a.endTS=v,this._numTouches--,f.releasePointerCapture?f.releasePointerCapture(t):f.msReleasePointerCapture&&f.msReleasePointerCapture(t),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,d));else if(this._pinchActive)this._pinchActive=
!1,this._fire("onPinchEnd",this._processTouchEvent(d,d));else{if(!a.absMoved){f=Infinity;t=-Infinity;n=Infinity;v=-Infinity;var r=this.tapStartTolerance,C;for(C=0;C<m.length;C++)a=h[C],a.startTS<f&&(f=a.startTS),a.startTS>t&&(t=a.startTS),a.endTS<n&&(n=a.endTS),a.endTS>v&&(v=a.endTS);Math.abs(t-f)<=r&&Math.abs(v-n)<=r&&this._basicTap(d,h)}}else 1===this._numTouches&&this._pinchActive&&(n.splice(B.indexOf(n,d.pointerId),1),delete c[d.pointerId],a=c[n[0]],a.startX=a.pageX,a.startY=a.pageY,a.moved=!1,
document.msElementsFromPoint&&(m=document.msElementsFromPoint(a.pageX,a.pageY),B.some(m,function(w){return w===b})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[d,a])))},_pointerCancel:function(d){this._numTouches&&this._pointerUp(d)},_basicTap:function(d,c){var a=(new Date).getTime(),b=this,f=this._immediate;d=this._processTouchEvent(d,c);this._taps.push({touchInfos:c,ts:a,event:d});2<this._taps.length&&this._taps.shift();
this._fire("onBasicTap",d);clearTimeout(this._tapTimer);d=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var t=b;b=null;clearTimeout(t._tapTimer);t._analyzeTap(f)},f?0:d)},_analyzeTap:function(d){var c=this._taps,a=c[0],b=c[1],f=a.touchInfos,t=b&&b.touchInfos;c.length&&(d||(this._taps=[]),a&&b?f.length===t.length?b.ts-a.ts<=this.doubleTapDuration?(1===f.length?(d=Math.abs(f[0].startX-t[0].startX),f=Math.abs(f[0].startY-t[0].startY),f=d<=
this.doubleTapRadius&&f<=this.doubleTapRadius):f=!0,f?this._processedDoubleTap(c):this._processedTap(b)):this._processedTap(b):this._processedTap(b):this._processedTap(a||b))},_processedTap:function(d){var c=d.event;this._fire("onProcessedTap",c);1===d.touchInfos.length?this._fire("onTap",this._fixEvent(c)):2===d.touchInfos.length&&this._fire("onTwoFingerTap",c)},_processedDoubleTap:function(d){var c=1===d[1].touchInfos.length;if(c){var a=[this._fixEvent(d[0].event),this._fixEvent(d[1].event)];a[1].relatedEvents=
a}d=[d[0].event,d[1].event];d[1].relatedEvents=d;this._fire("onProcessedDoubleTap",d[1]);c&&(this._fire("onDoubleTap",a[1]),this._fire("onDblClick",a[1]))},_mouseOver:function(d){this._fire("onMouseOver",this._processMouseEvent(d))},_mouseMove:function(d){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(d)):this._fire("onMouseMove",this._processMouseEvent(d))},_mouseOut:function(d){this._fire("onMouseOut",this._processMouseEvent(d))},_mouseLeave:function(d){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(d))},_mouseDown:function(d){this._downX=d.pageX;this._downY=d.pageY;this._fire("onMouseDown",this._processMouseEvent(d));0===d.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(d)))},_mouseUp:function(d){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(d)));this._fire("onMouseUp",this._processMouseEvent(d))},
_mouseClick:function(d){Math.abs(d.pageX-this._downX)<=this.clickRadius&&Math.abs(d.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(d))},_mouseWheel:function(d){var c=this.map;(c?c.isScrollWheelZoom||c.isScrollWheelPan:this.preventPageScroll)&&d.preventDefault();c=d.wheelDelta?d.wheelDelta/this.wheelDivisor:-d.detail/this.mozWheelDivisor;var a=Math.abs(c);a=a<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;d.value=0>c?-a:a;this._fire("onMouseWheel",this._processMouseEvent(d))},
_mouseEnter:function(d){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(d))},_onKeyDown:function(d){this._fire("onKeyDown",d)},_onKeyUp:function(d){this._fire("onKeyUp",d)},_fire:function(d,c){if(this[d])this[d](c);if(this.map&&this.map[d])this.map[d](c)},_fixEvent:function(d){var c=
{},a;for(a in d)c[a]=d[a];c.preventDefault=function(){d.preventDefault()};c.stopPropagation=function(){d.stopPropagation()};this.map&&(c.screenPoint=c.screenPoints[0],c.mapPoint=c.mapPoints[0]);return c},_processTouchEvent:function(d,c){var a=this.map,b=a&&a.position,f=0;if(b&&c)if(u.isArray(c)){var t;d.screenPoints=[];d.mapPoints=[];for(t=0;t<c.length;t++)if(c[t]){var n=new g(c[t].pageX-b.x,c[t].pageY-b.y);d.screenPoints.push(n);d.mapPoints.push(a.extent?a.toMap(n):new k)}else f++}else d.screenPoint=
new g(c.pageX-b.x,c.pageY-b.y),d.mapPoint=a.extent?a.toMap(d.screenPoint):new k;d.numPoints=c?u.isArray(c)?c.length-f:1:0;return d},_processMouseEvent:function(d){var c=this.map,a=c&&c.position;a&&(d.screenPoint=new g(d.pageX-a.x,d.pageY-a.y),d.mapPoint=c.extent?c.toMap(d.screenPoint):new k);return d},setImmediateTap:function(d){this._immediate=d},destroy:function(){var d=this.node;d.removeEventListener("MSPointerDown",this._pointerDown,!1);d.removeEventListener("MSPointerMove",this._pointerMove,
!1);d.removeEventListener("MSPointerUp",this._pointerUp,!1);d.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(d.removeEventListener("mouseover",this._mouseOver,!1),d.removeEventListener("mousemove",this._mouseMove,!1),d.removeEventListener("mouseout",this._mouseOut,!1),d.removeEventListener("mouseleave",this._mouseLeave,!1),d.removeEventListener("mousedown",this._mouseDown,!1),d.removeEventListener("mouseup",this._mouseUp,!1),d.removeEventListener("click",this._mouseClick,
!1),d.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}})})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C){var w={createDefaultRenderer:function(y){y=k.createDefaultSymbol(y);return new g(y)},fromJson:function(y,q){switch(y.type||""){case "simple":y=new g(y,q);break;case "uniqueValue":y=new d(y,null,null,null,null,q);break;case "classBreaks":y=new c(y,null,q);break;case "vectorField":y=new a(y);break;case "scaleDependent":y=this._scaleDependentFromJson(y);break;case "dotDensity":y=y.attributes?w.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(y);
break;case "temporal":y=this._temporalFromJson(y,q);break;case "heatmap":y=this._heatmapFromJson(y);break;case "rasterStretch":y=new v(y);break;case "rasterShadedRelief":y=new r(y);break;case "rasterColormap":y=new C(y);break;default:y=(y=q&&q.geometryType)?w.createDefaultRenderer(y):null}return y},_scaleDependentFromJson:function(y){var q={},x=y.minScale;q.rendererInfos=e.map(y.rendererInfos,function(E){var z=E.maxScale;E={minScale:x,maxScale:z,renderer:E.renderer&&this.fromJson(E.renderer)};x=z;
return E},this);return new f(q)},_dotDensityFromJson:function(y){y.backgroundColor&&u.isArray(y.backgroundColor)&&(y.backgroundColor=l.toDojoColor(y.backgroundColor));0<y.dotSize&&(y.dotSize=A.pt2px(y.dotSize));y.fields&&e.forEach(y.fields,function(q){q&&u.isArray(q.color)&&(q.color=l.toDojoColor(q.color))});y.legendOptions&&(y.legendOptions.backgroundColor&&u.isArray(y.legendOptions.backgroundColor)&&(y.legendOptions.backgroundColor=l.toDojoColor(y.legendOptions.backgroundColor)),y.legendOptions.outline&&
(y.legendOptions.outline=k.fromJson(y.legendOptions.outline)));y.outline&&(y.outline=k.fromJson(y.outline));return new b(y)},_temporalFromJson:function(y,q){var x=q&&q.geometryType;y=y||{};var E=this.fromJson(y.observationRenderer,q);q=y.latestObservationRenderer?this.fromJson(y.latestObservationRenderer,q):null;x=y.trackRenderer?this.fromJson(y.trackRenderer,x?{geometryType:"esriGeometryPolyline"}:null):null;y=this._agerFromJson(y.observationAger);return new m(E,q,x,y)},_agerFromJson:function(y){var q;
y=y||{};y.colorRange||y.sizeRange||y.alphaRange?q=this._timeRampFromJson(y):y.agerClassBreakInfos&&(q=this._timeClassBreaksFromJson(y));return q},_timeRampFromJson:function(y){var q,x,E;y.colorRange&&1<y.colorRange.length&&(q=[l.toDojoColor(y.colorRange[0]),l.toDojoColor(y.colorRange[1])]);y.sizeRange&&1<y.sizeRange.length&&(x=[y.sizeRange[0],y.sizeRange[1]]);y.alphaRange&&1<y.alphaRange.length&&(E=[y.alphaRange[0]/255,y.alphaRange[1]/255]);return new n(q,x,E)},_timeClassBreaksFromJson:function(y){var q=
y.agerClassBreakInfos,x=[],E;var z=t.UNIT_DAYS;switch(y.timeUnits){case "esriTimeUnitsSeconds":z=t.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":z=t.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":z=t.UNIT_HOURS;break;case "esriTimeUnitsMinutes":z=t.UNIT_MINUTES;break;case "esriTimeUnitsMonths":z=t.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":z=t.UNIT_WEEKS;break;case "esriTimeUnitsYears":z=t.UNIT_YEARS}for(E=0;E<q.length;E+=1){y=q[E];var D={minAge:0,maxAge:y.oldestAge||Infinity};y.color&&
(D.color=l.toDojoColor(y.color));y.alpha&&(D.alpha=y.alpha/255);D.size=y.size;x[E]=D}return new t(x,z)},_heatmapFromJson:function(y){var q=y.colorStops;q&&q instanceof Array&&e.forEach(q,function(x){x.color=l.toDojoColor(x.color)});return new h(y)}};return w})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(e,u,B,A,p,l,k){return e(k,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(g,
d){if(g&&!g.declaredClass){var c=g;this.symbol=(g=c.symbol)&&(g.declaredClass?g:l.fromJson(g,d));this.label=c.label;this.description=c.description}else this.symbol=g},getSymbol:function(g){return this.symbol},toJson:function(){var g=u.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return p.fixJson(g)}})})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(e,u,B,A,p,l,k,g,d,c){var a=Math.PI;return e(null,{declaredClass:"esri.renderer.Renderer",constructor:function(b){this._cache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var f=b.rotationType,t=b.rotationExpression;if(f||t)this.rotationInfo={type:f,expression:t}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));
this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=u.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var f=b.minSize,t=b.maxSize;f&&(b.minSize="number"===typeof f?p.pt2px(f):this._readSizeInfo(f));t&&(b.maxSize="number"===typeof t?p.pt2px(t):this._readSizeInfo(t));b.stops&&B.forEach(b.stops,function(n){n.size&&"number"===typeof n.size&&(n.size=p.pt2px(n.size))})}return b},_readColorInfo:function(b){b&&
(B.forEach(b.colors,function(f,t){u.isArray(f)&&(b.colors[t]=k.toDojoColor(f))}),B.forEach(b.stops,function(f,t){f.color&&u.isArray(f.color)&&(b.stops[t].color=k.toDojoColor(f.color))}));return b},_readOpacityInfo:function(b){if(b){var f=u.mixin({},b);f.transparencyValues&&(f.opacityValues=B.map(f.transparencyValues,function(t){return 1-t/100}),delete f.transparencyValues);f.stops&&(f.stops=B.map(f.stops,function(t){t=u.mixin({},t);t.opacity=1-t.transparency/100;delete t.transparency;return t}))}return f},
_readVariables:function(b){b&&(b=B.map(b,function(f){"sizeInfo"===f.type?f=this._readSizeInfo(f):"colorInfo"===f.type?f=this._readColorInfo(f):"transparencyInfo"===f.type&&(f=this._readOpacityInfo(f),f.type="opacityInfo");return f},this));return b},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!u.isFunction(b.expression)&&!b.field){var f=b.expression.match(this.rotationRE);f&&f[1]&&(b.field=f[1])}b.rotationType=
b.type}this._cache.rotationInfo=this._processRotationInfo(b);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(b){b&&!b.rotationType&&(b.rotationType="geographic");return this._createCache(b)},getRotationAngle:function(b,f){var t=this._getVarInfo(f&&f.rotationInfo,"rotationInfo");f=t.variable;t=this._cache[t.cacheKey];var n="arithmetic"===this._getRotationType(f),m=t&&t.hasExpr,h=null;if(f.field||m)h=this._getDataValue(b,f,null,t),null!=h&&(h=(h+(n?-90:0))*(n?-1:1));return h},
_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},_getDataValue:function(b,f,t,n,m){n||(n=this._getVarInfo(f,t),f=n.variable,n=this._cache[n.cacheKey],"sizeInfo"===t&&(n=n.root));return b._getDataValue(f,n,d,m)},setVisualVariables:function(b){var f=this._cache;B.forEach(this.visualVariables,function(t,n){f.hasOwnProperty(n)&&(f[n]=null)},this);this.visualVariables=b;B.some(b,function(t){return!!t.target})&&b.sort(function(t,n){return t.target===n.target?0:t.target?
1:-1});B.forEach(b,function(t,n){"colorInfo"===t.type?f[n]=this._processColorInfo(t):"opacityInfo"===t.type?f[n]=this._processOpacityInfo(t):"sizeInfo"===t.type?f[n]=this._processSizeInfo(t):"rotationInfo"===t.type&&(f[n]=this._processRotationInfo(t))},this);return this},getVisualVariableValues:function(b){var f=this.visualVariables,t;f&&(t=B.map(f,function(n){switch(n.type){case "sizeInfo":var m=this.getSize(b,{sizeInfo:n});break;case "colorInfo":m=this.getColor(b,{colorInfo:n});break;case "opacityInfo":m=
this.getOpacity(b,{opacityInfo:n});break;case "rotationInfo":m=this.getRotationAngle(b,{rotationInfo:n})}return{variable:n,value:m}},this));return t},getFieldsUsedInExpressions:function(){var b=[];B.forEach(this._getCacheObjects(),function(f){f.syntaxTree&&(b=b.concat(d.extractFieldNames(f.syntaxTree)))});b.sort();return B.filter(b,function(f,t){return 0===t||b[t-1]!==f})},hasGeometryOperations:function(){return B.some(this._getCacheObjects(),function(b){return b.syntaxTree?d.hasGeometryOperations(b.syntaxTree):
!1})},initializeArcadeEngine:function(){var b=[];B.forEach(this._getCacheObjects(),function(f){f.syntaxTree&&b.push(f.syntaxTree)});return c.initialize(b)},hasVisualVariables:function(b,f){return b?!!this.getVisualVariablesForType(b,f):!!(this.getVisualVariablesForType("sizeInfo",f)||this.getVisualVariablesForType("colorInfo",f)||this.getVisualVariablesForType("opacityInfo",f)||this.getVisualVariablesForType("rotationInfo",f))},getVisualVariablesForType:function(b,f){var t=this.visualVariables;if(!f&&
this[b]){"rotationInfo"===b&&(this[b].rotationType=this[b].type);var n=[this[b]]}else t&&(n=B.filter(t,function(m){return m.type===b&&("string"===typeof f?m.target===f:!1===f?!m.target:!0)}))&&0===n.length&&(n=void 0);return n},setSizeInfo:function(b){this.sizeInfo=this.proportionalSymbolInfo=b;this._cache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._createCache(b),minSize:this._createCache(b.minSize),maxSize:this._createCache(b.maxSize)}},_convertExpressionToArcade:function(b){b&&
b.expression&&(b.valueExpression="$view.scale")},_getVarInfo:function(b,f){if(b&&b.type===f){var t=B.indexOf(this.visualVariables,b);b=this.visualVariables[t]}else t=f,b=this[f];return{variable:b,cacheKey:t}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},getSize:function(b,f){var t=this._getVarInfo(f&&f.sizeInfo,"sizeInfo"),n=t.variable;t=this._cache[t.cacheKey];var m=null;if(n){var h=n.minSize;m=n.maxSize;h="object"===typeof h&&h?this._getSize(b,h,t&&t.minSize,f):h;m="object"===
typeof m&&m?this._getSize(b,m,t&&t.maxSize,f):m;m=this._getSize(b,n,t&&t.root,f,[h,m])}return m},_getSize:function(b,f,t,n,m){var h=f.stops,v=0,r=t&&t.hasExpr,C=t&&t.ipData,w=t&&t.isScaleDriven,y="object"===typeof b&&!!b,q="number"===typeof b?b:null;if(f.field||w||r){var x=n&&n.scale;r=m?m[0]:f.minSize;m=m?m[1]:f.maxSize;var E=f.minDataValue,z=f.maxDataValue,D=f.valueUnit||"unknown",F=f.valueRepresentation,J=f.scaleBy,L=n&&n.shape;w?q=x:"number"!==typeof q&&y&&(q=this._getDataValue(b,f,null,t));if(!this._isValidNumber(q))return null;
if(h)r=this._lookupData(q,C),q=r[0],m=r[1],q===m?v=h[q].size:(q=h[q].size,h=h[m].size,v=q+(h-q)*r[2]);else if(null!=r&&null!=m&&null!=E&&null!=z)q<=E?v=r:q>=z?v=m:(h=(q-E)/(z-E),"area"===J&&L?(r=(q="circle"===L)?a*Math.pow(r/2,2):r*r,h=r+h*((q?a*Math.pow(m/2,2):m*m)-r),v=q?2*Math.sqrt(h/a):Math.sqrt(h)):v=r+h*(m-r));else if("unknown"===D)null!=r&&null!=E&&(r&&E?(h=q/E,v="circle"===L?2*Math.sqrt(h*Math.pow(r/2,2)):"square"===L||"diamond"===L||"image"===L?Math.sqrt(h*Math.pow(r,2)):h*r):v=q+(r||E),
v=v<r?r:v,null!=m&&v>m&&(v=m));else{h=(n&&n.resolution?n.resolution:1)*this._meterIn[D];if("area"===F)v=Math.sqrt(q/a)/h,v*=2;else if(v=q/h,"radius"===F||"distance"===F)v*=2;null!=r&&v<r&&(v=r);null!=m&&v>m&&(v=m)}}else v=h&&h[0]&&h[0].size,null==v&&(v=f.minSize);return v=isNaN(v)?0:v},getSizeRangeAtScale:function(b,f){b=this._getVarInfo(b,"sizeInfo");var t=this._cache[b.cacheKey],n={scale:f};if((b=b.variable)&&f){var m=b.minSize;f=b.maxSize;var h=b.stops;h&&h.length?(b=h[0].size,t=h[h.length-1].size):
(b="object"===typeof m&&m?this._getSize({},m,t&&t.minSize,n):m,t="object"===typeof f&&f?this._getSize({},f,t&&t.maxSize,n):f);if(null!=b||null!=t){if(b>t){var v=t;t=b;b=v}v={minSize:b,maxSize:t}}}return v},setColorInfo:function(b){this.colorInfo=b;this._cache.colorInfo=this._processColorInfo(b);return this},_createCache:function(b,f){if(f=g.createAttributeCache(b,f))f.ipData=this._interpolateData(b);return f},_getCacheObjects:function(b){var f;b=b||this._cache;var t=[];for(f in b){var n=b[f];b.hasOwnProperty(f)&&
n&&"object"===typeof n&&(n.hasOwnProperty("idSource")?t.push(n):t=t.concat(this._getCacheObjects(n)))}return t},_processColorInfo:function(b){b&&(B.forEach(b.colors,function(f,t){u.isArray(f)&&(b.colors[t]=new k(f))}),B.forEach(b.stops,function(f,t){f.color&&u.isArray(f.color)&&(b.stops[t].color=new k(f.color))}));return this._createCache(b)},getColor:function(b,f){f=this._getVarInfo(f&&f.colorInfo,"colorInfo");return this._getColorComponent(b,f.variable,this._cache[f.cacheKey])},setOpacityInfo:function(b){this.opacityInfo=
b;this._cache.opacityInfo=this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._createCache(b)},getOpacity:function(b,f){f=this._getVarInfo(f&&f.opacityInfo,"opacityInfo");return this._getColorComponent(b,f.variable,this._cache[f.cacheKey],!0)},_getColorComponent:function(b,f,t,n,m){var h="number"===typeof b?b:null,v=t&&t.hasExpr,r=t&&t.ipData,C;f&&f.field||v?("number"!==typeof h&&"object"===typeof b&&b&&(h=this._getDataValue(b,f,null,t)),this._isValidNumber(h)||(h=
null),null!=h&&(C=n?this._getOpacity(h,f,r):this._getColor(h,f,r))):f&&(b=f.stops,n?(C=b&&b[0]&&b[0].opacity,null==C&&(C=f.opacityValues&&f.opacityValues[0])):C=b&&b[0]&&b[0].color||f.colors&&f.colors[0]);m&&(m.data=h,m.value=C);return m||C},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},_interpolateData:function(b){if(b)if(b.colors||b.opacityValues){var f=(b.colors||b.opacityValues).length,t=b.minDataValue,n=(b.maxDataValue-t)/(f-1);var m=[];for(b=0;b<
f;b++)m[b]=t+b*n}else b.stops&&(m=B.map(b.stops,function(h){return h.value}));return m},_getOpacity:function(b,f,t){b=this._lookupData(b,t);f=f||this.opacityInfo;if(b){t=b[0];var n=b[1];t===n?n=this._getOpacValue(f,t):(t=this._getOpacValue(f,t),f=this._getOpacValue(f,n),n=t+(f-t)*b[2])}return n},_getOpacValue:function(b,f){return b.opacityValues?b.opacityValues[f]:b.stops[f].opacity},_getColor:function(b,f,t){b=this._lookupData(b,t);f=f||this.colorInfo;if(b){var n=b[0];t=b[1];n=n===t?this._getColorObj(f,
n):k.blendColors(this._getColorObj(f,n),this._getColorObj(f,t),b[2])}return n},_getColorObj:function(b,f){return b.colors?b.colors[f]:b.stops[f].color},_lookupData:function(b,f){if(f){var t=0,n=f.length-1;B.some(f,function(h,v){if(b<h)return n=v,!0;t=v;return!1});var m=[t,n,(b-f[t])/(f[n]-f[t])]}return m},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},
_writeSizeInfo:function(b){if(b){b=u.mixin({},b);this._convertExpressionToArcade(b);var f=b.minSize,t=b.maxSize;f&&(b.minSize="number"===typeof f?p.px2pt(f):this._writeSizeInfo(f));t&&(b.maxSize="number"===typeof t?p.px2pt(t):this._writeSizeInfo(t));if(f=b.legendOptions)if(b.legendOptions=u.mixin({},f),f=f.customValues)b.legendOptions.customValues=f.slice(0);b.stops&&(b.stops=B.map(b.stops,function(n){n=u.mixin({},n);n.size&&"number"===typeof n.size&&(n.size=p.px2pt(n.size));return n}))}return b},
_writeColorInfo:function(b){b&&(b=u.mixin({},b),b.colors&&(b.colors=B.map(b.colors,function(f){return k.toJsonColor(f)})),b.stops&&(b.stops=B.map(b.stops,function(f){f=u.mixin({},f);f.color&&(f.color=k.toJsonColor(f.color));return f})),b.legendOptions&&(b.legendOptions=u.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){if(b){var f=u.mixin({},b);f.opacityValues&&(f.transparencyValues=B.map(f.opacityValues,function(t){return 100*(1-t)}),delete f.opacityValues);f.stops&&(f.stops=B.map(f.stops,
function(t){t=u.mixin({},t);t.transparency=100*(1-t.opacity);delete t.opacity;return t}));f.legendOptions&&(f.legendOptions=u.mixin({},f.legendOptions))}return f},toJson:function(b){var f=this.visualVariables,t=u.clone(this.authoringInfo),n=b&&b.useLegacyRotationProperties,m=(b=(b=this.getVisualVariablesForType("rotationInfo",!1))&&b[0])&&b.field,h;b&&(b===this.rotationInfo||n)&&(h=b.expression||m&&(u.isFunction(m)?m:"["+m+"]"));f&&(f=B.map(f,function(v){"sizeInfo"===v.type?v=this._writeSizeInfo(v):
"colorInfo"===v.type?v=this._writeColorInfo(v):"opacityInfo"===v.type?(v=this._writeOpacityInfo(v),v.type="transparencyInfo"):"rotationInfo"===v.type&&(v=n?null:u.mixin({},v));return v},this),f=B.filter(f,function(v){return null!=v}));t&&B.forEach(t.visualVariables,function(v){"opacityInfo"===v.type&&(v.type="transparencyInfo")});return{rotationType:h&&(this._getRotationType(b)||"geographic"),rotationExpression:h,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:f,authoringInfo:t}}})})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(e,u,B,A,p,l){var k={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(g){return"string"===typeof g?A(g,B.outputTypes.Hex):null},getAttributeIdSource:function(g){if(!g)return null;var d=
g.field,c=g.valueExpression,a=null;if(c)a=c;else if(e.isFunction(d))a=d.toString();else if(d){var b=(c=g.normalizationField)?"field":g.normalizationType;g=parseFloat(g.normalizationTotal);b&&(b=b.toLowerCase(),a=d.toLowerCase()+",norm:"+b,c?a+=","+c.toLowerCase():"percent-of-total"===b&&(d=g,"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d&&0!==g||(g=null),a+=","+g))}return a},createAttributeCache:function(g,d){if(!g)return null;var c=g.valueExpression,a=l.createSyntaxTree(c),b=k.getAttributeIdSource(g);
return{attributeInfo:g,isNumeric:!d,idSource:b,id:k.getAttributeId(b),hasExpr:!!c,compiledFunc:l.createFunction(a),syntaxTree:a,isScaleDriven:!!g.expression||k.viewScaleRE.test(c),dependsOnView:a?l.dependsOnView(a):!1,dependsOnGeometry:a?l.hasGeometryOperations(a):!1,isJSFunc:e.isFunction(g.field)}}};return k})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(e){e=e.getObject("dojox.encoding.digests",!0);e.outputTypes={Base64:0,Hex:1,String:2,Raw:3};e.addWords=function(u,
B){var A=(u&65535)+(B&65535);return(u>>16)+(B>>16)+(A>>16)<<16|A&65535};e.stringToWord=function(u){for(var B=[],A=0,p=8*u.length;A<p;A+=8)B[A>>5]|=(u.charCodeAt(A/8)&255)<<A%32;return B};e.wordToString=function(u){for(var B=[],A=0,p=32*u.length;A<p;A+=8)B.push(String.fromCharCode(u[A>>5]>>>A%32&255));return B.join("")};e.wordToHex=function(u){for(var B=[],A=0,p=4*u.length;A<p;A++)B.push("0123456789abcdef".charAt(u[A>>2]>>A%4*8+4&15)+"0123456789abcdef".charAt(u[A>>2]>>A%4*8&15));return B.join("")};
e.wordToBase64=function(u){for(var B=[],A=0,p=4*u.length;A<p;A+=3)for(var l=(u[A>>2]>>A%4*8&255)<<16|(u[A+1>>2]>>(A+1)%4*8&255)<<8|u[A+2>>2]>>(A+2)%4*8&255,k=0;4>k;k++)8*A+6*k>32*u.length?B.push("\x3d"):B.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>6*(3-k)&63));return B.join("")};e.stringToUtf8=function(u){for(var B="",A=-1,p,l;++A<u.length;)p=u.charCodeAt(A),l=A+1<u.length?u.charCodeAt(A+1):0,55296<=p&&56319>=p&&56320<=l&&57343>=l&&(p=65536+((p&1023)<<10)+(l&
1023),A++),127>=p?B+=String.fromCharCode(p):2047>=p?B+=String.fromCharCode(192|p>>>6&31,128|p&63):65535>=p?B+=String.fromCharCode(224|p>>>12&15,128|p>>>6&63,128|p&63):2097151>=p&&(B+=String.fromCharCode(240|p>>>18&7,128|p>>>12&63,128|p>>>6&63,128|p&63));return B};return e})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(e){function u(g,d){return g<<d|g>>>32-d}function B(g,d,c,a,b,f){return e.addWords(u(e.addWords(e.addWords(d,g),e.addWords(a,f)),b),c)}function A(g,d,c,a,b,f,
t){return B(d&c|~d&a,g,d,b,f,t)}function p(g,d,c,a,b,f,t){return B(d&a|c&~a,g,d,b,f,t)}function l(g,d,c,a,b,f,t){return B(c^(d|~a),g,d,b,f,t)}function k(g,d){g[d>>5]|=128<<d%32;g[(d+64>>>9<<4)+14]=d;d=1732584193;for(var c=-271733879,a=-1732584194,b=271733878,f=0;f<g.length;f+=16){var t=d,n=c,m=a,h=b;d=A(d,c,a,b,g[f+0],7,-680876936);b=A(b,d,c,a,g[f+1],12,-389564586);a=A(a,b,d,c,g[f+2],17,606105819);c=A(c,a,b,d,g[f+3],22,-1044525330);d=A(d,c,a,b,g[f+4],7,-176418897);b=A(b,d,c,a,g[f+5],12,1200080426);
a=A(a,b,d,c,g[f+6],17,-1473231341);c=A(c,a,b,d,g[f+7],22,-45705983);d=A(d,c,a,b,g[f+8],7,1770035416);b=A(b,d,c,a,g[f+9],12,-1958414417);a=A(a,b,d,c,g[f+10],17,-42063);c=A(c,a,b,d,g[f+11],22,-1990404162);d=A(d,c,a,b,g[f+12],7,1804603682);b=A(b,d,c,a,g[f+13],12,-40341101);a=A(a,b,d,c,g[f+14],17,-1502002290);c=A(c,a,b,d,g[f+15],22,1236535329);d=p(d,c,a,b,g[f+1],5,-165796510);b=p(b,d,c,a,g[f+6],9,-1069501632);a=p(a,b,d,c,g[f+11],14,643717713);c=p(c,a,b,d,g[f+0],20,-373897302);d=p(d,c,a,b,g[f+5],5,-701558691);
b=p(b,d,c,a,g[f+10],9,38016083);a=p(a,b,d,c,g[f+15],14,-660478335);c=p(c,a,b,d,g[f+4],20,-405537848);d=p(d,c,a,b,g[f+9],5,568446438);b=p(b,d,c,a,g[f+14],9,-1019803690);a=p(a,b,d,c,g[f+3],14,-187363961);c=p(c,a,b,d,g[f+8],20,1163531501);d=p(d,c,a,b,g[f+13],5,-1444681467);b=p(b,d,c,a,g[f+2],9,-51403784);a=p(a,b,d,c,g[f+7],14,1735328473);c=p(c,a,b,d,g[f+12],20,-1926607734);d=B(c^a^b,d,c,g[f+5],4,-378558);b=B(d^c^a,b,d,g[f+8],11,-2022574463);a=B(b^d^c,a,b,g[f+11],16,1839030562);c=B(a^b^d,c,a,g[f+14],
23,-35309556);d=B(c^a^b,d,c,g[f+1],4,-1530992060);b=B(d^c^a,b,d,g[f+4],11,1272893353);a=B(b^d^c,a,b,g[f+7],16,-155497632);c=B(a^b^d,c,a,g[f+10],23,-1094730640);d=B(c^a^b,d,c,g[f+13],4,681279174);b=B(d^c^a,b,d,g[f+0],11,-358537222);a=B(b^d^c,a,b,g[f+3],16,-722521979);c=B(a^b^d,c,a,g[f+6],23,76029189);d=B(c^a^b,d,c,g[f+9],4,-640364487);b=B(d^c^a,b,d,g[f+12],11,-421815835);a=B(b^d^c,a,b,g[f+15],16,530742520);c=B(a^b^d,c,a,g[f+2],23,-995338651);d=l(d,c,a,b,g[f+0],6,-198630844);b=l(b,d,c,a,g[f+7],10,1126891415);
a=l(a,b,d,c,g[f+14],15,-1416354905);c=l(c,a,b,d,g[f+5],21,-57434055);d=l(d,c,a,b,g[f+12],6,1700485571);b=l(b,d,c,a,g[f+3],10,-1894986606);a=l(a,b,d,c,g[f+10],15,-1051523);c=l(c,a,b,d,g[f+1],21,-2054922799);d=l(d,c,a,b,g[f+8],6,1873313359);b=l(b,d,c,a,g[f+15],10,-30611744);a=l(a,b,d,c,g[f+6],15,-1560198380);c=l(c,a,b,d,g[f+13],21,1309151649);d=l(d,c,a,b,g[f+4],6,-145523070);b=l(b,d,c,a,g[f+11],10,-1120210379);a=l(a,b,d,c,g[f+2],15,718787259);c=l(c,a,b,d,g[f+9],21,-343485551);d=e.addWords(d,t);c=e.addWords(c,
n);a=e.addWords(a,m);b=e.addWords(b,h)}return[d,c,a,b]}e.MD5=function(g,d){d=d||e.outputTypes.Base64;g=k(e.stringToWord(g),8*g.length);switch(d){case e.outputTypes.Raw:return g;case e.outputTypes.Hex:return e.wordToHex(g);case e.outputTypes.String:return e.wordToString(g);default:return e.wordToBase64(g)}};e.MD5._hmac=function(g,d,c){c=c||e.outputTypes.Base64;var a=e.stringToWord(d);16<a.length&&(a=k(a,8*d.length));var b=[];d=[];for(var f=0;16>f;f++)b[f]=a[f]^909522486,d[f]=a[f]^1549556828;g=k(b.concat(e.stringToWord(g)),
512+8*g.length);g=k(d.concat(g),640);switch(c){case e.outputTypes.Raw:return g;case e.outputTypes.Hex:return e.wordToHex(g);case e.outputTypes.String:return e.wordToString(g);default:return e.wordToBase64(g)}};return e.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(e,u,B,A,p,l,k){var g={vars:{$feature:"any",$view:"any"}},d=/^\$feature\./i,c={_getSyntaxTree:function(a){return"string"===
typeof a?c.createSyntaxTree(a):a},createSyntaxTree:function(a){try{var b=a?l.parseScript(a):null}catch(f){b=null}return b},createFunction:function(a,b){b=b||e.clone(g);a=c._getSyntaxTree(a);try{var f=a?l.compileScript(a,b):null}catch(t){console.log("expressionUtils.createFunction: compilation failed. "+(t.message||"")),f=null}return f},createExecContext:function(a,b){return{vars:{$feature:a?k.createFromGraphic(a):new k,$view:b&&b.view},spatialReference:b&&b.sr}},evalSyntaxTree:function(a,b){try{var f=
l.executeScript(a,b)}catch(t){f=null}return f},executeFunction:function(a,b){try{var f=a?a(b):null}catch(t){f=null}return f},executeAsyncFunction:function(a,b){try{var f=a?a(b):(new A).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(t){f=(new A).reject(t)}return f},extractFieldNames:function(a){a=c._getSyntaxTree(a);a=l.extractFieldLiterals(a);var b=[];u.forEach(a,function(f){d.test(f)&&(f=f.replace(d,""),b.push(f))});b.sort();return u.filter(b,
function(f,t){return 0===t||b[t-1]!==f})},dependsOnView:function(a){return c.hasVariable(a,"$view")},hasGeometryOperations:function(a){return(a=c._getSyntaxTree(a))?l.scriptUsesGeometryEngine(a):!1},enableGeometryOperations:function(){return l.enableGeometrySupport()},hasVariable:function(a,b){return(a=c._getSyntaxTree(a))?l.referencesMember(a,b):!1},hasFunction:function(a,b){return(a=c._getSyntaxTree(a))?l.referencesFunction(a,b):!1},createFeatureSetFromLayer:function(a,b){b=b||{};var f=l.featureSetUtils();
return f?f.constructFeatureSet(a,b.spatialReference,b.outFields,b.returnGeometry,b.cache):null},createFeatureSetFromLayerUrl:function(a,b){b=b||{};var f=l.featureSetUtils();return f?f.constructFeatureSetFromUrlRaw(a,b.spatialReference,b.outFields,b.returnGeometry,b.cache):null},createFeatureSetCollectionFromMap:function(a,b){var f=l.featureSetUtils();return f?f.createFeatureSetCollectionFromMap(a,a.spatialReference,b&&b.cache):null},createFeatureSetCollectionFromServiceUrl:function(a,b){b=b||{};var f=
l.featureSetUtils();return f?f.createFeatureSetCollectionFromService(a,b.spatialReference,b.cache):null},hasFeatureSetOperations:function(a){return(a=c._getSyntaxTree(a))?l.scriptUsesFeatureSet(a):!1},enableFeatureSetOperations:function(){return l.enableFeatureSetSupport().then(function(){var a=l.featureSetUtils();a&&a.initialiseMetaDataCache()})},enableAsyncOperations:function(){return l.enableAsyncSupport()}};return c})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),
function(e,u,B,A,p,l,k,g,d,c){function a(Q,ba){if(null===E)throw Error("Async Arcade must be enabled for this script");return g("csp-restrictions")||!1===y?function(fa){return E.executeScript(Q,fa)}:B.compileScript(Q,ba,!0)}function b(Q,ba){void 0===ba&&(ba=[]);return l.parseScript(Q,ba)}function f(Q,ba){if(!0===ba.useAsync||!0===Q.isAsync){if(null===E)throw Error("Async Arcade must be enabled for this script");return E.executeScript(Q,ba)}return A.executeScript(Q,ba)}function t(Q,ba){return A.referencesMember(Q,
ba)}function n(Q,ba){void 0===ba&&(ba=[]);void 0===Q.usesGeometry&&k.findScriptDependencies(Q,ba);return!0===Q.usesGeometry}function m(){return D?D:D=d.create(function(Q,ba){e(["../geometry/geometryEngine","./functions/geomsync"],function(fa,Y){x=!0;Y.setGeometryEngine(fa);Q(!0)},function(fa){ba(fa)})})}function h(){return null!==F?F:F=B.enableAsyncSupport().then(function(){return d.create(function(Q,ba){e(["./arcadeAsyncRuntime"],function(fa){try{E=fa;fa=0;for(var Y=z;fa<Y.length;fa++){var ma=Y[fa];
E.extend(ma);B.extend(ma,"async")}z=null;Q(!0)}catch(ca){ba(ca)}},ba)})})}function v(){return E?!0:!1}function r(){return J?J:J=h().then(function(){return d.create(function(Q,ba){e(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(fa,Y,ma,ca,la){try{L=fa,E.extend([Y,ma,ca,la]),B.extend([Y,ma,ca,la],"async"),q=!0,Q(!0)}catch(ta){ba(ta)}},ba)})})}function C(Q,ba){void 0===ba&&(ba=[]);void 0===Q.usesFeatureSet&&
k.findScriptDependencies(Q,ba);return!0===Q.usesFeatureSet}function w(Q,ba){if(ba)for(var fa=0;fa<ba.length;fa++)if(t(Q,ba[fa]))return!0;return!1}Object.defineProperty(u,"__esModule",{value:!0});u.featureSetUtils=u.scriptTouchesGeometry=u.loadScriptDependencies=u.scriptIsAsync=u.scriptUsesFeatureSet=u.enableFeatureSetSupport=u.isGeometryEnabled=u.isAsyncEnabled=u.isFeatureSetSupportEnabled=u.enableAsyncSupport=u.enableGeometrySupport=u.scriptUsesGeometryEngine=u.extractFieldLiterals=u.referencesFunction=
u.referencesMember=u.executeScript=u.parseAndExecuteScript=u.scriptCheck=u.validateScript=u.parseScript=u.extend=u.compileScript=void 0;var y=function(){if(g("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Q){return!1}}(),q=!1,x=!1,E=null,z=[];u.compileScript=function(Q,ba){return!0===ba.useAsync||!0===Q.isAsync?a(Q,ba):g("csp-restrictions")?function(fa){return A.executeScript(Q,fa)}:B.compileScript(Q,ba)};u.extend=function(Q){A.extend(Q);B.extend(Q,
"sync");null===E?z.push(Q):(B.extend(Q,"async"),E.extend(Q))};u.parseScript=b;u.validateScript=function(Q,ba,fa){void 0===fa&&(fa="");return l.validateScript(Q,ba,fa)};u.scriptCheck=function(Q,ba,fa,Y){void 0===Y&&(Y="");return l.scriptCheck(Q,ba,fa,Y)};u.parseAndExecuteScript=function(Q,ba,fa){void 0===fa&&(fa=[]);Q=l.parseScript(Q,fa);return f(Q,ba)};u.executeScript=f;u.referencesMember=t;u.referencesFunction=function(Q,ba){return A.referencesFunction(Q,ba)};u.extractFieldLiterals=function(Q,ba){void 0===
ba&&(ba=!1);return l.extractFieldLiterals(Q,ba)};u.scriptUsesGeometryEngine=n;var D=null;u.enableGeometrySupport=m;var F=null;u.enableAsyncSupport=h;u.isFeatureSetSupportEnabled=function(){return q};u.isAsyncEnabled=v;u.isGeometryEnabled=function(){return x};var J=null;u.enableFeatureSetSupport=r;u.scriptUsesFeatureSet=C;u.scriptIsAsync=function(Q,ba){void 0===ba&&(ba=[]);void 0===Q.isAsync&&k.findScriptDependencies(Q,ba);return!0===Q.isAsync};u.loadScriptDependencies=function(Q,ba,fa,Y){void 0===
fa&&(fa=[]);void 0===Y&&(Y=!1);return d.create(function(ma,ca){var la="string"===typeof Q?b(Q):Q,ta=[];la&&(!1===x&&(n(la)||Y)&&ta.push(m()),!1===v()&&(!0===la.isAsync||ba)&&ta.push(h()),!1===q&&(C(la)||w(la,fa))&&ta.push(r()));ta?d.all(ta).then(function(){ma(!0)},ca):ma(!0)})};u.scriptTouchesGeometry=function(Q){if(n(Q))return!0;Q=k.findFunctionCalls(Q);return-1<Q.indexOf("geometry")||-1<Q.indexOf("feature")?!0:!1};var L=null;u.featureSetUtils=function(){return L};p.MomentLibrary.Moment=c})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E){function z(T,S,ia){try{return ia(T,null,S)}catch(na){throw na;}}function D(T){return T instanceof Error?v.reject(T):v.reject(Error(T))}function F(T,S){try{switch(S.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return fa(T,S);case "VariableDeclaration":for(var ia=[],na=0;na<S.declarations.length;na++)ia.push(F(T,S.declarations[na]));return ia.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return ba(T,
S);case "FunctionDeclaration":var va=S.id.name.toLowerCase(),Ba={isAsync:T.isAsync,spatialReference:T.spatialReference,console:T.console,lrucache:T.lrucache,interceptor:T.interceptor,services:T.services,symbols:T.symbols,mangleMap:T.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:T.depthCounter+1,globalScope:T.globalScope};if(64<Ba.depthCounter)throw Error("Exceeded maximum function depth");ia="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(na=0;na<S.params.length;na++){var Na=S.params[na].name.toLowerCase(),Va=ra(T);Ba.localScope._SymbolsMap[Na]=Va;Ba.mangleMap[Na]=Va;ia+="lscope['"+Va+"']\x3darguments["+na.toString()+"];\n"}!0===T.isAsync?(ia=ia+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(ba(Ba,S.body)+"\n return lastStatement; "),ia+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(ia+=ba(Ba,S.body)+"\n return lastStatement; }, runtimeCtx))",ia+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==T.globalScope[va])var Da="gscope['"+va+"']\x3d"+ia;else void 0!==T.globalScope._SymbolsMap[va]?Da="gscope['"+T.globalScope._SymbolsMap[va]+"']\x3d"+ia:(Va=ra(T),T.globalScope._SymbolsMap[va]=Va,T.mangleMap[va]=Va,Da="gscope['"+Va+"']\x3d"+ia);return Da;case "ReturnStatement":var K=null===S.argument?"return lc.voidOperation":"return "+F(T,S.argument);return K;case "IfStatement":if("AssignmentExpression"===S.test.type||"UpdateExpression"===S.test.type)throw Error(c.nodeErrorMessage(S.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var V=F(T,S.test),ha=M(T),N="var "+ha+" \x3d "+V+";\n if ("+ha+" \x3d\x3d\x3d true) {\n"+Q(T,S.consequent)+"\n }\n";N=null!==S.alternate?N+("else if ("+ha+"\x3d\x3d\x3dfalse)   { \n"+Q(T,S.alternate)+"}\n"):N+("else if ("+ha+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return N+="else { lang.error({type: '"+S.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var aa="AssignmentExpression"===
S.expression.type?"lastStatement \x3d lc.voidOperation; "+F(T,S.expression)+"; \n ":"lastStatement \x3d "+F(T,S.expression)+"; ";return aa;case "AssignmentExpression":return L(T,S);case "UpdateExpression":return J(T,S);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var ja=[];va=Da=0;for(na=S.quasis;va<na.length;va++){var pa=na[va];ja.push(pa.value?JSON.stringify(pa.value.cooked):JSON.stringify(""));!1===pa.tail&&(ja.push(S.expressions[Da]?
"lang.castString(lang.aCheck("+F(T,S.expressions[Da])+", 'TemplateLiteral'))":""),Da++)}ia="(["+ja.join(",")+"]).join('')"}catch(jb){throw jb;}return ia;case "TemplateElement":return JSON.stringify(S.value?S.value.cooked:"");case "ForStatement":ia="lastStatement \x3d lc.voidOperation; \n";null!==S.init&&(ia+=F(T,S.init)+"; ");var wa=M(T),Ja=M(T);ia+="var "+wa+" \x3d true; \n do { ";null!==S.update&&(ia+=" if ("+wa+"\x3d\x3d\x3dfalse) {\n "+F(T,S.update)+"  \n}\n "+wa+"\x3dfalse; \n");null!==S.test&&
(ia+="var "+Ja+" \x3d "+F(T,S.test)+"; ",ia+="if ("+Ja+"\x3d\x3d\x3dfalse) { break; } else if ("+Ja+"!\x3d\x3dtrue) { lang.error({type: '"+S.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");ia+=F(T,S.body);null!==S.update&&(ia+="\n "+F(T,S.update));return ia+("\n"+wa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ea=M(T),Qa=M(T),Ka=M(T),Pa="var "+Ea+" \x3d "+F(T,S.right)+";\n";"VariableDeclaration"===S.left.type&&(Pa+=F(T,S.left));
var Ua="VariableDeclaration"===S.left.type?S.left.declarations[0].id.name:S.left.name;Ua=Ua.toLowerCase();ia="";null!==T.localScope&&(void 0!==T.localScope[Ua]?ia="lscope['"+Ua+"']":void 0!==T.localScope._SymbolsMap[Ua]&&(ia="lscope['"+T.localScope._SymbolsMap[Ua]+"']"));""===ia&&(void 0!==T.globalScope[Ua]?ia="gscope['"+Ua+"']":void 0!==T.globalScope._SymbolsMap[Ua]&&(ia="gscope['"+T.globalScope._SymbolsMap[Ua]+"']"));Pa=Pa+("if ("+Ea+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ea+") || lc.isString("+Ea+")) {var ")+(Qa+"\x3d"+Ea+".length; \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Qa+"; "+Ka+"++) {\n");Pa+=ia+"\x3d"+Ka+";\n";Pa+=F(T,S.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";Pa+="else if (lc.isImmutableArray("+Ea+")) {";Pa=Pa+("var "+Qa+"\x3d"+Ea+".length(); \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Qa+"; "+Ka+"++) {\n");Pa+=ia+"\x3d"+Ka+";\n";Pa+=F(T,S.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";Pa+="else if (( "+
Ea+" instanceof lang.Dictionary) || ( "+Ea+" instanceof lang.Feature)) {";Pa=Pa+("var "+Qa+"\x3d"+Ea+".keys(); \nfor(var ")+(Ka+"\x3d0; "+Ka+"\x3c"+Qa+".length; "+Ka+"++) {\n");Pa+=ia+"\x3d"+Qa+"["+Ka+"];\n";Pa+=F(T,S.body);Pa+="\n}\n";Pa+=" lastStatement \x3d lc.voidOperation; \n";Pa+=" \n}\n";T.isAsync&&(Pa+="else if (lc.isFeatureSet("+Ea+")) {",Pa=Pa+("var "+Qa+"\x3d"+Ea+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Ka+"\x3dlang. graphicToFeature( yield "+Qa+".next(),"+Ea+"); "+Ka+"!\x3dnull; "+
Ka+"\x3dlang. graphicToFeature( yield "+Qa+".next(),"+Ea+")) {\n")+(ia+"\x3d"+Ka+";\n"),Pa+=F(T,S.body),Pa+="\n}\n",Pa+=" lastStatement \x3d lc.voidOperation; \n",Pa+=" \n}\n");return Pa+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ma(T,S);case "MemberExpression":try{ia=void 0;ia=!0===S.computed?F(T,S.property):"'"+S.property.name+"'";var eb="lang.member("+F(T,S.object)+","+ia+")"}catch(jb){throw jb;}return eb;case "Literal":return null===S.value||void 0===S.value?"null":
JSON.stringify(S.value);case "ThisExpression":throw Error(c.nodeErrorMessage(S,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==S.callee.type)throw Error(c.nodeErrorMessage(S,"RUNTIME","ONLYNODESSUPPORTED"));var ab=S.callee.name.toLowerCase();ia="";null!==T.localScope&&(void 0!==T.localScope[ab]?ia="lscope['"+ab+"']":void 0!==T.localScope._SymbolsMap[ab]&&(ia="lscope['"+T.localScope._SymbolsMap[ab]+"']"));""===ia&&(void 0!==T.globalScope[ab]?ia="gscope['"+ab+"']":void 0!==T.globalScope._SymbolsMap[ab]&&
(ia="gscope['"+T.globalScope._SymbolsMap[ab]+"']"));if(""!==ia){na="[";for(pa=0;pa<S.arguments.length;pa++)0<pa&&(na+=", "),na+=F(T,S.arguments[pa]);na+="]";ja=T.isAsync?"(yield lang.callfunc("+ia+","+na+",runtimeCtx) )":"lang.callfunc("+ia+","+na+",runtimeCtx)"}else throw Error(c.nodeErrorMessage(S,"RUNTIME","NOTFOUND"));}catch(jb){throw jb;}return ja;case "UnaryExpression":try{var gb="lang.unary("+F(T,S.argument)+",'"+S.operator+"')"}catch(jb){throw jb;}return gb;case "BinaryExpression":try{var db=
"lang.binary("+F(T,S.left)+","+F(T,S.right)+",'"+S.operator+"')"}catch(jb){throw jb;}return db;case "LogicalExpression":try{if("AssignmentExpression"===S.left.type||"UpdateExpression"===S.left.type)throw Error(c.nodeErrorMessage(S.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===S.right.type||"UpdateExpression"===S.right.type)throw Error(c.nodeErrorMessage(S.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===S.operator||"||"===S.operator)var kb=
"(lang.logicalCheck("+F(T,S.left)+") "+S.operator+" lang.logicalCheck("+F(T,S.right)+"))";else throw Error(c.nodeErrorMessage(S,"RUNTIME","ONLYORORAND"));}catch(jb){throw jb;}return kb;case "ConditionalExpression":throw Error(c.nodeErrorMessage(S,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{ia=[];for(na=0;na<S.elements.length;na++)"Literal"===S.elements[na].type?ia.push(F(T,S.elements[na])):ia.push("lang.aCheck("+F(T,S.elements[na])+",'ArrayExpression')");var rb="["+ia.join(",")+"]"}catch(jb){throw jb;
}return rb;case "ObjectExpression":ia="lang.dictionary([";for(na=0;na<S.properties.length;na++){var mb=S.properties[na],Za="Identifier"===mb.key.type?"'"+mb.key.name+"'":F(T,mb.key),hb=F(T,mb.value);0<na&&(ia+=",");ia+="lang.strCheck("+Za+",'ObjectExpression'),lang.aCheck("+hb+", 'ObjectExpression')"}return ia+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(c.nodeErrorMessage(S,"RUNTIME","NOTSUPPORTED"));default:throw Error(c.nodeErrorMessage(S,"RUNTIME","UNREOGNISED"));
}}catch(jb){throw jb;}}function J(T,S){var ia=null,na="";if("MemberExpression"===S.argument.type)return ia=F(T,S.argument.object),na=!0===S.argument.computed?F(T,S.argument.property):"'"+S.argument.property.name+"'","lang.memberupdate("+ia+","+na+",'"+S.operator+"',"+S.prefix+")";ia=S.argument.name.toLowerCase();if(null!==T.localScope){if(void 0!==T.localScope[ia])return"lang.update(lscope, '"+ia+"','"+S.operator+"',"+S.prefix+")";if(void 0!==T.localScope._SymbolsMap[ia])return"lang.update(lscope, '"+
T.localScope._SymbolsMap[ia]+"','"+S.operator+"',"+S.prefix+")"}if(void 0!==T.globalScope[ia])return"lang.update(gscope, '"+ia+"','"+S.operator+"',"+S.prefix+")";if(void 0!==T.globalScope._SymbolsMap[ia])return"lang.update(gscope, '"+T.globalScope._SymbolsMap[ia]+"','"+S.operator+"',"+S.prefix+")";throw Error("Variable not recognised");}function L(T,S){var ia=F(T,S.right),na=null,va="";if("MemberExpression"===S.left.type)return na=F(T,S.left.object),va=!0===S.left.computed?F(T,S.left.property):"'"+
S.left.property.name+"'","lang.assignmember("+na+","+va+",'"+S.operator+"',"+ia+")";na=S.left.name.toLowerCase();if(null!==T.localScope){if(void 0!==T.localScope[na])return"lscope['"+na+"']\x3dlang.assign("+ia+",'"+S.operator+"', lscope['"+na+"'])";if(void 0!==T.localScope._SymbolsMap[na])return"lscope['"+T.localScope._SymbolsMap[na]+"']\x3dlang.assign("+ia+",'"+S.operator+"', lscope['"+T.localScope._SymbolsMap[na]+"'])"}if(void 0!==T.globalScope[na])return"gscope['"+na+"']\x3dlang.assign("+ia+",'"+
S.operator+"', gscope['"+na+"'])";if(void 0!==T.globalScope._SymbolsMap[na])return"gscope['"+T.globalScope._SymbolsMap[na]+"']\x3dlang.assign("+ia+",'"+S.operator+"', gscope['"+T.globalScope._SymbolsMap[na]+"'])";throw Error("Variable not recognised");}function Q(T,S){return"BlockStatement"===S.type?F(T,S):"ReturnStatement"===S.type||"BreakStatement"===S.type||"ContinueStatement"===S.type?F(T,S)+"; ":"UpdateExpression"===S.type?"lastStatement \x3d "+F(T,S)+"; ":"ExpressionStatement"===S.type?F(T,
S):"ObjectExpression"===S.type?"lastStatement \x3d "+F(T,S)+"; ":F(T,S)+"; "}function ba(T,S){for(var ia="",na=0;na<S.body.length;na++)ia="ReturnStatement"===S.body[na].type?ia+(F(T,S.body[na])+"; \n"):"BreakStatement"===S.body[na].type?ia+(F(T,S.body[na])+"; \n"):"ContinueStatement"===S.body[na].type?ia+(F(T,S.body[na])+"; \n"):"UpdateExpression"===S.body[na].type?ia+("lastStatement \x3d "+F(T,S.body[na])+"; \n"):"ObjectExpression"===S.body[na].type?ia+("lastStatement \x3d "+F(T,S.body[na])+"; \n"):
ia+(F(T,S.body[na])+" \n");return ia}function fa(T,S){var ia=null===S.init?null:F(T,S.init);ia===d.voidOperation&&(ia=null);S=S.id.name.toLowerCase();if(null!==T.localScope){if(void 0!==T.localScope[S])return"lscope['"+S+"']\x3d"+ia+"; ";if(void 0!==T.localScope._SymbolsMap[S])return"lscope['"+T.localScope._SymbolsMap[S]+"']\x3d"+ia+"; ";var na=ra(T);T.localScope._SymbolsMap[S]=na;T.mangleMap[S]=na;return"lscope['"+na+"']\x3d"+ia+"; "}if(void 0!==T.globalScope[S])return"gscope['"+S+"']\x3d"+ia+"; ";
if(void 0!==T.globalScope._SymbolsMap[S])return"gscope['"+T.globalScope._SymbolsMap[S]+"']\x3d"+ia+"; ";na=ra(T);T.globalScope._SymbolsMap[S]=na;T.mangleMap[S]=na;return"gscope['"+na+"']\x3d"+ia+"; "}function Y(T,S,ia){S=S.toLowerCase();switch(S){case "hasz":return T=T.hasZ,void 0===T?!1:T;case "hasm":return T=T.hasM,void 0===T?!1:T;case "spatialreference":return S=T.spatialReference._arcadeCacheId,void 0===S&&(ia=!0,Object.freeze&&Object.isFrozen(T.spatialReference)&&(ia=!1),ia&&(Aa++,S=T.spatialReference._arcadeCacheId=
Aa)),T=new p({wkt:T.spatialReference.wkt,wkid:T.spatialReference.wkid}),void 0!==S&&(T._arcadeCacheId="SPREF"+S.toString()),T}switch(T.type){case "extent":switch(S){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return T=T[S],void 0!==T?T:null;case "type":return"Extent"}break;case "polygon":switch(S){case "rings":return S=T.getCacheValue("_arcadeCacheId"),void 0===S&&(Aa++,S=Aa,T.setCacheValue("_arcadeCacheId",S)),T=new k(T.rings,T.spatialReference,
!0===T.hasZ,!0===T.hasM,S);case "type":return"Polygon"}break;case "point":switch(S){case "x":case "y":case "z":case "m":return void 0!==T[S]?T[S]:null;case "type":return"Point"}break;case "polyline":switch(S){case "paths":return S=T.getCacheValue("_arcadeCacheId"),void 0===S&&(Aa++,S=Aa,T.setCacheValue("_arcadeCacheId",S)),T=new k(T.paths,T.spatialReference,!0===T.hasZ,!0===T.hasM,S);case "type":return"Polyline"}break;case "multipoint":switch(S){case "points":return S=T.getCacheValue("_arcadeCacheId"),
void 0===S&&(Aa++,S=Aa,T.setCacheValue("_arcadeCacheId",S)),T=new g(T.points,T.spatialReference,!0===T.hasZ,!0===T.hasM,S,1);case "type":return"Multipoint"}}throw Error(c.nodeErrorMessage(ia,"RUNTIME","PROPERTYNOTFOUND"));}function ma(T,S){try{var ia=S.name.toLowerCase();if(null!==T.localScope){if(void 0!==T.localScope[ia])return"lscope['"+ia+"']";if(void 0!==T.localScope._SymbolsMap[ia])return"lscope['"+T.localScope._SymbolsMap[ia]+"']"}if(void 0!==T.globalScope[ia])return"gscope['"+ia+"']";if(void 0!==
T.globalScope._SymbolsMap[ia])return"gscope['"+T.globalScope._SymbolsMap[ia]+"']";throw Error(c.nodeErrorMessage(S,"RUNTIME","VARIABLENOTFOUND"));}catch(na){throw na;}}function ca(T){return null===T?"":d.isArray(T)||d.isImmutableArray(T)?"Array":d.isDate(T)?"Date":d.isString(T)?"String":d.isBoolean(T)?"Boolean":d.isNumber(T)?"Number":T instanceof A?"Attachment":T instanceof B?"Portal":T instanceof p?"Dictionary":T instanceof l?"Feature":T instanceof y?"Point":T instanceof q?"Polygon":T instanceof
x?"Polyline":T instanceof w?"Multipoint":T instanceof r?"Extent":d.isFunctionParameter(T)?"Function":d.isFeatureSet(T)?"FeatureSet":d.isFeatureSetCollection(T)?"FeatureSetCollection":T===d.voidOperation?"":"number"===typeof T&&isNaN(T)?"Number":"Unrecognised Type"}function la(T,S,ia,na){try{if(d.equalityTest(S[ia],na))return S[ia+1];var va=S.length-ia;return 1===va?S[ia]:2===va?null:3===va?S[ia+2]:la(T,S,ia+2,na)}catch(Ba){throw Ba;}}function ta(T,S,ia,na){try{if(!0===na)return S[ia+1];if(3===S.length-
ia)return S[ia+2];var va=S[ia+2];if(!1===d.isBoolean(va))throw Error("WHEN needs boolean test conditions");return ta(T,S,ia+2,va)}catch(Ba){throw Ba;}}function za(T,S){var ia=T.length,na=Math.floor(ia/2);if(0===ia)return[];if(1===ia)return[T[0]];var va=za(T.slice(0,na),S);T=za(T.slice(na,ia),S);for(ia=[];0<va.length||0<T.length;)0<va.length&&0<T.length?(na=S(va[0],T[0]),isNaN(na)&&(na=0),0>=na?(ia.push(va[0]),va=va.slice(1)):(ia.push(T[0]),T=T.slice(1))):0<va.length?(ia.push(va[0]),va=va.slice(1)):
0<T.length&&(ia.push(T[0]),T=T.slice(1));return ia}function P(T,S){try{var ia=T.length,na=Math.floor(ia/2);if(0===ia)return v.resolve([]);if(1===ia)return v.resolve([T[0]]);var va=[P(T.slice(0,na),S),P(T.slice(na,ia),S)];return v.all(va).then(function(Ba){return ea(Ba[0],Ba[1],S,[])})}catch(Ba){return v.reject(Ba)}}function ea(T,S,ia,na){return v.create(function(va,Ba){0<T.length||0<S.length?0<T.length&&0<S.length?ia(T[0],S[0]).then(function(Na){try{isNaN(Na)&&(Na=1),0>=Na?(na.push(T[0]),T=T.slice(1)):
(na.push(S[0]),S=S.slice(1)),ea(T,S,ia,na).then(function(Va){va(Va)},Ba)}catch(Va){Ba(Va)}},Ba):0<T.length?(na.push(T[0]),T=T.slice(1),ea(T,S,ia,na).then(function(Na){va(Na)},Ba)):0<S.length&&(na.push(S[0]),S=S.slice(1),ea(T,S,ia,na).then(function(Na){va(Na)},Ba)):va(na)})}function ra(T){T.symbols.symbolCounter++;return"_T"+T.symbols.symbolCounter.toString()}function M(T){T.symbols.symbolCounter++;return"_Tvar"+T.symbols.symbolCounter.toString()}function Z(T,S,ia){var na={};T||(T={});ia||(ia={});
na._SymbolsMap={};na.textformatting=1;na.infinity=1;na.pi=1;for(var va in S)na[va]=1;for(va in ia)na[va]=1;for(va in T)na[va]=1;return na}function ka(T,S){for(var ia={mode:S,compiled:!0,functions:{},signatures:[],failDefferred:D,standardFunction:z,standardFunctionAsync:z,evaluateIdentifier:qa},na=0;na<T.length;na++)T[na].registerFunctions(ia);if("sync"===S){for(var va in ia.functions)ya[va]=new d.NativeFunction(ia.functions[va]),R.prototype[va]=ya[va];for(na=0;na<ia.signatures.length;na++)c.addFunctionDeclaration(ia.signatures[na],
"sync")}else{for(va in ia.functions)G[va]=new d.NativeFunction(ia.functions[va]),X.prototype[va]=G[va];for(na=0;na<ia.signatures.length;na++)c.addFunctionDeclaration(ia.signatures[na],"async")}}function qa(T,S){S=S.name;if("_SymbolsMap"===S)throw"Illegal";if(0<T.localStack.length){if("_t"!==S.substr(0,2).toLowerCase()&&void 0!==T.localStack[T.localStack.length-1][S])return T.localStack[T.localStack.length-1][S];var ia=T.mangleMap[S];if(void 0!==ia&&void 0!==T.localStack[T.localStack.length-1][ia])return T.localStack[T.localStack.length-
1][ia]}if("_t"!==S.substr(0,2).toLowerCase()&&void 0!==T.globalScope[S]||1===T.globalScope._SymbolsMap[S])return T.globalScope[S];S=T.mangleMap[S];if(void 0!==S)return T.globalScope[S]}function ua(T){console.log(T)}Object.defineProperty(u,"__esModule",{value:!0});u.enableAsyncSupport=u.compileScript=u.referencesFunction=u.referencesMember=u.validateScript=u.extractFieldLiterals=u.executeScript=u.extend=u.functionHelper=void 0;var Aa=0,ya={};a.registerFunctions(ya,z);b.registerFunctions(ya,z);h.registerFunctions(ya,
z);n.registerFunctions(ya,z);f.registerFunctions(ya,z);m.registerFunctions(ya,z);ya["typeof"]=function(T,S){return z(T,S,function(ia,na,va){d.pcCheck(va,1,1);ia=ca(va[0]);if("Unrecognised Type"===ia)throw Error("Unrecognised Type");return ia})};ya.iif=function(T,S){try{return z(T,S,function(ia,na,va){d.pcCheck(va,3,3);if(!1===d.isBoolean(va[0]))throw Error("IF Function must have a boolean test condition");return va[0]?va[1]:va[2]})}catch(ia){throw ia;}};ya.decode=function(T,S){try{return z(T,S,function(ia,
na,va){if(2>va.length)throw Error("Missing Parameters");if(2===va.length)return va[1];if(0===(va.length-1)%2)throw Error("Must have a default value result.");return la(T,va,1,va[0])})}catch(ia){throw ia;}};ya.when=function(T,S){try{return z(T,S,function(ia,na,va){if(3>va.length)throw Error("Missing Parameters");if(0===va.length%2)throw Error("Must have a default value result.");ia=va[0];if(!1===d.isBoolean(ia))throw Error("WHEN needs boolean test conditions");return ta(T,va,0,ia)})}catch(ia){throw ia;
}};ya.top=function(T,S){return z(T,S,function(ia,na,va){d.pcCheck(va,2,2);if(d.isArray(va[0]))return d.toNumber(va[1])>=va[0].length?va[0].slice(0):va[0].slice(0,d.toNumber(va[1]));if(d.isImmutableArray(va[0]))return d.toNumber(va[1])>=va[0].length()?va[0].slice(0):va[0].slice(0,d.toNumber(va[1]));throw Error("Top cannot accept this parameter type");})};ya.first=function(T,S){return z(T,S,function(ia,na,va){d.pcCheck(va,1,1);return d.isArray(va[0])?0===va[0].length?null:va[0][0]:d.isImmutableArray(va[0])?
0===va[0].length()?null:va[0].get(0):null})};ya.sort=function(T,S){return z(T,S,function(ia,na,va){d.pcCheck(va,1,2);na=va[0];d.isImmutableArray(na)&&(na=na.toArray());if(!1===d.isArray(na))throw Error("Illegal Argument");if(1<va.length){if(!1===d.isFunctionParameter(va[1]))throw Error("Illegal Argument");var Ba=function(V,ha){return sa.callfunc(va[1],[V,ha],ia)};return T.isAsync?P(na,Ba):na=za(na,function(V,ha){return Ba(V,ha)})}if(0===na.length)return[];for(var Na={},Va=0;Va<na.length;Va++){var Da=
ca(na[Va]);""!==Da&&(Na[Da]=!0)}if(!0===Na.Array||!0===Na.Dictionary||!0===Na.Feature||!0===Na.Point||!0===Na.Polygon||!0===Na.Polyline||!0===Na.Multipoint||!0===Na.Extent||!0===Na.Function)return na.slice(0);Va=0;Da="";for(var K in Na)Va++,Da=K;return na=1<Va||"String"===Da?za(na,function(V,ha){if(null===V||void 0===V||V===d.voidOperation)return null===ha||void 0===ha||ha===d.voidOperation?0:1;if(null===ha||void 0===ha||ha===d.voidOperation)return-1;V=d.toString(V);ha=d.toString(ha);return V<ha?
-1:V===ha?0:1}):"Number"===Da?za(na,function(V,ha){return V-ha}):"Boolean"===Da?za(na,function(V,ha){return V===ha?0:ha?-1:1}):"Date"===Da?za(na,function(V,ha){return ha-V}):na.slice(0)})};var G={},I;for(I in ya)G[I]=new d.NativeFunction(ya[I]);t.registerFunctions(ya,z);for(I in ya)ya[I]=new d.NativeFunction(ya[I]);var R=function(){};R.prototype=ya;var X=function(){};X.prototype=G;u.functionHelper={fixSpatialReference:d.fixSpatialReference,parseArguments:function(T,S){for(var ia=[],na=0;na<S.arguments.length;na++)ia.push(F(T,
S.arguments[na]));return ia},standardFunction:z};u.extend=ka;u.executeScript=function(T,S){return T(S)};u.extractFieldLiterals=function(T,S){void 0===S&&(S=!1);return c.findFieldLiterals(T)};u.validateScript=function(T,S){return c.validateScript(T,S,"sync")};u.referencesMember=function(T,S){return c.referencesMember(T,S)};u.referencesFunction=function(T,S){return c.referencesFunction(T,S)};var W=0,sa={error:function(T,S,ia){throw Error(c.nodeErrorMessage(T,S,ia));},__awaiter:function(T,S,ia,na){return v.create(function(va,
Ba){function Na(K){try{Da(na.next(K))}catch(V){Ba(V)}}function Va(K){try{Da(na["throw"](K))}catch(V){Ba(V)}}function Da(K){K.done?va(K.value):K.value&&K.value.then?K.value.then(Na,Va):(W++,0===W%100?setTimeout(function(){W=0;Na(K.value)},0):Na(K.value))}Da((na=na.apply(T,S||[])).next())})},functionDepthchecker:function(T,S){return function(){S.depthCounter++;S.localStack.push([]);if(64<S.depthCounter)throw Error("Exceeded maximum function depth");var ia=T.apply(this,arguments);if(v.isPromiseLike(ia))return ia.then(function(na){S.depthCounter--;
--S.localStack.length;return na});S.depthCounter--;--S.localStack.length;return ia}},castString:function(T){return d.toString(T)},aCheck:function(T,S){if(d.isFunctionParameter(T))throw Error(c.nodeErrorMessage({type:S},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return T===d.voidOperation?null:T},Dictionary:p,Feature:l,dictionary:function(T){for(var S={},ia=0;ia<T.length;ia+=2){if(d.isFunctionParameter(T[ia+1]))throw Error("Illegal Argument");if(!1===d.isString(T[ia]))throw Error("Illegal Argument");S[T[ia].toString()]=
T[ia+1]===d.voidOperation?null:T[ia+1]}T=new p(S);T.immutable=!1;return T},strCheck:function(T){if(!1===d.isString(T))throw Error("Illegal Argument");return T},unary:function(T,S){if(d.isBoolean(T)){if("!"===S)return!T;if("-"===S)return-1*d.toNumber(T);if("+"===S)return 1*d.toNumber(T);if("~"===S)return~d.toNumber(T);throw Error(c.nodeErrorMessage({type:"UnaryExpression",operator:S,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===S)return-1*d.toNumber(T);if("+"===S)return 1*
d.toNumber(T);if("~"===S)return~d.toNumber(T);throw Error(c.nodeErrorMessage({type:"UnaryExpression",operator:S,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(T){if(!1===d.isBoolean(T))throw Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return T},logical:function(T,S,ia){if(d.isBoolean(T)&&d.isBoolean(S))switch(ia){case "||":return T||S;case "\x26\x26":return T&&S}throw Error(c.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(T,S,ia){switch(ia){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return d.binaryOperator(d.toNumber(T),d.toNumber(S),ia);case "\x3d\x3d":return d.equalityTest(T,S);case "\x3d":return d.equalityTest(T,S);case "!\x3d":return!d.equalityTest(T,S);case "\x3c":return d.greaterThanLessThan(T,S,ia);case "\x3e":return d.greaterThanLessThan(T,S,ia);case "\x3c\x3d":return d.greaterThanLessThan(T,
S,ia);case "\x3e\x3d":return d.greaterThanLessThan(T,S,ia);case "+":return d.isString(T)||d.isString(S)?d.toString(T)+d.toString(S):d.toNumber(T)+d.toNumber(S);case "-":return d.toNumber(T)-d.toNumber(S);case "*":return d.toNumber(T)*d.toNumber(S);case "/":return d.toNumber(T)/d.toNumber(S);case "%":return d.toNumber(T)%d.toNumber(S);default:throw Error(c.nodeErrorMessage({type:"BinaryExpression",operator:ia,left:T,right:S},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(T,S,ia){switch(S){case "\x3d":return T===
d.voidOperation?null:T;case "/\x3d":return d.toNumber(ia)/d.toNumber(T);case "*\x3d":return d.toNumber(ia)*d.toNumber(T);case "-\x3d":return d.toNumber(ia)-d.toNumber(T);case "+\x3d":return d.isString(ia)||d.isString(T)?d.toString(ia)+d.toString(T):d.toNumber(ia)+d.toNumber(T);case "%\x3d":return d.toNumber(ia)%d.toNumber(T);default:throw Error(c.nodeErrorMessage({type:"AssignmentExpression",operator:S,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(T,S,ia,na){var va=
d.toNumber(T[S]);T[S]="++"===ia?va+1:va-1;return!1===na?va:"++"===ia?va+1:va-1},graphicToFeature:function(T,S){return null===T?null:l.createFromGraphicLikeObject(T.geometry,T.attributes,S)},memberupdate:function(T,S,ia,na){if(d.isArray(T))if(d.isNumber(S)){0>S&&(S=T.length+S);if(0>S||S>=T.length)throw Error("Assignment outside of array bounds");var va=d.toNumber(T[S]);T[S]="++"===ia?va+1:va-1}else throw Error("Invalid Parameter");else if(T instanceof p){if(!1===d.isString(S))throw Error("Dictionary accessor must be a string");
if(!0===T.hasField(S))va=d.toNumber(T.field(S)),T.setField(S,"++"===ia?va+1:va-1);else throw Error("Invalid Parameter");}else if(T instanceof l){if(!1===d.isString(S))throw Error("Feature accessor must be a string");if(!0===T.hasField(S))va=d.toNumber(T.field(S)),T.setField(S,"++"===ia?va+1:va-1);else throw Error("Invalid Parameter");}else{if(d.isImmutableArray(T))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===na?va:"++"===ia?va+1:va-1},assignmember:function(T,S,ia,
na){if(d.isArray(T))if(d.isNumber(S)){0>S&&(S=T.length+S);if(0>S||S>T.length)throw Error("Assignment outside of array bounds");if(S===T.length&&"\x3d"!==ia)throw Error("Invalid Parameter");T[S]=this.assign(na,ia,T[S])}else throw Error("Invalid Parameter");else if(T instanceof p){if(!1===d.isString(S))throw Error("Dictionary accessor must be a string");if(!0===T.hasField(S))T.setField(S,this.assign(na,ia,T.field(S)));else{if("\x3d"!==ia)throw Error("Invalid Parameter");T.setField(S,this.assign(na,
ia,null))}}else if(T instanceof l){if(!1===d.isString(S))throw Error("Feature accessor must be a string");if(!0===T.hasField(S))T.setField(S,this.assign(na,ia,T.field(S)));else{if("\x3d"!==ia)throw Error("Invalid Parameter");T.setField(S,this.assign(na,ia,null))}}else{if(d.isImmutableArray(T))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(T,S){if(null===T)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"NOTFOUND"));if(T instanceof p||T instanceof l){if(d.isString(S))return T.field(S);throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(T instanceof C){if(d.isString(S))return Y(T,S,"MemberExpression");throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isArray(T)){if(d.isNumber(S)&&isFinite(S)&&Math.floor(S)===S){0>S&&(S=T.length+S);if(S>=T.length||
0>S)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return T[S]}throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isString(T)){if(d.isNumber(S)&&isFinite(S)&&Math.floor(S)===S){0>S&&(S=T.length+S);if(S>=T.length||0>S)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return T[S]}throw Error(c.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(d.isImmutableArray(T)&&d.isNumber(S)&&isFinite(S)&&Math.floor(S)===S){0>S&&(S=T.length()+S);if(S>=T.length()||0>S)throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return T.get(S)}throw Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(T,S,ia){return T instanceof d.NativeFunction?
T.fn(ia,S):T instanceof d.SizzleFunction?T.fn.apply(this,S):T.apply(this,S)}};u.compileScript=function(T,S,ia){void 0===S&&(S=null);void 0===ia&&(ia=!1);null===S&&(S={vars:{},customfunctions:{}});S={isAsync:ia,globalScope:Z(S.vars,ia?G:ya,S.customfunctions),localScope:null,mangleMap:{},console:ua,lrucache:S.lrucache,interceptor:S.interceptor,services:S.services,symbols:{symbolCounter:0}};T=F(S,T.body[0].body);""===T&&(T="lc.voidOperation; ");S={lc:d,lang:sa,mangles:S.mangleMap,postProcess:function(na){na instanceof
d.ReturnResult&&(na=na.value);na instanceof d.ImplicitResult&&(na=na.value);na===d.voidOperation&&(na=null);if(na===d.breakResult)throw Error("Cannot return BREAK");if(na===d.continueResult)throw Error("Cannot return CONTINUE");if(d.isFunctionParameter(na))throw Error("Cannot return FUNCTION");return na},prepare:function(na,va){var Ba=na.spatialReference;if(null===Ba||void 0===Ba)Ba=new E({wkid:102100});var Na=na.vars,Va=na.customfunctions,Da=va?new X:new R;Na||(Na={});Va||(Va={});var K=new p({newline:"\n",
tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});K.immutable=!1;Da._SymbolsMap={textformatting:1,infinity:1,pi:1};Da.textformatting=K;Da.infinity=Number.POSITIVE_INFINITY;Da.pi=Math.PI;for(var V in Va)Da[V]=Va[V],Da._SymbolsMap[V]=1;for(V in Na)Da._SymbolsMap[V]=1,Da[V]=Na[V]&&"esri.Graphic"===Na[V].declaredClass?l.createFromGraphic(Na[V]):Na[V];return{localStack:[],isAsync:va,mangleMap:this.mangles,spatialReference:Ba,globalScope:Da,abortSignal:void 0===na.abortSignal||
null===na.abortSignal?{aborted:!1}:na.abortSignal,localScope:null,services:na.services,console:na.console?na.console:ua,lrucache:na.lrucache,interceptor:na.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",ia?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
T+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+T+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(S)};u.enableAsyncSupport=function(){return v.create(function(T,S){e(["./functions/geomasync"],function(ia){ka([ia],"async");T(!0)},
function(ia){S(ia)})})}})},"esri/arcade/ArcadePortal":function(){var e=this&&this.__extends||function(){var u=function(B,A){u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var k in l)l.hasOwnProperty(k)&&(p[k]=l[k])};return u(B,A)};return function(B,A){function p(){this.constructor=B}u(B,A);B.prototype=null===A?Object.create(A):(p.prototype=A.prototype,new p)}}();define(["require","exports","./Dictionary"],function(u,B,A){return function(p){function l(k){var g=
p.call(this)||this;g.immutable=!1;g.setField("url",k);g.immutable=!0;return g}e(l,p);return l}(A)})},"esri/arcade/Attachment":function(){var e=this&&this.__extends||function(){var u=function(B,A){u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var k in l)l.hasOwnProperty(k)&&(p[k]=l[k])};return u(B,A)};return function(B,A){function p(){this.constructor=B}u(B,A);B.prototype=null===A?Object.create(A):(p.prototype=A.prototype,new p)}}();define(["require",
"exports","./Dictionary"],function(u,B,A){return function(p){function l(k,g,d,c,a){var b=p.call(this)||this;b.attachmentUrl=a;b.immutable=!1;b.setField("id",k);b.setField("name",g);b.setField("contenttype",d);b.setField("size",c);b.immutable=!0;return b}e(l,p);return l}(A)})},"esri/arcade/Feature":function(){var e=this&&this.__assign||function(){e=Object.assign||function(u){for(var B,A=1,p=arguments.length;A<p;A++){B=arguments[A];for(var l in B)Object.prototype.hasOwnProperty.call(B,l)&&(u[l]=B[l])}return u};
return e.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(u,B,A,p,l,k,g,d,c){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}a.createFromGraphic=function(b){var f=new a;f._geometry=b.geometry?
b.geometry:null;f.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(f._layer=b._sourceLayer,f._datesfixed=!1):b._layer?(f._layer=b._layer,f._datesfixed=!1):b.layer?(f._layer=b.layer,f._datesfixed=!1):b.sourceLayer&&(f._layer=b.sourceLayer,f._datesfixed=!1);return f};a.createFromArcadeFeature=function(b){var f=new a;f._datesfixed=b._datesfixed;f.attributes=b.attributes;f._geometry=b._geometry;b._layer&&(f._layer=b._layer);return f};a.createFromArcadeDictionary=
function(b){var f=new a;f.attributes=b.field("attributes");null!==f.attributes?f.attributes instanceof A?(f.attributes=f.attributes.attributes,null===f.attributes&&(f.attributes={})):f.attributes={}:f.attributes={};f._geometry=b.field("geometry");null!==f._geometry&&(f._geometry instanceof A?f._geometry=a.parseGeometryFromDictionary(f._geometry):f._geometry instanceof k||(f._geometry=null));return f};a.createFromGraphicLikeObject=function(b,f,t){void 0===t&&(t=null);var n=new a;null===f&&(f={});n.attributes=
f;n._geometry=b?b:null;n._layer=t;n._layer&&(n._datesfixed=!1);n._adapter=null;return n};a.prototype.repurposeFromGraphicLikeObject=function(b,f,t){void 0===t&&(t=null);null===f&&(f={});this.attributes=f;this._geometry=b?b:null;this._datesfixed=(this._layer=t)?!1:!0};a.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var b="";!1===this._datesfixed&&this._fixDates();for(var f in this.attributes){""!==b&&(b+=",");var t=this.attributes[f];null==t?b+=JSON.stringify(f)+
":null":l.isBoolean(t)||l.isNumber(t)||l.isString(t)?b+=JSON.stringify(f)+":"+JSON.stringify(t):t instanceof k?b+=JSON.stringify(f)+":"+l.toStringExplicit(t):t instanceof p?b+=JSON.stringify(f)+":"+l.toStringExplicit(t):t instanceof Array?b+=JSON.stringify(f)+":"+l.toStringExplicit(t):t instanceof Date?b+=JSON.stringify(f)+":"+JSON.stringify(t):null!==t&&"object"===typeof t&&void 0!==t.castToText&&(b+=JSON.stringify(f)+":"+t.castToText())}return'{"geometry":'+(null===this.geometry()?"null":l.toStringExplicit(this.geometry()))+
',"attributes":{'+b+"}}"};a.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],f=0;f<this._layer.fields.length;f++){var t=this._layer.fields[f];"date"!==t.type&&"esriFieldTypeDate"!==t.type||b.push(t.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};a.prototype._fixDateFields=function(b){this.attributes=e({},this.attributes);for(var f=0;f<b.length;f++){var t=this.attributes[b[f]];
if(null!==t)if(void 0===t)for(var n in this.attributes){if(n.toLowerCase()===b[f].toLowerCase()){t=this.attributes[n];null===t||t instanceof Date||(this.attributes[n]=new Date(t));break}}else t instanceof Date||(this.attributes[b[f]]=new Date(t))}};a.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof k||(this._geometry=d.fromJson(this._geometry));return this._geometry};a.prototype.field=function(b){if(this._adapter)return this._adapter.field(b);
!1===this._datesfixed&&this._fixDates();var f=this.attributes[b];if(void 0!==f)return f;f=b.toLowerCase();for(var t in this.attributes)if(t.toLowerCase()===f)return this.attributes[t];if(this._hasFieldDefinition(f))return null;throw Error("Field not Found : "+b);};a.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var f=0;f<this._layer.fields.length;f++)if(this._layer.fields[f].name.toLowerCase()===b)return!0;return!1};a.prototype._field=function(b){var f;if(this._adapter)return null!==
(f=this._adapter.field(b))&&void 0!==f?f:null;!1===this._datesfixed&&this._fixDates();f=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var t in this.attributes)if(t.toLowerCase()===f)return this.attributes[t];return null};a.prototype.setField=function(b,f){if(this.immutable)throw Error("Feature is Immutable");if(!1===l.isSimpleType(f))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(b,f);else{var t=b.toLowerCase();if(void 0===this.attributes[b])for(var n in this.attributes)if(n.toLowerCase()===
t){this.attributes[n]=f;return}this.attributes[b]=f}};a.prototype.hasField=function(b){if(this._adapter)return this._adapter.hasField(b);var f=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var t in this.attributes)if(t.toLowerCase()===f)return!0;return this._hasFieldDefinition(f)?!0:!1};a.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var b=[],f={},t;for(t in this.attributes)b.push(t),f[t.toLowerCase()]=1;if(null!==this._layer)for(t=0;t<this._layer.fields.length;t++){var n=
this._layer.fields[t];1!==f[n.name.toLowerCase()]&&b.push(n.name)}return b=b.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.hasm&&(b.hasM=b.hasm,delete b.hasm);void 0!==b.hasz&&(b.hasZ=b.hasz,delete b.hasz);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasZ));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===
b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return d.fromJson(b)};a.fixPathArrays=function(b,f,t){var n=[];if(b instanceof Array)for(var m=0;m<b.length;m++)n.push(this.fixPointArrays(b[m],f,t));else if(b instanceof p)for(m=0;m<b.length();m++)n.push(this.fixPointArrays(b.get(m),f,t));return n};a.fixPointArrays=function(b,f,t){var n=[];if(b instanceof Array)for(var m=0;m<b.length;m++){var h=b[m];h instanceof g?f&&t?n.push([h.x,h.y,h.z,h.m]):f?n.push([h.x,
h.y,h.z]):t?n.push([h.x,h.y,h.m]):n.push([h.x,h.y]):h instanceof p?n.push(h.toArray()):n.push(h)}else if(b instanceof p)for(m=0;m<b.length();m++)h=b.get(m),h instanceof g?f&&t?n.push([h.x,h.y,h.z,h.m]):f?n.push([h.x,h.y,h.z]):t?n.push([h.x,h.y,h.m]):n.push([h.x,h.y]):h instanceof p?n.push(h.toArray()):n.push(h);return n};a.convertDictionaryToJson=function(b,f){void 0===f&&(f=!1);var t={},n;for(n in b.attributes){var m=b.attributes[n];m instanceof A&&(m=a.convertDictionaryToJson(m));f?t[n.toLowerCase()]=
m:t[n]=m}return t};a.parseAttributesFromDictionary=function(b){var f={},t;for(t in b.attributes){var n=b.attributes[t];if(l.isSimpleType(n))f[t]=n;else throw Error("Illegal Argument");}return f};a.fromJson=function(b){var f=null;null!==b.geometry&&void 0!==b.geometry&&(f=d.fromJson(b.geometry));var t={};if(null!==b.attributes&&void 0!==b.attributes)for(var n in b.attributes){var m=b.attributes[n];if(null===m)t[n]=m;else if(l.isString(m)||l.isNumber(m)||l.isBoolean(m)||l.isDate(m))t[n]=m;else throw Error("Illegal Argument");
}return a.createFromGraphicLikeObject(f,t,null)};a.prototype.fullDomain=function(b,f){return null!==this._layer&&this._layer.fields?l.getDomain(b,this._layer,this,f):null};a.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(b){return{name:b.name,code:b.id}}):[]}:null:null};a.prototype.domainValueLookup=function(b,f,t){if(null===this._layer||!this._layer.fields)return null;
t=l.getDomain(b,this._layer,this,t);if(void 0===f)try{f=this.field(b)}catch(n){return null}return l.getDomainValue(t,f)};a.prototype.gdbVersion=function(){if(null===this._layer)return"";var b=this._layer.gdbVersion;return void 0===b?"":""===b&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":b};a.prototype.domainCodeLookup=function(b,f,t){if(null===this._layer||!this._layer.fields)return null;if(void 0===f){try{f=this.field(b)}catch(n){return null}return f}b=l.getDomain(b,
this._layer,this,t);return l.getDomainCode(b,f)};a.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var b=[],f=0,t=this._layer.fields;f<t.length;f++)b.push(c.esriFieldToJson(t[f]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===c.layerGeometryEsriRestConstants[this._layer.geometryType]?"":c.layerGeometryEsriRestConstants[this._layer.geometryType],fields:b}};return a}()})},"esri/arcade/featureset/support/shared":function(){var e=
this&&this.__assign||function(){e=Object.assign||function(u){for(var B,A=1,p=arguments.length;A<p;A++){B=arguments[A];for(var l in B)Object.prototype.hasOwnProperty.call(B,l)&&(u[l]=B[l])}return u};return e.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(u,B,A,p,l){function k(d){var c=null;d.domain&&(c="range"===d.domain.type?{type:"range",range:[d.domain.minValue,d.domain.maxValue]}:{type:"codedValue",codedValues:d.domain.toJson().codedValues});
return e(e({name:d.name,type:d.type,alias:d.alias},void 0!==d.length?{length:d.length}:{}),{editable:!0===d.editable,nullable:!0===d.nullable,domain:c})}function g(d){return d instanceof Date}Object.defineProperty(B,"__esModule",{value:!0});B.stableStringify=B.extractServiceUrl=B.reduceArrayWithPromises=B.toEsriGeometryType=B.layerFieldEsriConstants=B.layerGeometryEsriRestConstants=B.layerGeometryEsriConstants=B.callback=B.errback=B.defaultMaxRecords=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=
B.convertSquareUnitsToCode=B.cloneAttributes=B.equalityTest=B.isDate=B.isArray=B.isNumber=B.isBoolean=B.isString=B.IdState=B.esriFieldToJson=B.cloneField=B.FeatureServiceDatabaseType=void 0;(function(d){d[d.Standardised=0]="Standardised";d[d.StandardisedNoInterval=1]="StandardisedNoInterval";d[d.SqlServer=2]="SqlServer";d[d.Oracle=3]="Oracle";d[d.Postgres=4]="Postgres";d[d.PGDB=5]="PGDB";d[d.FILEGDB=6]="FILEGDB";d[d.NotEvaluated=7]="NotEvaluated"})(B.FeatureServiceDatabaseType||(B.FeatureServiceDatabaseType=
{}));B.cloneField=function(d){return new l(k(d))};B.esriFieldToJson=k;(function(d){d[d.InFeatureSet=0]="InFeatureSet";d[d.NotInFeatureSet=1]="NotInFeatureSet";d[d.Unknown=2]="Unknown"})(B.IdState||(B.IdState={}));B.isString=function(d){return"string"===typeof d||d instanceof String};B.isBoolean=function(d){return"boolean"===typeof d};B.isNumber=function(d){return"number"===typeof d};B.isArray=function(d){return d instanceof Array};B.isDate=g;B.equalityTest=function(d,c){return d===c?!0:g(d)&&g(c)?
d.getTime()===c.getTime():!1};B.cloneAttributes=function(d){var c={},a;for(a in d)c[a]=d[a];return c};B.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};B.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.getExtent();
case "point":return new p({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};B.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};B.sameGeomType=function(d,c){return d===c||"point"===d&&"esriGeometryPoint"===
c||"polyline"===d&&"esriGeometryPolyline"===c||"polygon"===d&&"esriGeometryPolygon"===c||"extent"===d&&"esriGeometryEnvelope"===c||"multipoint"===d&&"esriGeometryMultipoint"===c||"point"===c&&"esriGeometryPoint"===d||"polyline"===c&&"esriGeometryPolyline"===d||"polygon"===c&&"esriGeometryPolygon"===d||"extent"===c&&"esriGeometryEnvelope"===d||"multipoint"===c&&"esriGeometryMultipoint"===d?!0:!1};B.defaultMaxRecords=1E3;B.errback=function(d){return function(c){d.reject(c)}};B.callback=function(d,c){return function(){try{d.apply(null,
arguments)}catch(a){c.reject(a)}}};B.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};B.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",
esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};B.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};B.toEsriGeometryType=function(d){switch(d){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};
B.reduceArrayWithPromises=function(d,c){return A.create(function(a,b){var f=A.resolve(!0);d.reduce(function(t,n,m,h){return t.then(function(v){try{return c(v,n,m,h)}catch(r){return A.reject(r)}},function(v){return A.reject(v)})},f).then(a,b)})};B.extractServiceUrl=function(d){if(void 0===d)return"";d=d.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");d=d.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return d=d.split("?")[0]};B.stableStringify=function(d,c){c||(c={});"function"===typeof c&&(c={cmp:c});
var a="boolean"===typeof c.cycles?c.cycles:!1,b=c.cmp&&function(t){return function(n){return function(m,h){return t({key:m,value:n[m]},{key:h,value:n[h]})}}}(c.cmp),f=[];return function m(n){n&&n.toJson&&"function"===typeof n.toJson&&(n=n.toJson());if(void 0!==n){if("number"===typeof n)return isFinite(n)?""+n:"null";if("object"!==typeof n)return JSON.stringify(n);var h;if(Array.isArray(n)){var v="[";for(h=0;h<n.length;h++)h&&(v+=","),v+=m(n[h])||"null";return v+"]"}if(null===n)return"null";if(-1!==
f.indexOf(n)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var r=f.push(n)-1,C=Object.keys(n).sort(b&&b(n));v="";for(h=0;h<C.length;h++){var w=C[h],y=m(n[w]);y&&(v&&(v+=","),v+=JSON.stringify(w)+":"+y)}f.splice(r,1);return"{"+v+"}"}}(d)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(e,u,B,A,p,l,k){return e(null,{declaredClass:"esri.layers.Field",
constructor:function(g){if(g&&u.isObject(g)&&(this.name=g.name,this.type=g.type,this.alias=g.alias,this.length=g.length,this.editable=g.editable,this.nullable=g.nullable,this.defaultValue=g.defaultValue,this.description=g.description?JSON.parse(g.description):null,this.isViewOverride=!!g.isViewOverride,(g=g.domain)&&u.isObject(g)))switch(g.type){case "range":this.domain=new l(g);break;case "codedValue":this.domain=new k(g)}},toJson:function(){return p.fixJson({name:this.name,type:this.type,alias:this.alias,
length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}})})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(e,u,B,A,p,l){return e([l],{declaredClass:"esri.layers.RangeDomain",
constructor:function(k){k&&u.isObject(k)&&(this.minValue=k.range[0],this.maxValue=k.range[1])},toJson:function(){var k=this.inherited(arguments);k.range=[this.minValue,this.maxValue];return p.fixJson(k)}})})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.layers.Domain",constructor:function(l){l&&u.isObject(l)&&(this.name=l.name,this.type=l.type)},toJson:function(){return p.fixJson({name:this.name,
type:this.type})}})})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(e,u,B,A,p,l,k){return e([k],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(g){g&&u.isObject(g)&&(this.codedValues=g.codedValues)},getName:function(g){var d;B.some(this.codedValues,function(c){c.code==g&&(d=c.name);return!!d});return d},toJson:function(){var g=this.inherited(arguments);g.codedValues=
u.clone(this.codedValues);return l.fixJson(g)}})})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(e,u){function B(w,y){return"0"!==w.min&&y.length<Number(w.min)||"*"!==w.max&&y.length>Number(w.max)?-2:1}function A(w,y,q){if(null!==q.localScope&&void 0!==q.localScope[w.toLowerCase()]){var x=q.localScope[w.toLowerCase()];if("FormulaFunction"===x.type||"any"===x.type)return void 0===x.signature&&(x.signature={min:"0",max:"*"}),B(x.signature,y)}return void 0!==q.globalScope[w.toLowerCase()]&&
(x=q.globalScope[w.toLowerCase()],"FormulaFunction"===x.type||"any"===x.type)?(void 0===x.signature&&(x.signature={min:"0",max:"*"}),B(x.signature,y)):-1}function p(w,y){if(w)for(var q=0;q<w.length;q++)l(w[q],y)}function l(w,y){if(w&&!1!==y(w))switch(w.type){case "ArrayExpression":p(w.elements,y);break;case "AssignmentExpression":case "BinaryExpression":l(w.left,y);l(w.right,y);break;case "BlockStatement":p(w.body,y);break;case "CallExpression":l(w.callee,y);p(w.arguments,y);break;case "ConditionalExpression":l(w.test,
y);l(w.alternate,y);l(w.consequent,y);break;case "ExpressionStatement":l(w.expression,y);break;case "ForInStatement":l(w.left,y);l(w.right,y);l(w.body,y);break;case "ForStatement":l(w.init,y);l(w.test,y);l(w.update,y);l(w.body,y);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":l(w.id,y);p(w.params,y);l(w.body,y);break;case "IfStatement":l(w.test,y);l(w.consequent,y);l(w.alternate,y);break;case "LogicalExpression":l(w.left,y);l(w.right,y);break;case "MemberExpression":l(w.object,
y);l(w.property,y);break;case "ObjectExpression":p(w.properties,y);break;case "Program":p(w.body,y);break;case "Property":l(w.key,y);l(w.value,y);break;case "ReturnStatement":l(w.argument,y);break;case "UnaryExpression":l(w.argument,y);break;case "UpdateExpression":l(w.argument,y);break;case "VariableDeclaration":p(w.declarations,y);break;case "VariableDeclarator":l(w.id,y);l(w.init,y);break;case "TemplateLiteral":p(w.expressions,y),p(w.quasis,y)}}function k(w,y){void 0===y&&(y=!0);var q=f(w,"SYNTAX",
"UNREOGNISED");try{switch(w.type){case "VariableDeclarator":return null!==w.init&&"FunctionExpression"===w.init.type?f(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==w.id.type?f(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==w.init?k(w.init,!1):"";case "VariableDeclaration":for(var x=0;x<w.declarations.length;x++)if(q=k(w.declarations[x],y),""!==q)return q;return"";case "ForInStatement":q=k(w.left,y);if(""!==q)break;if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return f(w,
"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return f(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return f(w,"SYNTAX","LEFTNOTVAR");q=k(w.right,y);if(""!==q)break;q=k(w.body,y);if(""!==q)break;return"";case "ForStatement":if(null!==w.test&&(q=k(w.test,y),""!==q))break;if(null!==w.init&&(q=k(w.init,y),""!==q))break;if(null!==w.update&&(q=k(w.update,y),""!==q))break;if(null!==w.body&&(q=k(w.body,y),""!==q))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";
case "BreakStatement":return"";case "IfStatement":q=k(w.test,y);if(""!==q)break;if(null!==w.consequent&&(q=k(w.consequent,!1),""!==q))break;if(null!==w.alternate&&(q=k(w.alternate,!1),""!==q))break;return"";case "BlockStatement":var E=[];for(x=0;x<w.body.length;x++)"EmptyStatement"!==w.body[x].type&&E.push(w.body[x]);w.body=E;for(x=0;x<w.body.length;x++)if(q=k(w.body[x],y),""!==q)return q;return"";case "FunctionDeclaration":return!1===y?f(w,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==w.id.type?
f(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):k(w.body,!1);case "ReturnStatement":return null!==w.argument?k(w.argument,y):"";case "UpdateExpression":return"Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type?f(w,"SYNTAX","ASSIGNMENTTOVARSONLY"):k(w.argument,y);case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return f(w,"SYNTAX","ASSIGNMENTTOVARSONLY");q=k(w.left,y);if(""!==q)break;switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:return f(w,"SYNTAX","OPERATORNOTRECOGNISED")}return k(w.right,!1);case "ExpressionStatement":return k(w.expression,!1);case "Identifier":q="";break;case "MemberExpression":q=k(w.object,y);if(""!==q)break;return!0===w.computed?k(w.property,y):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return f(w,"SYNTAX","ONLYNODESSUPPORTED");q="";for(x=0;x<w.arguments.length;x++)if(q=k(w.arguments[x],y),""!==q)return q;return"";case "UnaryExpression":q=
k(w.argument,y);break;case "BinaryExpression":q=k(w.left,y);if(""!==q)break;q=k(w.right,y);if(""!==q)break;switch(w.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return f(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":q=k(w.left,y);if(""!==q)break;q=k(w.right);if(""!==q)break;
switch(w.operator){case "\x26\x26":case "||":break;default:return f(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return f(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":q="";for(x=0;x<w.elements.length&&(q=k(w.elements[x],y),""===q);x++);break;case "TemplateLiteral":q="";for(x=0;x<w.quasis.length;x++)if(q=k(w.quasis[x],y),""!==q)return q;for(x=0;x<w.expressions.length&&(q=k(w.expressions[x],y),""===q);x++);break;case "ObjectExpression":q="";for(x=0;x<w.properties.length;x++){q=
"";if(null!==w.properties[x].key&&("Literal"!==w.properties[x].key.type&&"Identifier"!==w.properties[x].key.type&&(q=f(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[x].key.type)){E=w.properties[x].key;var z="value"in E?E.value:null;"string"===typeof z||z instanceof String||(q=f(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===q&&(q=k(w.properties[x],y));if(""!==q)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return f(w,"SYNTAX","ONLYLITERAL");
if("Identifier"!==w.key.type&&(q=k(w.key,y),""!==q))break;q=k(w.value,y)}return q}catch(D){throw D;}}function g(w,y){var q=f(w,"SYNTAX","UNREOGNISED"),x=null,E="";try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type)return f(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var z=null===w.init?"":g(w.init,y);if(""!==z)return z;"Identifier"===w.id.type&&(null===y.localScope?y.globalScope[w.id.name.toLowerCase()]={type:"any"}:y.localScope[w.id.name.toLowerCase()]=
{type:"any"});return"";case "FunctionDeclaration":x=c(w.id.name.toLowerCase(),w);E=a(w,y);if(""!==E)return E;if(null!==y.localScope)return f(w,"SYNTAX","GLOBALFUNCTIONSONLY");x.isnative=!1;y.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[x]};return"";case "VariableDeclaration":q="";for(var D=0;D<w.declarations.length&&(q=g(w.declarations[D],y),""===q);D++);break;case "IfStatement":q=g(w.test,y);if(""!==q)break;if("AssignmentExpression"===w.test.type||"UpdateExpression"===
w.test.type)return f(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==w.consequent&&(q=g(w.consequent,y),""!==q))break;if(null!==w.alternate&&(q=g(w.alternate,y),""!==q))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(D=0;D<w.body.length;D++)if(q=g(w.body[D],y),""!==q)return q;return"";case "ReturnStatement":return null!==w.argument?g(w.argument,y):"";case "ForInStatement":if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return f(w,"SYNTAX",
"ONLY1VAR");if(null!==w.left.declarations[0].init)return f(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return f(w,"SYNTAX","LEFTNOTVAR");q=g(w.left,y);if(""!==q)break;q=g(w.right,y);if(""!==q)break;q=g(w.body,y);if(""!==q)break;return"";case "ForStatement":if(null!==w.init&&(q=g(w.init,y),""!==q))break;if(null!==w.test&&(q=g(w.test,y),""!==q))break;if(null!==w.body&&(q=g(w.body,y),""!==q))break;if(null!==w.update&&(q=g(w.update,y),""!==q))break;return"";case "BreakStatement":return"";
case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)return f(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=!1;if("MemberExpression"===w.argument.type)return g(w.argument,y);null!==y.localScope&&void 0!==y.localScope[w.argument.name.toLowerCase()]&&(F=!0);void 0!==y.globalScope[w.argument.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+w.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==
w.left.type&&"MemberExpression"!==w.left.type)return f(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var J=g(w.right,y);if(""!==J)return J;F=!1;if("MemberExpression"===w.left.type)return J=g(w.left,y),""!==J?J:"";null!==y.localScope&&void 0!==y.localScope[w.left.name.toLowerCase()]&&(F=!0);void 0!==y.globalScope[w.left.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+w.left.name+" has not been declared.":"";case "ExpressionStatement":return g(w.expression,y);case "Identifier":var L=w.name.toLowerCase();
if(null!==y.localScope&&void 0!==y.localScope[L])return"";q=void 0!==y.globalScope[L]?"":f(w,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":q=g(w.object,y);if(""!==q)break;return!0===w.computed?g(w.property,y):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return f(w,"SYNTAX","ONLYNODESSUPPORTED");q="";for(D=0;D<w.arguments.length;D++)if(q=g(w.arguments[D],y),""!==q)return q;var Q=A(w.callee.name,w.arguments,y);-1===Q&&
(q=f(w,"SYNTAX","NOTFOUND"));-2===Q&&(q=f(w,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":q=g(w.argument,y);break;case "BinaryExpression":q=g(w.left,y);if(""!==q)break;q=g(w.right,y);if(""!==q)break;return"";case "LogicalExpression":q=g(w.left,y);if(""!==q)break;if("AssignmentExpression"===w.left.type||"UpdateExpression"===w.left.type)return f(w.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");q=g(w.right,y);if(""!==q)break;return"AssignmentExpression"===w.right.type||"UpdateExpression"===
w.right.type?f(w.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return f(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":q="";for(D=0;D<w.elements.length&&(q=g(w.elements[D],y),""===q);D++);break;case "TemplateLiteral":q="";for(D=0;D<w.quasis.length;D++)if(q=g(w.quasis[D],y),""!==q)return q;for(D=0;D<w.expressions.length&&(q=g(w.expressions[D],y),""===q);D++);break;case "ObjectExpression":q="";for(D=0;D<w.properties.length;D++){q="";if(null!==w.properties[D].key&&
("Literal"!==w.properties[D].key.type&&"Identifier"!==w.properties[D].key.type&&(q=f(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[D].key.type)){var ba=w.properties[D].key,fa="value"in ba?ba.value:null;"string"===typeof fa||fa instanceof String||(q=f(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===q&&(q=g(w.properties[D],y));if(""!==q)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return f(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&
(q=g(w.key,y),""!==q))break;q=g(w.value,y)}return q}catch(Y){throw Y;}}function d(w,y){var q=!1,x=y.toLowerCase();l(w,function(E){if(q)return!1;"Identifier"===E.type&&E.name&&E.name.toLowerCase()===x&&(q=!0);return!0});return q}function c(w,y){var q=[];if(void 0!==y.params&&null!==y.params)for(var x=0;x<y.params.length;x++)q.push("any");return{name:w,return:"any",params:q}}function a(w,y){y={globalScope:y.globalScope,localScope:{}};for(var q=0;q<w.params.length;q++)y.localScope[w.params[q].name.toLowerCase()]=
{type:"any"};return g(w.body,y)}function b(w,y,q,x){var E={};if(void 0===w||null===w)w={};if(void 0===q||null===q)q={};E.infinity={type:"any"};E.textformatting={type:"any"};E.pi={type:"any"};for(var z in y)"sync"===x&&void 0!==y[z].min?E[z]={type:"FormulaFunction",signature:{min:y[z].min,max:y[z].max}}:"sync"!==x&&void 0!==y[z].fmin&&(E[z]={type:"FormulaFunction",signature:{min:y[z].fmin,max:y[z].fmax}});for(y=0;y<q.length;y++)z=q[y],E[z.name]={type:"FormulaFunction",signature:z};for(z in w)E[z]=
w[z],E[z].type="any";return E}function f(w,y,q){var x="";switch(y){case "SYNTAX":x="Syntax Error: ";break;case "RUNTIME":x="Runtime Error: ";break;default:x="Syntax Error: "}try{switch(w.type){case "IfStatement":switch(q){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":x+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":x+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(q){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":x+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":x+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":x+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(q){case "GLOBALFUNCTIONSONLY":x+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":x+=" Function Definition must have an identifier"}break;case "VariableDeclaration":x+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(q){case "FUNCTIONVARIABLEDECLARATOR":x+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":x+=" Variable Definition must have an identifier"}break;case "Identifier":x+=" Identifier Not Found. ";x+=w.name;break;case "ObjectExpression":switch(q){case "OBJECTPROPERTYMUSTBESTRING":x+=" Property name must be a string"}break;case "ForStatement":switch(q){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":x+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(q){case "ONLY1VAR":x+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":x+=" Can only declare value for use with IN";break;case "LEFTNOVAR":x+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":x+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":x+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(q){case "PROPERTYNOTFOUND":x+="Cannot find member property. ";x+=
!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "OUTOFBOUNDS":x+="Out of Bounds. ";x+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "NOTFOUND":x+="Cannot call member method on null. ";x+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "INVALIDTYPE":x+="Cannot call member property on object of this type. ",x+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":""}break;case "Property":switch(q){case "ONLYLITERAL":x+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(q){case "WRONGSIGNATURE":x+="Function signature does not match: ";x+="Identifier"===w.callee.type?w.callee.name:"";break;case "ONLYNODESUPPORTED":x+="Functions must be declared.";x+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTAFUNCTION":x+="Not a Function: ";x+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTFOUND":x+="Function Not Found: "+("Identifier"===w.callee.type?
w.callee.name:"")}break;case "UnaryExpression":switch(q){case "NOTSUPPORTEDUNARYOPERATOR":x+="Operator "+w.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":x+="Unary operator "+w.operator+" cannot be used with this argument."}case "BinaryExpression":switch(q){case "OPERATORNOTRECOGNISED":x+="Binary Operator not recognised "+w.operator}break;case "LogicalExpression":switch(q){case "ONLYBOOLEAN":x+="Operator "+w.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":x+="Logical Expression "+w.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":x+="Conditional statements not supported.";break;case "ArrayExpression":switch(q){case "FUNCTIONCONTEXTILLEGAL":x+=" Cannot Put Function inside Array."}break;default:x+="Expression contains unrecognised code structures."}}catch(E){throw E;}return x}function t(w,y,q){return{line:w.loc.start.line,character:w.loc.start.column,reason:f(w,y,q)}}function n(w,
y,q,x){y={globalScope:y.globalScope,localScope:{}};for(var E=0;E<w.params.length;E++)y.localScope[w.params[E].name.toLowerCase()]={type:"any"};m(w.body,y,q,x,!1)}function m(w,y,q,x,E){void 0===E&&(E=!0);if(null===w)throw Error("Unnexpexted Expression Syntax");var z=null;try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type){x.push(t(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==w.id.type?x.push(t(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(w.id.name.toLowerCase(),null===y.localScope?y.globalScope[w.id.name.toLowerCase()]={type:"any"}:y.localScope[w.id.name.toLowerCase()]={type:"any"});null!==w.init&&m(w.init,y,q,x,E);break;case "FunctionDeclaration":!1===E&&x.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==w.id.type&&x.push(t(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));z=c("",w);n(w,y,q,x);null!==y.localScope&&x.push(t(w,"SYNTAX","GLOBALFUNCTIONSONLY"));z.isnative=!1;"Identifier"===w.id.type&&(y.globalScope[w.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[z]});break;case "VariableDeclaration":for(var D=0;D<w.declarations.length;D++)m(w.declarations[D],y,q,x,E);break;case "IfStatement":null!==w.test&&(m(w.test,y,q,x,E),"AssignmentExpression"!==w.test.type&&"UpdateExpression"!==w.test.type||x.push(t(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==w.consequent&&m(w.consequent,y,q,x,E);null!==w.alternate&&m(w.alternate,y,q,x,E);break;case "EmptyStatement":break;case "BlockStatement":if(null!==w.body)for(D=
0;D<w.body.length;D++)m(w.body[D],y,q,x,E);break;case "ReturnStatement":null!==w.argument&&m(w.argument,y,q,x,E);break;case "ForInStatement":"VariableDeclaration"===w.left.type?(1<w.left.declarations.length&&x.push(t(w,"SYNTAX","ONLY1VAR")),null!==w.left.declarations[0].init&&x.push(t(w,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==w.left.type&&x.push(t(w,"SYNTAX","LEFTNOTVAR"));m(w.left,y,q,x,E);m(w.right,y,q,x,E);m(w.body,y,q,x,E);break;case "ForStatement":null!==w.init&&m(w.init,y,q,x,E);null!==
w.test&&m(w.test,y,q,x,E);null!==w.body&&m(w.body,y,q,x,E);null!==w.update&&m(w.update,y,q,x,E);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)x.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===w.argument.type){var F=!1;!1===q&&(null!==y.localScope&&void 0!==y.localScope[w.argument.name.toLowerCase()]&&(F=!0),void 0!==y.globalScope[w.argument.name.toLowerCase()]&&(F=!0),
!1===F&&x.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.argument.name+" has not been declared."}))}"MemberExpression"===w.argument.type&&m(w.argument,y,q,x,E)}break;case "AssignmentExpression":"Identifier"!==w.left.type&&"MemberExpression"!==w.left.type&&x.push(t(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:x.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}m(w.right,
y,q,x,E);F=!1;"Identifier"===w.left.type&&(null!==y.localScope&&void 0!==y.localScope[w.left.name.toLowerCase()]&&(F=!0),void 0!==y.globalScope[w.left.name.toLowerCase()]&&(F=!0),!1===q&&!1===F&&x.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.left.name+" has not been declared."}));"MemberExpression"===w.left.type&&m(w.left,y,q,x,E);break;case "ExpressionStatement":m(w.expression,y,q,x,E);break;case "Identifier":var J=w.name.toLowerCase();if(null!==
y.localScope&&void 0!==y.localScope[J]||void 0!==y.globalScope[J])break;!1===q&&x.push(t(w,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":m(w.object,y,q,x,E);!0===w.computed&&m(w.property,y,q,x,E);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==w.callee.type&&x.push(t(w,"SYNTAX","ONLYNODESSUPPORTED"));for(D=0;D<w.arguments.length;D++)m(w.arguments[D],y,q,x,E);if("Identifier"===w.callee.type){var L=A(w.callee.name,w.arguments,y);!1===q&&-1===
L&&x.push(t(w,"SYNTAX","NOTFOUND"));-2===L&&x.push(t(w,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":m(w.argument,y,q,x,E);break;case "BinaryExpression":m(w.left,y,q,x,E);m(w.right,y,q,x,E);switch(w.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:x.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(w.operator){case "\x26\x26":case "||":break;
default:x.push(t(w,"SYNTAX","OPERATORNOTRECOGNISED"))}m(w.left,y,q,x,E);"AssignmentExpression"!==w.left.type&&"UpdateExpression"!==w.left.type||x.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));m(w.right,y,q,x,E);"AssignmentExpression"!==w.right.type&&"UpdateExpression"!==w.right.type||x.push(t(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":x.push(t(w,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(D=0;D<w.elements.length;D++)m(w.elements[D],
y,q,x,E);break;case "TemplateLiteral":for(D=0;D<w.quasis.length;D++)m(w.quasis[D],y,q,x,E);for(D=0;D<w.expressions.length;D++)m(w.expressions[D],y,q,x,E);break;case "ObjectExpression":for(D=0;D<w.properties.length;D++)m(w.properties[D],y,q,x,E);break;case "Property":"Literal"!==w.key.type&&"Identifier"!==w.key.type&&x.push(t(w,"SYNTAX","ONLYLITERAL"));"Literal"===w.key.type&&m(w.key,y,q,x,E);m(w.value,y,q,x,E);break;default:x.push(t(w,"SYNTAX","UNRECOGNISED"))}}catch(Q){x.push({line:null===w?0:w.loc.start.line,
character:null===w?0:w.loc.start.column,reason:"Unnexpected Syntax"})}}function h(w){var y=[];l(w,function(q){"CallExpression"===q.type&&"Identifier"===q.callee.type&&y.push(q.callee.name.toLowerCase());return!0});return y}Object.defineProperty(u,"__esModule",{value:!0});u.scriptUsesFeatureSet=u.findScriptDependencies=u.findFunctionCalls=u.checkScript=u.extractAllIssues=u.extractAllIssuesInFunction=u.makeError=u.nodeErrorMessage=u.validateLanguage=u.validateScript=u.constructGlobalScope=u.validateFunction=
u.extractFunctionDeclaration=u.findFieldLiterals=u.referencesFunction=u.referencesMember=u.testValidityOfExpression=u.validateLanguageNode=u.walk=u.findFunction=u.checkFunctionSignature=u.addFunctionDeclaration=u.functionDecls=void 0;u.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var v in u.functionDecls)u.functionDecls[v].fmin=u.functionDecls[v].min,u.functionDecls[v].fmax=u.functionDecls[v].max;
var r="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),C="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");u.addFunctionDeclaration=
function(w,y){var q=u.functionDecls[w.name.toLowerCase()];void 0===q?"sync"===y?u.functionDecls[w.name.toLowerCase()]={min:w.min,max:w.max}:u.functionDecls[w.name.toLowerCase()]={fmin:w.min,fmax:w.max}:"sync"===y?(q.min=w.min,q.max=w.max):(q.fmin=w.min,q.fmax=w.max)};u.checkFunctionSignature=B;u.findFunction=A;u.walk=l;u.validateLanguageNode=k;u.testValidityOfExpression=g;u.referencesMember=d;u.referencesFunction=function(w,y){var q=!1,x=y.toLowerCase();l(w,function(E){return q?!1:"CallExpression"===
E.type&&"Identifier"===E.callee.type&&E.callee.name&&E.callee.name.toLowerCase()===x?(q=!0,!1):!0});return q};u.findFieldLiterals=function(w){var y=[];l(w,function(q){if("MemberExpression"!==q.type||"Identifier"!==q.object.type)return!0;!1===q.computed&&q.object&&q.object.name&&q.property&&"Identifier"===q.property.type&&q.property.name?y.push(q.object.name.toLowerCase()+"."+q.property.name.toLowerCase()):q.object&&q.object.name&&q.property&&"Literal"===q.property.type&&"string"===typeof q.property.value&&
y.push(q.object.name.toLowerCase()+"."+q.property.value.toString().toLowerCase());return!1});return y};u.extractFunctionDeclaration=c;u.validateFunction=a;u.constructGlobalScope=b;u.validateScript=function(w,y,q,x){void 0===q&&(q="async");void 0===x&&(x=u.functionDecls);y={globalScope:b(y.vars,x,y.customFunctions,q),localScope:null};return g(w.body[0].body,y)};u.validateLanguage=function(w){return"BlockStatement"!==w.body[0].body.type?"Invalid formula content.":k(w.body[0].body)};u.nodeErrorMessage=
f;u.makeError=t;u.extractAllIssuesInFunction=n;u.extractAllIssues=m;u.checkScript=function(w,y,q,x,E){void 0===x&&(x="async");void 0===E&&(E=u.functionDecls);var z=[];if("BlockStatement"!==w.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===y||void 0===y)y={vars:{},customFunctions:[]};y={globalScope:b(y.vars,E,y.customFunctions,x),localScope:null};try{m(w.body[0].body,y,q,z)}catch(D){}return z};u.findFunctionCalls=h;u.findScriptDependencies=function(w,y){void 0===y&&(y=
[]);var q=null;if(void 0===w.usesFeatureSet){null===q&&(q=h(w));w.usesFeatureSet=!1;for(var x=0;x<q.length;x++)-1<r.indexOf(q[x])&&(w.usesFeatureSet=!0,w.isAsync=!0);if(!1===w.usesFeatureSet&&y&&0<y.length)for(x=0;x<y.length;x++)if(d(w,y[x])){w.usesFeatureSet=!0;w.isAsync=!0;break}}if(void 0===w.usesGeometry)for(w.usesGeometry=!1,null===q&&(q=h(w)),x=0;x<q.length;x++)-1<C.indexOf(q[x])&&(w.usesGeometry=!0)};u.scriptUsesFeatureSet=function(w){w=h(w);for(var y=0;y<w.length;y++)if(-1<r.indexOf(w[y]))return!0;
return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(e,u,B){Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(A,p){A.array=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,1,2);g=B.toNumber(c[0]);if(isNaN(g)||!1===B.isInteger(g))throw Error("Invalid Parameter");c=B.defaultUndefined(c[1],null);g=Array(g);g.fill(c);return g})};A.front=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,
1,1);if(B.isImmutableArray(c[0])){if(0>=c[0].length())throw Error("Array is empty");return c[0].get(0)}if(B.isArray(c[0])){if(0>=c[0].length)throw Error("Array is empty");return c[0][0]}throw Error("Invalid Parameter");})};A.back=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,1,1);if(B.isImmutableArray(c[0])){if(0>=c[0].length())throw Error("Array is empty");return c[0].get(c[0].length()-1)}if(B.isArray(c[0])){if(0>=c[0].length)throw Error("Array is empty");return c[0][c[0].length-1]}throw Error("Invalid Parameter");
})};A.push=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,1,2);if(B.isArray(c[0]))return c[0][c[0].length]=c[1],c[0].length;throw Error("Invalid Parameter");})};A.pop=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,1,1);if(B.isArray(c[0])){if(0>=c[0].length)throw Error("Array is empty");g=c[0][c[0].length-1];--c[0].length;return g}throw Error("Invalid Parameter");})};A.erase=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,2,2);if(B.isArray(c[0])){g=B.toNumber(c[1]);if(isNaN(g)||
!1===B.isInteger(g))throw Error("Invalid Parameter");c=c[0];if(0>=c.length)throw Error("Array is empty");0>g&&(g=c.length+g);if(0>g)throw Error("Element not found");if(g>=c.length)throw Error("Index is greater than array");c.splice(g,1);return B.voidOperation}throw Error("Invalid Parameter");})};A.insert=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,3,3);if(B.isArray(c[0])){g=B.toNumber(c[1]);if(isNaN(g)||!1===B.isInteger(g))throw Error("Invalid Parameter");d=c[2];c=c[0];if(g>c.length)throw Error("Index is greater than array");
if(0>g&&g<-1*c.length)throw Error("Index is greater than array");if(g===c.length)return c[g]=d,B.voidOperation;c.splice(g,0,d);return B.voidOperation}throw Error("Invalid Parameter");})};A.resize=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,2,3);if(B.isArray(c[0])){d=B.toNumber(c[1]);if(isNaN(d)||!1===B.isInteger(d))throw Error("Invalid Parameter");if(0>d)throw Error("Size cannot be negative");g=B.defaultUndefined(c[2],null);c=c[0];if(c.length>=d)return c.length=d,B.voidOperation;var a=
c.length;c.length=d;for(d=a;d<c.length;d++)c[d]=g;return B.voidOperation}throw Error("Invalid Parameter");})};A.includes=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,2,2);if(B.isArray(c[0])){var a=c[1];g=c[0];return-1<g.findIndex(function(f){return B.equalityTest(f,a)})?!0:!1}if(B.isImmutableArray(c[0])){var b=c[1];g=c[0].toArray();return-1<g.findIndex(function(f){return B.equalityTest(f,b)})?!0:!1}throw Error("Invalid Parameter");})};A.slice=function(l,k){return p(l,k,function(g,d,c){B.pcCheck(c,
1,3);if(B.isArray(c[0])){g=B.toNumber(B.defaultUndefined(c[1],0));d=B.toNumber(B.defaultUndefined(c[2],c[0].length));if(isNaN(g)||!1===B.isInteger(g))throw Error("Invalid Parameter");if(isNaN(d)||!1===B.isInteger(d))throw Error("Invalid Parameter");var a=c[0];return a.slice(g,d)}if(B.isImmutableArray(c[0])){a=c[0];g=B.toNumber(B.defaultUndefined(c[1],0));d=B.toNumber(B.defaultUndefined(c[2],a.length()));if(isNaN(g)||!1===B.isInteger(g))throw Error("Invalid Parameter");if(isNaN(d)||!1===B.isInteger(d))throw Error("Invalid Parameter");
return a.toArray().slice(g,d)}throw Error("Invalid Parameter");})};A.splice=function(l,k){return p(l,k,function(g,d,c){g=[];for(d=0;d<c.length;d++)B.isArray(c[d])?g.push.apply(g,c[d]):B.isImmutableArray(c[d])?g.push.apply(g,c[d].toArray()):g.push(c[d]);return g})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(e,u,B){function A(k){k=new Date(k.getTime());var g=k.getFullYear(),d=new Date(0);d.setFullYear(g+1,0,4);d.setHours(0,0,0,0);d=p(d);var c=
new Date(0);c.setFullYear(g,0,4);c.setHours(0,0,0,0);c=p(c);return k.getTime()>=d.getTime()?g+1:k.getTime()>=c.getTime()?g:g-1}function p(k){k=new Date(k.getTime());var g=k.getDay();g=(1>g?7:0)+g-1;k.setDate(k.getDate()-g);k.setHours(0,0,0,0);return k}function l(k){return null===k?k:isNaN(k.getTime())?null:k}Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(k,g){k.today=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,0,0);a=new Date;a.setHours(0,
0,0,0);return a})};k.now=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,0,0);return new Date})};k.timestamp=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};k.toutc=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),
a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};k.tolocal=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?null:B.MomentLibrary.Moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};k.day=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getDate()})};k.month=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);
a=B.toDate(f[0]);return null===a?NaN:a.getMonth()})};k.year=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getFullYear()})};k.hour=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getHours()})};k.second=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getSeconds()})};k.millisecond=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);
return null===a?NaN:a.getMilliseconds()})};k.minute=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getMinutes()})};k.weekday=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:a.getDay()})};k.isoweekday=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);if(null===a)return NaN;a=a.getDay();0===a&&(a=7);return a})};k.isomonth=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,
1,1);a=B.toDate(f[0]);return null===a?NaN:a.getMonth()+1})};k.isoweek=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);b=B.toDate(f[0]);if(null===b)return NaN;a=p(b).getTime();b=A(b);f=new Date(0);f.setFullYear(b,0,4);f.setHours(0,0,0,0);b=p(f);a-=b.getTime();return Math.round(a/6048E5)+1})};k.isoyear=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,1,1);a=B.toDate(f[0]);return null===a?NaN:A(a)})};k.date=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,0,7);if(3===f.length)return l(new Date(B.toNumber(f[0]),
B.toNumber(f[1]),B.toNumber(f[2]),0,0,0,0));if(4===f.length)return l(new Date(B.toNumber(f[0]),B.toNumber(f[1]),B.toNumber(f[2]),B.toNumber(f[3]),0,0,0));if(5===f.length)return l(new Date(B.toNumber(f[0]),B.toNumber(f[1]),B.toNumber(f[2]),B.toNumber(f[3]),B.toNumber(f[4]),0,0));if(6===f.length)return l(new Date(B.toNumber(f[0]),B.toNumber(f[1]),B.toNumber(f[2]),B.toNumber(f[3]),B.toNumber(f[4]),B.toNumber(f[5]),0));if(7===f.length)return l(new Date(B.toNumber(f[0]),B.toNumber(f[1]),B.toNumber(f[2]),
B.toNumber(f[3]),B.toNumber(f[4]),B.toNumber(f[5]),B.toNumber(f[6])));if(2===f.length){a=B.toString(f[1]);if(""===a)return null;a=B.standardiseDateFormat(a);f=B.MomentLibrary.Moment(B.toString(f[0]),a,!0);return!0===f.isValid()?f.toDate():null}if(1===f.length){if(B.isString(f[0])){if(""===f[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(f[0]))return B.toDate(f[0]+"-01-01")}a=B.toNumber(f[0]);return!1===isNaN(a)?l(new Date(a)):B.toDate(f[0])}if(0===
f.length)return new Date})};k.datediff=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,2,3);a=B.toDateM(f[0]);b=B.toDateM(f[1]);if(null===a||null===b)return NaN;switch(B.toString(f[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===f[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);
case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};k.dateadd=function(d,c){return g(d,c,function(a,b,f){B.pcCheck(f,2,3);a=B.toDateM(f[0]);if(null===a)return null;b="milliseconds";switch(B.toString(f[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===f[2]?"months":"minutes";break;case "seconds":case "second":case "s":b=
"seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(B.toNumber(f[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(n,m){n.ringisclockwise=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=[];if(null===w[0])return!1;if(l.isArray(w[0])){var y=0;for(w=w[0];y<w.length;y++)if(C=w[y],C instanceof c)r.push([C.x,C.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof p)r=w[0]._elements;else if(l.isImmutableArray(w[0])){y=0;for(var q=w[0].toArray();y<q.length;y++)if(C=
q[y],C instanceof c)r.push([C.x,C.y]);else throw Error("Invalid Argument");0<r.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>r.length?!1:(new a({rings:[],spatialReference:{wkid:4326}})).isClockwise(r)})};n.polygon=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=null;if(w[0]instanceof B){if(r=l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),h.spatialReference),!1===r instanceof a)throw Error("Illegal Parameter");}else r=w[0]instanceof a?t.fromJson(w[0].toJson()):
l.fixSpatialReference(new a(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.polyline=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=null;if(w[0]instanceof B){if(r=l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),h.spatialReference),!1===r instanceof b)throw Error("Illegal Parameter");
}else r=w[0]instanceof b?t.fromJson(w[0].toJson()):l.fixSpatialReference(new b(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.point=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=null;if(w[0]instanceof B){if(r=l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),h.spatialReference),
!1===r instanceof c)throw Error("Illegal Parameter");}else r=w[0]instanceof c?t.fromJson(w[0].toJson()):l.fixSpatialReference(new c(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.multipoint=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=null;if(w[0]instanceof B){if(r=l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),
h.spatialReference),!1===r instanceof d)throw Error("Illegal Parameter");}else r=w[0]instanceof d?t.fromJson(w[0].toJson()):l.fixSpatialReference(new d(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.extent=function(h,v){return m(h,v,function(r,C,w){w=l.autoCastFeatureToGeometry(w);l.pcCheck(w,1,1);r=null;
w[0]instanceof B?r=l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),h.spatialReference):w[0]instanceof c?(r={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(r.zmin=w.z,r.zmax=w.z):w.hasM&&(r.mmin=w.m,r.mmax=w.m),r=t.fromJson(r)):r=w[0]instanceof a?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof b?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof d?t.fromJson(w[0].getExtent().toJson()):w[0]instanceof k?t.fromJson(w[0].toJson()):
l.fixSpatialReference(new k(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.geometry=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,1,1);r=null;r=w[0]instanceof A?l.fixSpatialReference(w[0].geometry(),h.spatialReference):w[0]instanceof B?l.fixSpatialReference(A.parseGeometryFromDictionary(w[0]),
h.spatialReference):l.fixSpatialReference(t.fromJson(JSON.parse(w[0])),h.spatialReference);if(null!==r&&!1===r.spatialReference.equals(h.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(r)})};n.setgeometry=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,2,2);if(w[0]instanceof A){if(!0===w[0].immutable)throw Error("Feature is Immutable");if(w[1]instanceof g||null===w[1])w[0]._geometry=w[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return l.voidOperation})};n.feature=function(h,v){return m(h,v,function(r,C,w){if(0===w.length)throw Error("Missing Parameters");r=null;if(1===w.length)if(l.isString(w[0]))r=A.fromJson(JSON.parse(w[0]));else if(w[0]instanceof A)r=A.createFromArcadeFeature(w[0]);else if(w[0]instanceof g)r=A.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof B)r=w[0].hasField("geometry")?w[0].field("geometry"):null,C=w[0].hasField("attributes")?
w[0].field("attributes"):null,null!==r&&r instanceof B&&(r=A.parseGeometryFromDictionary(r)),null!==C&&(C=A.parseAttributesFromDictionary(C)),r=A.createFromGraphicLikeObject(r,C,null);else throw Error("Illegal Argument");else{if(2===w.length){C=r=null;if(null!==w[0])if(w[0]instanceof g)r=w[0];else if(r instanceof B)r=A.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof B)C=A.parseAttributesFromDictionary(w[1]);else throw Error("Illegal Argument");
}else{r=null;C={};if(null!==w[0])if(w[0]instanceof g)r=w[0];else if(r instanceof B)r=A.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");for(var y=1;y<w.length;y+=2){var q=l.toString(w[y]),x=w[y+1];if(null===x||void 0===x||l.isString(x)||isNaN(x)||l.isDate(x)||l.isNumber(x)||l.isBoolean(x)){if(l.isFunctionParameter(x)||!1===l.isSimpleType(x))throw Error("Illegal Argument");C[q]=x===l.voidOperation?null:x}else throw Error("Illegal Argument");}}r=A.createFromGraphicLikeObject(r,
C,null)}r._geometry=l.fixSpatialReference(r.geometry(),h.spatialReference);r.immutable=!1;return r})};n.dictionary=function(h,v){return m(h,v,function(r,C,w){if(0===w.length)return w=new B,w.immutable=!1,w;if(1===w.length&&l.isString(w[0]))try{var y=JSON.parse(w[0]),q=B.convertObjectToArcadeDictionary(y);q.immutable=!1;return q}catch(x){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");r={};for(C=0;C<w.length;C+=2)if(y=l.toString(w[C]),q=w[C+1],
null===q||void 0===q||l.isString(q)||isNaN(q)||l.isDate(q)||l.isNumber(q)||l.isBoolean(q)||l.isArray(q)||l.isImmutableArray(q)){if(l.isFunctionParameter(q))throw Error("Illegal Argument");r[y]=q===l.voidOperation?null:q}else throw Error("Illegal Argument");w=new B(r);w.immutable=!1;return w})};n.haskey=function(h,v){return m(h,v,function(r,C,w){l.pcCheck(w,2,2);r=l.toString(w[1]);if(w[0]instanceof A||w[0]instanceof B)return w[0].hasField(r);throw Error("Illegal Argument");})};n.indexof=function(h,
v){return m(h,v,function(r,C,w){l.pcCheck(w,2,2);r=w[1];if(l.isArray(w[0])){for(C=0;C<w[0].length;C++)if(l.equalityTest(r,w[0][C]))return C;return-1}if(l.isImmutableArray(w[0])){var y=w[0].length();for(C=0;C<y;C++)if(l.equalityTest(r,w[0].get(C)))return C;return-1}throw Error("Illegal Argument");})};n.angle=function(h,v){return m(h,v,function(r,C,w){w=l.autoCastFeatureToGeometry(w);l.pcCheck(w,2,3);if(!(w[0]instanceof c))throw Error("Illegal Argument");if(!(w[1]instanceof c))throw Error("Illegal Argument");
if(2<w.length&&!(w[2]instanceof c))throw Error("Illegal Argument");return 2===w.length?f.angle2D(w[0],w[1]):f.angleBetween2D(w[0],w[1],w[2])})};n.bearing=function(h,v){return m(h,v,function(r,C,w){w=l.autoCastFeatureToGeometry(w);l.pcCheck(w,2,3);if(!(w[0]instanceof c))throw Error("Illegal Argument");if(!(w[1]instanceof c))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof c))throw Error("Illegal Argument");return 2===w.length?f.bearing2D(w[0],w[1]):f.bearingBetween2D(w[0],w[1],w[2])})};
n.isselfintersecting=function(h,v){return m(h,v,function(r,C,w){w=l.autoCastFeatureToGeometry(w);l.pcCheck(w,1,1);r=w[0];if(r instanceof a)return r.isSelfIntersecting(r);if(r instanceof b)return r=r.paths,f.pathsSelfIntersecting(r);if(r instanceof d)for(C=r.points,w=0;w<C.length;w++)for(var y=0;y<C.length;y++)if(y!==w){for(var q=!0,x=0;x<C[w].length;x++)if(C[w][x]!==C[y][x]){q=!1;break}if(!0===q)return!0}return l.isArray(r)||l.isImmutableArray(r)?(r=l.autoCastArrayOfPointsToPolyline(r,h.spatialReference),
null!==r&&(r=r.paths),f.pathsSelfIntersecting(r)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(e,u,B){function A(a,b,f){var t={x:0,y:0};b&&(t.z=0);f&&(t.m=0);for(var n=0,m=a[0],h=0;h<a.length;h++){var v=a[h];a:if(v.length!==m.length)var r=!1;else{for(r=0;r<v.length;r++)if(v[r]!==m[r]){r=!1;break a}r=!0}if(!1===r){r=p(m,v,b);var C=v,w=b,y=f,q={x:(m[0]+C[0])/2,y:(m[1]+C[1])/2};w&&(q.z=(m[2]+C[2])/2);w&&y?q.m=(m[3]+C[3])/2:y&&(q.m=
(m[2]+C[2])/2);m=q;m.x*=r;m.y*=r;t.x+=m.x;t.y+=m.y;b&&(m.z*=r,t.z+=m.z);f&&(m.m*=r,t.m+=m.m);n+=r;m=v}}0<n?(t.x/=n,t.y/=n,b&&(t.z/=n),f&&(t.m/=n)):(t.x=a[0][0],t.y=a[0][1],b&&(t.z=a[0][2]),f&&b?t.m=a[0][3]:f&&(t.m=a[0][2]));return t}function p(a,b,f){var t=b[0]-a[0];a=b[1]-a[1];return f?(b=b[2]-b[2],Math.sqrt(t*t+a*a+b*b)):Math.sqrt(t*t+a*a)}function l(a,b,f){for(void 0===f&&(f=0);a<f;)a+=b;for(f+=b;a>=f;)a-=b;return a}function k(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}function g(a,b,f){var t=a.x-
b.x;a=a.y-b.y;var n=f.x-b.x;b=f.y-b.y;return Math.atan2(t*b-n*a,t*n+a*b)}function d(a,b,f,t,n){var m=a[0];a=a[1];var h=b[0];b=b[1];var v=f[0],r=f[1];f=t[0]-v;v=m-v;var C=h-m;t=t[1]-r;r=a-r;var w=b-a,y=t*C-f*w;if(0===y)return!1;f=(f*r-t*v)/y;v=(C*r-w*v)/y;return 0<=f&&1>=f&&0<=v&&1>=v?(n&&(n[0]=m+f*(h-m),n[1]=a+f*(b-a)),!0):!1}Object.defineProperty(u,"__esModule",{value:!0});u.pathsSelfIntersecting=u.bearingBetween2D=u.angleBetween2D=u.angleBetweenRad=u.bearing2D=u.angle2D=u.angleRad=u.centroidMultiPoint=
u.centroidPolyline=void 0;u.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:a.spatialReference.toJson()},f={x:0,y:0,spatialReference:a.spatialReference.toJson()},t=0,n=0,m=0;m<a.paths.length;m++)if(0!==a.paths[m].length){var h=a.paths[m];var v=!0===a.hasZ;if(1>=h.length)h=0;else{for(var r=0,C=1;C<h.length;C++)r+=p(h[C-1],h[C],v);h=r}0===h?(v=A(a.paths[m],!0===a.hasZ,!0===a.hasM),b.x+=v.x,b.y+=v.y,!0===a.hasZ&&(b.z+=v.z),!0===a.hasM&&(b.m+=v.m),++t):(v=A(a.paths[m],!0===a.hasZ,!0===
a.hasM),f.x+=v.x*h,f.y+=v.y*h,!0===a.hasZ&&(f.z+=v.z*h),!0===a.hasM&&(f.m+=v.m*h),n+=h)}return 0<n?(f.x/=n,f.y/=n,!0===a.hasZ&&(f.z/=n),!0===a.hasM&&(f.m/=n),new B(f)):0<t?(b.x/=t,b.y/=t,!0===a.hasZ&&(f.z/=t),!0===a.hasM&&(b.m/=t),new B(b)):null};u.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,f=0,t=0,n=0,m=0;m<a.points.length;m++){var h=a.getPoint(m);!0===h.hasZ&&(t+=h.z);!0===h.hasM&&(n+=h.m);b+=h.x;f+=h.y;n+=h.m}b={x:b/a.points.length,y:f/a.points.length,spatialReference:null};
b.spatialReference=a.spatialReference.toJson();!0===a.hasZ&&(b.z=t/a.points.length);!0===a.hasM&&(b.m=n/a.points.length);return new B(b)};u.angleRad=k;u.angle2D=function(a,b){return l(k(a,b),2*Math.PI)*(180/Math.PI)};u.bearing2D=function(a,b){return l(Math.PI/2-k(a,b),2*Math.PI)*(180/Math.PI)};u.angleBetweenRad=g;u.angleBetween2D=function(a,b,f){return l(g(a,b,f),2*Math.PI)*(180/Math.PI)};u.bearingBetween2D=function(a,b,f){return l(-1*g(a,b,f),2*Math.PI)*(180/Math.PI)};var c=[0,0];u.pathsSelfIntersecting=
function(a){for(var b=0;b<a.length;b++){for(var f=a[b],t=0;t<f.length-1;t++)for(var n=f[t],m=f[t+1],h=b+1;h<a.length;h++)for(var v=0;v<a[h].length-1;v++){var r=a[h][v],C=a[h][v+1],w=d(n,m,r,C,c);if(w&&!(c[0]===n[0]&&c[1]===n[1]||c[0]===r[0]&&c[1]===r[1]||c[0]===m[0]&&c[1]===m[1]||c[0]===C[0]&&c[1]===C[1]))return!0}v=f.length;if(!(3>v))for(t=0;t<=v-2;t++)for(n=f[t],m=f[t+1],h=t+2;h<=v-2;h++)if(r=f[h],C=f[h+1],(w=d(n,m,r,C,c))&&!(c[0]===n[0]&&c[1]===n[1]||c[0]===r[0]&&c[1]===r[1]||c[0]===m[0]&&c[1]===
m[1]||c[0]===C[0]&&c[1]===C[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f){function t(m){return 0===B.version.indexOf("4.")?a.fromExtent(m):new a({spatialReference:m.spatialReference,rings:[[[m.xmin,
m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]]})}Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=u.setGeometryEngine=void 0;var n=null;u.setGeometryEngine=function(m){n=m};u.registerFunctions=function(m,h){function v(r){p.pcCheck(r,2,2);if(!(r[0]instanceof g&&r[1]instanceof g||r[0]instanceof g&&null===r[1]||r[1]instanceof g&&null===r[0]||null===r[0]&&null===r[1]))throw Error("Illegal Argument");}m.disjoint=function(r,C){return h(r,C,function(w,y,q){q=
p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!0:n.disjoint(q[0],q[1])})};m.intersects=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!1:n.intersects(q[0],q[1])})};m.touches=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!1:n.touches(q[0],q[1])})};m.crosses=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===
q[0]||null===q[1]?!1:n.crosses(q[0],q[1])})};m.within=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!1:n.within(q[0],q[1])})};m.contains=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!1:n.contains(q[0],q[1])})};m.overlaps=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?!1:n.overlaps(q[0],q[1])})};m.equals=
function(r,C){return h(r,C,function(w,y,q){p.pcCheck(q,2,2);return q[0]===q[1]?!0:q[0]instanceof g&&q[1]instanceof g?n.equals(q[0],q[1]):p.isDate(q[0])&&p.isDate(q[1])?q[0].getTime()===q[1].getTime():!1})};m.relate=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,3,3);if(q[0]instanceof g&&q[1]instanceof g)return n.relate(q[0],q[1],p.toString(q[2]));if(q[0]instanceof g&&null===q[1]||q[1]instanceof g&&null===q[0]||null===q[0]&&null===q[1])return!1;throw Error("Illegal Argument");
})};m.intersection=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]||null===q[1]?null:n.intersect(q[0],q[1])})};m.union=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);w=[];if(0===q.length)throw Error("Function called with wrong number of Parameters");if(1===q.length)if(p.isArray(q[0]))for(q=p.autoCastFeatureToGeometry(q[0]),y=0;y<q.length;y++){if(null!==q[y]){if(!(q[y]instanceof g))throw Error("Illegal Argument");w.push(q[y])}}else if(p.isImmutableArray(q[0]))for(q=
p.autoCastFeatureToGeometry(q[0].toArray()),y=0;y<q.length;y++){if(null!==q[y]){if(!(q[y]instanceof g))throw Error("Illegal Argument");w.push(q[y])}}else{if(q[0]instanceof g)return p.fixSpatialReference(A.cloneGeometry(q[0]),r.spatialReference);if(null===q[0])return null;throw Error("Illegal Argument");}else for(y=0;y<q.length;y++)if(null!==q[y]){if(!(q[y]instanceof g))throw Error("Illegal Argument");w.push(q[y])}return 0===w.length?null:n.union(w)})};m.difference=function(r,C){return h(r,C,function(w,
y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null!==q[0]&&null===q[1]?A.cloneGeometry(q[0]):null===q[0]?null:n.difference(q[0],q[1])})};m.symmetricdifference=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);v(q);return null===q[0]&&null===q[1]?null:null===q[0]?A.cloneGeometry(q[1]):null===q[1]?A.cloneGeometry(q[0]):n.symmetricDifference(q[0],q[1])})};m.clip=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,2);if(!(q[1]instanceof
k)&&null!==q[1])throw Error("Illegal Argument");if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");return null===q[1]?null:n.clip(q[0],q[1])})};m.cut=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,2);if(!(q[1]instanceof b)&&null!==q[1])throw Error("Illegal Argument");if(null===q[0])return[];if(!(q[0]instanceof g))throw Error("Illegal Argument");return null===q[1]?[A.cloneGeometry(q[0])]:n.cut(q[0],q[1])})};m.area=function(r,
C){return h(r,C,function(w,y,q){p.pcCheck(q,1,2);q=p.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(p.isArray(q[0])||p.isImmutableArray(q[0]))return w=p.autoCastArrayOfPointsToPolygon(q[0],r.spatialReference),null===w?0:n.planarArea(w,A.convertSquareUnitsToCode(p.defaultUndefined(q[1],-1)));if(!(q[0]instanceof g))throw Error("Illegal Argument");return n.planarArea(q[0],A.convertSquareUnitsToCode(p.defaultUndefined(q[1],-1)))})};m.areageodetic=function(r,C){return h(r,C,function(w,y,q){p.pcCheck(q,
1,2);q=p.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(p.isArray(q[0])||p.isImmutableArray(q[0]))return w=p.autoCastArrayOfPointsToPolygon(q[0],r.spatialReference),null===w?0:n.geodesicArea(w,A.convertSquareUnitsToCode(p.defaultUndefined(q[1],-1)));if(!(q[0]instanceof g))throw Error("Illegal Argument");return n.geodesicArea(q[0],A.convertSquareUnitsToCode(p.defaultUndefined(q[1],-1)))})};m.length=function(r,C){return h(r,C,function(w,y,q){p.pcCheck(q,1,2);q=p.autoCastFeatureToGeometry(q);
if(null===q[0])return 0;if(p.isArray(q[0])||p.isImmutableArray(q[0]))return w=p.autoCastArrayOfPointsToPolyline(q[0],r.spatialReference),null===w?0:n.planarLength(w,A.convertLinearUnitsToCode(p.defaultUndefined(q[1],-1)));if(!(q[0]instanceof g))throw Error("Illegal Argument");return n.planarLength(q[0],A.convertLinearUnitsToCode(p.defaultUndefined(q[1],-1)))})};m.lengthgeodetic=function(r,C){return h(r,C,function(w,y,q){p.pcCheck(q,1,2);q=p.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(p.isArray(q[0])||
p.isImmutableArray(q[0]))return w=p.autoCastArrayOfPointsToPolyline(q[0],r.spatialReference),null===w?0:n.geodesicLength(w,A.convertLinearUnitsToCode(p.defaultUndefined(q[1],-1)));if(!(q[0]instanceof g))throw Error("Illegal Argument");return n.geodesicLength(q[0],A.convertLinearUnitsToCode(p.defaultUndefined(q[1],-1)))})};m.distance=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);w=q[0];if(p.isArray(q[0])||p.isImmutableArray(q[0]))w=p.autoCastArrayOfPointsToMultiPoint(q[0],
r.spatialReference);y=q[1];if(p.isArray(q[1])||p.isImmutableArray(q[1]))y=p.autoCastArrayOfPointsToMultiPoint(q[1],r.spatialReference);if(!(w instanceof g))throw Error("Illegal Argument");if(!(y instanceof g))throw Error("Illegal Argument");return n.distance(w,y,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1)))})};m.distancegeodetic=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);w=q[0];y=q[1];if(!(w instanceof c))throw Error("Illegal Argument");
if(!(y instanceof c))throw Error("Illegal Argument");var x=new b({paths:[],spatialReference:w.spatialReference});x.addPath([w,y]);return n.geodesicLength(x,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1)))})};m.densify=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return q[0]instanceof a||q[0]instanceof b?n.densify(q[0],w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1))):q[0]instanceof k?n.densify(t(q[0]),w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1))):q[0]})};m.densifygeodetic=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return q[0]instanceof a||q[0]instanceof b?n.geodesicDensify(q[0],w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1))):q[0]instanceof k?n.geodesicDensify(t(q[0]),w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1))):q[0]})};m.generalize=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,4);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return n.generalize(q[0],
w,p.toBoolean(p.defaultUndefined(q[2],!0)),A.convertLinearUnitsToCode(p.defaultUndefined(q[3],-1)))})};m.buffer=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?A.cloneGeometry(q[0]):n.buffer(q[0],w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1)))})};m.buffergeodetic=function(r,C){return h(r,
C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?A.cloneGeometry(q[0]):n.geodesicBuffer(q[0],w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1)))})};m.offset=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,6);if(null===q[0])return null;if(!(q[0]instanceof a||q[0]instanceof b))throw Error("Illegal Argument");
w=p.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");y=p.toNumber(p.defaultUndefined(q[4],10));if(isNaN(y))throw Error("Illegal Argument");var x=p.toNumber(p.defaultUndefined(q[5],0));if(isNaN(x))throw Error("Illegal Argument");return n.offset(q[0],w,A.convertLinearUnitsToCode(p.defaultUndefined(q[2],-1)),p.toString(p.defaultUndefined(q[3],"round")).toLowerCase(),y,x)})};m.rotate=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,2,3);w=q[0];if(null===
w)return null;if(!(w instanceof g))throw Error("Illegal Argument");w instanceof k&&(w=a.fromExtent(w));y=p.toNumber(q[1]);if(isNaN(y))throw Error("Illegal Argument");q=p.defaultUndefined(q[2],null);if(null===q)return n.rotate(w,y);if(q instanceof c)return n.rotate(w,y,q);throw Error("Illegal Argument");})};m.centroid=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,1,1);if(null===q[0])return null;w=q[0];if(p.isArray(q[0])||p.isImmutableArray(q[0]))w=p.autoCastArrayOfPointsToMultiPoint(q[0],
r.spatialReference);if(null===w)return null;if(!(w instanceof g))throw Error("Illegal Argument");return w instanceof c?p.fixSpatialReference(A.cloneGeometry(q[0]),r.spatialReference):w instanceof a?w.getCentroid():w instanceof b?l.centroidPolyline(w):w instanceof d?l.centroidMultiPoint(w):w instanceof k?w.getCenter():null})};m.multiparttosinglepart=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,1,1);y=[];if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");
if(q[0]instanceof c||q[0]instanceof k)return[p.fixSpatialReference(A.cloneGeometry(q[0]),r.spatialReference)];w=n.simplify(q[0]);if(w instanceof a){y=[];var x=[];for(q=0;q<w.rings.length;q++)if(w.isClockwise(w.rings[q])){var E=f.fromJson({rings:[w.rings[q]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()});y.push(E)}else x.push({ring:w.rings[q],pt:w.getPoint(q,0)});for(w=0;w<x.length;w++)for(q=0;q<y.length;q++)if(y[q].contains(x[w].pt)){y[q].addRing(x[w].ring);break}return y}if(w instanceof
b){y=[];for(q=0;q<w.paths.length;q++)x=f.fromJson({paths:[w.paths[q]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()}),y.push(x);return y}if(q[0]instanceof d){w=p.fixSpatialReference(A.cloneGeometry(q[0]),r.spatialReference);for(q=0;q<w.points.length;q++)y.push(w.getPoint(q));return y}return null})};m.issimple=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,1,1);if(null===q[0])return!0;if(!(q[0]instanceof g))throw Error("Illegal Argument");
return n.isSimple(q[0])})};m.simplify=function(r,C){return h(r,C,function(w,y,q){q=p.autoCastFeatureToGeometry(q);p.pcCheck(q,1,1);if(null===q[0])return null;if(!(q[0]instanceof g))throw Error("Illegal Argument");return n.simplify(q[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(e,u,B,A){Object.defineProperty(u,"__esModule",{value:!0});u.cloneGeometry=u.sameGeomType=u.convertLinearUnitsToCode=u.shapeExtent=u.convertSquareUnitsToCode=
void 0;u.convertSquareUnitsToCode=function(p){if(void 0===p)return null;if("number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};u.shapeExtent=function(p){if(null===p)return null;switch(p.type){case "polygon":case "multipoint":case "polyline":return p.extent;case "point":return new B({xmin:p.x,
ymin:p.y,xmax:p.x,ymax:p.y,spatialReference:p.spatialReference});case "extent":return p}return null};u.convertLinearUnitsToCode=function(p){if(void 0===p)return null;if("number"===typeof p||"number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};u.sameGeomType=function(p,l){return p===l||"point"===p&&"esriGeometryPoint"===l||"polyline"===p&&"esriGeometryPolyline"===l||"polygon"===p&&"esriGeometryPolygon"===l||"extent"===p&&"esriGeometryEnvelope"===l||"multipoint"===p&&"esriGeometryMultipoint"===
l||"point"===l&&"esriGeometryPoint"===p||"polyline"===l&&"esriGeometryPolyline"===p||"polygon"===l&&"esriGeometryPolygon"===p||"extent"===l&&"esriGeometryEnvelope"===p||"multipoint"===l&&"esriGeometryMultipoint"===p?!0:!1};u.cloneGeometry=function(p){if(null===p)return null;var l=A.fromJson(p.toJson());p.getCacheValue("_geVersion")&&l.setCacheValue("_geVersion",p.getCacheValue("_geVersion"));return l}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(e,u,B,A){function p(l,k,g){if("undefined"===typeof g||0===+g)return Math[l](k);k=+k;g=+g;if(isNaN(k)||"number"!==typeof g||0!==g%1)return NaN;k=k.toString().split("e");k=Math[l](+(k[0]+"e"+(k[1]?+k[1]-g:-g)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+g:g))}Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(l,k){function g(d,c,a){d=B.toNumber(d);return isNaN(d)?d:isNaN(c)||isNaN(a)||c>a?NaN:d<c?c:d>a?a:d}l.number=function(d,
c){return k(d,c,function(a,b,f){B.pcCheck(f,1,2);a=f[0];return B.isNumber(a)?a:null===a?0:B.isDate(a)||B.isBoolean(a)?Number(a):B.isArray(a)?NaN:""===a||void 0===a?Number(a):B.isString(a)?void 0!==f[1]?(f=B.multiReplace(f[1],"\u2030",""),f=B.multiReplace(f,"\u00a4",""),A.parse(a,{pattern:f})):Number(a.trim()):Number(a)})};l.abs=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.abs(B.toNumber(f[0]))})};l.acos=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.acos(B.toNumber(f[0]))})};
l.asin=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.asin(B.toNumber(f[0]))})};l.atan=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.atan(B.toNumber(f[0]))})};l.atan2=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,2,2);return Math.atan2(B.toNumber(f[0]),B.toNumber(f[1]))})};l.ceil=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,2);return 2===f.length?(a=B.toNumber(f[1]),isNaN(a)&&(a=0),p("ceil",B.toNumber(f[0]),-1*a)):Math.ceil(B.toNumber(f[0]))})};
l.round=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,2);return 2===f.length?(a=B.toNumber(f[1]),isNaN(a)&&(a=0),p("round",B.toNumber(f[0]),-1*a)):Math.round(B.toNumber(f[0]))})};l.floor=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,2);return 2===f.length?(a=B.toNumber(f[1]),isNaN(a)&&(a=0),p("floor",B.toNumber(f[0]),-1*a)):Math.floor(B.toNumber(f[0]))})};l.cos=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.cos(B.toNumber(f[0]))})};l.isnan=function(d,
c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return"number"===typeof f[0]&&isNaN(f[0])})};l.exp=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.exp(B.toNumber(f[0]))})};l.log=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.log(B.toNumber(f[0]))})};l.pow=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,2,2);return Math.pow(B.toNumber(f[0]),B.toNumber(f[1]))})};l.random=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,0,0);return Math.random()})};
l.sin=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.sin(B.toNumber(f[0]))})};l.sqrt=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.sqrt(B.toNumber(f[0]))})};l.tan=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return Math.tan(B.toNumber(f[0]))})};l.defaultvalue=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,2,2);return null===f[0]||""===f[0]||void 0===f[0]?f[1]:f[0]})};l.isempty=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,
1,1);return null===f[0]||""===f[0]||void 0===f[0]?!0:!1})};l["boolean"]=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,1,1);return B.toBoolean(f[0])})};l.constrain=function(d,c){return k(d,c,function(a,b,f){B.pcCheck(f,3,3);a=B.toNumber(f[1]);b=B.toNumber(f[2]);if(B.isArray(f[0])){var t=[],n=0;for(f=f[0];n<f.length;n++)t.push(g(f[n],a,b));return t}if(B.isImmutableArray(f[0])){t=[];for(n=0;n<f[0].length();n++)t.push(g(f[0].get(n),a,b));return t}return g(f[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(e,u,B,A){function p(l,k,g,d){if(1===d.length){if(B.isArray(d[0]))return A.calculateStat(l,d[0],-1);if(B.isImmutableArray(d[0]))return A.calculateStat(l,d[0].toArray(),-1)}return A.calculateStat(l,d,-1)}Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(l,k){l.stdev=function(g,d){return k(g,d,function(c,a,b){return p("stdev",c,a,b)})};l.variance=function(g,d){return k(g,d,function(c,a,b){return p("variance",
c,a,b)})};l.average=function(g,d){return k(g,d,function(c,a,b){return p("mean",c,a,b)})};l.mean=function(g,d){return k(g,d,function(c,a,b){return p("mean",c,a,b)})};l.sum=function(g,d){return k(g,d,function(c,a,b){return p("sum",c,a,b)})};l.min=function(g,d){return k(g,d,function(c,a,b){return p("min",c,a,b)})};l.max=function(g,d){return k(g,d,function(c,a,b){return p("max",c,a,b)})};l.distinct=function(g,d){return k(g,d,function(c,a,b){return p("distinct",c,a,b)})};l.count=function(g,d){return k(g,
d,function(c,a,b){B.pcCheck(b,1,1);if(B.isArray(b[0])||B.isString(b[0]))return b[0].length;if(B.isImmutableArray(b[0]))return b[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(e,u,B){function A(l){for(var k=0,g=0;g<l.length;g++)k+=l[g];return k/l.length}function p(l){for(var k=A(l),g=0,d=0;d<l.length;d++)g+=Math.pow(k-l[d],2);return g/l.length}Object.defineProperty(u,"__esModule",
{value:!0});u.calculateStat=u.decodeStatType=void 0;u.decodeStatType=function(l){switch(l.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};u.calculateStat=function(l,k,g){void 0===g&&(g=1E3);switch(l.toLowerCase()){case "distinct":a:{l=g;g=[];for(var d={},c=[],a=0;a<k.length;a++){if(void 0!==
k[a]&&null!==k[a]&&k[a]!==B.voidOperation){var b=k[a];if(B.isNumber(b)||B.isString(b))void 0===d[b]&&(g.push(b),d[b]=1);else{for(var f=!1,t=0;t<c.length;t++)!0===B.equalityTest(c[t],b)&&(f=!0);!1===f&&(c.push(b),g.push(b))}}if(g.length>=l&&-1!==l){k=g;break a}}k=g}return k;case "avg":case "mean":return A(B.toNumberArray(k));case "min":return Math.min.apply(Math,B.toNumberArray(k));case "sum":k=B.toNumberArray(k);for(g=l=0;g<k.length;g++)l+=k[g];return l;case "max":return Math.max.apply(Math,B.toNumberArray(k));
case "stdev":case "stddev":return Math.sqrt(p(B.toNumberArray(k)));case "var":case "variance":return p(B.toNumberArray(k));case "count":return k.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m){function h(v,r,C){if(null===v)r.updateUint8Array([0,139]);else if(k.isArray(v)){r.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),r.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);for(var w=0;w<v.length;w++){var y=v[w];h(y,r,C)}C.map.delete(v);C.currentLength--}r.updateUint8Array([199])}else if(k.isImmutableArray(v)){r.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),r.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);
w=0;for(var q=v.toArray();w<q.length;w++)y=q[w],h(y,r,C);C.map.delete(v);C.currentLength--}r.updateUint8Array([199])}else if(k.isDate(v))r.updateIntArray([v.getTime()]),r.updateUint8Array([241]);else if(k.isString(v))r.updateIntArray([v.length]),r.updateWithString(v),r.updateUint8Array([41]);else if(k.isBoolean(v))r.updateUint8Array([!0===v?1:0,113]);else if(k.isNumber(v))r.updateFloatArray([v]),r.updateUint8Array([173]);else{if(v instanceof A)throw Error("Type not supported in Hash");if(v instanceof
B)throw Error("Type not supported in Hash");if(v instanceof p){r.updateUint8Array([223]);if(C.map.has(v))v=C.map.get(v),r.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);w=0;for(q=v.keys();w<q.length;w++)y=q[w],r.updateIntArray([y.length]),r.updateWithString(y),r.updateUint8Array([251]),y=v.field(y),h(y,r,C),r.updateUint8Array([239]);C.map.delete(v);C.currentLength--}r.updateUint8Array([73])}else{if(v instanceof l)throw Error("Type not supported in Hash");if(v instanceof f)r.updateIntArray([3833836621]),
r.updateIntArray([0]),r.updateFloatArray([v.x]),r.updateIntArray([1]),r.updateFloatArray([v.y]),r.updateIntArray([3765347959]),h(v.spatialReference.wkid,r,C);else if(v instanceof t){r.updateIntArray([1266616829]);for(w=0;w<v.rings.length;w++){q=v.rings[w];var x=[],E=null,z=null;for(y=0;y<q.length;y++){var D=v.getPoint(w,y);if(0===y)E=D;else if(z.x===D.x&&z.y===D.y)continue;z=D;y===q.length-1&&E.x===D.x&&E.y===D.y||x.push(D)}r.updateIntArray([1397116793,x.length]);for(y=0;y<x.length;y++)D=x[y],r.updateIntArray([3962308117,
y]),h(D,r,C),r.updateIntArray([2716288009]);r.updateIntArray([2278822459])}r.updateIntArray([3878477243]);h(v.spatialReference.wkid,r,C)}else if(v instanceof n){r.updateIntArray([4106883559]);for(w=0;w<v.paths.length;w++){q=v.paths[w];r.updateIntArray([1397116793,q.length]);for(y=0;y<q.length;y++)r.updateIntArray([3962308117,y]),h(v.getPoint(w,y),r,C),r.updateIntArray([2716288009]);r.updateIntArray([2278822459])}r.updateIntArray([2568784753]);h(v.spatialReference.wkid,r,C)}else if(v instanceof b){r.updateIntArray([588535921,
v.points.length]);for(y=0;y<v.points.length;y++)w=v.getPoint(y),r.updateIntArray([y]),h(w,r,C);r.updateIntArray([1700171621]);h(v.spatialReference.wkid,r,C)}else if(v instanceof a)r.updateIntArray([3483648373]),r.updateIntArray([0]),r.updateFloatArray([v.xmax]),r.updateIntArray([1]),r.updateFloatArray([v.xmin]),r.updateIntArray([2]),r.updateFloatArray([v.ymax]),r.updateIntArray([3]),r.updateFloatArray([v.ymin]),r.updateIntArray([3622027469]),h(v.spatialReference.wkid,r,C);else if(v instanceof m)r.updateIntArray([14]),
void 0!==v.wkid&&null!==v.wkid&&r.updateIntArray([v.wkid]),v.wkt&&r.updateWithString(v.wkt);else{if(k.isFunctionParameter(v))throw Error("Type not supported in Hash");if(k.isFeatureSet(v))throw Error("Type not supported in Hash");k.isFeatureSetCollection(v);throw Error("Type not supported in Hash");}}}}Object.defineProperty(u,"__esModule",{value:!0});u.registerFunctions=void 0;u.registerFunctions=function(v,r){v.portal=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);return new B(k.toString(x[0]))})};
v.trim=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);return k.toString(x[0]).trim()})};v.tohex=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);y=k.toNumber(x[0]);return isNaN(y)?y:y.toString(16)})};v.upper=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);return k.toString(x[0]).toUpperCase()})};v.proper=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,2);y=1;2===x.length&&"firstword"===k.toString(x[1]).toLowerCase()&&(y=2);q=/\s/;x=k.toString(x[0]);for(var E=
"",z=!0,D=0;D<x.length;D++){var F=x[D];q.test(F)?1===y&&(z=!0):F.toUpperCase()!==F.toLowerCase()&&(z?(F=F.toUpperCase(),z=!1):F=F.toLowerCase());E+=F}return E})};v.lower=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);return k.toString(x[0]).toLowerCase()})};v.guid=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,0,1);if(0<x.length)switch(k.toString(x[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();
case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+k.generateUUID()+"}"})};v.console=function(C,w){return r(C,w,function(y,q,x){0!==x.length&&(1===x.length?C.console(k.toString(x[0])):C.console(k.toString(x)));return k.voidOperation})};v.mid=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,3);y=k.toNumber(x[1]);if(isNaN(y))return"";0>y&&(y=0);if(2===x.length)return k.toString(x[0]).substr(y);q=k.toNumber(x[2]);if(isNaN(q))return"";0>q&&(q=0);return k.toString(x[0]).substr(y,
q)})};v.find=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,3);y=0;if(2<x.length){y=k.toNumber(k.defaultUndefined(x[2],0));if(isNaN(y))return-1;0>y&&(y=0)}return k.toString(x[1]).indexOf(k.toString(x[0]),y)})};v.left=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,2);y=k.toNumber(x[1]);if(isNaN(y))return"";0>y&&(y=0);return k.toString(x[0]).substr(0,y)})};v.right=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,2);y=k.toNumber(x[1]);if(isNaN(y))return"";0>y&&(y=0);return k.toString(x[0]).substr(-1*
y,y)})};v.split=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,4);y=k.toNumber(k.defaultUndefined(x[2],-1));q=k.toBoolean(k.defaultUndefined(x[3],!1));-1===y||null===y||!0===q?x=k.toString(x[0]).split(k.toString(x[1])):(isNaN(y)&&(y=-1),-1>y&&(y=-1),x=k.toString(x[0]).split(k.toString(x[1]),y));if(!1===q)return x;q=[];for(var E=0;E<x.length&&!(-1!==y&&q.length>=y);E++)""!==x[E]&&void 0!==x[E]&&q.push(x[E]);return q})};v.text=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,2);return k.toStringExplicit(x[0],
x[1])})};v.concatenate=function(C,w){return r(C,w,function(y,q,x){y=[];if(1>x.length)return"";if(k.isArray(x[0])){q=k.defaultUndefined(x[2],"");for(var E=0;E<x[0].length;E++)y[E]=k.toStringExplicit(x[0][E],q);return 1<x.length?y.join(x[1]):y.join("")}if(k.isImmutableArray(x[0])){q=k.defaultUndefined(x[2],"");for(E=0;E<x[0].length();E++)y[E]=k.toStringExplicit(x[0].get(E),q);return 1<x.length?y.join(x[1]):y.join("")}for(E=0;E<x.length;E++)y[E]=k.toStringExplicit(x[E]);return y.join("")})};v.reverse=
function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);if(k.isArray(x[0]))return y=x[0].slice(0),y.reverse(),y;if(k.isImmutableArray(x[0]))return y=x[0].toArray().slice(0),y.reverse(),y;throw Error("Invalid Parameter");})};v.replace=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,3,4);y=k.toString(x[0]);q=k.toString(x[1]);var E=k.toString(x[2]);return(4===x.length?k.toBoolean(x[3]):1)?k.multiReplace(y,q,E):y.replace(q,E)})};v.schema=function(C,w){return r(C,w,function(y,q,x){if(x[0]instanceof
l)return(y=x[0].schema())?p.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};v.subtypes=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);if(x[0]instanceof l)return(y=x[0].subtypes())?p.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};v.subtypecode=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);if(x[0]instanceof l){q=x[0].subtypes();if(!q)return null;if(q.subtypeField&&x[0].hasField(q.subtypeField))for(x=x[0].field(q.subtypeField),
y=0,q=q.subtypes;y<q.length;y++){var E=q[y];if(E.code===x)return E.code}return null}throw Error("Invalid Parameter");})};v.subtypename=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);if(x[0]instanceof l){q=x[0].subtypes();if(!q)return"";if(q.subtypeField&&x[0].hasField(q.subtypeField))for(x=x[0].field(q.subtypeField),y=0,q=q.subtypes;y<q.length;y++){var E=q[y];if(E.code===x)return E.name}return""}throw Error("Invalid Parameter");})};v.gdbversion=function(C,w){return r(C,w,function(y,q,
x){k.pcCheck(x,1,1);if(x[0]instanceof l)return x[0].gdbVersion();throw Error("Invalid Parameter");})};v.domain=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,3);if(x[0]instanceof l)return(y=x[0].fullDomain(k.toString(x[1]),void 0===x[2]?void 0:k.toNumber(x[2])))&&y.domain?"coded-value"===y.domain.type||"codedValue"===y.domain.type?p.convertObjectToArcadeDictionary({type:"codedValue",name:y.domain.name,dataType:g.layerFieldEsriConstants[y.field.type],codedValues:y.domain.codedValues.map(function(E){return{name:E.name,
code:E.code}})}):p.convertObjectToArcadeDictionary({type:"range",name:y.domain.name,dataType:g.layerFieldEsriConstants[y.field.type],min:y.domain.min,max:y.domain.max}):null;throw Error("Invalid Parameter");})};v.domainname=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,4);if(x[0]instanceof l)return x[0].domainValueLookup(k.toString(x[1]),x[2],void 0===x[3]?void 0:k.toNumber(x[3]));throw Error("Invalid Parameter");})};v.domaincode=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,2,
4);if(x[0]instanceof l)return x[0].domainCodeLookup(k.toString(x[1]),x[2],void 0===x[3]?void 0:k.toNumber(x[3]));throw Error("Invalid Parameter");})};v.urlencode=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);if(null===x[0])return"";if(x[0]instanceof p){y="";q=0;for(var E=x[0].keys();q<E.length;q++){var z=E[q],D=x[0].field(z);""!==y&&(y+="\x26");y=null===D?y+(encodeURIComponent(z)+"\x3d"):y+(encodeURIComponent(z)+"\x3d"+encodeURIComponent(D))}return y}return encodeURIComponent(k.toString(x[0]))})};
v.hash=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,1,1);y=new c.XXH(0);h(x[0],y,{map:new Map,currentLength:0});return y.digest()})};v.convertdirection=function(C,w){return r(C,w,function(y,q,x){k.pcCheck(x,3,3);return d.convertDirection(x[0],x[1],x[2])})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(e,u,B,A){function p(P){if(!1===A.isString(P))throw Error("Invalid Parameter");return P}function l(P,ea){ea=
Math.pow(10,ea);return Math.round(P*ea)/ea}function k(P){P=+P;return isFinite(P)?P-P%1||(0>P?-0:0===P?P:0):P}function g(P){var ea=parseFloat(P.toString().replace(k(P).toString(),"0"))*((0<P)-(0>P)||+P);return 0>P?{fraction:ea,integer:Math.ceil(P)}:{fraction:ea,integer:Math.floor(P)}}function d(P,ea){switch(P){case 0:return"SHORT"===ea?"N":"North";case 1:return"SHORT"===ea?"E":"East";case 2:return"SHORT"===ea?"S":"South";case 3:return"SHORT"===ea?"W":"West"}}function c(P,ea,ra){for(;P.length<ra;)P=
ea+P;return P}function a(P,ea){return P-Math.floor(P/ea)*ea}function b(P){switch(P){case 6:case 1:return 360;case 4:return F;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function f(P){switch(P.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");
}function t(P){switch(P.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function n(P,ea,ra){var M=null;
switch(ea){case 1:M=u.preciseMultiply(P,3600);break;case 2:M=P;break;case 5:M=u.preciseMultiply(P,3240);break;case 4:M=u.preciseMultiply(P,J);break;default:throw Error("Unnexpected evaluation");}switch(ra){case 1:return u.preciseDivide(M,3600);case 2:return M;case 5:return u.preciseDivide(M,3240);case 4:return M/J;default:throw Error("Unnexpected evaluation");}}function m(P){switch(P){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function h(P){switch(A.toNumber(P)){case 1:return{first:0,
second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function v(P){switch(P.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function r(P){P=parseFloat(P);if(A.isNumber(P)){if(isNaN(P))throw Error("Invalid conversion");return P}throw Error("Invalid conversion");}function C(P,ea,ra){var M=3===ra,Z=null,ka=null,qa=0,ua=0;ua=0;if(M){if(2>
P.length)throw Error("Conversion Error");ua=1;(ka=h(A.toString(P[P.length-1])))?(Z=ka.first,ka=ka.second):(qa=1,Z=v(A.toString(P[0])),ka=v(A.toString(P[P.length-1])));if(null===Z||null===ka)throw Error("Invalid Conversion");}switch(ea){case 1:case 4:case 5:if(0===P.length)throw Error("Invalid Conversion");return M?la.createFromAngleMeridianAndDirection(ta.createFromAngleAndUnits(r(P[qa]),m(ea)),Z,ka):la.createFromAngleAndDirection(ta.createFromAngleAndUnits(r(P[qa]),m(ea)),ra);case 3:ua=P.length-
ua-qa;if(3===ua)return P=ta.createFromDegreesMinutesSeconds(r(P[qa]),r(P[qa+1]),r(P[qa+2])),M?la.createFromAngleMeridianAndDirection(P,Z,ka):la.createFromAngleAndDirection(P,ra);if(1===ua)return P=r(P[qa]),P=ma.number_to_dms(P),P=ta.createFromDegreesMinutesSeconds(P.m_degrees,P.m_minutes,P.m_seconds),M?la.createFromAngleMeridianAndDirection(P,Z,ka):la.createFromAngleAndDirection(P,ra)}throw Error("Conversion Error");}function w(P){for(var ea=[" ","-","/","'",'"',"\\","^","\u00b0",L,"\t","\r","\n",
"*"],ra="",M=0;M<P.length;M++){var Z=P.charAt(M);ra=-1!==ea.indexOf(Z)?ra+"RRSPLITRRSPLITRR":ra+Z}return ra.split("RRSPLITRRSPLITRR").filter(function(ka){return""!==ka})}function y(P,ea,ra){for(var M={padding:0,rounding:0,newpos:ea},Z=!1;ea<P.length;){var ka=P[ea];if(ka===ra)Z?M.rounding++:M.padding++,ea++;else if("."===ka)Z=!0,ea++;else break}M.newpos=ea-1;return M}Object.defineProperty(u,"__esModule",{value:!0});u.convertDirection=u.preciseDivide=u.preciseMultiply=u.preciseMinus=u.preciseAdd=void 0;
var q=function(P){return function(ea,ra,M){M=M||14;return+P(ea,ra).toFixed(M)}},x=function(P,ea){return P+ea},E=function(P,ea){return P-ea},z=function(P,ea){return P*ea},D=function(P,ea){return P/ea};u.preciseAdd=function(P,ea,ra){return q(x)(P,ea,ra)};u.preciseMinus=function(P,ea,ra){return q(E)(P,ea,ra)};u.preciseMultiply=function(P,ea,ra){return q(z)(P,ea,ra)};u.preciseDivide=function(P,ea,ra){return q(D)(P,ea,ra)};var F=2*Math.PI,J=648E3/Math.PI,L=String.fromCharCode(7501),Q;(function(P){P[P.north=
0]="north";P[P.east=1]="east";P[P.south=2]="south";P[P.west=3]="west"})(Q||(Q={}));var ba;(function(P){P[P.decimal_degrees=1]="decimal_degrees";P[P.seconds=2]="seconds";P[P.degrees_minutes_seconds=3]="degrees_minutes_seconds";P[P.radians=4]="radians";P[P.gradians=5]="gradians";P[P.truncated_degrees=6]="truncated_degrees";P[P.fractional_degree_minutes=7]="fractional_degree_minutes";P[P.fractional_minute_seconds=8]="fractional_minute_seconds"})(ba||(ba={}));var fa;(function(P){P[P.north_azimuth=1]=
"north_azimuth";P[P.polar=2]="polar";P[P.quadrant=3]="quadrant";P[P.south_azimuth=4]="south_azimuth"})(fa||(fa={}));var Y;(function(P){P[P.meridian=0]="meridian";P[P.direction=1]="direction"})(Y||(Y={}));var ma=function(){function P(ea,ra,M){this.m_degrees=ea;this.m_minutes=ra;this.m_seconds=M}P.prototype.get_field=function(ea){switch(ea){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};P.seconds_to_DMS=
function(ea){var ra=g(ea).fraction;ea=g(ea).integer;var M=Math.floor(ea/3600);ea-=3600*M;var Z=Math.floor(ea/60);return new P(M,Z,ea-60*Z+ra)};P.number_to_dms=function(ea){var ra=g(ea).fraction;ea=g(ea).integer;var M=u.preciseMultiply(g(100*ra).fraction,100);ra=g(100*ra).integer;return new P(ea,ra,M)};P.prototype.format=function(ea,ra){ra=l(this.m_seconds,ra);var M=this.m_minutes,Z=this.m_degrees;if(2===ea||8===ea)60<=ra&&(ra-=60,++M),60<=M&&(M=0,++Z),360<=Z&&(Z=0);else if(7===ea)ra=0,M=30<=this.m_seconds?
this.m_minutes+1:this.m_minutes,Z=this.m_degrees,60<=M&&(M=0,++Z),360<=Z&&(Z=0);else if(1===ea||6===ea)ea=u.preciseDivide(this.m_seconds,3600),ra=u.preciseDivide(this.m_minutes,60),Z=Math.round(this.m_degrees+ra+ea),ra=M=0;return new P(Z,M,ra)};P.DMS_to_seconds=function(ea,ra,M){return 3600*ea+60*ra+M};return P}(),ca=function(){function P(ea,ra,M){this.meridian=ea;this.angle=ra;this.direction=M}P.prototype.fetch_azimuth=function(ea){return 0===ea?this.meridian:this.direction};return P}(),la=function(){function P(ea){this.m_angle=
ea}P.createFromAngleAndDirection=function(ea,ra){return new P(new ta(P.convertDirectionFormat(ea.extract_angular_units(2),ra,1)))};P.prototype.getAngle=function(ea){var ra=this.m_angle.extract_angular_units(2);switch(ea){case 1:case 4:case 2:return ea=new ta(P.convertDirectionFormat(ra,1,ea));case 3:return ea=P.seconds_north_azimuth_to_quadrant(ra),ea=new ta(ea.angle)}};P.prototype.getMeridian=function(ea){var ra=this.m_angle.extract_angular_units(2);switch(ea){case 1:return 0;case 4:return 2;case 2:return 1;
case 3:return P.seconds_north_azimuth_to_quadrant(ra).meridian}};P.prototype.getDirection=function(ea){var ra=this.m_angle.extract_angular_units(2);switch(ea){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return P.seconds_north_azimuth_to_quadrant(ra).direction}};P.seconds_north_azimuth_to_quadrant=function(ea){var ra=324E3>=ea||972E3<=ea?0:2;return new ca(ra,0===ra?Math.min(1296E3-ea,ea):Math.abs(ea-648E3),648E3<ea?3:1)};P.createFromAngleMeridianAndDirection=function(ea,ra,M){return new P(new ta(P.secondsQuadrantToNorthAzimuth(ea.extract_angular_units(2),
ra,M)))};P.secondsQuadrantToNorthAzimuth=function(ea,ra,M){return 0===ra?1===M?ea:1296E3-ea:1===M?648E3-ea:648E3+ea};P.convertDirectionFormat=function(ea,ra,M){var Z=0;switch(ra){case 1:Z=ea;break;case 2:Z=324E3-ea;break;case 3:throw Error("Unnexpected evaluation");case 4:Z=ea+648E3}ea=0;switch(M){case 1:ea=Z;break;case 2:ea=324E3-Z;break;case 3:throw Error("Unnexpected evaluation");case 4:ea=Z-648E3}ea%=1296E3;return 0>ea?1296E3+ea:ea};return P}(),ta=function(){function P(ea){this.m_seconds=ea}P.createFromAngleAndUnits=
function(ea,ra){return new P(n(ea,ra,2))};P.prototype.extract_angular_units=function(ea){return n(this.m_seconds,2,m(ea))};P.createFromDegreesMinutesSeconds=function(ea,ra,M){return new P(u.preciseAdd(u.preciseAdd(u.preciseMultiply(ea,3600),u.preciseMultiply(ra,60)),M))};return P}(),za=function(){function P(ea,ra,M,Z){this.m_view=ea;this.m_angle=ra;this.m_merdian=M;this.m_direction=Z;this.m_formatted_dms=this.m_dms=null}P.createFromStringAndBearing=function(ea,ra,M){return new P(ea,ra.getAngle(M),
ra.getMeridian(M),ra.getDirection(M))};P.prototype.fetch_angle=function(){return this.m_angle};P.prototype.fetch_meridian=function(){return this.m_merdian};P.prototype.fetch_direction=function(){return this.m_direction};P.prototype.fetch_m_view=function(){return this.m_view};P.prototype.fetch_dms=function(){null===this.m_dms&&this.calculate_dms();return this.m_dms};P.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};P.prototype.calculate_dms=
function(){var ea=null,ra=6,M=0;for(ea=0;ea<this.m_view.length;ea++){var Z=this.m_view[ea];switch(Z){case "m":ea=y(this.m_view,ea,Z);ra=6===ra?7:ra;ea=ea.newpos;continue;case "s":ea=y(this.m_view,ea,Z),ra=8,M=M<ea.rounding?ea.rounding:M,ea=ea.newpos}}this.m_dms=ma.seconds_to_DMS(this.m_angle.extract_angular_units(2));this.m_formatted_dms=ma.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(ra,M)};return P}();u.convertDirection=function(P,ea,ra){if(!(ea instanceof B))throw Error("Invalid Parameter");
if(!1===ea.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ea.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var M=f(p(ea.field("directiontype")));ea=t(p(ea.field("angletype")));if(A.isNumber(P)){P=A.toNumber(P);if(3===M)throw Error("Conversion error");3===ea?(P=ma.number_to_dms(P),ea=la.createFromAngleAndDirection(ta.createFromDegreesMinutesSeconds(P.m_degrees,P.m_minutes,P.m_seconds),M)):ea=la.createFromAngleAndDirection(ta.createFromAngleAndUnits(P,
m(ea)),M)}else if(A.isString(P))ea=C(w(P),ea,M);else if(A.isArray(P))ea=C(P,ea,M);else if(A.isImmutableArray(P))ea=C(P.toArray(),ea,M);else throw Error("Conversion Error");if(!(ra instanceof B))throw Error("Invalid Parameter");if(!1===ra.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ra.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");M=f(p(ra.field("directiontype")));P=ra.hasField("angleType")?t(p(ra.field("angletype"))):
null;var Z=p(ra.field("outputType")).toUpperCase().trim();if(!M||!Z)throw Error("Conversion error");if(!(P||"TEXT"===Z&&ra.hasField("format")))throw Error("Invalid unit");switch(Z){case "VALUE":if(3===M||3===P)return ra=ea,ea=ra.getAngle(M),3===M&&3===P?(P=ma.seconds_to_DMS(ea.extract_angular_units(2)),M=[d(ra.getMeridian(M),"SHORT"),P.m_degrees,P.m_minutes,P.m_seconds,d(ra.getDirection(M),"SHORT")]):3===P?(P=ma.seconds_to_DMS(ea.extract_angular_units(2)),M=[P.m_degrees,P.m_minutes,P.m_seconds]):
M=3===M?[d(ra.getMeridian(M),"SHORT"),ea.extract_angular_units(P),d(ra.getDirection(M),"SHORT")]:[ea.extract_angular_units(P)],M;ra=ea;if((ea=m(P))&&3!==P)M=ra.getAngle(M).extract_angular_units(ea);else throw Error("Conversion Error");return M;case "TEXT":Z="";ra.hasField("format")&&(Z=A.toString(ra.field("format")));if(null===Z||""===Z){ra="";switch(P){case 1:ra=3===M?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ra=3===M?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:ra="R.RR";break;case 5:ra=
"GGG.GG"+L;break;default:throw Error("Conversion error");}3===M&&(ra="p "+ra+" b");Z=ra}ra=ea;P=Z;var ka="",qa=null,ua=null;ea=za.createFromStringAndBearing(P,ra,M);Z={D:1,d:6,m:7,s:8,R:4,G:5};for(ua=0;ua<P.length;ua++){var Aa=P[ua];switch(Aa){case "[":qa=P;Aa={escaped:"",newpos:ua};for(ua++;ua<qa.length;){var ya=qa[ua];ua++;if("]"===ya)break;Aa.escaped+=ya}Aa.newpos=ua-1;qa=Aa;ka+=qa.escaped;ua=qa.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":qa=y(P,ua,Aa);ua=ra.getAngle(M);
a:{Aa=Z[Aa];ya=qa.padding;var G=qa.rounding,I=ea,R=null;switch(Aa){case 1:case 4:case 5:R=a(l(ua.extract_angular_units(Aa),G),b(Aa));ua=c(R.toFixed(G),"0",ya+G+(0<G?1:0));break a;case 6:case 7:R=a(I.fetch_formatted_dms().get_field(Aa),b(Aa));ua=c(R.toFixed(G),"0",ya+G+(0<G?1:0));break a;case 8:R=a(l(I.fetch_dms().get_field(Aa),G),b(Aa));ua=c(R.toFixed(G),"0",ya+G+(0<G?1:0));break a;default:throw Error("Unnexepected evaluation");}}ka+=ua;ua=qa.newpos;continue;case "P":case "p":ka+=d(ea.fetch_meridian(),
"p"===Aa?"SHORT":"LONG");continue;case "B":case "b":ka+=d(ea.fetch_direction(),"b"===Aa?"SHORT":"LONG");continue;default:ka+=Aa}}return ka;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(e,u){function B(A){for(var p=[],l=0,k=A.length;l<k;l++){var g=A.charCodeAt(l);128>g?p.push(g):2048>g?p.push(192|g>>6,128|g&63):55296>g||57344<=g?p.push(224|g>>12,128|g>>6&63,128|g&63):(l++,g=65536+((g&1023)<<10|A.charCodeAt(l)&1023),p.push(240|
g>>18,128|g>>12&63,128|g>>6&63,128|g&63))}return new Uint8Array(p)}Object.defineProperty(u,"__esModule",{value:!0});u.XXH=void 0;e=function(){function A(p){this.seed=p;this.totallen=0;this.bufs=[];this.init()}A.prototype.init=function(){this.bufs=[];this.totallen=0;return this};A.prototype.updateFloatArray=function(p){for(var l=[],k=0;k<p.length;k++){var g=p[k];isNaN(g)?l.push("NaN"):Infinity===g?l.push("Infinity"):-Infinity===g?l.push("-Infinity"):0===g?l.push("0"):l.push(g.toString(16))}this.update(B(l.join("")))};
A.prototype.updateIntArray=function(p){p=Int32Array.from(p);this.update(new Uint8Array(p.buffer))};A.prototype.updateUint8Array=function(p){this.update(Uint8Array.from(p))};A.prototype.updateWithString=function(p){return this.update(B(p))};A.prototype.update=function(p){this.bufs.push(p);this.totallen+=p.length;return this};A.prototype.digest=function(){for(var p=new Uint8Array(this.totallen),l=0,k=0,g=this.bufs;k<g.length;k++){var d=g[k];p.set(d,l);l+=d.length}this.init();return this.xxHash32(p,
this.seed)};A.prototype.xxHash32=function(p,l){void 0===l&&(l=0);var k=l+374761393&4294967295,g=0;if(16<=p.length){k=[l+2654435761+2246822519&4294967295,l+2246822519&4294967295,l+0&4294967295,l-2654435761&4294967295];var d=p.length-16;for(g=l=0;(g&4294967280)<=d;g+=4){var c=g,a=p[c+0]+(p[c+1]<<8);c=p[c+2]+(p[c+3]<<8);a=k[l]+(2246822519*a+(2246822519*c<<16))&4294967295;a=a<<13|a>>>19;k[l]=2654435761*(a&65535)+(2654435761*(a>>>16)<<16)&4294967295;l=l+1&3}k=(k[0]<<1|k[0]>>>31)+(k[1]<<7|k[1]>>>25)+(k[2]<<
12|k[2]>>>20)+(k[3]<<18|k[3]>>>14)&4294967295}k=k+p.length&4294967295;for(l=p.length-4;g<=l;g+=4)c=g,a=p[c+0]+(p[c+1]<<8),c=p[c+2]+(p[c+3]<<8),k=k+(3266489917*a+(3266489917*c<<16))&4294967295,k=k<<17|k>>>15,k=668265263*(k&65535)+(668265263*(k>>>16)<<16)&4294967295;for(;g<p.length;++g)l=p[g],k+=374761393*l,k=k<<11|k>>>21,k=2654435761*(k&65535)+(2654435761*(k>>>16)<<16)&4294967295;k^=k>>>15;k=(2246822519*(k&65535)&4294967295)+(2246822519*(k>>>16)<<16);k^=k>>>13;k=(3266489917*(k&65535)&4294967295)+(3266489917*
(k>>>16)<<16);k^=k>>>16;return 0>k?k+4294967296:k};return A}();u.XXH=e})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E){function z(G,I){for(var R=[],X=0;X<I.arguments.length;X++)R.push(F(G,I.arguments[X]));return R}function D(G,I,R){try{return R(G,I,z(G,I))}catch(X){throw X;}}function F(G,I){try{switch(I.type){case "EmptyStatement":return c.voidOperation;case "VariableDeclarator":var R=null===I.init?null:F(G,I.init);R===c.voidOperation&&(R=null);if("Identifier"!==I.id.type)throw Error("Can only assign a regular variable");var X=I.id.name.toLowerCase();null!==
G.localScope?G.localScope[X]={value:R,valueset:!0,node:I.init}:G.globalScope[X]={value:R,valueset:!0,node:I.init};return c.voidOperation;case "VariableDeclaration":for(var W=0;W<I.declarations.length;W++)F(G,I.declarations[W]);return c.voidOperation;case "BlockStatement":a:{var sa=c.voidOperation;for(W=0;W<I.body.length;W++)if(sa=F(G,I.body[W]),sa instanceof c.ReturnResult||sa===c.breakResult||sa===c.continueResult){var T=sa;break a}T=sa}return T;case "FunctionDeclaration":var S=I.id.name.toLowerCase();
G.globalScope[S]={valueset:!0,node:null,value:new k(I,G)};return c.voidOperation;case "ReturnStatement":if(null===I.argument)var ia=new c.ReturnResult(c.voidOperation);else{var na=F(G,I.argument);ia=new c.ReturnResult(na)}return ia;case "IfStatement":if("AssignmentExpression"===I.test.type||"UpdateExpression"===I.test.type)throw Error(a.nodeErrorMessage(I.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var va=F(G,I.test);if(!0===va)var Ba=F(G,I.consequent);else if(!1===va)Ba=null!==I.alternate?
F(G,I.alternate):c.voidOperation;else throw Error(a.nodeErrorMessage(I,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ba;case "ExpressionStatement":if("AssignmentExpression"===I.expression.type||"UpdateExpression"===I.expression.type)var Na=F(G,I.expression);else{var Va=F(G,I.expression);Na=Va===c.voidOperation?c.voidOperation:new c.ImplicitResult(Va)}return Na;case "AssignmentExpression":var Da=F(G,I.right);W=null;var K="";if("MemberExpression"===I.left.type){W=F(G,I.left.object);!0===I.left.computed?
K=F(G,I.left.property):"Identifier"===I.left.property.type&&(K=I.left.property.name);if(c.isArray(W))if(c.isNumber(K)){0>K&&(K=W.length+K);if(0>K||K>W.length)throw Error("Assignment outside of array bounds");if(K===W.length&&"\x3d"!==I.operator)throw Error("Invalid Parameter");W[K]=L(Da,I.operator,W[K],I)}else throw Error("Invalid Parameter");else if(W instanceof p){if(!1===c.isString(K))throw Error("Dictionary accessor must be a string");if(!0===W.hasField(K))W.setField(K,L(Da,I.operator,W.field(K),
I));else{if("\x3d"!==I.operator)throw Error("Invalid Parameter");W.setField(K,L(Da,I.operator,null,I))}}else if(W instanceof l){if(!1===c.isString(K))throw Error("Feature accessor must be a string");if(!0===W.hasField(K))W.setField(K,L(Da,I.operator,W.field(K),I));else{if("\x3d"!==I.operator)throw Error("Invalid Parameter");W.setField(K,L(Da,I.operator,null,I))}}else{if(c.isImmutableArray(W))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var V=c.voidOperation}else if(W=I.left.name.toLowerCase(),
null!==G.localScope&&void 0!==G.localScope[W])G.localScope[W]={value:L(Da,I.operator,G.localScope[W].value,I),valueset:!0,node:I.right},V=c.voidOperation;else if(void 0!==G.globalScope[W])G.globalScope[W]={value:L(Da,I.operator,G.globalScope[W].value,I),valueset:!0,node:I.right},V=c.voidOperation;else throw Error("Variable not recognised");return V;case "UpdateExpression":W=null;K="";if("MemberExpression"===I.argument.type){W=F(G,I.argument.object);!0===I.argument.computed?K=F(G,I.argument.property):
"Identifier"===I.argument.property.type&&(K=I.argument.property.name);if(c.isArray(W))if(c.isNumber(K)){0>K&&(K=W.length+K);if(0>K||K>=W.length)throw Error("Assignment outside of array bounds");var ha=c.toNumber(W[K]);W[K]="++"===I.operator?ha+1:ha-1}else throw Error("Invalid Parameter");else if(W instanceof p){if(!1===c.isString(K))throw Error("Dictionary accessor must be a string");if(!0===W.hasField(K))ha=c.toNumber(W.field(K)),W.setField(K,"++"===I.operator?ha+1:ha-1);else throw Error("Invalid Parameter");
}else if(W instanceof l){if(!1===c.isString(K))throw Error("Feature accessor must be a string");if(!0===W.hasField(K))ha=c.toNumber(W.field(K)),W.setField(K,"++"===I.operator?ha+1:ha-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(W))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var N=!1===I.prefix?ha:"++"===I.operator?ha+1:ha-1}else{W="Identifier"===I.argument.type?I.argument.name.toLowerCase():"";if(!W)throw Error("Invalid identifier");if(null!==G.localScope&&
void 0!==G.localScope[W])ha=c.toNumber(G.localScope[W].value),G.localScope[W]={value:"++"===I.operator?ha+1:ha-1,valueset:!0,node:I},N=!1===I.prefix?ha:"++"===I.operator?ha+1:ha-1;else if(void 0!==G.globalScope[W])ha=c.toNumber(G.globalScope[W].value),G.globalScope[W]={value:"++"===I.operator?ha+1:ha-1,valueset:!0,node:I},N=!1===I.prefix?ha:"++"===I.operator?ha+1:ha-1;else throw Error("Variable not recognised");}return N;case "BreakStatement":return c.breakResult;case "ContinueStatement":return c.continueResult;
case "TemplateElement":return I.value?I.value.cooked:"";case "TemplateLiteral":var aa="",ja=0;V=0;for(W=I.quasis;V<W.length;V++)if(K=W[V],aa+=K.value?K.value.cooked:"",!1===K.tail){var pa=I.expressions[ja]?c.toString(F(G,I.expressions[ja])):"";aa+=pa;ja++}return aa;case "ForStatement":null!==I.init&&F(G,I.init);ja={testResult:!0,lastAction:c.voidOperation};do b:{W=G;K=I;pa=ja;if(null!==K.test){pa.testResult=F(W,K.test);if(!1===pa.testResult)break b;if(!0!==pa.testResult)throw Error(a.nodeErrorMessage(K,
"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}pa.lastAction=F(W,K.body);pa.lastAction===c.breakResult?pa.testResult=!1:pa.lastAction instanceof c.ReturnResult?pa.testResult=!1:null!==K.update&&F(W,K.update)}while(!0===ja.testResult);aa=ja.lastAction instanceof c.ReturnResult?ja.lastAction:c.voidOperation;return aa;case "ForInStatement":return J(G,I);case "Identifier":return ca(G,I);case "MemberExpression":return ba(G,I);case "Literal":return I.value;case "CallExpression":return la(G,I);case "UnaryExpression":return fa(G,
I);case "BinaryExpression":return Y(G,I);case "LogicalExpression":return ma(G,I);case "ConditionalExpression":throw Error(a.nodeErrorMessage(I,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(W=[],K=0;K<I.elements.length;K++){var wa=F(G,I.elements[K]);if(c.isFunctionParameter(wa))throw Error(a.nodeErrorMessage(I,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));wa===c.voidOperation?W.push(null):W.push(wa)}}catch(Qa){throw Qa;}return W;case "ObjectExpression":W={};for(K=0;K<I.properties.length;K++){var Ja=
F(G,I.properties[K]);if(c.isFunctionParameter(Ja.value))throw Error("Illegal Argument");if(!1===c.isString(Ja.key))throw Error("Illegal Argument");W[Ja.key.toString()]=Ja.value===c.voidOperation?null:Ja.value}var Ea=new p(W);Ea.immutable=!1;return Ea;case "Property":return{key:"Identifier"===I.key.type?I.key.name:F(G,I.key),value:F(G,I.value)};default:throw Error(a.nodeErrorMessage(I,"RUNTIME","UNREOGNISED"));}}catch(Qa){throw Qa;}}function J(G,I){var R=F(G,I.right);"VariableDeclaration"===I.left.type&&
F(G,I.left);var X=null,W="";if("VariableDeclaration"===I.left.type){var sa=I.left.declarations[0].id;"Identifier"===sa.type&&(W=sa.name)}else"Identifier"===I.left.type&&(W=I.left.name);if(!W)throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDVARIABLE"));W=W.toLowerCase();null!==G.localScope&&void 0!==G.localScope[W]&&(X=G.localScope[W]);null===X&&void 0!==G.globalScope[W]&&(X=G.globalScope[W]);if(null===X)throw Error(a.nodeErrorMessage(I,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(R)||c.isString(R)){R=
R.length;for(sa=0;sa<R;sa++){X.value=sa;W=F(G,I.body);if(W===c.breakResult)break;if(W instanceof c.ReturnResult)return W}return c.voidOperation}if(c.isImmutableArray(R)){for(sa=0;sa<R.length();sa++){X.value=sa;W=F(G,I.body);if(W===c.breakResult)break;if(W instanceof c.ReturnResult)return W}return c.voidOperation}if(R instanceof p||R instanceof l)for(R=R.keys(),sa=0;sa<R.length;sa++){X.value=R[sa];W=F(G,I.body);if(W===c.breakResult)break;if(W instanceof c.ReturnResult)return W}else return c.voidOperation}
function L(G,I,R,X){switch(I){case "\x3d":return G===c.voidOperation?null:G;case "/\x3d":return c.toNumber(R)/c.toNumber(G);case "*\x3d":return c.toNumber(R)*c.toNumber(G);case "-\x3d":return c.toNumber(R)-c.toNumber(G);case "+\x3d":return c.isString(R)||c.isString(G)?c.toString(R)+c.toString(G):c.toNumber(R)+c.toNumber(G);case "%\x3d":return c.toNumber(R)%c.toNumber(G);default:throw Error(a.nodeErrorMessage(X,"RUNTIME","OPERATORNOTRECOGNISED"));}}function Q(G,I,R){I=I.toLowerCase();switch(I){case "hasz":return G=
G.hasZ,void 0===G?!1:G;case "hasm":return G=G.hasM,void 0===G?!1:G;case "spatialreference":return I=G.spatialReference._arcadeCacheId,void 0===I&&(R=!0,Object.freeze&&Object.isFrozen(G.spatialReference)&&(R=!1),R&&(qa++,I=G.spatialReference._arcadeCacheId=qa)),G=new p({wkt:G.spatialReference.wkt,wkid:G.spatialReference.wkid}),void 0!==I&&(G._arcadeCacheId="SPREF"+I.toString()),G}switch(G.type){case "extent":switch(I){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return G=
G[I],void 0!==G?G:null;case "type":return"Extent"}break;case "polygon":switch(I){case "rings":return I=G.getCacheValue("_arcadeCacheId"),void 0===I&&(qa++,I=qa,G.setCacheValue("_arcadeCacheId",I)),G=new g(G.rings,G.spatialReference,!0===G.hasZ,!0===G.hasM,I);case "type":return"Polygon"}break;case "point":switch(I){case "x":case "y":case "z":case "m":return void 0!==G[I]?G[I]:null;case "type":return"Point"}break;case "polyline":switch(I){case "paths":return I=G.getCacheValue("_arcadeCacheId"),void 0===
I&&(qa++,I=qa,G.setCacheValue("_arcadeCacheId",I)),G=new g(G.paths,G.spatialReference,!0===G.hasZ,!0===G.hasM,I);case "type":return"Polyline"}break;case "multipoint":switch(I){case "points":return I=G.getCacheValue("_arcadeCacheId"),void 0===I&&(qa++,I=qa,G.setCacheValue("_arcadeCacheId",I)),G=new d(G.points,G.spatialReference,!0===G.hasZ,!0===G.hasM,I,1);case "type":return"Multipoint"}}throw Error(a.nodeErrorMessage(R,"RUNTIME","PROPERTYNOTFOUND"));}function ba(G,I){try{var R=F(G,I.object);if(null===
R)throw Error(a.nodeErrorMessage(I,"RUNTIME","NOTFOUND"));if(!1===I.computed){if("Identifier"===I.property.type){if(R instanceof p||R instanceof l)return R.field(I.property.name);if(R instanceof C)return Q(R,I.property.name,I)}throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDTYPE"));}var X=F(G,I.property);if(R instanceof p||R instanceof l){if(c.isString(X))return R.field(X);throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDTYPE"));}if(R instanceof C){if(c.isString(X))return Q(R,X,I);throw Error(a.nodeErrorMessage(I,
"RUNTIME","INVALIDTYPE"));}if(c.isArray(R)){if(c.isNumber(X)&&isFinite(X)&&Math.floor(X)===X){0>X&&(X=R.length+X);if(X>=R.length||0>X)throw Error(a.nodeErrorMessage(I,"RUNTIME","OUTOFBOUNDS"));return R[X]}throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDTYPE"));}if(c.isString(R)){if(c.isNumber(X)&&isFinite(X)&&Math.floor(X)===X){0>X&&(X=R.length+X);if(X>=R.length||0>X)throw Error(a.nodeErrorMessage(I,"RUNTIME","OUTOFBOUNDS"));return R[X]}throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDTYPE"));
}if(c.isImmutableArray(R)&&c.isNumber(X)&&isFinite(X)&&Math.floor(X)===X){0>X&&(X=R.length()+X);if(X>=R.length()||0>X)throw Error(a.nodeErrorMessage(I,"RUNTIME","OUTOFBOUNDS"));return R.get(X)}throw Error(a.nodeErrorMessage(I,"RUNTIME","INVALIDTYPE"));}catch(W){throw W;}}function fa(G,I){try{var R=F(G,I.argument);if(c.isBoolean(R)){if("!"===I.operator)return!R;if("-"===I.operator)return-1*c.toNumber(R);if("+"===I.operator)return 1*c.toNumber(R);if("~"===I.operator)return~c.toNumber(R);throw Error(a.nodeErrorMessage(I,
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===I.operator)return~c.toNumber(R);if("-"===I.operator)return-1*c.toNumber(R);if("+"===I.operator)return 1*c.toNumber(R);throw Error(a.nodeErrorMessage(I,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(X){throw X;}}function Y(G,I){try{var R=[F(G,I.left),F(G,I.right)],X=R[0],W=R[1];switch(I.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(X),c.toNumber(W),I.operator);case "\x3d\x3d":return c.equalityTest(X,
W);case "!\x3d":return!c.equalityTest(X,W);case "\x3c":return c.greaterThanLessThan(X,W,I.operator);case "\x3e":return c.greaterThanLessThan(X,W,I.operator);case "\x3c\x3d":return c.greaterThanLessThan(X,W,I.operator);case "\x3e\x3d":return c.greaterThanLessThan(X,W,I.operator);case "+":return c.isString(X)||c.isString(W)?c.toString(X)+c.toString(W):c.toNumber(X)+c.toNumber(W);case "-":return c.toNumber(X)-c.toNumber(W);case "*":return c.toNumber(X)*c.toNumber(W);case "/":return c.toNumber(X)/c.toNumber(W);
case "%":return c.toNumber(X)%c.toNumber(W);default:throw Error(a.nodeErrorMessage(I,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(sa){throw sa;}}function ma(G,I){try{if("AssignmentExpression"===I.left.type||"UpdateExpression"===I.left.type)throw Error(a.nodeErrorMessage(I.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===I.right.type||"UpdateExpression"===I.right.type)throw Error(a.nodeErrorMessage(I.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var R=F(G,I.left);
if(c.isBoolean(R))switch(I.operator){case "||":if(!0===R)return R;var X=F(G,I.right);if(c.isBoolean(X))return X;throw Error(a.nodeErrorMessage(I,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===R)return R;X=F(G,I.right);if(c.isBoolean(X))return X;throw Error(a.nodeErrorMessage(I,"RUNTIME","ONLYORORAND"));default:throw Error(a.nodeErrorMessage(I,"RUNTIME","ONLYORORAND"));}throw Error(a.nodeErrorMessage(I,"RUNTIME","ONLYBOOLEAN"));}catch(W){throw W;}}function ca(G,I){try{var R=I.name.toLowerCase();
if(null!==G.localScope&&void 0!==G.localScope[R]){var X=G.localScope[R];if(!0===X.valueset)return X.value;X.value=F(G,X.node);X.valueset=!0;return X.value}if(void 0!==G.globalScope[R]){X=G.globalScope[R];if(!0===X.valueset)return X.value;X.value=F(G,X.node);X.valueset=!0;return X.value}throw Error(a.nodeErrorMessage(I,"RUNTIME","VARIABLENOTFOUND"));}catch(W){throw W;}}function la(G,I){try{if("Identifier"!==I.callee.type)throw Error(a.nodeErrorMessage(I,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==G.localScope&&
void 0!==G.localScope[I.callee.name.toLowerCase()]){var R=G.localScope[I.callee.name.toLowerCase()];if(R.value instanceof c.NativeFunction)return R.value.fn(G,I);if(R.value instanceof k)return M(G,I,R.value.definition);throw Error(a.nodeErrorMessage(I,"RUNTIME","NOTAFUNCTION"));}if(void 0!==G.globalScope[I.callee.name.toLowerCase()]){R=G.globalScope[I.callee.name.toLowerCase()];if(R.value instanceof c.NativeFunction)return R.value.fn(G,I);if(R.value instanceof k)return M(G,I,R.value.definition);throw Error(a.nodeErrorMessage(I,
"RUNTIME","NOTAFUNCTION"));}throw Error(a.nodeErrorMessage(I,"RUNTIME","NOTFOUND"));}catch(X){throw X;}}function ta(G){return null==G?"":c.isArray(G)||c.isImmutableArray(G)?"Array":c.isDate(G)?"Date":c.isString(G)?"String":c.isBoolean(G)?"Boolean":c.isNumber(G)?"Number":G instanceof A?"Attachment":G instanceof B?"Portal":G instanceof p?"Dictionary":G instanceof l?"Feature":G instanceof y?"Point":G instanceof q?"Polygon":G instanceof x?"Polyline":G instanceof w?"Multipoint":G instanceof r?"Extent":
c.isFunctionParameter(G)?"Function":c.isFeatureSet(G)?"FeatureSet":c.isFeatureSetCollection(G)?"FeatureSetCollection":G===c.voidOperation?"":"number"===typeof G&&isNaN(G)?"Number":"Unrecognised Type"}function za(G,I,R,X){try{var W=F(G,I.arguments[R]);if(c.equalityTest(W,X))return F(G,I.arguments[R+1]);var sa=I.arguments.length-R;return 1===sa?F(G,I.arguments[R]):2===sa?null:3===sa?F(G,I.arguments[R+2]):za(G,I,R+2,X)}catch(T){throw T;}}function P(G,I,R,X){try{if(!0===X)return F(G,I.arguments[R+1]);
if(3===I.arguments.length-R)return F(G,I.arguments[R+2]);var W=F(G,I.arguments[R+2]);if(!1===c.isBoolean(W))throw Error("WHEN needs boolean test conditions");return P(G,I,R+2,W)}catch(sa){throw sa;}}function ea(G,I){var R=G.length,X=Math.floor(R/2);if(0===R)return[];if(1===R)return[G[0]];var W=ea(G.slice(0,X),I);G=ea(G.slice(X,R),I);for(R=[];0<W.length||0<G.length;)0<W.length&&0<G.length?(X=I(W[0],G[0]),isNaN(X)&&(X=0),0>=X?(R.push(W[0]),W=W.slice(1)):(R.push(G[0]),G=G.slice(1))):0<W.length?(R.push(W[0]),
W=W.slice(1)):0<G.length&&(R.push(G[0]),G=G.slice(1));return R}function ra(G,I,R){try{var X=G.body;if(R.length!==G.params.length)throw Error("Invalid Parameter calls to function.");for(var W=0;W<R.length;W++)I.localScope[G.params[W].name.toLowerCase()]={value:R[W],valueset:!0,node:null};var sa=F(I,X);if(sa instanceof c.ReturnResult)return sa.value;if(sa===c.breakResult)throw Error("Cannot Break from a Function");if(sa===c.continueResult)throw Error("Cannot Continue from a Function");return sa instanceof
c.ImplicitResult?sa.value:sa}catch(T){throw T;}}function M(G,I,R){return D(G,I,function(X,W,sa){X={spatialReference:G.spatialReference,globalScope:G.globalScope,depthCounter:G.depthCounter+1,console:G.console,lrucache:G.lrucache,interceptor:G.interceptor,localScope:{}};if(64<X.depthCounter)throw Error("Exceeded maximum function depth");return ra(R,X,sa)})}function Z(G){return function(){var I={spatialReference:G.context.spatialReference,console:G.context.console,lrucache:G.context.lrucache,interceptor:G.context.interceptor,
localScope:{},depthCounter:G.context.depthCounter+1,globalScope:G.context.globalScope};if(64<I.depthCounter)throw Error("Exceeded maximum function depth");return ra(G.definition,I,arguments)}}function ka(G){console.log(G)}Object.defineProperty(u,"__esModule",{value:!0});u.findFunctionCalls=u.referencesFunction=u.referencesMember=u.validateScript=u.extractFieldLiterals=u.executeScript=u.extend=u.functionHelper=void 0;var qa=0,ua={};b.registerFunctions(ua,D);f.registerFunctions(ua,D);v.registerFunctions(ua,
D);m.registerFunctions(ua,D);t.registerFunctions(ua,D);h.registerFunctions(ua,D);n.registerFunctions(ua,D);ua["typeof"]=function(G,I){return D(G,I,function(R,X,W){c.pcCheck(W,1,1);R=ta(W[0]);if("Unrecognised Type"===R)throw Error("Unrecognised Type");return R})};ua.iif=function(G,I){try{c.pcCheck(null===I.arguments?[]:I.arguments,3,3);var R=F(G,I.arguments[0]);if(!1===c.isBoolean(R))throw Error("IF Function must have a boolean test condition");var X=F(G,I.arguments[1]),W=F(G,I.arguments[2]);return!0===
R?X:W}catch(sa){throw sa;}};ua.decode=function(G,I){try{if(2>I.arguments.length)throw Error("Missing Parameters");if(2===I.arguments.length)return F(G,I.arguments[1]);if(0===(I.arguments.length-1)%2)throw Error("Must have a default value result.");var R=F(G,I.arguments[0]);return za(G,I,1,R)}catch(X){throw X;}};ua.when=function(G,I){try{if(3>I.arguments.length)throw Error("Missing Parameters");if(0===I.arguments.length%2)throw Error("Must have a default value result.");var R=F(G,I.arguments[0]);if(!1===
c.isBoolean(R))throw Error("WHEN needs boolean test conditions");return P(G,I,0,R)}catch(X){throw X;}};ua.top=function(G,I){return D(G,I,function(R,X,W){c.pcCheck(W,2,2);if(c.isArray(W[0]))return c.toNumber(W[1])>=W[0].length?W[0].slice(0):W[0].slice(0,c.toNumber(W[1]));if(c.isImmutableArray(W[0]))return c.toNumber(W[1])>=W[0].length()?W[0].slice(0):W[0].slice(0,c.toNumber(W[1]));throw Error("Top cannot accept this parameter type");})};ua.first=function(G,I){return D(G,I,function(R,X,W){c.pcCheck(W,
1,1);return c.isArray(W[0])?0===W[0].length?null:W[0][0]:c.isImmutableArray(W[0])?0===W[0].length()?null:W[0].get(0):null})};ua.sort=function(G,I){return D(G,I,function(R,X,W){c.pcCheck(W,1,2);R=W[0];c.isImmutableArray(R)&&(R=R.toArray());if(!1===c.isArray(R))throw Error("Illegal Argument");if(1<W.length){if(!1===c.isFunctionParameter(W[1]))throw Error("Illegal Argument");var sa=Z(W[1]);return R=ea(R,function(ia,na){return sa(ia,na)})}if(0===R.length)return[];W={};for(X=0;X<R.length;X++){var T=ta(R[X]);
""!==T&&(W[T]=!0)}if(!0===W.Array||!0===W.Dictionary||!0===W.Feature||!0===W.Point||!0===W.Polygon||!0===W.Polyline||!0===W.Multipoint||!0===W.Extent||!0===W.Function)return R.slice(0);X=0;T="";for(var S in W)X++,T=S;return R=1<X||"String"===T?ea(R,function(ia,na){if(null===ia||void 0===ia||ia===c.voidOperation)return null===na||void 0===na||na===c.voidOperation?0:1;if(null===na||void 0===na||na===c.voidOperation)return-1;ia=c.toString(ia);na=c.toString(na);return ia<na?-1:ia===na?0:1}):"Number"===
T?ea(R,function(ia,na){return ia-na}):"Boolean"===T?ea(R,function(ia,na){return ia===na?0:na?-1:1}):"Date"===T?ea(R,function(ia,na){return na-ia}):R.slice(0)})};for(var Aa in ua)ua[Aa]={value:new c.NativeFunction(ua[Aa]),valueset:!0,node:null};var ya=function(){};ya.prototype=ua;ya.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ya.prototype.pi={value:Math.PI,valueset:!0,node:null};u.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:z,standardFunction:D};
u.extend=function(G){for(var I={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:D,evaluateIdentifier:ca,arcadeCustomFunctionHandler:Z},R=0;R<G.length;R++)G[R].registerFunctions(I);for(var X in I.functions)ua[X]={value:new c.NativeFunction(I.functions[X]),valueset:!0,node:null},ya.prototype[X]=ua[X];for(R=0;R<I.signatures.length;R++)a.addFunctionDeclaration(I.signatures[R],"async")};u.executeScript=function(G,I){var R=I.spatialReference;if(null===R||void 0===R)R=new E({wkid:102100});
var X=I.vars,W=I.customfunctions,sa=new ya;X||(X={});W||(W={});var T=new p({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});T.immutable=!1;sa.textformatting={value:T,valueset:!0,node:null};for(var S in W)sa[S]={value:new c.NativeFunction(W[S]),native:!0,valueset:!0,node:null};for(S in X)sa[S]=X[S]&&"esri.Graphic"===X[S].declaredClass?{value:l.createFromGraphic(X[S]),valueset:!0,node:null}:{value:X[S],valueset:!0,node:null};G=F({spatialReference:R,globalScope:sa,
localScope:null,console:I.console?I.console:ka,lrucache:I.lrucache,interceptor:I.interceptor,depthCounter:1},G.body[0].body);G instanceof c.ReturnResult&&(G=G.value);G instanceof c.ImplicitResult&&(G=G.value);G===c.voidOperation&&(G=null);if(G===c.breakResult)throw Error("Cannot return BREAK");if(G===c.continueResult)throw Error("Cannot return CONTINUE");if(G instanceof k)throw Error("Cannot return FUNCTION");if(G instanceof c.NativeFunction)throw Error("Cannot return FUNCTION");return G};u.extractFieldLiterals=
function(G,I){void 0===I&&(I=!1);return a.findFieldLiterals(G)};u.validateScript=function(G,I){return a.validateScript(G,I,"simple")};u.referencesMember=function(G,I){return a.referencesMember(G,I)};u.referencesFunction=function(G,I){return a.referencesFunction(G,I)};u.findFunctionCalls=function(G){return a.findFunctionCalls(G)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(e,u,B,A){Object.defineProperty(u,"__esModule",{value:!0});u.referencesFunction=
u.referencesMember=u.validateScript=u.extractFieldLiterals=u.scriptCheck=u.parseScript=void 0;u.parseScript=function(p,l){void 0===l&&(l=[]);p=A.parse("function _() { "+p+"\n}");if(null===p.body||void 0===p.body)throw Error("No formula provided.");if(0===p.body.length)throw Error("No formula provided.");if(0===p.body.length)throw Error("No formula provided.");if("BlockStatement"!==p.body[0].body.type)throw Error("Invalid formula content.");var k=B.validateLanguage(p);if(""!==k)throw Error(k);B.findScriptDependencies(p,
l);return p};u.scriptCheck=function(p,l,k,g,d){var c=[];p="function _() { \n"+p+"\n}";try{var a=A.parse(p,{tolerant:!0,loc:!0,range:!0}),b=a.errors;if(0<b.length)for(var f=0;f<b.length;f++)c.push({line:b[f].lineNumber-2,character:b[f].column,reason:b[f].description});var t=B.checkScript(a,l,k,g,d);for(l=0;l<t.length;l++)t[l].line-=2,t[l].range&&(t[l].range=[t[l][0]-15,t[l][1]-15]),t[l].loc&&(t[l].loc.start.line-=2,t[l].loc.end.line-=2),c.push(t[l])}catch(m){try{if("Unexpected token }"===m.description){var n=
p.split("\n").length;m.lineNumber===n?(m.index=p.length-1,c.push({line:m.lineNumber-4,character:m.column,reason:"Unexpected end of script"})):(m.index=p.length-1,c.push({line:m.lineNumber-2,character:m.column,reason:"Unexpected end of script"}))}else c.push({line:m.lineNumber-2,character:m.column,reason:m.description})}catch(h){}}return c};u.extractFieldLiterals=function(p,l){void 0===l&&(l=!1);return B.findFieldLiterals(p)};u.validateScript=function(p,l,k){return B.validateScript(p,l,k)};u.referencesMember=
function(p,l){return B.referencesMember(p,l)};u.referencesFunction=function(p,l){return B.referencesFunction(p,l)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),function(e,u,B,A,p,l){function k(g,d,c){var a=null,b=function(m,h){c&&c(m,h);a&&a.visit(m,h)},f="function"===typeof c?b:null,t=!1;if(d){t="boolean"===typeof d.comment&&d.comment;var n="boolean"===typeof d.attachComment&&d.attachComment;if(t||n)a=new B.CommentHandler,
a.attach=n,d.comment=!0,f=b}g=new A.Parser(g,d,f);d=g.parseScript();t&&a&&(d.comments=a.comments);g.config.tokens&&(d.tokens=g.tokens);g.config.tolerant&&(d.errors=g.errorHandler.errors);return d}Object.defineProperty(u,"__esModule",{value:!0});u.version=u.tokenize=u.parseScript=u.parse=void 0;u.parse=k;u.parseScript=function(g,d,c){d=d||{};d.sourceType="script";return k(g,d,c)};u.tokenize=function(g,d,c){g=new p.Tokenizer(g,d);d=[];try{for(;;){var a=g.getNextToken();if(!a)break;c&&(a=c(a));d.push(a)}}catch(b){g.errorHandler.tolerate(b)}g.errorHandler.tolerant&&
(d.errors=g.errors());return d};Object.defineProperty(u,"Syntax",{enumerable:!0,get:function(){return l.Syntax}});u.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(e,u,B){Object.defineProperty(u,"__esModule",{value:!0});u.CommentHandler=void 0;e=function(){function A(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}A.prototype.insertInnerComments=function(p,l){if(p.type===B.Syntax.BlockStatement&&
0===p.body.length){for(var k=[],g=this.leading.length-1;0<=g;--g){var d=this.leading[g];l.end.offset>=d.start&&(k.unshift(d.comment),this.leading.splice(g,1),this.trailing.splice(g,1))}k.length&&(p.innerComments=k)}};A.prototype.findTrailingComments=function(p){var l=[];if(0<this.trailing.length){for(var k=this.trailing.length-1;0<=k;--k){var g=this.trailing[k];g.start>=p.end.offset&&l.unshift(g.comment)}this.trailing.length=0;return l}(k=this.stack[this.stack.length-1])&&k.node.trailingComments&&
(g=k.node.trailingComments[0])&&g.range[0]>=p.end.offset&&(l=k.node.trailingComments,delete k.node.trailingComments);return l};A.prototype.findLeadingComments=function(p){for(var l=[],k;0<this.stack.length;){var g=this.stack[this.stack.length-1];if(g&&g.start>=p.start.offset)k=g.node,this.stack.pop();else break}if(k){for(var d=(k.leadingComments?k.leadingComments.length:0)-1;0<=d;--d)g=k.leadingComments[d],g.range[1]<=p.start.offset&&(l.unshift(g),k.leadingComments.splice(d,1));k.leadingComments&&
0===k.leadingComments.length&&delete k.leadingComments;return l}for(d=this.leading.length-1;0<=d;--d)g=this.leading[d],g.start<=p.start.offset&&(l.unshift(g.comment),this.leading.splice(d,1));return l};A.prototype.visitNode=function(p,l){if(!(p.type===B.Syntax.Program&&0<p.body.length)){this.insertInnerComments(p,l);var k=this.findTrailingComments(l),g=this.findLeadingComments(l);0<g.length&&(p.leadingComments=g);0<k.length&&(p.trailingComments=k);this.stack.push({node:p,start:l.start.offset})}};
A.prototype.visitComment=function(p,l){var k="L"===p.type[0]?"Line":"Block",g={type:k,value:p.value};p.range&&(g.range=p.range);p.loc&&(g.loc=p.loc);this.comments.push(g);this.attach&&(l={comment:{type:k,value:p.value,range:[l.start.offset,l.end.offset]},start:l.start.offset},p.loc&&(l.comment.loc=p.loc),p.type=k,this.leading.push(l),this.trailing.push(l))};A.prototype.visit=function(p,l){"LineComment"===p.type?this.visitComment(p,l):"BlockComment"===p.type?this.visitComment(p,l):this.attach&&this.visitNode(p,
l)};return A}();u.CommentHandler=e})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.Syntax=void 0;u.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",
Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(e,
u,B,A,p,l,k,g,d){Object.defineProperty(u,"__esModule",{value:!0});u.Parser=void 0;e=function(){function c(a,b,f){void 0===b&&(b={});this.config={range:"boolean"===typeof b.range&&b.range,loc:"boolean"===typeof b.loc&&b.loc,source:null,tokens:"boolean"===typeof b.tokens&&b.tokens,comment:"boolean"===typeof b.comment&&b.comment,tolerant:"boolean"===typeof b.tolerant&&b.tolerant};this.config.loc&&b.source&&null!==b.source&&(this.config.source=String(b.source));this.delegate=f;this.errorHandler=new A.ErrorHandler;
this.errorHandler.tolerant=this.config.tolerant;this.scanner=new k.Scanner(a,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,
end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}
c.prototype.throwError=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];var t=b.slice();b=a.replace(/%(\d)/g,function(n,m){B.assert(m<t.length,"Message reference must be in range");return t[m]});throw this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,b);};c.prototype.tolerateError=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];var t=b.slice();b=a.replace(/%(\d)/g,function(n,m){B.assert(m<t.length,"Message reference must be in range");
return t[m]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,b)};c.prototype.unexpectedTokenError=function(a,b){var f=b||p.Messages.UnexpectedToken;a?(b||(f=2===a.type?p.Messages.UnexpectedEOS:3===a.type?p.Messages.UnexpectedIdentifier:6===a.type?p.Messages.UnexpectedNumber:8===a.type?p.Messages.UnexpectedString:10===a.type?p.Messages.UnexpectedTemplate:p.Messages.UnexpectedToken,4===a.type&&(this.scanner.isFutureReservedWord(a.value)?f=p.Messages.UnexpectedReserved:
this.context.strict&&this.scanner.isStrictModeReservedWord(a.value)&&(f=p.Messages.StrictReservedWord))),b=a.value):b="ILLEGAL";f=f.replace("%0",b);if(a&&"number"===typeof a.lineNumber){b=a.start;var t=a.lineNumber;a=a.start-(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(b,t,a,f)}b=this.lastMarker.index;t=this.lastMarker.line;a=this.lastMarker.column+1;return this.errorHandler.createError(b,t,a,f)};c.prototype.throwUnexpectedToken=function(a,b){throw this.unexpectedTokenError(a,
b);};c.prototype.tolerateUnexpectedToken=function(a,b){this.errorHandler.tolerate(this.unexpectedTokenError(a,b))};c.prototype.collectComments=function(){if(this.config.comment){var a=this.scanner.scanComments();if(0<a.length&&this.delegate)for(var b=0;b<a.length;++b){var f=a[b],t={type:f.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(f.slice[0],f.slice[1])};this.config.range&&(t.range=f.range);this.config.loc&&(t.loc=f.loc);this.delegate(t,{start:{line:f.loc.start.line,column:f.loc.start.column,
offset:f.range[0]},end:{line:f.loc.end.line,column:f.loc.end.column,offset:f.range[1]}})}}else this.scanner.scanComments()};c.prototype.getTokenRaw=function(a){return this.scanner.source.slice(a.start,a.end)};c.prototype.convertToken=function(a){var b={type:d.TokenName[a.type],value:this.getTokenRaw(a)};this.config.range&&(b.range=[a.start,a.end]);this.config.loc&&(b.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}});9===a.type&&(b.regex={pattern:a.pattern,flags:a.flags});return b};c.prototype.nextToken=function(){var a=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);
var b=this.scanner.lex();this.hasLineTerminator=a.lineNumber!==b.lineNumber;b&&this.context.strict&&3===b.type&&this.scanner.isStrictModeReservedWord(b.value)&&(b.type=4);this.lookahead=b;this.config.tokens&&2!==b.type&&this.tokens.push(this.convertToken(b));return a};c.prototype.nextRegexToken=function(){this.collectComments();var a=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(a)));this.lookahead=a;this.nextToken();return a};c.prototype.createNode=
function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};c.prototype.startNode=function(a,b){void 0===b&&(b=0);var f=a.start-a.lineStart,t=a.lineNumber;0>f&&(f+=b,t--);return{index:a.start,line:t,column:f}};c.prototype.finalize=function(a,b){this.config.range&&(b.range=[a.index,this.lastMarker.index]);this.config.loc&&(b.loc={start:{line:a.line,column:a.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(b.loc.source=
this.config.source));this.delegate&&this.delegate(b,{start:{line:a.line,column:a.column,offset:a.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return b};c.prototype.expect=function(a){var b=this.nextToken();7===b.type&&b.value===a||this.throwUnexpectedToken(b)};c.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var a=this.lookahead;7===a.type&&","===a.value?this.nextToken():7===a.type&&";"===a.value?(this.nextToken(),this.tolerateUnexpectedToken(a)):
this.tolerateUnexpectedToken(a,p.Messages.UnexpectedToken)}else this.expect(",")};c.prototype.expectKeyword=function(a){var b=this.nextToken();4===b.type&&b.value.toLowerCase()===a.toLowerCase()||this.throwUnexpectedToken(b)};c.prototype.match=function(a){return 7===this.lookahead.type&&this.lookahead.value===a};c.prototype.matchKeyword=function(a){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===a.toLowerCase()};c.prototype.matchContextualKeyword=function(a){return 3===this.lookahead.type&&
this.lookahead.value===a};c.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var a=this.lookahead.value;return"\x3d"===a||"*\x3d"===a||"**\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a};c.prototype.isolateCoverGrammar=function(a){var b=this.context.isBindingElement,f=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=
!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=b;this.context.isAssignmentTarget=f;this.context.firstCoverInitializedNameError=t;return a};c.prototype.inheritCoverGrammar=function(a){var b=this.context.isBindingElement,f=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;
this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);this.context.isBindingElement=this.context.isBindingElement&&b;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&f;this.context.firstCoverInitializedNameError=t||this.context.firstCoverInitializedNameError;return a};c.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||
this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};c.prototype.parsePrimaryExpression=function(){var a=this.createNode();switch(this.lookahead.type){case 3:a=this.finalize(a,new l.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,p.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;var b=this.nextToken();var f=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(b.value,f));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();f=this.getTokenRaw(b);a=this.finalize(a,new l.Literal("true"===b.value.toLowerCase(),f));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();f=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(null,f));break;case 10:a=this.parseTemplateLiteral();
break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;a=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":a=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":a=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:a=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;a=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());
break;default:a=this.throwUnexpectedToken(this.nextToken())}return a};c.prototype.parseArrayInitializer=function(){var a=this.createNode(),b=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),b.push(null)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(a,new l.ArrayExpression(b))};c.prototype.parsePropertyMethod=function(a){this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;var b=this.context.strict,f=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var t=this.isolateCoverGrammar(this.parseFunctionSourceElements);this.context.strict&&a.firstRestricted&&this.tolerateUnexpectedToken(a.firstRestricted,a.message);this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message);this.context.strict=b;this.context.allowStrictDirective=f;return t};c.prototype.parsePropertyMethodFunction=function(){var a=this.createNode(),b=this.parseFormalParameters(),
f=this.parsePropertyMethod(b);return this.finalize(a,new l.FunctionExpression(null,b.params,f,!1))};c.prototype.parseObjectPropertyKey=function(){var a=this.createNode(),b=this.nextToken();switch(b.type){case 8:case 6:this.context.strict&&b.octal&&this.tolerateUnexpectedToken(b,p.Messages.StrictOctalLiteral);var f=this.getTokenRaw(b);a=this.finalize(a,new l.Literal(b.value,f));break;case 3:case 1:case 5:case 4:a=this.finalize(a,new l.Identifier(b.value));break;case 7:"["===b.value?(a=this.isolateCoverGrammar(this.parseAssignmentExpression),
this.expect("]")):a=this.throwUnexpectedToken(b);break;default:a=this.throwUnexpectedToken(b)}return a};c.prototype.isPropertyKey=function(a,b){return a.type===g.Syntax.Identifier&&a.name===b||a.type===g.Syntax.Literal&&a.value===b};c.prototype.parseObjectProperty=function(a){var b=this.createNode(),f=this.lookahead,t=null,n=null,m=!1,h=!1,v=!1,r=!1;if(3===f.type){var C=f.value;this.nextToken();m=this.match("[");t=(r=!this.hasLineTerminator&&"async"===C&&!this.match(":")&&!this.match("(")&&!this.match("*")&&
!this.match(","))?this.parseObjectPropertyKey():this.finalize(b,new l.Identifier(C))}else this.match("*")?this.nextToken():(m=this.match("["),t=this.parseObjectPropertyKey());t||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!r?(!m&&this.isPropertyKey(t,"__proto__")&&(a.value&&this.tolerateError(p.Messages.DuplicateProtoProperty),a.value=!0),this.nextToken(),n=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(n=this.parsePropertyMethodFunction(),h=!0):3===f.type?
(C=this.finalize(b,new l.Identifier(f.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),v=!0,a=this.isolateCoverGrammar(this.parseAssignmentExpression),n=this.finalize(b,new l.AssignmentPattern(C,a))):(v=!0,n=C)):this.throwUnexpectedToken(this.nextToken());return this.finalize(b,new l.Property("init",t,m,n,h,v))};c.prototype.parseObjectInitializer=function(){var a=this.createNode();this.expect("{");for(var b=[],f={value:!1};!this.match("}");)b.push(this.parseObjectProperty(f)),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(a,new l.ObjectExpression(b))};c.prototype.parseTemplateHead=function(){B.assert(this.lookahead.head,"Template literal must start with a template head");var a=this.createNode(),b=this.nextToken();return this.finalize(a,new l.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};c.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var a=this.createNode(),b=this.nextToken();
return this.finalize(a,new l.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};c.prototype.parseTemplateLiteral=function(){var a=this.createNode(),b=[],f=[],t=this.parseTemplateHead();for(f.push(t);!t.tail;)b.push(this.parseExpression()),t=this.parseTemplateElement(),f.push(t);return this.finalize(a,new l.TemplateLiteral(f,b))};c.prototype.reinterpretExpressionAsPattern=function(a){switch(a.type){case g.Syntax.ArrayExpression:a.type=g.Syntax.ArrayPattern;for(var b=0;b<a.elements.length;b++)null!==
a.elements[b]&&this.reinterpretExpressionAsPattern(a.elements[b]);break;case g.Syntax.ObjectExpression:a.type=g.Syntax.ObjectPattern;for(b=0;b<a.properties.length;b++)this.reinterpretExpressionAsPattern(a.properties[b].value);break;case g.Syntax.AssignmentExpression:a.type=g.Syntax.AssignmentPattern,delete a.operator,this.reinterpretExpressionAsPattern(a.left)}};c.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");
var a={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var b=this.lookahead,f=!1;this.context.isBindingElement=!0;a=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var t=[];this.context.isAssignmentTarget=!1;for(t.push(a);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();for(f=0;f<t.length;f++)this.reinterpretExpressionAsPattern(t[f]);f=!0;a={type:"ArrowParameterPlaceHolder",params:t,async:!1}}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression));
if(f)break}f||(a=this.finalize(this.startNode(b),new l.SequenceExpression(t)))}if(!f){this.expect(")");if(this.match("\x3d\x3e")&&(a.type===g.Syntax.Identifier&&"yield"===a.name&&(f=!0,a={type:"ArrowParameterPlaceHolder",params:[a],async:!1}),!f)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(a.type===g.Syntax.SequenceExpression)for(f=0;f<a.expressions.length;f++)this.reinterpretExpressionAsPattern(a.expressions[f]);else this.reinterpretExpressionAsPattern(a);a={type:"ArrowParameterPlaceHolder",
params:a.type===g.Syntax.SequenceExpression?a.expressions:[a],async:!1}}this.context.isBindingElement=!1}}return a};c.prototype.parseArguments=function(){this.expect("(");var a=[];if(!this.match(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);a.push(b);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return a};c.prototype.isIdentifierName=function(a){return 3===a.type||4===a.type||1===a.type||5===a.type};c.prototype.parseIdentifierName=
function(){var a=this.createNode(),b=this.nextToken();this.isIdentifierName(b)||this.throwUnexpectedToken(b);return this.finalize(a,new l.Identifier(b.value))};c.prototype.parseLeftHandSideExpressionAllowCall=function(){var a=this.lookahead,b=this.context.allowIn;this.context.allowIn=!0;var f;for(f=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var t=this.parseIdentifierName();f=this.finalize(this.startNode(a),
new l.StaticMemberExpression(f,t))}else if(this.match("("))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1,t=this.parseArguments(),f=this.finalize(this.startNode(a),new l.CallExpression(f,t));else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),t=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),f=this.finalize(this.startNode(a),new l.ComputedMemberExpression(f,t));else break;this.context.allowIn=b;return f};
c.prototype.parseLeftHandSideExpression=function(){B.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var a=this.startNode(this.lookahead),b=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var f=this.isolateCoverGrammar(this.parseExpression);this.expect("]");b=this.finalize(a,new l.ComputedMemberExpression(b,f))}else if(this.match("."))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!0,this.expect("."),f=this.parseIdentifierName(),b=this.finalize(a,new l.StaticMemberExpression(b,f));else break;return b};c.prototype.parseUpdateExpression=function(){var a=this.lookahead;if(this.match("++")||this.match("--")){a=this.startNode(a);var b=this.nextToken();var f=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&f.type===g.Syntax.Identifier&&this.scanner.isRestrictedWord(f.name)&&this.tolerateError(p.Messages.StrictLHSPrefix);
this.context.isAssignmentTarget||this.tolerateError(p.Messages.InvalidLHSInAssignment);f=this.finalize(a,new l.UpdateExpression(b.value,f,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else f=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&f.type===g.Syntax.Identifier&&this.scanner.isRestrictedWord(f.name)&&this.tolerateError(p.Messages.StrictLHSPostfix),
this.context.isAssignmentTarget||this.tolerateError(p.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,b=this.nextToken().value,f=this.finalize(this.startNode(a),new l.UpdateExpression(b,f,!1)));return f};c.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var a=this.startNode(this.lookahead),b=this.nextToken();
var f=this.inheritCoverGrammar(this.parseUnaryExpression);f=this.finalize(a,new l.UnaryExpression(b.value,f));this.context.strict&&"delete"===f.operator&&f.argument.type===g.Syntax.Identifier&&this.tolerateError(p.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else f=this.parseUpdateExpression();return f};c.prototype.parseExponentiationExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseUnaryExpression);if(b.type!==g.Syntax.UnaryExpression&&
this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var f=this.isolateCoverGrammar(this.parseExponentiationExpression);b=this.finalize(this.startNode(a),new l.BinaryExpression("**",b,f))}return b};c.prototype.binaryPrecedence=function(a){var b=a.value;return 7===a.type?this.operatorPrecedence[b]||0:4===a.type?"instanceof"===b||this.context.allowIn&&"in"===b?7:0:0};c.prototype.parseBinaryExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseExponentiationExpression),
f=this.lookahead,t=this.binaryPrecedence(f);if(0<t){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;a=[a,this.lookahead];var n=this.isolateCoverGrammar(this.parseExponentiationExpression);f=[b,f.value,n];for(var m=[t];;){t=this.binaryPrecedence(this.lookahead);if(0>=t)break;for(;2<f.length&&t<=m[m.length-1];){n=f.pop();var h=f.pop();m.pop();b=f.pop();a.pop();var v=a[a.length-1],r=this.startNode(v,v.lineStart);f.push(this.finalize(r,new l.BinaryExpression(h,b,n)))}f.push(this.nextToken().value);
m.push(t);a.push(this.lookahead);f.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}t=f.length-1;b=f[t];for(h=a.pop();1<t;)v=a.pop(),r=this.startNode(v,h&&h.lineStart),h=f[t-1],b=this.finalize(r,new l.BinaryExpression(h,f[t-2],b)),t-=2,h=v}return b};c.prototype.parseConditionalExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var f=this.context.allowIn;this.context.allowIn=!0;var t=this.isolateCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=f;this.expect(":");f=this.isolateCoverGrammar(this.parseAssignmentExpression);b=this.finalize(this.startNode(a),new l.ConditionalExpression(b,t,f));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}return b};c.prototype.checkPatternParam=function(a,b){switch(b.type){case g.Syntax.Identifier:this.validateParam(a,b,b.name);break;case g.Syntax.AssignmentPattern:this.checkPatternParam(a,b.left);break;case g.Syntax.ArrayPattern:for(var f=0;f<b.elements.length;f++)null!==
b.elements[f]&&this.checkPatternParam(a,b.elements[f]);break;case g.Syntax.ObjectPattern:for(f=0;f<b.properties.length;f++)this.checkPatternParam(a,b.properties[f].value)}a.simple=a.simple&&b instanceof l.Identifier};c.prototype.reinterpretAsCoverFormalsList=function(a){var b=[a],f={simple:!0,paramSet:{}};switch(a.type){case g.Syntax.Identifier:break;default:return null}for(a=0;a<b.length;++a){var t=b[a];this.checkPatternParam(f,t);b[a]=t}f.message===p.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?
f.stricted:f.firstRestricted,f.message);return{simple:f.simple,params:b,stricted:f.stricted,firstRestricted:f.firstRestricted,message:f.message}};c.prototype.parseAssignmentExpression=function(){var a=this.lookahead,b=a;var f=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(p.Messages.InvalidLHSInAssignment);if(this.context.strict&&f.type===g.Syntax.Identifier){var t=f;this.scanner.isRestrictedWord(t.name)&&this.tolerateUnexpectedToken(b,
p.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(t.name)&&this.tolerateUnexpectedToken(b,p.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(f):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);b=this.nextToken();b=b.value;t=this.isolateCoverGrammar(this.parseAssignmentExpression);f=this.finalize(this.startNode(a),new l.AssignmentExpression(b,f,t));this.context.firstCoverInitializedNameError=null}return f};c.prototype.parseExpression=
function(){var a=this.lookahead,b=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var f=[];for(f.push(b);2!==this.lookahead.type&&this.match(",");)this.nextToken(),f.push(this.isolateCoverGrammar(this.parseAssignmentExpression));b=this.finalize(this.startNode(a),new l.SequenceExpression(f))}return b};c.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var a=
this.parseFunctionDeclaration();break;default:a=this.parseStatement()}else a=this.parseStatement();return a};c.prototype.parseBlock=function(){var a=this.createNode();this.expect("{");for(var b=[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(a,new l.BlockStatement(b))};c.prototype.parseBlockOrObjectInitialiser=function(){var a=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var b=this.scanner.saveState();this.scanner.scanComments();
var f=this.scanner.lex();this.scanner.restoreState(b);if(7===f.type&&":"===f.value){b=[];for(f={value:!1};!this.match("}");)b.push(this.parseObjectProperty(f)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(a,new l.ObjectExpression(b))}}for(b=[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(a,new l.BlockStatement(b))};c.prototype.parseLexicalBinding=function(a,b){var f=this.createNode();a=this.parsePattern([],a);this.context.strict&&
a.type===g.Syntax.Identifier&&this.scanner.isRestrictedWord(a.name)&&this.tolerateError(p.Messages.StrictVarName);var t=null;if(!b.inFor&&a.type!==g.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),t=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(f,new l.VariableDeclarator(a,t))};c.prototype.parseBindingList=function(a,b){for(var f=[this.parseLexicalBinding(a,b)];this.match(",");)this.nextToken(),f.push(this.parseLexicalBinding(a,b));return f};c.prototype.parseArrayPattern=
function(a,b){var f=this.createNode();this.expect("[");for(var t=[];!this.match("]");)this.match(",")?(this.nextToken(),t.push(null)):(t.push(this.parsePatternWithDefault(a,b)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(f,new l.ArrayPattern(t))};c.prototype.parsePropertyPattern=function(a,b){var f=this.createNode(),t=!1,n=!1;if(3===this.lookahead.type){var m=this.lookahead;var h=this.parseVariableIdentifier();var v=this.finalize(f,new l.Identifier(m.value));this.match("\x3d")?
(a.push(m),n=!0,this.nextToken(),a=this.parseAssignmentExpression(),m=this.finalize(this.startNode(m),new l.AssignmentPattern(v,a))):this.match(":")?(this.expect(":"),m=this.parsePatternWithDefault(a,b)):(a.push(m),n=!0,m=v)}else t=this.match("["),h=this.parseObjectPropertyKey(),this.expect(":"),m=this.parsePatternWithDefault(a,b);return this.finalize(f,new l.Property("init",h,t,m,!1,n))};c.prototype.parseObjectPattern=function(a,b){var f=this.createNode(),t=[];for(this.expect("{");!this.match("}");)t.push(this.parsePropertyPattern(a,
b)),this.match("}")||this.expect(",");this.expect("}");return this.finalize(f,new l.ObjectPattern(t))};c.prototype.parsePattern=function(a,b){this.match("[")?a=this.parseArrayPattern(a,b):this.match("{")?a=this.parseObjectPattern(a,b):(!this.matchKeyword("let")||"const"!==b&&"let"!==b||this.tolerateUnexpectedToken(this.lookahead,p.Messages.LetInLexicalBinding),a.push(this.lookahead),a=this.parseVariableIdentifier(b));return a};c.prototype.parsePatternWithDefault=function(a,b){var f=this.lookahead;
a=this.parsePattern(a,b);this.match("\x3d")&&(this.nextToken(),b=this.isolateCoverGrammar(this.parseAssignmentExpression),a=this.finalize(this.startNode(f),new l.AssignmentPattern(a,b)));return a};c.prototype.parseVariableIdentifier=function(a){var b=this.createNode(),f=this.nextToken();3!==f.type&&(this.context.strict&&4===f.type&&this.scanner.isStrictModeReservedWord(f.value)?this.tolerateUnexpectedToken(f,p.Messages.StrictReservedWord):(this.context.strict||"let"!==f.value||"var"!==a)&&this.throwUnexpectedToken(f));
return this.finalize(b,new l.Identifier(f.value))};c.prototype.parseVariableDeclaration=function(a){var b=this.createNode(),f=this.parsePattern([],"var");this.context.strict&&f.type===g.Syntax.Identifier&&this.scanner.isRestrictedWord(f.name)&&this.tolerateError(p.Messages.StrictVarName);var t=null;this.match("\x3d")?(this.nextToken(),t=this.isolateCoverGrammar(this.parseAssignmentExpression)):f.type===g.Syntax.Identifier||a.inFor||this.expect("\x3d");return this.finalize(b,new l.VariableDeclarator(f,
t))};c.prototype.parseVariableDeclarationList=function(a){a={inFor:a.inFor};var b=[];for(b.push(this.parseVariableDeclaration(a));this.match(",");)this.nextToken(),b.push(this.parseVariableDeclaration(a));return b};c.prototype.parseVariableStatement=function(){var a=this.createNode();this.expectKeyword("var");var b=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(a,new l.VariableDeclaration(b,"var"))};c.prototype.parseEmptyStatement=function(){var a=this.createNode();
this.expect(";");return this.finalize(a,new l.EmptyStatement)};c.prototype.parseExpressionStatement=function(){var a=this.createNode(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(a,new l.ExpressionStatement(b))};c.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(p.Messages.StrictFunction);return this.parseStatement(!0)};c.prototype.parseIfStatement=function(){var a=this.createNode(),b=null;this.expectKeyword("if");
this.expect("(");var f=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var t=this.finalize(this.createNode(),new l.EmptyStatement)}else this.expect(")"),t=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),b=this.parseIfClause());return this.finalize(a,new l.IfStatement(f,t,b))};c.prototype.parseForStatement=function(){var a=null,b=null,f=null,t=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();
else if(this.matchKeyword("var")){a=this.createNode();this.nextToken();var n=this.context.allowIn;this.context.allowIn=!1;var m=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=n;if(1===m.length&&this.matchKeyword("in")){var h=m[0];h.init&&(h.id.type===g.Syntax.ArrayPattern||h.id.type===g.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(p.Messages.ForInOfLoopInitializer,"for-in");a=this.finalize(a,new l.VariableDeclaration(m,"var"));this.nextToken();h=a;var v=this.parseExpression();
a=null}else 1===m.length&&null===m[0].init&&this.matchContextualKeyword("of")?(a=this.finalize(a,new l.VariableDeclaration(m,"var")),this.nextToken(),h=a,v=this.parseAssignmentExpression(),a=null):(a=this.finalize(a,new l.VariableDeclaration(m,"var")),this.expect(";"))}else{m=this.lookahead;var r=this.context.isBindingElement,C=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;n=this.context.allowIn;this.context.allowIn=!1;a=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=n;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&a.type!==g.Syntax.AssignmentExpression||this.tolerateError(p.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(a),h=a,v=this.parseExpression(),a=null;else{this.context.isBindingElement=r;this.context.isAssignmentTarget=C;this.context.firstCoverInitializedNameError=w;if(this.match(",")){for(a=[a];this.match(",");)this.nextToken(),a.push(this.isolateCoverGrammar(this.parseAssignmentExpression));
a=this.finalize(this.startNode(m),new l.SequenceExpression(a))}this.expect(";")}}"undefined"===typeof h&&(this.match(";")||(b=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(f=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),m=this.context.inIteration,this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatementBlockAllowed),
this.context.inIteration=m);return"undefined"===typeof h?this.finalize(t,new l.ForStatement(a,b,f,n)):this.finalize(t,new l.ForInStatement(h,v,n))};c.prototype.parseContinueStatement=function(){var a=this.createNode();this.expectKeyword("continue");var b=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var f=this.parseVariableIdentifier();b=f;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+f.name)||this.throwError(p.Messages.UnknownLabel,f.name)}this.consumeSemicolon();null!==
b||this.context.inIteration||this.throwError(p.Messages.IllegalContinue);return this.finalize(a,new l.ContinueStatement(b))};c.prototype.parseBreakStatement=function(){var a=this.createNode();this.expectKeyword("break");var b=null;3!==this.lookahead.type||this.hasLineTerminator||(b=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+b.name)||this.throwError(p.Messages.UnknownLabel,b.name));this.consumeSemicolon();null!==b||this.context.inIteration||this.context.inSwitch||
this.throwError(p.Messages.IllegalBreak);return this.finalize(a,new l.BreakStatement(b))};c.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(p.Messages.IllegalReturn);var a=this.createNode();this.expectKeyword("return");var b=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(a,new l.ReturnStatement(b))};
c.prototype.parseLabelledStatement=function(){var a=this.createNode(),b=this.parseExpression();this.consumeSemicolon();b=new l.ExpressionStatement(b);return this.finalize(a,b)};c.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};c.prototype.parseStatement=function(a){void 0===a&&(a=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:a=this.parseExpressionStatement();break;case 7:var b=this.lookahead.value;a="{"===b?a?this.parseBlockOrObjectInitialiser():
this.parseObjectInitializer():"("===b?this.parseExpressionStatement():";"===b?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:a=this.parseLabelledStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":a=this.parseBreakStatement();break;case "continue":a=this.parseContinueStatement();break;case "for":a=this.parseForStatement();break;case "function":a=this.parseFunctionDeclaration();break;case "if":a=this.parseIfStatement();break;case "return":a=this.parseReturnStatement();
break;case "var":a=this.parseVariableStatement();break;default:a=this.parseExpressionStatement()}break;default:a=this.throwUnexpectedToken(this.lookahead)}return a};c.prototype.parseFunctionSourceElements=function(){var a=this.createNode();this.expect("{");var b=[],f=this.context.labelSet,t=this.context.inIteration,n=this.context.inSwitch,m=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&
!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=f;this.context.inIteration=t;this.context.inSwitch=n;this.context.inFunctionBody=m;return this.finalize(a,new l.BlockStatement(b))};c.prototype.validateParam=function(a,b,f){var t="$"+f;this.context.strict?(this.scanner.isRestrictedWord(f)&&(a.stricted=b,a.message=p.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(a.paramSet,t)&&(a.stricted=b,a.message=p.Messages.StrictParamDupe)):a.firstRestricted||
(this.scanner.isRestrictedWord(f)?(a.firstRestricted=b,a.message=p.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(f)?(a.firstRestricted=b,a.message=p.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,t)&&(a.stricted=b,a.message=p.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(a.paramSet,t,{value:!0,enumerable:!0,writable:!0,configurable:!0}):a.paramSet[t]=!0};c.prototype.parseFormalParameter=function(a){for(var b=
[],f=this.parsePatternWithDefault(b),t=0;t<b.length;t++)this.validateParam(a,b[t],b[t].value);a.simple=a.simple&&f instanceof l.Identifier;a.params.push(f)};c.prototype.parseFormalParameters=function(a){a={simple:!0,params:[],firstRestricted:a};this.expect("(");if(!this.match(")"))for(a.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(a);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:a.simple,params:a.params,stricted:a.stricted,firstRestricted:a.firstRestricted,
message:a.message}};c.prototype.parseFunctionDeclaration=function(a){var b=this.createNode();this.expectKeyword("function");var f=null,t=null;if(!a||!this.match("("))if(a=this.lookahead,f=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(a.value)&&this.tolerateUnexpectedToken(a,p.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(a.value)){t=a;var n=p.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(a.value)&&(t=a,n=p.Messages.StrictReservedWord);
var m=this.parseFormalParameters(t);a=m.params;var h=m.stricted;t=m.firstRestricted;m.message&&(n=m.message);var v=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=m.simple;m=this.parseFunctionSourceElements();this.context.strict&&t&&this.throwUnexpectedToken(t,n);this.context.strict&&h&&this.tolerateUnexpectedToken(h,n);this.context.strict=v;this.context.allowStrictDirective=r;return this.finalize(b,new l.FunctionDeclaration(f,a,m,!1))};c.prototype.parseFunctionExpression=
function(){var a=this.createNode();this.expectKeyword("function");var b=null;if(!this.match("(")){var f=this.lookahead;b=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(f.value)&&this.tolerateUnexpectedToken(f,p.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(f.value)){var t=f;var n=p.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(f.value)&&(t=f,n=p.Messages.StrictReservedWord)}var m=this.parseFormalParameters(t);f=m.params;
var h=m.stricted;t=m.firstRestricted;m.message&&(n=m.message);var v=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=m.simple;m=this.parseFunctionSourceElements();this.context.strict&&t&&this.throwUnexpectedToken(t,n);this.context.strict&&h&&this.tolerateUnexpectedToken(h,n);this.context.strict=v;this.context.allowStrictDirective=r;return this.finalize(a,new l.FunctionExpression(b,f,m,!1))};c.prototype.qualifiedPropertyName=function(a){switch(a.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;
case 7:return"["===a.value}return!1};c.prototype.isStartOfExpression=function(){var a=!0,b=this.lookahead.value;switch(this.lookahead.type){case 7:a="["===b||"("===b||"{"===b||"+"===b||"-"===b||"!"===b||"~"===b||"++"===b||"--"===b||"/"===b||"/\x3d"===b;break;case 4:a="class"===b||"delete"===b||"function"===b||"let"===b||"new"===b||"super"===b||"this"===b||"typeof"===b||"void"===b||"yield"===b}return a};c.prototype.parseScript=function(){for(var a=this.createNode(),b=[];2!==this.lookahead.type;)b.push(this.parseStatementListItem());
return this.finalize(a,new l.Script(b))};return c}();u.Parser=e})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.assert=void 0;u.assert=function(B,A){if(!B)throw Error("ASSERT: "+A);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.ErrorHandler=void 0;e=function(){function B(){this.errors=[];this.tolerant=!1}B.prototype.recordError=
function(A){this.errors.push(A)};B.prototype.tolerate=function(A){if(this.tolerant)this.recordError(A);else throw A;};B.prototype.constructError=function(A,p){A=Error(A);try{throw A;}catch(l){Object.create&&Object.defineProperty&&(A=Object.create(l),Object.defineProperty(A,"column",{value:p}))}return A};B.prototype.createError=function(A,p,l,k){l=this.constructError("Line "+p+": "+k,l);l.index=A;l.lineNumber=p;l.description=k;return l};B.prototype.throwError=function(A,p,l,k){throw this.createError(A,
p,l,k);};B.prototype.tolerateError=function(A,p,l,k){A=this.createError(A,p,l,k);if(this.tolerant)this.recordError(A);else throw A;};return B}();u.ErrorHandler=e})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.Messages=void 0;u.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",
ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",
InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",
NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",
StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(e,u,B){Object.defineProperty(u,"__esModule",{value:!0});u.VariableDeclarator=u.VariableDeclaration=u.UpdateExpression=u.UnaryExpression=u.TemplateLiteral=u.TemplateElement=u.StaticMemberExpression=u.SequenceExpression=u.Script=u.ReturnStatement=
u.Property=u.ObjectPattern=u.ObjectExpression=u.Module=u.MethodDefinition=u.Literal=u.IfStatement=u.Identifier=u.FunctionExpression=u.FunctionDeclaration=u.ForStatement=u.ForInStatement=u.ExpressionStatement=u.EmptyStatement=u.ContinueStatement=u.ConditionalExpression=u.ComputedMemberExpression=u.CallExpression=u.BreakStatement=u.BlockStatement=u.BinaryExpression=u.AssignmentPattern=u.AssignmentExpression=u.ArrayPattern=u.ArrayExpression=void 0;e=function(){return function(A){this.type=B.Syntax.ArrayExpression;
this.elements=A}}();u.ArrayExpression=e;e=function(){return function(A){this.type=B.Syntax.ArrayPattern;this.elements=A}}();u.ArrayPattern=e;e=function(){return function(A,p,l){this.type=B.Syntax.AssignmentExpression;this.operator=A;this.left=p;this.right=l}}();u.AssignmentExpression=e;e=function(){return function(A,p){this.type=B.Syntax.AssignmentPattern;this.left=A;this.right=p}}();u.AssignmentPattern=e;e=function(){return function(A,p,l){this.type="||"===A||"\x26\x26"===A?B.Syntax.LogicalExpression:
B.Syntax.BinaryExpression;this.operator=A;this.left=p;this.right=l}}();u.BinaryExpression=e;e=function(){return function(A){this.type=B.Syntax.BlockStatement;this.body=A}}();u.BlockStatement=e;e=function(){return function(A){this.type=B.Syntax.BreakStatement;this.label=A}}();u.BreakStatement=e;e=function(){return function(A,p){this.type=B.Syntax.CallExpression;this.callee=A;this.arguments=p}}();u.CallExpression=e;e=function(){return function(A,p){this.type=B.Syntax.MemberExpression;this.computed=
!0;this.object=A;this.property=p}}();u.ComputedMemberExpression=e;e=function(){return function(A,p,l){this.type=B.Syntax.ConditionalExpression;this.test=A;this.consequent=p;this.alternate=l}}();u.ConditionalExpression=e;e=function(){return function(A){this.type=B.Syntax.ContinueStatement;this.label=A}}();u.ContinueStatement=e;e=function(){return function(){this.type=B.Syntax.EmptyStatement}}();u.EmptyStatement=e;e=function(){return function(A){this.type=B.Syntax.ExpressionStatement;this.expression=
A}}();u.ExpressionStatement=e;e=function(){return function(A,p,l){this.type=B.Syntax.ForInStatement;this.left=A;this.right=p;this.body=l;this.each=!1}}();u.ForInStatement=e;e=function(){return function(A,p,l,k){this.type=B.Syntax.ForStatement;this.init=A;this.test=p;this.update=l;this.body=k}}();u.ForStatement=e;e=function(){return function(A,p,l,k){this.type=B.Syntax.FunctionDeclaration;this.id=A;this.params=p;this.body=l;this.generator=k;this.async=this.expression=!1}}();u.FunctionDeclaration=e;
e=function(){return function(A,p,l,k){this.type=B.Syntax.FunctionExpression;this.id=A;this.params=p;this.body=l;this.generator=k;this.async=this.expression=!1}}();u.FunctionExpression=e;e=function(){return function(A){this.type=B.Syntax.Identifier;this.name=A}}();u.Identifier=e;e=function(){return function(A,p,l){this.type=B.Syntax.IfStatement;this.test=A;this.consequent=p;this.alternate=l}}();u.IfStatement=e;e=function(){return function(A,p){this.type=B.Syntax.Literal;this.value=A;this.raw=p}}();
u.Literal=e;e=function(){return function(A,p,l,k,g){this.type=B.Syntax.MethodDefinition;this.key=A;this.computed=p;this.value=l;this.kind=k;this.static=g}}();u.MethodDefinition=e;e=function(){return function(A){this.type=B.Syntax.Program;this.body=A;this.sourceType="module"}}();u.Module=e;e=function(){return function(A){this.type=B.Syntax.ObjectExpression;this.properties=A}}();u.ObjectExpression=e;e=function(){return function(A){this.type=B.Syntax.ObjectPattern;this.properties=A}}();u.ObjectPattern=
e;e=function(){return function(A,p,l,k,g,d){this.type=B.Syntax.Property;this.key=p;this.computed=l;this.value=k;this.kind=A;this.method=g;this.shorthand=d}}();u.Property=e;e=function(){return function(A){this.type=B.Syntax.ReturnStatement;this.argument=A}}();u.ReturnStatement=e;e=function(){return function(A){this.type=B.Syntax.Program;this.body=A;this.sourceType="script"}}();u.Script=e;e=function(){return function(A){this.type=B.Syntax.SequenceExpression;this.expressions=A}}();u.SequenceExpression=
e;e=function(){return function(A,p){this.type=B.Syntax.MemberExpression;this.computed=!1;this.object=A;this.property=p}}();u.StaticMemberExpression=e;e=function(){return function(A,p){this.type=B.Syntax.TemplateElement;this.value=A;this.tail=p}}();u.TemplateElement=e;e=function(){return function(A,p){this.type=B.Syntax.TemplateLiteral;this.quasis=A;this.expressions=p}}();u.TemplateLiteral=e;e=function(){return function(A,p){this.type=B.Syntax.UnaryExpression;this.operator=A;this.argument=p;this.prefix=
!0}}();u.UnaryExpression=e;e=function(){return function(A,p,l){this.type=B.Syntax.UpdateExpression;this.operator=A;this.argument=p;this.prefix=l}}();u.UpdateExpression=e;e=function(){return function(A,p){this.type=B.Syntax.VariableDeclaration;this.declarations=A;this.kind=p}}();u.VariableDeclaration=e;e=function(){return function(A,p){this.type=B.Syntax.VariableDeclarator;this.id=A;this.init=p}}();u.VariableDeclarator=e})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert",
"./character","./messages"],function(e,u,B,A,p){Object.defineProperty(u,"__esModule",{value:!0});u.Scanner=void 0;e=function(){function l(k,g){this.source=k;this.errorHandler=g;this.isModule=this.trackComment=!1;this.length=k.length;this.index=0;this.lineNumber=0<k.length?1:0;this.lineStart=0;this.curlyStack=[]}l.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};l.prototype.restoreState=function(k){this.index=
k.index;this.lineNumber=k.lineNumber;this.lineStart=k.lineStart;this.curlyStack=k.curlyStack};l.prototype.eof=function(){return this.index>=this.length};l.prototype.throwUnexpectedToken=function(k){void 0===k&&(k=p.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,k)};l.prototype.tolerateUnexpectedToken=function(k){void 0===k&&(k=p.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-
this.lineStart+1,k)};l.prototype.skipSingleLineComment=function(k){var g=[];if(this.trackComment){g=[];var d=this.index-k;var c={start:{line:this.lineNumber,column:this.index-this.lineStart-k},end:{}}}for(;!this.eof();){var a=this.source.charCodeAt(this.index);++this.index;if(A.Character.isLineTerminator(a))return this.trackComment&&(c.end={line:this.lineNumber,column:this.index-this.lineStart-1},k={multiLine:!1,slice:[d+k,this.index-1],range:[d,this.index-1],loc:c},g.push(k)),13===a&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,g}this.trackComment&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},k={multiLine:!1,slice:[d+k,this.index],range:[d,this.index],loc:c},g.push(k));return g};l.prototype.skipMultiLineComment=function(){var k=[];if(this.trackComment){k=[];var g=this.index-2;var d={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var c=this.source.charCodeAt(this.index);if(A.Character.isLineTerminator(c))13===
c&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===c&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(d.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!0,slice:[g+2,this.index-2],range:[g,this.index],loc:d},k.push(g)),k;++this.index}}this.trackComment&&(d.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!0,slice:[g+2,this.index],range:[g,
this.index],loc:d},k.push(g));this.tolerateUnexpectedToken();return k};l.prototype.scanComments=function(){var k;this.trackComment&&(k=[]);for(var g=0===this.index;!this.eof();){var d=this.source.charCodeAt(this.index);if(A.Character.isWhiteSpace(d))++this.index;else if(A.Character.isLineTerminator(d))++this.index,13===d&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,g=!0;else if(47===d)if(d=this.source.charCodeAt(this.index+1),47===d)this.index+=
2,d=this.skipSingleLineComment(2),this.trackComment&&(k=k.concat(d)),g=!0;else if(42===d)this.index+=2,d=this.skipMultiLineComment(),this.trackComment&&(k=k.concat(d));else break;else if(g&&45===d)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,d=this.skipSingleLineComment(3),this.trackComment&&(k=k.concat(d));else break;else if(60!==d||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,d=this.skipSingleLineComment(4),
this.trackComment&&(k=k.concat(d));else break}return k};l.prototype.isFutureReservedWord=function(k){return!1};l.prototype.isStrictModeReservedWord=function(k){return!1};l.prototype.isRestrictedWord=function(k){return!1};l.prototype.isKeyword=function(k){k=k.toLowerCase();switch(k.length){case 2:return"if"===k||"in"===k;case 3:return"var"===k||"for"===k;case 4:return"else"===k;case 5:return"break"===k;case 6:return"return"===k;case 8:return"function"===k||"continue"===k;default:return!1}};l.prototype.codePointAt=
function(k){var g=this.source.charCodeAt(k);55296<=g&&56319>=g&&(k=this.source.charCodeAt(k+1),56320<=k&&57343>=k&&(g=1024*(g-55296)+k-56320+65536));return g};l.prototype.scanHexEscape=function(k){k="u"===k?4:2;for(var g=0,d=0;d<k;++d)if(!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index)))g=16*g+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(g)};l.prototype.scanUnicodeCodePointEscape=function(){var k=this.source[this.index],
g=0;for("}"===k&&this.throwUnexpectedToken();!this.eof();){k=this.source[this.index++];if(!A.Character.isHexDigit(k.charCodeAt(0)))break;g=16*g+"0123456789abcdef".indexOf(k.toLowerCase())}(1114111<g||"}"!==k)&&this.throwUnexpectedToken();return A.Character.fromCodePoint(g)};l.prototype.getIdentifier=function(){for(var k=this.index++;!this.eof();){var g=this.source.charCodeAt(this.index);if(92===g||55296<=g&&57343>g)return this.index=k,this.getComplexIdentifier();if(A.Character.isIdentifierPart(g))++this.index;
else break}return this.source.slice(k,this.index)};l.prototype.getComplexIdentifier=function(){var k=this.codePointAt(this.index),g=A.Character.fromCodePoint(k);this.index+=g.length;if(92===k){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var d=this.scanUnicodeCodePointEscape()}else d=this.scanHexEscape("u"),null!==d&&"\\"!==d&&A.Character.isIdentifierStart(d.charCodeAt(0))||this.throwUnexpectedToken();g=d}for(;!this.eof();){k=
this.codePointAt(this.index);if(!A.Character.isIdentifierPart(k))break;d=A.Character.fromCodePoint(k);g+=d;this.index+=d.length;92===k&&(g=g.substr(0,g.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,d=this.scanUnicodeCodePointEscape()):(d=this.scanHexEscape("u"),null!==d&&"\\"!==d&&A.Character.isIdentifierPart(d.charCodeAt(0))||this.throwUnexpectedToken()),g+=d)}return g};l.prototype.octalToDecimal=function(k){var g=
"0"!==k,d="01234567".indexOf(k);!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(g=!0,d=8*d+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(k)&&!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(d=8*d+"01234567".indexOf(this.source[this.index++])));return{code:d,octal:g}};l.prototype.scanIdentifier=function(){var k=this.index,g=92===this.source.charCodeAt(k)?this.getComplexIdentifier():this.getIdentifier();var d=1===g.length?3:this.isKeyword(g)?
4:"null"===g.toLowerCase()?5:"true"===g.toLowerCase()||"false"===g.toLowerCase()?1:3;if(3!==d&&k+g.length!==this.index){var c=this.index;this.index=k;this.tolerateUnexpectedToken(p.Messages.InvalidEscapedReservedWord);this.index=c}return{type:d,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanPunctuator=function(){var k=this.index,g=this.source[this.index];switch(g){case "(":case "{":"{"===g&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,g="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:g=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===g?this.index+=4:(g=g.substr(0,3),"\x3d\x3d\x3d"===g||"!\x3d\x3d"===g||"\x3e\x3e\x3e"===g||"\x3c\x3c\x3d"===g||"\x3e\x3e\x3d"===g||"**\x3d"===g?this.index+=3:(g=g.substr(0,2),"\x26\x26"===g||"||"===g||"\x3d\x3d"===
g||"!\x3d"===g||"+\x3d"===g||"-\x3d"===g||"*\x3d"===g||"/\x3d"===g||"++"===g||"--"===g||"\x3c\x3c"===g||"\x3e\x3e"===g||"\x26\x3d"===g||"|\x3d"===g||"^\x3d"===g||"%\x3d"===g||"\x3c\x3d"===g||"\x3e\x3d"===g||"\x3d\x3e"===g||"**"===g?this.index+=2:(g=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(g)&&++this.index)))}this.index===k&&this.throwUnexpectedToken();return{type:7,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanHexLiteral=
function(k){for(var g="";!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];0===g.length&&this.throwUnexpectedToken();A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+g,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanBinaryLiteral=function(k){for(var g="",d;!this.eof();){d=this.source[this.index];if("0"!==d&&"1"!==d)break;
g+=this.source[this.index++]}0===g.length&&this.throwUnexpectedToken();this.eof()||(d=this.source.charCodeAt(this.index),(A.Character.isIdentifierStart(d)||A.Character.isDecimalDigit(d))&&this.throwUnexpectedToken());return{type:6,value:parseInt(g,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanOctalLiteral=function(k,g){var d="",c=!1;A.Character.isOctalDigit(k.charCodeAt(0))?(c=!0,d="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index));)d+=
this.source[this.index++];c||0!==d.length||this.throwUnexpectedToken();(A.Character.isIdentifierStart(this.source.charCodeAt(this.index))||A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(d,8),octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};l.prototype.scanNumericLiteral=function(){var k=this.index,g=this.source[k];B.assert(A.Character.isDecimalDigit(g.charCodeAt(0))||"."===g,"Numeric literal must start with a decimal digit or a decimal point");
var d="";if("."!==g){d=this.source[this.index++];g=this.source[this.index];if("0"===d){if("x"===g||"X"===g)return++this.index,this.scanHexLiteral(k);if("b"===g||"B"===g)return++this.index,this.scanBinaryLiteral(k);if("o"===g||"O"===g)return this.scanOctalLiteral(g,k)}for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];g=this.source[this.index]}if("."===g){for(d+=this.source[this.index++];A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)d+=
this.source[this.index++];g=this.source[this.index]}if("e"===g||"E"===g){d+=this.source[this.index++];g=this.source[this.index];if("+"===g||"-"===g)d+=this.source[this.index++];if(A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];else this.throwUnexpectedToken()}A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(d),
lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanStringLiteral=function(){var k=this.index,g=this.source[k];B.assert("'"===g||'"'===g,"String literal must starts with a quote");++this.index;for(var d=!1,c="";!this.eof();){var a=this.source[this.index++];if(a===g){g="";break}if("\\"===a)if((a=this.source[this.index++])&&A.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(a){case "u":"{"===this.source[this.index]?(++this.index,c+=this.scanUnicodeCodePointEscape()):(a=this.scanHexEscape(a),null===a&&this.throwUnexpectedToken(),c+=a);break;case "x":a=this.scanHexEscape(a);null===a&&this.throwUnexpectedToken(p.Messages.InvalidHexEscapeSequence);c+=a;break;case "n":c+="\n";break;case "r":c+="\r";break;case "t":c+="\t";break;case "b":c+="\b";break;case "f":c+="\f";break;case "v":c+="\x0B";break;case "8":case "9":c+=a;this.tolerateUnexpectedToken();break;default:a&&
A.Character.isOctalDigit(a.charCodeAt(0))?(a=this.octalToDecimal(a),d=a.octal||d,c+=String.fromCharCode(a.code)):c+=a}else if(A.Character.isLineTerminator(a.charCodeAt(0)))break;else c+=a}""!==g&&(this.index=k,this.throwUnexpectedToken());return{type:8,value:c,octal:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.scanTemplate=function(){var k="",g=!1,d=this.index,c="`"===this.source[d],a=!1,b=2;for(++this.index;!this.eof();){var f=this.source[this.index++];
if("`"===f){b=1;g=a=!0;break}if("$"===f){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;g=!0;break}k+=f}else if("\\"===f)if(f=this.source[this.index++],A.Character.isLineTerminator(f.charCodeAt(0)))++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(f){case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "u":if("{"===this.source[this.index])++this.index,k+=this.scanUnicodeCodePointEscape();else{var t=
this.index,n=this.scanHexEscape(f);null!==n?k+=n:(this.index=t,k+=f)}break;case "x":f=this.scanHexEscape(f);null===f&&this.throwUnexpectedToken(p.Messages.InvalidHexEscapeSequence);k+=f;break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\v";break;default:"0"===f?(A.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(p.Messages.TemplateOctalLiteral),k+="\x00"):A.Character.isOctalDigit(f.charCodeAt(0))?this.throwUnexpectedToken(p.Messages.TemplateOctalLiteral):
k+=f}else A.Character.isLineTerminator(f.charCodeAt(0))?(++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,k+="\n"):k+=f}g||this.throwUnexpectedToken();c||this.curlyStack.pop();return{type:10,value:this.source.slice(d+1,this.index-b),cooked:k,head:c,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};l.prototype.testRegExp=function(k,g){var d=this,c=k;0<=g.indexOf("u")&&(c=c.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(a,b,f){a=parseInt(b||f,16);1114111<a&&d.throwUnexpectedToken(p.Messages.InvalidRegExp);return 65535>=a?String.fromCharCode(a):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(c)}catch(a){this.throwUnexpectedToken(p.Messages.InvalidRegExp)}try{return new RegExp(k,g)}catch(a){return null}};l.prototype.scanRegExpBody=function(){var k=this.source[this.index];B.assert("/"===k,"Regular expression literal must start with a slash");for(var g=this.source[this.index++],d=
!1,c=!1;!this.eof();)if(k=this.source[this.index++],g+=k,"\\"===k)k=this.source[this.index++],A.Character.isLineTerminator(k.charCodeAt(0))&&this.throwUnexpectedToken(p.Messages.UnterminatedRegExp),g+=k;else if(A.Character.isLineTerminator(k.charCodeAt(0)))this.throwUnexpectedToken(p.Messages.UnterminatedRegExp);else if(d)"]"===k&&(d=!1);else{if("/"===k){c=!0;break}"["===k&&(d=!0)}c||this.throwUnexpectedToken(p.Messages.UnterminatedRegExp);return g.substr(1,g.length-2)};l.prototype.scanRegExpFlags=
function(){for(var k="";!this.eof();){var g=this.source[this.index];if(!A.Character.isIdentifierPart(g.charCodeAt(0)))break;++this.index;if("\\"!==g||this.eof())k+=g;else{g=this.source[this.index];if("u"===g){++this.index;g=this.index;var d=this.scanHexEscape("u");if(null!==d)for(k+=d;g<this.index;++g);else this.index=g,k+="u"}this.tolerateUnexpectedToken()}}return k};l.prototype.scanRegExp=function(){var k=this.index,g=this.scanRegExpBody(),d=this.scanRegExpFlags(),c=this.testRegExp(g,d);return{type:9,
value:"",pattern:g,flags:d,regex:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};l.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var k=this.source.charCodeAt(this.index);return A.Character.isIdentifierStart(k)?this.scanIdentifier():40===k||41===k||59===k?this.scanPunctuator():39===k||34===k?this.scanStringLiteral():46===k?A.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this.scanNumericLiteral():this.scanPunctuator():A.Character.isDecimalDigit(k)?this.scanNumericLiteral():96===k||125===k&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=k&&57343>k&&A.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return l}();u.Scanner=e})},"esri/arcade/lib/character":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.Character=void 0;var B=
/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
A=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
u.Character={fromCodePoint:function(p){return 65536>p?String.fromCharCode(p):String.fromCharCode(55296+(p-65536>>10))+String.fromCharCode(56320+(p-65536&1023))},isWhiteSpace:function(p){return 32===p||9===p||11===p||12===p||160===p||5760<=p&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(p)},isLineTerminator:function(p){return 10===p||13===p||8232===p||8233===p},isIdentifierStart:function(p){return 36===p||95===p||65<=p&&90>=p||97<=p&&122>=p||92===p||
128<=p&&B.test(u.Character.fromCodePoint(p))},isIdentifierPart:function(p){return 36===p||95===p||65<=p&&90>=p||97<=p&&122>=p||48<=p&&57>=p||92===p||128<=p&&A.test(u.Character.fromCodePoint(p))},isDecimalDigit:function(p){return 48<=p&&57>=p},isHexDigit:function(p){return 48<=p&&57>=p||65<=p&&70>=p||97<=p&&102>=p},isOctalDigit:function(p){return 48<=p&&55>=p}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(e,u){Object.defineProperty(u,"__esModule",{value:!0});u.TokenName=
u.Token=void 0;e=u.Token||(u.Token={});e[e.BooleanLiteral=1]="BooleanLiteral";e[e.EOF=2]="EOF";e[e.Identifier=3]="Identifier";e[e.Keyword=4]="Keyword";e[e.NullLiteral=5]="NullLiteral";e[e.NumericLiteral=6]="NumericLiteral";e[e.Punctuator=7]="Punctuator";e[e.StringLiteral=8]="StringLiteral";e[e.RegularExpression=9]="RegularExpression";e[e.Template=10]="Template";u.TokenName={};u.TokenName[1]="Boolean";u.TokenName[2]="\x3cend\x3e";u.TokenName[3]="Identifier";u.TokenName[4]="Keyword";u.TokenName[5]=
"Null";u.TokenName[6]="Numeric";u.TokenName[7]="Punctuator";u.TokenName[8]="String";u.TokenName[9]="RegularExpression";u.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(e,u,B,A,p){Object.defineProperty(u,"__esModule",{value:!0});u.Tokenizer=void 0;var l=function(){function k(){this.values=[];this.curly=this.paren=-1}k.prototype.beforeFunctionExpression=function(g){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(g)};
k.prototype.isRegexStart=function(){var g=this.values[this.values.length-1],d=null!==g;switch(g){case "this":case "]":d=!1;break;case ")":g=this.values[this.paren-1];d="if"===g||"while"===g||"for"===g||"with"===g;break;case "}":d=!0,"function"===this.values[this.curly-3]?d=(g=this.values[this.curly-4])?!this.beforeFunctionExpression(g):!1:"function"===this.values[this.curly-4]&&(d=(g=this.values[this.curly-5])?!this.beforeFunctionExpression(g):!0)}return d};k.prototype.push=function(g){7===g.type||
4===g.type?("{"===g.value?this.curly=this.values.length:"("===g.value&&(this.paren=this.values.length),this.values.push(g.value)):this.values.push(null)};return k}();e=function(){function k(g,d){this.errorHandler=new B.ErrorHandler;this.errorHandler.tolerant=d?"boolean"===typeof d.tolerant&&d.tolerant:!1;this.scanner=new A.Scanner(g,this.errorHandler);this.scanner.trackComment=d?"boolean"===typeof d.comment&&d.comment:!1;this.trackRange=d?"boolean"===typeof d.range&&d.range:!1;this.trackLoc=d?"boolean"===
typeof d.loc&&d.loc:!1;this.buffer=[];this.reader=new l}k.prototype.errors=function(){return this.errorHandler.errors};k.prototype.getNextToken=function(){if(0===this.buffer.length){var g=this.scanner.scanComments();if(this.scanner.trackComment)for(var d=0;d<g.length;++d){var c=g[d],a=this.scanner.source.slice(c.slice[0],c.slice[1]);a={type:c.multiLine?"BlockComment":"LineComment",value:a};this.trackRange&&(a.range=c.range);this.trackLoc&&(a.loc=c.loc);this.buffer.push(a)}if(!this.scanner.eof()){g=
void 0;this.trackLoc&&(g={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});d=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){c=this.scanner.saveState();try{d=this.scanner.scanRegExp()}catch(b){this.scanner.restoreState(c),d=this.scanner.lex()}}else d=this.scanner.lex();this.reader.push(d);c={type:p.TokenName[d.type],value:this.scanner.source.slice(d.start,d.end)};this.trackRange&&(c.range=[d.start,d.end]);this.trackLoc&&
(g.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=g);9===d.type&&(c.regex={pattern:d.pattern,flags:d.flags});this.buffer.push(c)}}return this.buffer.shift()};return k}();u.Tokenizer=e})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(e,u,B){return B})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(e,u,B,A){Object.defineProperty(u,"__esModule",{value:!0});var p=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};u.load=function(l,k,g){l=B.locale;var d=
l in p;if(!d){var c=l.split("-");1<c.length&&c[0]in p&&(l=c[0],d=!0)}d?k(["moment/locale/"+l],function(){g(A)}):g(A)}})},"moment/moment":function(){(function(e,u){"object"===typeof exports&&"undefined"!==typeof module?module.exports=u():"function"===typeof define&&define.amd?define(u):e.moment=u()})(this,function(){function e(){return Gc.apply(null,arguments)}function u(H){return H instanceof Array||"[object Array]"===Object.prototype.toString.call(H)}function B(H){return null!=H&&"[object Object]"===
Object.prototype.toString.call(H)}function A(H,O){return Object.prototype.hasOwnProperty.call(H,O)}function p(H){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(H).length;for(var O in H)if(A(H,O))return!1;return!0}function l(H){return void 0===H}function k(H){return"number"===typeof H||"[object Number]"===Object.prototype.toString.call(H)}function g(H){return H instanceof Date||"[object Date]"===Object.prototype.toString.call(H)}function d(H,O){var da=[],oa;for(oa=0;oa<H.length;++oa)da.push(O(H[oa],
oa));return da}function c(H,O){for(var da in O)A(O,da)&&(H[da]=O[da]);A(O,"toString")&&(H.toString=O.toString);A(O,"valueOf")&&(H.valueOf=O.valueOf);return H}function a(H,O,da,oa){return Pa(H,O,da,oa,!0).utc()}function b(H){null==H._pf&&(H._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return H._pf}function f(H){if(null==
H._isValid){var O=b(H),da=xa.call(O.parsedDateParts,function(oa){return null!=oa});da=!isNaN(H._d.getTime())&&0>O.overflow&&!O.empty&&!O.invalidEra&&!O.invalidMonth&&!O.invalidWeekday&&!O.weekdayMismatch&&!O.nullInput&&!O.invalidFormat&&!O.userInvalidated&&(!O.meridiem||O.meridiem&&da);H._strict&&(da=da&&0===O.charsLeftOver&&0===O.unusedTokens.length&&void 0===O.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(H))return da;H._isValid=da}return H._isValid}function t(H){var O=a(NaN);null!=H?c(b(O),
H):b(O).userInvalidated=!0;return O}function n(H,O){var da;l(O._isAMomentObject)||(H._isAMomentObject=O._isAMomentObject);l(O._i)||(H._i=O._i);l(O._f)||(H._f=O._f);l(O._l)||(H._l=O._l);l(O._strict)||(H._strict=O._strict);l(O._tzm)||(H._tzm=O._tzm);l(O._isUTC)||(H._isUTC=O._isUTC);l(O._offset)||(H._offset=O._offset);l(O._pf)||(H._pf=b(O));l(O._locale)||(H._locale=O._locale);if(0<Ca.length)for(da=0;da<Ca.length;da++){var oa=Ca[da];var Ia=O[oa];l(Ia)||(H[oa]=Ia)}return H}function m(H){n(this,H);this._d=
new Date(null!=H._d?H._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ma&&(Ma=!0,e.updateOffset(this),Ma=!1)}function h(H){return H instanceof m||null!=H&&null!=H._isAMomentObject}function v(H){!1===e.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+H)}function r(H,O){var da=!0;return c(function(){null!=e.deprecationHandler&&e.deprecationHandler(null,H);if(da){var oa=[],Ia,Ra;for(Ia=0;Ia<arguments.length;Ia++){var Wa="";if("object"===
typeof arguments[Ia]){Wa+="\n["+Ia+"] ";for(Ra in arguments[0])A(arguments[0],Ra)&&(Wa+=Ra+": "+arguments[0][Ra]+", ");Wa=Wa.slice(0,-2)}else Wa=arguments[Ia];oa.push(Wa)}v(H+"\nArguments: "+Array.prototype.slice.call(oa).join("")+"\n"+Error().stack);da=!1}return O.apply(this,arguments)},O)}function C(H,O){null!=e.deprecationHandler&&e.deprecationHandler(H,O);La[H]||(v(O),La[H]=!0)}function w(H){return"undefined"!==typeof Function&&H instanceof Function||"[object Function]"===Object.prototype.toString.call(H)}
function y(H,O){var da=c({},H),oa;for(oa in O)A(O,oa)&&(B(H[oa])&&B(O[oa])?(da[oa]={},c(da[oa],H[oa]),c(da[oa],O[oa])):null!=O[oa]?da[oa]=O[oa]:delete da[oa]);for(oa in H)A(H,oa)&&!A(O,oa)&&B(H[oa])&&(da[oa]=c({},da[oa]));return da}function q(H){null!=H&&this.set(H)}function x(H,O,da){var oa=""+Math.abs(H);return(0<=H?da?"+":"":"-")+Math.pow(10,Math.max(0,O-oa.length)).toString().substr(1)+oa}function E(H,O,da,oa){var Ia=oa;"string"===typeof oa&&(Ia=function(){return this[oa]()});H&&(bb[H]=Ia);O&&
(bb[O[0]]=function(){return x(Ia.apply(this,arguments),O[1],O[2])});da&&(bb[da]=function(){return this.localeData().ordinal(Ia.apply(this,arguments),H)})}function z(H){return H.match(/\[[\s\S]/)?H.replace(/^\[|\]$/g,""):H.replace(/\\/g,"")}function D(H){var O=H.match(Oa),da;var oa=0;for(da=O.length;oa<da;oa++)O[oa]=bb[O[oa]]?bb[O[oa]]:z(O[oa]);return function(Ia){var Ra="",Wa;for(Wa=0;Wa<da;Wa++)Ra+=w(O[Wa])?O[Wa].call(Ia,H):O[Wa];return Ra}}function F(H,O){if(!H.isValid())return H.localeData().invalidDate();
O=J(O,H.localeData());Xa[O]=Xa[O]||D(O);return Xa[O](H)}function J(H,O){function da(Ia){return O.longDateFormat(Ia)||Ia}var oa=5;for(Sa.lastIndex=0;0<=oa&&Sa.test(H);)H=H.replace(Sa,da),Sa.lastIndex=0,--oa;return H}function L(H,O){var da=H.toLowerCase();Ta[da]=Ta[da+"s"]=Ta[O]=H}function Q(H){return"string"===typeof H?Ta[H]||Ta[H.toLowerCase()]:void 0}function ba(H){var O={},da,oa;for(oa in H)A(H,oa)&&(da=Q(oa))&&(O[da]=H[oa]);return O}function fa(H){var O=[],da;for(da in H)A(H,da)&&O.push({unit:da,
priority:$a[da]});O.sort(function(oa,Ia){return oa.priority-Ia.priority});return O}function Y(H){return 0===H%4&&0!==H%100||0===H%400}function ma(H){return 0>H?Math.ceil(H)||0:Math.floor(H)}function ca(H){H=+H;var O=0;0!==H&&isFinite(H)&&(O=ma(H));return O}function la(H,O){return function(da){return null!=da?(za(this,H,da),e.updateOffset(this,O),this):ta(this,H)}}function ta(H,O){return H.isValid()?H._d["get"+(H._isUTC?"UTC":"")+O]():NaN}function za(H,O,da){if(H.isValid()&&!isNaN(da))if("FullYear"===
O&&Y(H.year())&&1===H.month()&&29===H.date())da=ca(da),H._d["set"+(H._isUTC?"UTC":"")+O](da,H.month(),qa(da,H.month()));else H._d["set"+(H._isUTC?"UTC":"")+O](da)}function P(H,O,da){tc[H]=w(O)?O:function(oa,Ia){return oa&&da?da:O}}function ea(H,O){return A(tc,H)?tc[H](O._strict,O._locale):new RegExp(ra(H))}function ra(H){return M(H.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(O,da,oa,Ia,Ra){return da||oa||Ia||Ra}))}function M(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,
"\\$\x26")}function Z(H,O){var da,oa=O;"string"===typeof H&&(H=[H]);k(O)&&(oa=function(Ia,Ra){Ra[O]=ca(Ia)});for(da=0;da<H.length;da++)uc[H[da]]=oa}function ka(H,O){Z(H,function(da,oa,Ia,Ra){Ia._w=Ia._w||{};O(da,Ia._w,Ia,Ra)})}function qa(H,O){if(isNaN(H)||isNaN(O))return NaN;var da=(O%12+12)%12;return 1===da?Y(H+(O-da)/12)?29:28:31-da%7%2}function ua(H,O){if(!H.isValid())return H;if("string"===typeof O)if(/^\d+$/.test(O))O=ca(O);else if(O=H.localeData().monthsParse(O),!k(O))return H;var da=Math.min(H.date(),
qa(H.year(),O));H._d["set"+(H._isUTC?"UTC":"")+"Month"](O,da);return H}function Aa(H){return null!=H?(ua(this,H),e.updateOffset(this,!0),this):ta(this,"Month")}function ya(){function H(Wa,ib){return ib.length-Wa.length}var O=[],da=[],oa=[],Ia;for(Ia=0;12>Ia;Ia++){var Ra=a([2E3,Ia]);O.push(this.monthsShort(Ra,""));da.push(this.months(Ra,""));oa.push(this.months(Ra,""));oa.push(this.monthsShort(Ra,""))}O.sort(H);da.sort(H);oa.sort(H);for(Ia=0;12>Ia;Ia++)O[Ia]=M(O[Ia]),da[Ia]=M(da[Ia]);for(Ia=0;24>Ia;Ia++)oa[Ia]=
M(oa[Ia]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+oa.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+da.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+O.join("|")+")","i")}function G(H,O,da,oa,Ia,Ra,Wa){100>H&&0<=H?(O=new Date(H+400,O,da,oa,Ia,Ra,Wa),isFinite(O.getFullYear())&&O.setFullYear(H)):O=new Date(H,O,da,oa,Ia,Ra,Wa);return O}function I(H){if(100>H&&0<=H){var O=Array.prototype.slice.call(arguments);O[0]=H+400;O=new Date(Date.UTC.apply(null,O));
isFinite(O.getUTCFullYear())&&O.setUTCFullYear(H)}else O=new Date(Date.UTC.apply(null,arguments));return O}function R(H,O,da){da=7+O-da;return-((7+I(H,0,da).getUTCDay()-O)%7)+da-1}function X(H,O,da,oa,Ia){da=(7+da-oa)%7;oa=R(H,oa,Ia);oa=1+7*(O-1)+da+oa;0>=oa?(O=H-1,H=(Y(O)?366:365)+oa):oa>(Y(H)?366:365)?(O=H+1,H=oa-(Y(H)?366:365)):(O=H,H=oa);return{year:O,dayOfYear:H}}function W(H,O,da){var oa=R(H.year(),O,da);oa=Math.floor((H.dayOfYear()-oa-1)/7)+1;1>oa?(H=H.year()-1,O=oa+sa(H,O,da)):oa>sa(H.year(),
O,da)?(O=oa-sa(H.year(),O,da),H=H.year()+1):(H=H.year(),O=oa);return{week:O,year:H}}function sa(H,O,da){var oa=R(H,O,da);O=R(H+1,O,da);return((Y(H)?366:365)-oa+O)/7}function T(H,O){return H.slice(O,7).concat(H.slice(0,O))}function S(H,O,da){var oa;H=H.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],oa=0;7>oa;++oa){var Ia=a([2E3,1]).day(oa);this._minWeekdaysParse[oa]=this.weekdaysMin(Ia,"").toLocaleLowerCase();this._shortWeekdaysParse[oa]=
this.weekdaysShort(Ia,"").toLocaleLowerCase();this._weekdaysParse[oa]=this.weekdays(Ia,"").toLocaleLowerCase()}if(da)O="dddd"===O?wb.call(this._weekdaysParse,H):"ddd"===O?wb.call(this._shortWeekdaysParse,H):wb.call(this._minWeekdaysParse,H);else if("dddd"===O){O=wb.call(this._weekdaysParse,H);if(-1!==O)return O;O=wb.call(this._shortWeekdaysParse,H);if(-1!==O)return O;O=wb.call(this._minWeekdaysParse,H)}else if("ddd"===O){O=wb.call(this._shortWeekdaysParse,H);if(-1!==O)return O;O=wb.call(this._weekdaysParse,
H);if(-1!==O)return O;O=wb.call(this._minWeekdaysParse,H)}else{O=wb.call(this._minWeekdaysParse,H);if(-1!==O)return O;O=wb.call(this._weekdaysParse,H);if(-1!==O)return O;O=wb.call(this._shortWeekdaysParse,H)}return-1!==O?O:null}function ia(){function H(lb,xb){return xb.length-lb.length}var O=[],da=[],oa=[],Ia=[],Ra;for(Ra=0;7>Ra;Ra++){var Wa=a([2E3,1]).day(Ra);var ib=M(this.weekdaysMin(Wa,""));var qb=M(this.weekdaysShort(Wa,""));Wa=M(this.weekdays(Wa,""));O.push(ib);da.push(qb);oa.push(Wa);Ia.push(ib);
Ia.push(qb);Ia.push(Wa)}O.sort(H);da.sort(H);oa.sort(H);Ia.sort(H);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Ia.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+oa.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+da.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+O.join("|")+")","i")}function na(){return this.hours()%12||12}function va(H,O){E(H,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),
O)})}function Ba(H,O){return O._meridiemParse}function Na(H){return H?H.toLowerCase().replace("_","-"):H}function Va(H){var O=null;if(void 0===ub[H]&&"undefined"!==typeof module&&module&&module.exports)try{O=kc._abbr;var da=require;da("./locale/"+H);Da(O)}catch(oa){ub[H]=null}return ub[H]}function Da(H,O){H&&((O=l(O)?V(H):K(H,O))?kc=O:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+H+" not found. Did you forget to load it?"));return kc._abbr}function K(H,O){if(null!==O){var da=
xc;O.abbr=H;if(null!=ub[H])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),da=ub[H]._config;else if(null!=O.parentLocale)if(null!=ub[O.parentLocale])da=ub[O.parentLocale]._config;else if(da=Va(O.parentLocale),null!=da)da=da._config;else return lc[O.parentLocale]||(lc[O.parentLocale]=[]),lc[O.parentLocale].push({name:H,
config:O}),null;ub[H]=new q(y(da,O));lc[H]&&lc[H].forEach(function(oa){K(oa.name,oa.config)});Da(H);return ub[H]}delete ub[H];return null}function V(H){var O;H&&H._locale&&H._locale._abbr&&(H=H._locale._abbr);if(!H)return kc;if(!u(H)){if(O=Va(H))return O;H=[H]}a:{O=0;for(var da,oa,Ia,Ra;O<H.length;){Ra=Na(H[O]).split("-");da=Ra.length;for(oa=(oa=Na(H[O+1]))?oa.split("-"):null;0<da;){if(Ia=Va(Ra.slice(0,da).join("-"))){H=Ia;break a}if(Ia=oa&&oa.length>=da){b:{Ia=void 0;var Wa=Math.min(Ra.length,oa.length);
for(Ia=0;Ia<Wa;Ia+=1)if(Ra[Ia]!==oa[Ia])break b;Ia=Wa}Ia=Ia>=da-1}if(Ia)break;da--}O++}H=kc}return H}function ha(H){var O;(O=H._a)&&-2===b(H).overflow&&(O=0>O[Mb]||11<O[Mb]?Mb:1>O[Lb]||O[Lb]>qa(O[Cb],O[Mb])?Lb:0>O[yb]||24<O[yb]||24===O[yb]&&(0!==O[Ib]||0!==O[Nb]||0!==O[Zb])?yb:0>O[Ib]||59<O[Ib]?Ib:0>O[Nb]||59<O[Nb]?Nb:0>O[Zb]||999<O[Zb]?Zb:-1,b(H)._overflowDayOfYear&&(O<Cb||O>Lb)&&(O=Lb),b(H)._overflowWeeks&&-1===O&&(O=Hc),b(H)._overflowWeekday&&-1===O&&(O=Ic),b(H).overflow=O);return H}function N(H){var O;
var da=H._i;var oa=Jc.exec(da)||Kc.exec(da);if(oa){b(H).iso=!0;da=0;for(O=pc.length;da<O;da++)if(pc[da][1].exec(oa[1])){var Ia=pc[da][0];var Ra=!1!==pc[da][2];break}if(null==Ia)H._isValid=!1;else{if(oa[3]){da=0;for(O=vc.length;da<O;da++)if(vc[da][1].exec(oa[3])){var Wa=(oa[2]||" ")+vc[da][0];break}if(null==Wa){H._isValid=!1;return}}if(Ra||null==Wa){if(oa[4])if(Lc.exec(oa[4]))var ib="Z";else{H._isValid=!1;return}H._f=Ia+(Wa||"")+(ib||"");Ja(H)}else H._isValid=!1}}else H._isValid=!1}function aa(H){var O=
Mc.exec(H._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(O){var da=O[3],oa=O[2],Ia=O[5],Ra=O[6],Wa=O[7],ib=parseInt(O[4],10);da=[49>=ib?2E3+ib:999>=ib?1900+ib:ib,yc.indexOf(da),parseInt(oa,10),parseInt(Ia,10),parseInt(Ra,10)];Wa&&da.push(parseInt(Wa,10));a:{if(Wa=O[1])if(Wa=zc.indexOf(Wa),oa=(new Date(da[0],da[1],da[2])).getDay(),Wa!==oa){b(H).weekdayMismatch=!0;Wa=H._isValid=!1;break a}Wa=!0}Wa&&(H._a=da,(Wa=O[8])?O=Nc[Wa]:O[9]?O=0:(O=parseInt(O[10],
10),Wa=O%100,O=(O-Wa)/100*60+Wa),H._tzm=O,H._d=I.apply(null,H._a),H._d.setUTCMinutes(H._d.getUTCMinutes()-H._tzm),b(H).rfc2822=!0)}else H._isValid=!1}function ja(H){var O=Oc.exec(H._i);null!==O?H._d=new Date(+O[1]):(N(H),!1===H._isValid&&(delete H._isValid,aa(H),!1===H._isValid&&(delete H._isValid,H._strict?H._isValid=!1:e.createFromInputFallback(H))))}function pa(H,O,da){return null!=H?H:null!=O?O:da}function wa(H){var O=[];if(!H._d){var da=new Date(e.now());da=H._useUTC?[da.getUTCFullYear(),da.getUTCMonth(),
da.getUTCDate()]:[da.getFullYear(),da.getMonth(),da.getDate()];if(H._w&&null==H._a[Lb]&&null==H._a[Mb]){var oa=H._w;if(null!=oa.GG||null!=oa.W||null!=oa.E){var Ia=1;var Ra=4;var Wa=pa(oa.GG,H._a[Cb],W(Ua(),1,4).year);var ib=pa(oa.W,1);var qb=pa(oa.E,1);if(1>qb||7<qb)var lb=!0}else if(Ia=H._locale._week.dow,Ra=H._locale._week.doy,ib=W(Ua(),Ia,Ra),Wa=pa(oa.gg,H._a[Cb],ib.year),ib=pa(oa.w,ib.week),null!=oa.d){if(qb=oa.d,0>qb||6<qb)lb=!0}else if(null!=oa.e){if(qb=oa.e+Ia,0>oa.e||6<oa.e)lb=!0}else qb=
Ia;1>ib||ib>sa(Wa,Ia,Ra)?b(H)._overflowWeeks=!0:null!=lb?b(H)._overflowWeekday=!0:(lb=X(Wa,ib,qb,Ia,Ra),H._a[Cb]=lb.year,H._dayOfYear=lb.dayOfYear)}if(null!=H._dayOfYear){lb=pa(H._a[Cb],da[Cb]);if(H._dayOfYear>(Y(lb)?366:365)||0===H._dayOfYear)b(H)._overflowDayOfYear=!0;lb=I(lb,0,H._dayOfYear);H._a[Mb]=lb.getUTCMonth();H._a[Lb]=lb.getUTCDate()}for(lb=0;3>lb&&null==H._a[lb];++lb)H._a[lb]=O[lb]=da[lb];for(;7>lb;lb++)H._a[lb]=O[lb]=null==H._a[lb]?2===lb?1:0:H._a[lb];24===H._a[yb]&&0===H._a[Ib]&&0===
H._a[Nb]&&0===H._a[Zb]&&(H._nextDay=!0,H._a[yb]=0);H._d=(H._useUTC?I:G).apply(null,O);O=H._useUTC?H._d.getUTCDay():H._d.getDay();null!=H._tzm&&H._d.setUTCMinutes(H._d.getUTCMinutes()-H._tzm);H._nextDay&&(H._a[yb]=24);H._w&&"undefined"!==typeof H._w.d&&H._w.d!==O&&(b(H).weekdayMismatch=!0)}}function Ja(H){if(H._f===e.ISO_8601)N(H);else if(H._f===e.RFC_2822)aa(H);else{H._a=[];b(H).empty=!0;var O=""+H._i,da,oa,Ia=O.length,Ra=0;var Wa=J(H._f,H._locale).match(Oa)||[];for(da=0;da<Wa.length;da++){var ib=
Wa[da];if(oa=(O.match(ea(ib,H))||[])[0]){var qb=O.substr(0,O.indexOf(oa));0<qb.length&&b(H).unusedInput.push(qb);O=O.slice(O.indexOf(oa)+oa.length);Ra+=oa.length}if(bb[ib]){if(oa?b(H).empty=!1:b(H).unusedTokens.push(ib),qb=H,null!=oa&&A(uc,ib))uc[ib](oa,qb._a,qb,ib)}else H._strict&&!oa&&b(H).unusedTokens.push(ib)}b(H).charsLeftOver=Ia-Ra;0<O.length&&b(H).unusedInput.push(O);12>=H._a[yb]&&!0===b(H).bigHour&&0<H._a[yb]&&(b(H).bigHour=void 0);b(H).parsedDateParts=H._a.slice(0);b(H).meridiem=H._meridiem;
O=H._a;da=yb;Ia=H._locale;Wa=H._a[yb];Ra=H._meridiem;null!=Ra&&(null!=Ia.meridiemHour?Wa=Ia.meridiemHour(Wa,Ra):null!=Ia.isPM&&((Ia=Ia.isPM(Ra))&&12>Wa&&(Wa+=12),Ia||12!==Wa||(Wa=0)));O[da]=Wa;O=b(H).era;null!==O&&(H._a[Cb]=H._locale.erasConvertYear(O,H._a[Cb]));wa(H);ha(H)}}function Ea(H){if(!H._d){var O=ba(H._i);H._a=d([O.year,O.month,void 0===O.day?O.date:O.day,O.hour,O.minute,O.second,O.millisecond],function(da){return da&&parseInt(da,10)});wa(H)}}function Qa(H){var O=H._i,da=H._f;H._locale=H._locale||
V(H._l);if(null===O||void 0===da&&""===O)return t({nullInput:!0});"string"===typeof O&&(H._i=O=H._locale.preparse(O));if(h(O))return new m(ha(O));if(g(O))H._d=O;else if(u(da)){var oa=!1;if(0===H._f.length)b(H).invalidFormat=!0,H._d=new Date(NaN);else{for(O=0;O<H._f.length;O++){da=0;var Ia=!1;var Ra=n({},H);null!=H._useUTC&&(Ra._useUTC=H._useUTC);Ra._f=H._f[O];Ja(Ra);f(Ra)&&(Ia=!0);da+=b(Ra).charsLeftOver;da+=10*b(Ra).unusedTokens.length;b(Ra).score=da;if(oa)da<Wa&&(Wa=da,ib=Ra);else if(null==Wa||
da<Wa||Ia){var Wa=da;var ib=Ra;Ia&&(oa=!0)}}c(H,ib||Ra)}}else da?Ja(H):Ka(H);f(H)||(H._d=null);return H}function Ka(H){var O=H._i;l(O)?H._d=new Date(e.now()):g(O)?H._d=new Date(O.valueOf()):"string"===typeof O?ja(H):u(O)?(H._a=d(O.slice(0),function(da){return parseInt(da,10)}),wa(H)):B(O)?Ea(H):k(O)?H._d=new Date(O):e.createFromInputFallback(H)}function Pa(H,O,da,oa,Ia){var Ra={};if(!0===O||!1===O)oa=O,O=void 0;if(!0===da||!1===da)oa=da,da=void 0;if(B(H)&&p(H)||u(H)&&0===H.length)H=void 0;Ra._isAMomentObject=
!0;Ra._useUTC=Ra._isUTC=Ia;Ra._l=da;Ra._i=H;Ra._f=O;Ra._strict=oa;H=new m(ha(Qa(Ra)));H._nextDay&&(H.add(1,"d"),H._nextDay=void 0);return H}function Ua(H,O,da,oa){return Pa(H,O,da,oa,!1)}function eb(H,O){var da;1===O.length&&u(O[0])&&(O=O[0]);if(!O.length)return Ua();var oa=O[0];for(da=1;da<O.length;++da)if(!O[da].isValid()||O[da][H](oa))oa=O[da];return oa}function ab(H){var O=ba(H);H=O.year||0;var da=O.quarter||0,oa=O.month||0,Ia=O.week||O.isoWeek||0,Ra=O.day||0,Wa=O.hour||0,ib=O.minute||0,qb=O.second||
0,lb=O.millisecond||0;a:{var xb,Ac=!1;for(xb in O)if(A(O,xb)&&(-1===wb.call(mc,xb)||null!=O[xb]&&isNaN(O[xb]))){O=!1;break a}for(xb=0;xb<mc.length;++xb)if(O[mc[xb]]){if(Ac){O=!1;break a}parseFloat(O[mc[xb]])!==ca(O[mc[xb]])&&(Ac=!0)}O=!0}this._isValid=O;this._milliseconds=+lb+1E3*qb+6E4*ib+36E5*Wa;this._days=+Ra+7*Ia;this._months=+oa+3*da+12*H;this._data={};this._locale=V();this._bubble()}function gb(H){return H instanceof ab}function db(H){return 0>H?-1*Math.round(-1*H):Math.round(H)}function kb(H,
O){E(H,0,0,function(){var da=this.utcOffset(),oa="+";0>da&&(da=-da,oa="-");return oa+x(~~(da/60),2)+O+x(~~da%60,2)})}function rb(H,O){H=(O||"").match(H);if(null===H)return null;H=((H[H.length-1]||[])+"").match(Pc)||["-",0,0];O=+(60*H[1])+ca(H[2]);return 0===O?0:"+"===H[0]?O:-O}function mb(H,O){return O._isUTC?(O=O.clone(),H=(h(H)||g(H)?H.valueOf():Ua(H).valueOf())-O.valueOf(),O._d.setTime(O._d.valueOf()+H),e.updateOffset(O,!1),O):Ua(H).local()}function Za(){return this.isValid()?this._isUTC&&0===
this._offset:!1}function hb(H,O){var da=H,oa=null;gb(H)?da={ms:H._milliseconds,d:H._days,M:H._months}:k(H)||!isNaN(+H)?(da={},O?da[O]=+H:da.milliseconds=+H):(oa=Qc.exec(H))?(da="-"===oa[1]?-1:1,da={y:0,d:ca(oa[Lb])*da,h:ca(oa[yb])*da,m:ca(oa[Ib])*da,s:ca(oa[Nb])*da,ms:ca(db(1E3*oa[Zb]))*da}):(oa=Rc.exec(H))?(da="-"===oa[1]?-1:1,da={y:jb(oa[2],da),M:jb(oa[3],da),w:jb(oa[4],da),d:jb(oa[5],da),h:jb(oa[6],da),m:jb(oa[7],da),s:jb(oa[8],da)}):null==da?da={}:"object"===typeof da&&("from"in da||"to"in da)&&
(oa=Ua(da.from),da=Ua(da.to),oa.isValid()&&da.isValid()?(da=mb(da,oa),oa.isBefore(da)?da=Jb(oa,da):(da=Jb(da,oa),da.milliseconds=-da.milliseconds,da.months=-da.months),oa=da):oa={milliseconds:0,months:0},da={},da.ms=oa.milliseconds,da.M=oa.months);da=new ab(da);gb(H)&&A(H,"_locale")&&(da._locale=H._locale);gb(H)&&A(H,"_isValid")&&(da._isValid=H._isValid);return da}function jb(H,O){H=H&&parseFloat(H.replace(",","."));return(isNaN(H)?0:H)*O}function Jb(H,O){var da={};da.months=O.month()-H.month()+12*
(O.year()-H.year());H.clone().add(da.months,"M").isAfter(O)&&--da.months;da.milliseconds=+O-+H.clone().add(da.months,"M");return da}function Ab(H,O){return function(da,oa){if(null!==oa&&!isNaN(+oa)){C(O,"moment()."+O+"(period, number) is deprecated. Please use moment()."+O+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Ia=da;da=oa;oa=Ia}da=hb(da,oa);vb(this,da,H);return this}}function vb(H,O,da,oa){var Ia=O._milliseconds,Ra=db(O._days);O=db(O._months);
H.isValid()&&(oa=null==oa?!0:oa,O&&ua(H,ta(H,"Month")+O*da),Ra&&za(H,"Date",ta(H,"Date")+Ra*da),Ia&&H._d.setTime(H._d.valueOf()+Ia*da),oa&&e.updateOffset(H,Ra||O))}function Ub(H){return"string"===typeof H||H instanceof String}function zb(H){var O=u(H),da=!1;O&&(da=0===H.filter(function(oa){return!k(oa)&&Ub(H)}).length);return O&&da}function Db(H,O){if(H.date()<O.date())return-Db(O,H);var da=12*(O.year()-H.year())+(O.month()-H.month()),oa=H.clone().add(da,"months");0>O-oa?(H=H.clone().add(da-1,"months"),
O=(O-oa)/(oa-H)):(H=H.clone().add(da+1,"months"),O=(O-oa)/(H-oa));return-(da+O)||0}function Kb(H){if(void 0===H)return this._locale._abbr;H=V(H);null!=H&&(this._locale=H);return this}function Rb(){return this._locale}function Gb(H,O){return(H%O+O)%O}function Qb(H,O,da){return 100>H&&0<=H?new Date(H+400,O,da)-Bc:(new Date(H,O,da)).valueOf()}function gc(H,O,da){return 100>H&&0<=H?Date.UTC(H+400,O,da)-Bc:Date.UTC(H,O,da)}function bc(H,O){return O.erasAbbrRegex(H)}function ac(){var H=[],O=[],da=[],oa=
[],Ia,Ra=this.eras();var Wa=0;for(Ia=Ra.length;Wa<Ia;++Wa)O.push(M(Ra[Wa].name)),H.push(M(Ra[Wa].abbr)),da.push(M(Ra[Wa].narrow)),oa.push(M(Ra[Wa].name)),oa.push(M(Ra[Wa].abbr)),oa.push(M(Ra[Wa].narrow));this._erasRegex=new RegExp("^("+oa.join("|")+")","i");this._erasNameRegex=new RegExp("^("+O.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+H.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+da.join("|")+")","i")}function Vb(H,O){E(0,[H,H.length],0,O)}function jc(H,O,da,oa,Ia){if(null==
H)return W(this,oa,Ia).year;var Ra=sa(H,oa,Ia);O>Ra&&(O=Ra);H=X(H,O,da,oa,Ia);H=I(H.year,0,H.dayOfYear);this.year(H.getUTCFullYear());this.month(H.getUTCMonth());this.date(H.getUTCDate());return this}function $b(H,O){O[Zb]=ca(1E3*("0."+H))}function Eb(H){return H}function Tb(H,O,da,oa){var Ia=V();O=a().set(oa,O);return Ia[da](O,H)}function hc(H,O,da){k(H)&&(O=H,H=void 0);H=H||"";if(null!=O)return Tb(H,O,da,"month");var oa=[];for(O=0;12>O;O++)oa[O]=Tb(H,O,da,"month");return oa}function cc(H,O,da,oa){"boolean"!==
typeof H&&(da=O=H,H=!1);k(O)&&(da=O,O=void 0);O=O||"";var Ia=V();H=H?Ia._week.dow:0;Ia=[];if(null!=da)return Tb(O,(da+H)%7,oa,"day");for(da=0;7>da;da++)Ia[da]=Tb(O,(da+H)%7,oa,"day");return Ia}function ic(H,O,da,oa){O=hb(O,da);H._milliseconds+=oa*O._milliseconds;H._days+=oa*O._days;H._months+=oa*O._months;return H._bubble()}function oc(H){return 0>H?Math.floor(H):Math.ceil(H)}function Hb(H){return function(){return this.as(H)}}function sb(H){return function(){return this.isValid()?this._data[H]:NaN}}
function U(H,O,da,oa,Ia){return Ia.relativeTime(O||1,!!da,H,oa)}function Ga(H){return(0<H)-(0>H)||+H}function Fa(){if(!this.isValid())return this.localeData().invalidDate();var H=wc(this._milliseconds)/1E3,O=wc(this._days),da=wc(this._months),oa=this.asSeconds();if(!oa)return"P0D";var Ia=ma(H/60);var Ra=ma(Ia/60);H%=60;Ia%=60;var Wa=ma(da/12);da%=12;var ib=H?H.toFixed(3).replace(/\.?0+$/,""):"";var qb=0>oa?"-":"";var lb=Ga(this._months)!==Ga(oa)?"-":"";var xb=Ga(this._days)!==Ga(oa)?"-":"";oa=Ga(this._milliseconds)!==
Ga(oa)?"-":"";return qb+"P"+(Wa?lb+Wa+"Y":"")+(da?lb+da+"M":"")+(O?xb+O+"D":"")+(Ra||Ia||H?"T":"")+(Ra?oa+Ra+"H":"")+(Ia?oa+Ia+"M":"")+(H?oa+ib+"S":"")}var xa=Array.prototype.some?Array.prototype.some:function(H){var O=Object(this),da=O.length>>>0,oa;for(oa=0;oa<da;oa++)if(oa in O&&H.call(this,O[oa],oa,O))return!0;return!1};var Ca=e.momentProperties=[],Ma=!1,La={};e.suppressDeprecationWarnings=!1;e.deprecationHandler=null;var Ha=Object.keys?Object.keys:function(H){var O,da=[];for(O in H)A(H,O)&&da.push(O);
return da};var Oa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Sa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xa={},bb={},Ta={},$a={},cb=/\d/,fb=/\d\d/,Bb=/\d{3}/,dc=/\d{4}/,Yb=/[+-]?\d{6}/,pb=/\d\d?/,tb=/\d\d\d\d?/,Wb=/\d\d\d\d\d\d?/,Fb=/\d{1,3}/,Xb=/\d{1,4}/,qc=/[+-]?\d{1,6}/,ec=/\d+/,rc=/[+-]?\d+/,Sc=/Z|[+-]\d\d:?\d\d/gi,sc=/Z|[+-]\d\d(?::?\d\d)?/gi,
nc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var tc={};var uc={},Cb=0,Mb=1,Lb=2,yb=3,Ib=4,Nb=5,Zb=6,Hc=7,Ic=8;var wb=Array.prototype.indexOf?Array.prototype.indexOf:function(H){var O;for(O=0;O<this.length;++O)if(this[O]===H)return O;return-1};E("M",["MM",2],"Mo",function(){return this.month()+1});E("MMM",0,0,function(H){return this.localeData().monthsShort(this,H)});E("MMMM",0,0,function(H){return this.localeData().months(this,
H)});L("month","M");$a.month=8;P("M",pb);P("MM",pb,fb);P("MMM",function(H,O){return O.monthsShortRegex(H)});P("MMMM",function(H,O){return O.monthsRegex(H)});Z(["M","MM"],function(H,O){O[Mb]=ca(H)-1});Z(["MMM","MMMM"],function(H,O,da,oa){oa=da._locale.monthsParse(H,oa,da._strict);null!=oa?O[Mb]=oa:b(da).invalidMonth=H});var yc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Cc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;E("Y",0,0,function(){var H=this.year();return 9999>=H?x(H,4):"+"+H});E(0,["YY",
2],0,function(){return this.year()%100});E(0,["YYYY",4],0,"year");E(0,["YYYYY",5],0,"year");E(0,["YYYYYY",6,!0],0,"year");L("year","y");$a.year=1;P("Y",rc);P("YY",pb,fb);P("YYYY",Xb,dc);P("YYYYY",qc,Yb);P("YYYYYY",qc,Yb);Z(["YYYYY","YYYYYY"],Cb);Z("YYYY",function(H,O){O[Cb]=2===H.length?e.parseTwoDigitYear(H):ca(H)});Z("YY",function(H,O){O[Cb]=e.parseTwoDigitYear(H)});Z("Y",function(H,O){O[Cb]=parseInt(H,10)});e.parseTwoDigitYear=function(H){return ca(H)+(68<ca(H)?1900:2E3)};var Dc=la("FullYear",
!0);E("w",["ww",2],"wo","week");E("W",["WW",2],"Wo","isoWeek");L("week","w");L("isoWeek","W");$a.week=5;$a.isoWeek=5;P("w",pb);P("ww",pb,fb);P("W",pb);P("WW",pb,fb);ka(["w","ww","W","WW"],function(H,O,da,oa){O[oa.substr(0,1)]=ca(H)});E("d",0,"do","day");E("dd",0,0,function(H){return this.localeData().weekdaysMin(this,H)});E("ddd",0,0,function(H){return this.localeData().weekdaysShort(this,H)});E("dddd",0,0,function(H){return this.localeData().weekdays(this,H)});E("e",0,0,"weekday");E("E",0,0,"isoWeekday");
L("day","d");L("weekday","e");L("isoWeekday","E");$a.day=11;$a.weekday=11;$a.isoWeekday=11;P("d",pb);P("e",pb);P("E",pb);P("dd",function(H,O){return O.weekdaysMinRegex(H)});P("ddd",function(H,O){return O.weekdaysShortRegex(H)});P("dddd",function(H,O){return O.weekdaysRegex(H)});ka(["dd","ddd","dddd"],function(H,O,da,oa){oa=da._locale.weekdaysParse(H,oa,da._strict);null!=oa?O.d=oa:b(da).invalidWeekday=H});ka(["d","e","E"],function(H,O,da,oa){O[oa]=ca(H)});var zc="Sun Mon Tue Wed Thu Fri Sat".split(" ");
E("H",["HH",2],0,"hour");E("h",["hh",2],0,na);E("k",["kk",2],0,function(){return this.hours()||24});E("hmm",0,0,function(){return""+na.apply(this)+x(this.minutes(),2)});E("hmmss",0,0,function(){return""+na.apply(this)+x(this.minutes(),2)+x(this.seconds(),2)});E("Hmm",0,0,function(){return""+this.hours()+x(this.minutes(),2)});E("Hmmss",0,0,function(){return""+this.hours()+x(this.minutes(),2)+x(this.seconds(),2)});va("a",!0);va("A",!1);L("hour","h");$a.hour=13;P("a",Ba);P("A",Ba);P("H",pb);P("h",pb);
P("k",pb);P("HH",pb,fb);P("hh",pb,fb);P("kk",pb,fb);P("hmm",tb);P("hmmss",Wb);P("Hmm",tb);P("Hmmss",Wb);Z(["H","HH"],yb);Z(["k","kk"],function(H,O,da){H=ca(H);O[yb]=24===H?0:H});Z(["a","A"],function(H,O,da){da._isPm=da._locale.isPM(H);da._meridiem=H});Z(["h","hh"],function(H,O,da){O[yb]=ca(H);b(da).bigHour=!0});Z("hmm",function(H,O,da){var oa=H.length-2;O[yb]=ca(H.substr(0,oa));O[Ib]=ca(H.substr(oa));b(da).bigHour=!0});Z("hmmss",function(H,O,da){var oa=H.length-4,Ia=H.length-2;O[yb]=ca(H.substr(0,
oa));O[Ib]=ca(H.substr(oa,2));O[Nb]=ca(H.substr(Ia));b(da).bigHour=!0});Z("Hmm",function(H,O,da){da=H.length-2;O[yb]=ca(H.substr(0,da));O[Ib]=ca(H.substr(da))});Z("Hmmss",function(H,O,da){da=H.length-4;var oa=H.length-2;O[yb]=ca(H.substr(0,da));O[Ib]=ca(H.substr(da,2));O[Nb]=ca(H.substr(oa))});var Tc=la("Hours",!0),xc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",
LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:yc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:zc,meridiemParse:/[ap]\.?m?\.?/i},ub={},lc={},kc,Jc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Lc=/Z|[+-]\d\d(?::?\d\d)?/,pc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],
["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oc=/^\/?Date\((-?\d+)/i,Mc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=r("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(H){H._d=new Date(H._i+(H._useUTC?" UTC":""))});e.ISO_8601=function(){};e.RFC_2822=function(){};var Uc=r("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var H=Ua.apply(null,arguments);return this.isValid()&&H.isValid()?H<this?this:H:t()}),Vc=r("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var H=Ua.apply(null,arguments);return this.isValid()&&H.isValid()?H>this?
this:H:t()}),mc="year quarter month week day hour minute second millisecond".split(" ");kb("Z",":");kb("ZZ","");P("Z",sc);P("ZZ",sc);Z(["Z","ZZ"],function(H,O,da){da._useUTC=!0;da._tzm=rb(sc,H)});var Pc=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Qc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;hb.fn=ab.prototype;hb.invalid=
function(){return hb(NaN)};var Wc=Ab(1,"add"),Xc=Ab(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ec=r("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(H){return void 0===H?this.localeData():this.locale(H)}),Bc=126227808E5;E("N",0,0,"eraAbbr");E("NN",0,0,"eraAbbr");E("NNN",0,0,"eraAbbr");E("NNNN",0,0,"eraName");E("NNNNN",0,0,"eraNarrow");
E("y",["y",1],"yo","eraYear");E("y",["yy",2],0,"eraYear");E("y",["yyy",3],0,"eraYear");E("y",["yyyy",4],0,"eraYear");P("N",bc);P("NN",bc);P("NNN",bc);P("NNNN",function(H,O){return O.erasNameRegex(H)});P("NNNNN",function(H,O){return O.erasNarrowRegex(H)});Z(["N","NN","NNN","NNNN","NNNNN"],function(H,O,da,oa){(O=da._locale.erasParse(H,oa,da._strict))?b(da).era=O:b(da).invalidEra=H});P("y",ec);P("yy",ec);P("yyy",ec);P("yyyy",ec);P("yo",function(H,O){return O._eraYearOrdinalRegex||ec});Z(["y","yy","yyy",
"yyyy"],Cb);Z(["yo"],function(H,O,da,oa){var Ia;da._locale._eraYearOrdinalRegex&&(Ia=H.match(da._locale._eraYearOrdinalRegex));O[Cb]=da._locale.eraYearOrdinalParse?da._locale.eraYearOrdinalParse(H,Ia):parseInt(H,10)});E(0,["gg",2],0,function(){return this.weekYear()%100});E(0,["GG",2],0,function(){return this.isoWeekYear()%100});Vb("gggg","weekYear");Vb("ggggg","weekYear");Vb("GGGG","isoWeekYear");Vb("GGGGG","isoWeekYear");L("weekYear","gg");L("isoWeekYear","GG");$a.weekYear=1;$a.isoWeekYear=1;P("G",
rc);P("g",rc);P("GG",pb,fb);P("gg",pb,fb);P("GGGG",Xb,dc);P("gggg",Xb,dc);P("GGGGG",qc,Yb);P("ggggg",qc,Yb);ka(["gggg","ggggg","GGGG","GGGGG"],function(H,O,da,oa){O[oa.substr(0,2)]=ca(H)});ka(["gg","GG"],function(H,O,da,oa){O[oa]=e.parseTwoDigitYear(H)});E("Q",0,"Qo","quarter");L("quarter","Q");$a.quarter=7;P("Q",cb);Z("Q",function(H,O){O[Mb]=3*(ca(H)-1)});E("D",["DD",2],"Do","date");L("date","D");$a.date=9;P("D",pb);P("DD",pb,fb);P("Do",function(H,O){return H?O._dayOfMonthOrdinalParse||O._ordinalParse:
O._dayOfMonthOrdinalParseLenient});Z(["D","DD"],Lb);Z("Do",function(H,O){O[Lb]=ca(H.match(pb)[0])});var Fc=la("Date",!0);E("DDD",["DDDD",3],"DDDo","dayOfYear");L("dayOfYear","DDD");$a.dayOfYear=4;P("DDD",Fb);P("DDDD",Bb);Z(["DDD","DDDD"],function(H,O,da){da._dayOfYear=ca(H)});E("m",["mm",2],0,"minute");L("minute","m");$a.minute=14;P("m",pb);P("mm",pb,fb);Z(["m","mm"],Ib);var Yc=la("Minutes",!1);E("s",["ss",2],0,"second");L("second","s");$a.second=15;P("s",pb);P("ss",pb,fb);Z(["s","ss"],Nb);var Zc=
la("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)});E(0,["SS",2],0,function(){return~~(this.millisecond()/10)});E(0,["SSS",3],0,"millisecond");E(0,["SSSS",4],0,function(){return 10*this.millisecond()});E(0,["SSSSS",5],0,function(){return 100*this.millisecond()});E(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});E(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});E(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});E(0,["SSSSSSSSS",9],0,function(){return 1E6*
this.millisecond()});L("millisecond","ms");$a.millisecond=16;P("S",Fb,cb);P("SS",Fb,fb);P("SSS",Fb,Bb);var Sb;for(Sb="SSSS";9>=Sb.length;Sb+="S")P(Sb,ec);for(Sb="S";9>=Sb.length;Sb+="S")Z(Sb,$b);var $c=la("Milliseconds",!1);E("z",0,0,"zoneAbbr");E("zz",0,0,"zoneName");var Ya=m.prototype;Ya.add=Wc;Ya.calendar=function(H,O){if(1===arguments.length)if(arguments[0]){var da=arguments[0],oa;if(!(oa=h(da)||g(da)||Ub(da)||k(da)||zb(da))){oa=B(da)&&!p(da);var Ia=!1,Ra="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
Wa;for(Wa=0;Wa<Ra.length;Wa+=1){var ib=Ra[Wa];Ia=Ia||A(da,ib)}oa=oa&&Ia}if(oa||null===da||void 0===da)H=arguments[0],O=void 0;else{da=arguments[0];oa=B(da)&&!p(da);Ia=!1;Ra="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Wa=0;Wa<Ra.length;Wa+=1)ib=Ra[Wa],Ia=Ia||A(da,ib);oa&&Ia&&(O=arguments[0],H=void 0)}}else O=H=void 0;da=H||Ua();oa=mb(da,this).startOf("day");oa=e.calendarFormat(this,oa)||"sameElse";Ia=O&&(w(O[oa])?O[oa].call(this,da):O[oa]);return this.format(Ia||this.localeData().calendar(oa,
this,Ua(da)))};Ya.clone=function(){return new m(this)};Ya.diff=function(H,O,da){if(!this.isValid())return NaN;H=mb(H,this);if(!H.isValid())return NaN;var oa=6E4*(H.utcOffset()-this.utcOffset());O=Q(O);switch(O){case "year":O=Db(this,H)/12;break;case "month":O=Db(this,H);break;case "quarter":O=Db(this,H)/3;break;case "second":O=(this-H)/1E3;break;case "minute":O=(this-H)/6E4;break;case "hour":O=(this-H)/36E5;break;case "day":O=(this-H-oa)/864E5;break;case "week":O=(this-H-oa)/6048E5;break;default:O=
this-H}return da?O:ma(O)};Ya.endOf=function(H){H=Q(H);if(void 0===H||"millisecond"===H||!this.isValid())return this;var O=this._isUTC?gc:Qb;switch(H){case "year":var da=O(this.year()+1,0,1)-1;break;case "quarter":da=O(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":da=O(this.year(),this.month()+1,1)-1;break;case "week":da=O(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":da=O(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":da=
O(this.year(),this.month(),this.date()+1)-1;break;case "hour":da=this._d.valueOf();da+=36E5-Gb(da+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":da=this._d.valueOf();da+=6E4-Gb(da,6E4)-1;break;case "second":da=this._d.valueOf(),da+=1E3-Gb(da,1E3)-1}this._d.setTime(da);e.updateOffset(this,!0);return this};Ya.format=function(H){H||(H=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);H=F(this,H);return this.localeData().postformat(H)};Ya.from=function(H,O){return this.isValid()&&(h(H)&&
H.isValid()||Ua(H).isValid())?hb({to:this,from:H}).locale(this.locale()).humanize(!O):this.localeData().invalidDate()};Ya.fromNow=function(H){return this.from(Ua(),H)};Ya.to=function(H,O){return this.isValid()&&(h(H)&&H.isValid()||Ua(H).isValid())?hb({from:this,to:H}).locale(this.locale()).humanize(!O):this.localeData().invalidDate()};Ya.toNow=function(H){return this.to(Ua(),H)};Ya.get=function(H){H=Q(H);return w(this[H])?this[H]():this};Ya.invalidAt=function(){return b(this).overflow};Ya.isAfter=
function(H,O){H=h(H)?H:Ua(H);if(!this.isValid()||!H.isValid())return!1;O=Q(O)||"millisecond";return"millisecond"===O?this.valueOf()>H.valueOf():H.valueOf()<this.clone().startOf(O).valueOf()};Ya.isBefore=function(H,O){H=h(H)?H:Ua(H);if(!this.isValid()||!H.isValid())return!1;O=Q(O)||"millisecond";return"millisecond"===O?this.valueOf()<H.valueOf():this.clone().endOf(O).valueOf()<H.valueOf()};Ya.isBetween=function(H,O,da,oa){H=h(H)?H:Ua(H);O=h(O)?O:Ua(O);if(!(this.isValid()&&H.isValid()&&O.isValid()))return!1;
oa=oa||"()";return("("===oa[0]?this.isAfter(H,da):!this.isBefore(H,da))&&(")"===oa[1]?this.isBefore(O,da):!this.isAfter(O,da))};Ya.isSame=function(H,O){H=h(H)?H:Ua(H);if(!this.isValid()||!H.isValid())return!1;O=Q(O)||"millisecond";if("millisecond"===O)return this.valueOf()===H.valueOf();H=H.valueOf();return this.clone().startOf(O).valueOf()<=H&&H<=this.clone().endOf(O).valueOf()};Ya.isSameOrAfter=function(H,O){return this.isSame(H,O)||this.isAfter(H,O)};Ya.isSameOrBefore=function(H,O){return this.isSame(H,
O)||this.isBefore(H,O)};Ya.isValid=function(){return f(this)};Ya.lang=Ec;Ya.locale=Kb;Ya.localeData=Rb;Ya.max=Vc;Ya.min=Uc;Ya.parsingFlags=function(){return c({},b(this))};Ya.set=function(H,O){if("object"===typeof H){H=ba(H);O=fa(H);var da;for(da=0;da<O.length;da++)this[O[da].unit](H[O[da].unit])}else if(H=Q(H),w(this[H]))return this[H](O);return this};Ya.startOf=function(H){H=Q(H);if(void 0===H||"millisecond"===H||!this.isValid())return this;var O=this._isUTC?gc:Qb;switch(H){case "year":var da=O(this.year(),
0,1);break;case "quarter":da=O(this.year(),this.month()-this.month()%3,1);break;case "month":da=O(this.year(),this.month(),1);break;case "week":da=O(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":da=O(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":da=O(this.year(),this.month(),this.date());break;case "hour":da=this._d.valueOf();da-=Gb(da+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":da=this._d.valueOf();da-=Gb(da,
6E4);break;case "second":da=this._d.valueOf(),da-=Gb(da,1E3)}this._d.setTime(da);e.updateOffset(this,!0);return this};Ya.subtract=Xc;Ya.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Ya.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Ya.toDate=function(){return new Date(this.valueOf())};Ya.toISOString=
function(H){if(!this.isValid())return null;var O=(H=!0!==H)?this.clone().utc():this;return 0>O.year()||9999<O.year()?F(O,H?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):w(Date.prototype.toISOString)?H?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",F(O,"Z")):F(O,H?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Ya.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var H="moment",O="";
this.isLocal()||(H=0===this.utcOffset()?"moment.utc":"moment.parseZone",O="Z");H="["+H+'("]';var da=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(H+da+"-MM-DD[T]HH:mm:ss.SSS"+(O+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(Ya[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});Ya.toJSON=function(){return this.isValid()?this.toISOString():null};Ya.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
Ya.unix=function(){return Math.floor(this.valueOf()/1E3)};Ya.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Ya.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Ya.eraName=function(){var H,O=this.localeData().eras();var da=0;for(H=O.length;da<H;++da){var oa=this.clone().startOf("day").valueOf();if(O[da].since<=oa&&oa<=O[da].until||O[da].until<=oa&&oa<=O[da].since)return O[da].name}return""};Ya.eraNarrow=function(){var H,
O=this.localeData().eras();var da=0;for(H=O.length;da<H;++da){var oa=this.clone().startOf("day").valueOf();if(O[da].since<=oa&&oa<=O[da].until||O[da].until<=oa&&oa<=O[da].since)return O[da].narrow}return""};Ya.eraAbbr=function(){var H,O=this.localeData().eras();var da=0;for(H=O.length;da<H;++da){var oa=this.clone().startOf("day").valueOf();if(O[da].since<=oa&&oa<=O[da].until||O[da].until<=oa&&oa<=O[da].since)return O[da].abbr}return""};Ya.eraYear=function(){var H,O=this.localeData().eras();var da=
0;for(H=O.length;da<H;++da){var oa=O[da].since<=O[da].until?1:-1;var Ia=this.clone().startOf("day").valueOf();if(O[da].since<=Ia&&Ia<=O[da].until||O[da].until<=Ia&&Ia<=O[da].since)return(this.year()-e(O[da].since).year())*oa+O[da].offset}return this.year()};Ya.year=Dc;Ya.isLeapYear=function(){return Y(this.year())};Ya.weekYear=function(H){return jc.call(this,H,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Ya.isoWeekYear=function(H){return jc.call(this,H,this.isoWeek(),
this.isoWeekday(),1,4)};Ya.quarter=Ya.quarters=function(H){return null==H?Math.ceil((this.month()+1)/3):this.month(3*(H-1)+this.month()%3)};Ya.month=Aa;Ya.daysInMonth=function(){return qa(this.year(),this.month())};Ya.week=Ya.weeks=function(H){var O=this.localeData().week(this);return null==H?O:this.add(7*(H-O),"d")};Ya.isoWeek=Ya.isoWeeks=function(H){var O=W(this,1,4).week;return null==H?O:this.add(7*(H-O),"d")};Ya.weeksInYear=function(){var H=this.localeData()._week;return sa(this.year(),H.dow,
H.doy)};Ya.weeksInWeekYear=function(){var H=this.localeData()._week;return sa(this.weekYear(),H.dow,H.doy)};Ya.isoWeeksInYear=function(){return sa(this.year(),1,4)};Ya.isoWeeksInISOWeekYear=function(){return sa(this.isoWeekYear(),1,4)};Ya.date=Fc;Ya.day=Ya.days=function(H){if(!this.isValid())return null!=H?this:NaN;var O=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=H){var da=this.localeData();"string"===typeof H&&(isNaN(H)?(H=da.weekdaysParse(H),H="number"===typeof H?H:null):H=parseInt(H,
10));return this.add(H-O,"d")}return O};Ya.weekday=function(H){if(!this.isValid())return null!=H?this:NaN;var O=(this.day()+7-this.localeData()._week.dow)%7;return null==H?O:this.add(H-O,"d")};Ya.isoWeekday=function(H){if(!this.isValid())return null!=H?this:NaN;if(null!=H){var O=this.localeData();H="string"===typeof H?O.weekdaysParse(H)%7||7:isNaN(H)?null:H;return this.day(this.day()%7?H:H-7)}return this.day()||7};Ya.dayOfYear=function(H){var O=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/
864E5)+1;return null==H?O:this.add(H-O,"d")};Ya.hour=Ya.hours=Tc;Ya.minute=Ya.minutes=Yc;Ya.second=Ya.seconds=Zc;Ya.millisecond=Ya.milliseconds=$c;Ya.utcOffset=function(H,O,da){var oa=this._offset||0,Ia;if(!this.isValid())return null!=H?this:NaN;if(null!=H){if("string"===typeof H){if(H=rb(sc,H),null===H)return this}else 16>Math.abs(H)&&!da&&(H*=60);!this._isUTC&&O&&(Ia=-Math.round(this._d.getTimezoneOffset()));this._offset=H;this._isUTC=!0;null!=Ia&&this.add(Ia,"m");oa!==H&&(!O||this._changeInProgress?
vb(this,hb(H-oa,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?oa:-Math.round(this._d.getTimezoneOffset())};Ya.utc=function(H){return this.utcOffset(0,H)};Ya.local=function(H){this._isUTC&&(this.utcOffset(0,H),this._isUTC=!1,H&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};Ya.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var H=
rb(Sc,this._i);null!=H?this.utcOffset(H):this.utcOffset(0,!0)}return this};Ya.hasAlignedHourOffset=function(H){if(!this.isValid())return!1;H=H?Ua(H).utcOffset():0;return 0===(this.utcOffset()-H)%60};Ya.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Ya.isLocal=function(){return this.isValid()?!this._isUTC:!1};Ya.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Ya.isUtc=Za;Ya.isUTC=Za;Ya.zoneAbbr=function(){return this._isUTC?
"UTC":""};Ya.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Ya.dates=r("dates accessor is deprecated. Use date instead.",Fc);Ya.months=r("months accessor is deprecated. Use month instead",Aa);Ya.years=r("years accessor is deprecated. Use year instead",Dc);Ya.zone=r("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(H,O){return null!=H?("string"!==typeof H&&(H=-H),this.utcOffset(H,O),this):-this.utcOffset()});
Ya.isDSTShifted=r("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var H={};n(H,this);H=Qa(H);if(H._a){var O=H._isUTC?a(H._a):Ua(H._a);var da;if(da=this.isValid()){H=H._a;O=O.toArray();da=Math.min(H.length,O.length);var oa=Math.abs(H.length-O.length),Ia=0,Ra;for(Ra=0;Ra<da;Ra++)ca(H[Ra])!==ca(O[Ra])&&Ia++;da=0<Ia+oa}this._isDSTShifted=da}else this._isDSTShifted=!1;return this._isDSTShifted});
var ob=q.prototype;ob.calendar=function(H,O,da){H=this._calendar[H]||this._calendar.sameElse;return w(H)?H.call(O,da):H};ob.longDateFormat=function(H){var O=this._longDateFormat[H],da=this._longDateFormat[H.toUpperCase()];if(O||!da)return O;this._longDateFormat[H]=da.match(Oa).map(function(oa){return"MMMM"===oa||"MM"===oa||"DD"===oa||"dddd"===oa?oa.slice(1):oa}).join("");return this._longDateFormat[H]};ob.invalidDate=function(){return this._invalidDate};ob.ordinal=function(H){return this._ordinal.replace("%d",
H)};ob.preparse=Eb;ob.postformat=Eb;ob.relativeTime=function(H,O,da,oa){var Ia=this._relativeTime[da];return w(Ia)?Ia(H,O,da,oa):Ia.replace(/%d/i,H)};ob.pastFuture=function(H,O){H=this._relativeTime[0<H?"future":"past"];return w(H)?H(O):H.replace(/%s/i,O)};ob.set=function(H){var O;for(O in H)if(A(H,O)){var da=H[O];w(da)?this[O]=da:this["_"+O]=da}this._config=H;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ob.eras=
function(H,O){var da=this._eras||V("en")._eras;H=0;for(O=da.length;H<O;++H){switch(typeof da[H].since){case "string":var oa=e(da[H].since).startOf("day");da[H].since=oa.valueOf()}switch(typeof da[H].until){case "undefined":da[H].until=Infinity;break;case "string":oa=e(da[H].until).startOf("day").valueOf(),da[H].until=oa.valueOf()}}return da};ob.erasParse=function(H,O,da){var oa,Ia=this.eras();H=H.toUpperCase();var Ra=0;for(oa=Ia.length;Ra<oa;++Ra){var Wa=Ia[Ra].name.toUpperCase();var ib=Ia[Ra].abbr.toUpperCase();
var qb=Ia[Ra].narrow.toUpperCase();if(da)switch(O){case "N":case "NN":case "NNN":if(ib===H)return Ia[Ra];break;case "NNNN":if(Wa===H)return Ia[Ra];break;case "NNNNN":if(qb===H)return Ia[Ra]}else if(0<=[Wa,ib,qb].indexOf(H))return Ia[Ra]}};ob.erasConvertYear=function(H,O){var da=H.since<=H.until?1:-1;return void 0===O?e(H.since).year():e(H.since).year()+(O-H.offset)*da};ob.erasAbbrRegex=function(H){A(this,"_erasAbbrRegex")||ac.call(this);return H?this._erasAbbrRegex:this._erasRegex};ob.erasNameRegex=
function(H){A(this,"_erasNameRegex")||ac.call(this);return H?this._erasNameRegex:this._erasRegex};ob.erasNarrowRegex=function(H){A(this,"_erasNarrowRegex")||ac.call(this);return H?this._erasNarrowRegex:this._erasRegex};ob.months=function(H,O){return H?u(this._months)?this._months[H.month()]:this._months[(this._months.isFormat||Cc).test(O)?"format":"standalone"][H.month()]:u(this._months)?this._months:this._months.standalone};ob.monthsShort=function(H,O){return H?u(this._monthsShort)?this._monthsShort[H.month()]:
this._monthsShort[Cc.test(O)?"format":"standalone"][H.month()]:u(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ob.monthsParse=function(H,O,da){var oa;if(this._monthsParseExact){a:{H=H.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],oa=0;12>oa;++oa){var Ia=a([2E3,oa]);this._shortMonthsParse[oa]=this.monthsShort(Ia,"").toLocaleLowerCase();this._longMonthsParse[oa]=this.months(Ia,"").toLocaleLowerCase()}if(da)O=
"MMM"===O?wb.call(this._shortMonthsParse,H):wb.call(this._longMonthsParse,H);else if("MMM"===O){O=wb.call(this._shortMonthsParse,H);if(-1!==O)break a;O=wb.call(this._longMonthsParse,H)}else{O=wb.call(this._longMonthsParse,H);if(-1!==O)break a;O=wb.call(this._shortMonthsParse,H)}O=-1!==O?O:null}return O}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(oa=0;12>oa;oa++)if(Ia=a([2E3,oa]),da&&!this._longMonthsParse[oa]&&(this._longMonthsParse[oa]=new RegExp("^"+
this.months(Ia,"").replace(".","")+"$","i"),this._shortMonthsParse[oa]=new RegExp("^"+this.monthsShort(Ia,"").replace(".","")+"$","i")),da||this._monthsParse[oa]||(Ia="^"+this.months(Ia,"")+"|^"+this.monthsShort(Ia,""),this._monthsParse[oa]=new RegExp(Ia.replace(".",""),"i")),da&&"MMMM"===O&&this._longMonthsParse[oa].test(H)||da&&"MMM"===O&&this._shortMonthsParse[oa].test(H)||!da&&this._monthsParse[oa].test(H))return oa};ob.monthsRegex=function(H){if(this._monthsParseExact)return A(this,"_monthsRegex")||
ya.call(this),H?this._monthsStrictRegex:this._monthsRegex;A(this,"_monthsRegex")||(this._monthsRegex=nc);return this._monthsStrictRegex&&H?this._monthsStrictRegex:this._monthsRegex};ob.monthsShortRegex=function(H){if(this._monthsParseExact)return A(this,"_monthsRegex")||ya.call(this),H?this._monthsShortStrictRegex:this._monthsShortRegex;A(this,"_monthsShortRegex")||(this._monthsShortRegex=nc);return this._monthsShortStrictRegex&&H?this._monthsShortStrictRegex:this._monthsShortRegex};ob.week=function(H){return W(H,
this._week.dow,this._week.doy).week};ob.firstDayOfYear=function(){return this._week.doy};ob.firstDayOfWeek=function(){return this._week.dow};ob.weekdays=function(H,O){O=u(this._weekdays)?this._weekdays:this._weekdays[H&&!0!==H&&this._weekdays.isFormat.test(O)?"format":"standalone"];return!0===H?T(O,this._week.dow):H?O[H.day()]:O};ob.weekdaysMin=function(H){return!0===H?T(this._weekdaysMin,this._week.dow):H?this._weekdaysMin[H.day()]:this._weekdaysMin};ob.weekdaysShort=function(H){return!0===H?T(this._weekdaysShort,
this._week.dow):H?this._weekdaysShort[H.day()]:this._weekdaysShort};ob.weekdaysParse=function(H,O,da){var oa;if(this._weekdaysParseExact)return S.call(this,H,O,da);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(oa=0;7>oa;oa++){var Ia=a([2E3,1]).day(oa);da&&!this._fullWeekdaysParse[oa]&&(this._fullWeekdaysParse[oa]=new RegExp("^"+this.weekdays(Ia,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[oa]=new RegExp("^"+
this.weekdaysShort(Ia,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[oa]=new RegExp("^"+this.weekdaysMin(Ia,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[oa]||(Ia="^"+this.weekdays(Ia,"")+"|^"+this.weekdaysShort(Ia,"")+"|^"+this.weekdaysMin(Ia,""),this._weekdaysParse[oa]=new RegExp(Ia.replace(".",""),"i"));if(da&&"dddd"===O&&this._fullWeekdaysParse[oa].test(H)||da&&"ddd"===O&&this._shortWeekdaysParse[oa].test(H)||da&&"dd"===O&&this._minWeekdaysParse[oa].test(H)||!da&&this._weekdaysParse[oa].test(H))return oa}};
ob.weekdaysRegex=function(H){if(this._weekdaysParseExact)return A(this,"_weekdaysRegex")||ia.call(this),H?this._weekdaysStrictRegex:this._weekdaysRegex;A(this,"_weekdaysRegex")||(this._weekdaysRegex=nc);return this._weekdaysStrictRegex&&H?this._weekdaysStrictRegex:this._weekdaysRegex};ob.weekdaysShortRegex=function(H){if(this._weekdaysParseExact)return A(this,"_weekdaysRegex")||ia.call(this),H?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;A(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
nc);return this._weekdaysShortStrictRegex&&H?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ob.weekdaysMinRegex=function(H){if(this._weekdaysParseExact)return A(this,"_weekdaysRegex")||ia.call(this),H?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;A(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nc);return this._weekdaysMinStrictRegex&&H?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ob.isPM=function(H){return"p"===(H+"").toLowerCase().charAt(0)};ob.meridiem=function(H,O,
da){return 11<H?da?"pm":"PM":da?"am":"AM"};Da("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(H){var O=H%10;O=1===ca(H%100/10)?"th":1===O?"st":2===O?"nd":3===O?"rd":"th";return H+O}});e.lang=r("moment.lang is deprecated. Use moment.locale instead.",Da);e.langData=r("moment.langData is deprecated. Use moment.localeData instead.",
V);var Ob=Math.abs,ad=Hb("ms"),bd=Hb("s"),cd=Hb("m"),dd=Hb("h"),ed=Hb("d"),fd=Hb("w"),gd=Hb("M"),hd=Hb("Q"),id=Hb("y"),jd=sb("milliseconds"),kd=sb("seconds"),ld=sb("minutes"),md=sb("hours"),nd=sb("days"),od=sb("months"),pd=sb("years"),Pb=Math.round,fc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},wc=Math.abs,nb=ab.prototype;nb.isValid=function(){return this._isValid};nb.abs=function(){var H=this._data;this._milliseconds=Ob(this._milliseconds);this._days=Ob(this._days);this._months=Ob(this._months);H.milliseconds=
Ob(H.milliseconds);H.seconds=Ob(H.seconds);H.minutes=Ob(H.minutes);H.hours=Ob(H.hours);H.months=Ob(H.months);H.years=Ob(H.years);return this};nb.add=function(H,O){return ic(this,H,O,1)};nb.subtract=function(H,O){return ic(this,H,O,-1)};nb.as=function(H){if(!this.isValid())return NaN;var O=this._milliseconds;H=Q(H);if("month"===H||"quarter"===H||"year"===H){var da=this._days+O/864E5;da=this._months+4800*da/146097;switch(H){case "month":return da;case "quarter":return da/3;case "year":return da/12}}else switch(da=
this._days+Math.round(146097*this._months/4800),H){case "week":return da/7+O/6048E5;case "day":return da+O/864E5;case "hour":return 24*da+O/36E5;case "minute":return 1440*da+O/6E4;case "second":return 86400*da+O/1E3;case "millisecond":return Math.floor(864E5*da)+O;default:throw Error("Unknown unit "+H);}};nb.asMilliseconds=ad;nb.asSeconds=bd;nb.asMinutes=cd;nb.asHours=dd;nb.asDays=ed;nb.asWeeks=fd;nb.asMonths=gd;nb.asQuarters=hd;nb.asYears=id;nb.valueOf=function(){return this.isValid()?this._milliseconds+
864E5*this._days+this._months%12*2592E6+31536E6*ca(this._months/12):NaN};nb._bubble=function(){var H=this._milliseconds,O=this._days,da=this._months,oa=this._data;0<=H&&0<=O&&0<=da||0>=H&&0>=O&&0>=da||(H+=864E5*oc(146097*da/4800+O),da=O=0);oa.milliseconds=H%1E3;H=ma(H/1E3);oa.seconds=H%60;H=ma(H/60);oa.minutes=H%60;H=ma(H/60);oa.hours=H%24;O+=ma(H/24);H=ma(4800*O/146097);da+=H;O-=oc(146097*H/4800);H=ma(da/12);oa.days=O;oa.months=da%12;oa.years=H;return this};nb.clone=function(){return hb(this)};nb.get=
function(H){H=Q(H);return this.isValid()?this[H+"s"]():NaN};nb.milliseconds=jd;nb.seconds=kd;nb.minutes=ld;nb.hours=md;nb.days=nd;nb.weeks=function(){return ma(this.days()/7)};nb.months=od;nb.years=pd;nb.humanize=function(H,O){if(!this.isValid())return this.localeData().invalidDate();var da=!1,oa=fc;"object"===typeof H&&(O=H,H=!1);"boolean"===typeof H&&(da=H);"object"===typeof O&&(oa=Object.assign({},fc,O),null!=O.s&&null==O.ss&&(oa.ss=O.s-1));H=this.localeData();O=!da;var Ia=hb(this).abs(),Ra=Pb(Ia.as("s")),
Wa=Pb(Ia.as("m")),ib=Pb(Ia.as("h")),qb=Pb(Ia.as("d")),lb=Pb(Ia.as("M")),xb=Pb(Ia.as("w"));Ia=Pb(Ia.as("y"));Ra=Ra<=oa.ss&&["s",Ra]||Ra<oa.s&&["ss",Ra]||1>=Wa&&["m"]||Wa<oa.m&&["mm",Wa]||1>=ib&&["h"]||ib<oa.h&&["hh",ib]||1>=qb&&["d"]||qb<oa.d&&["dd",qb];null!=oa.w&&(Ra=Ra||1>=xb&&["w"]||xb<oa.w&&["ww",xb]);Ra=Ra||1>=lb&&["M"]||lb<oa.M&&["MM",lb]||1>=Ia&&["y"]||["yy",Ia];Ra[2]=O;Ra[3]=0<+this;Ra[4]=H;O=U.apply(null,Ra);da&&(O=H.pastFuture(+this,O));return H.postformat(O)};nb.toISOString=Fa;nb.toString=
Fa;nb.toJSON=Fa;nb.locale=Kb;nb.localeData=Rb;nb.toIsoString=r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fa);nb.lang=Ec;E("X",0,0,"unix");E("x",0,0,"valueOf");P("x",rc);P("X",/[+-]?\d+(\.\d{1,3})?/);Z("X",function(H,O,da){da._d=new Date(1E3*parseFloat(H))});Z("x",function(H,O,da){da._d=new Date(ca(H))});e.version="2.29.1";var Gc=Ua;e.fn=Ya;e.min=function(){var H=[].slice.call(arguments,0);return eb("isBefore",H)};e.max=function(){var H=[].slice.call(arguments,
0);return eb("isAfter",H)};e.now=function(){return Date.now?Date.now():+new Date};e.utc=a;e.unix=function(H){return Ua(1E3*H)};e.months=function(H,O){return hc(H,O,"months")};e.isDate=g;e.locale=Da;e.invalid=t;e.duration=hb;e.isMoment=h;e.weekdays=function(H,O,da){return cc(H,O,da,"weekdays")};e.parseZone=function(){return Ua.apply(null,arguments).parseZone()};e.localeData=V;e.isDuration=gb;e.monthsShort=function(H,O){return hc(H,O,"monthsShort")};e.weekdaysMin=function(H,O,da){return cc(H,O,da,"weekdaysMin")};
e.defineLocale=K;e.updateLocale=function(H,O){if(null!=O){var da=xc;if(null!=ub[H]&&null!=ub[H].parentLocale)ub[H].set(y(ub[H]._config,O));else{var oa=Va(H);null!=oa&&(da=oa._config);O=y(da,O);null==oa&&(O.abbr=H);O=new q(O);O.parentLocale=ub[H];ub[H]=O}Da(H)}else null!=ub[H]&&(null!=ub[H].parentLocale?(ub[H]=ub[H].parentLocale,H===Da()&&Da(H)):null!=ub[H]&&delete ub[H]);return ub[H]};e.locales=function(){return Ha(ub)};e.weekdaysShort=function(H,O,da){return cc(H,O,da,"weekdaysShort")};e.normalizeUnits=
Q;e.relativeTimeRounding=function(H){return void 0===H?Pb:"function"===typeof H?(Pb=H,!0):!1};e.relativeTimeThreshold=function(H,O){if(void 0===fc[H])return!1;if(void 0===O)return fc[H];fc[H]=O;"s"===H&&(fc.ss=O-1);return!0};e.calendarFormat=function(H,O){H=H.diff(O,"days",!0);return-6>H?"sameElse":-1>H?"lastWeek":0>H?"lastDay":1>H?"sameDay":2>H?"nextDay":7>H?"nextWeek":"sameElse"};e.prototype=Ya;e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",
DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return e})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(e,u,B,A,p,l,k){return new (e(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(g){var d=[];k.hasGeometryOperations(g)&&d.push(l.enableGeometryOperations());
return p(d)}}))})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(e,u,B,A,p){var l=/(\/(MapServer|FeatureServer)).*/ig;return{hasGeometryOperations:function(k){return u.some(k,function(g){return g.hasGeometryOperations?g.hasGeometryOperations():p.hasGeometryOperations(g)})},hasFeatureSetOperations:function(k){return u.some(k,function(g){return g.hasFeatureSetOperations?g.hasFeatureSetOperations():p.hasFeatureSetOperations(g)})},
hasVariables:function(k,g){return u.some(k,function(d){return u.some(g,function(c){return d.hasVariable?d.hasVariable(c):p.hasVariable(d,c)})})},isAsync:function(k){return u.some(k,function(g){return g.async})},getServiceUrl:function(k){return l.test(k)?k.replace(l,"$1"):null}}})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(e,u,
B,A,p,l,k,g,d){return e(g,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(c,a,b,f,t,n){this.values=[];this._symbols={};this.infos=[];c&&!c.declaredClass?(a=c,b=n&&n.geometryType,this.defaultSymbol=(c=a.defaultSymbol)&&(c.declaredClass?c:k.fromJson(c,n)),this.attributeField=a.field1,this.attributeField2=a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,this.setValueExpression(a.valueExpression),this.valueExpressionTitle=
a.valueExpressionTitle,this.legendOptions=a.legendOptions,a.backgroundFillSymbol&&(this.backgroundFillSymbol=k.fromJson(a.backgroundFillSymbol,b?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===b&&this.hasVisualVariables("sizeInfo",!1)&&(n={geometryType:"esriGeometryPoint"}),u.forEach(a.uniqueValueInfos,function(m){this._addValueInfo(m,n)},this)):(this.defaultSymbol=c,this.attributeField=a,this.attributeField2=b,this.attributeField3=f,this.fieldDelimiter=t);this._multiple=!!this.attributeField2},
addValue:function(c,a){c=B.isObject(c)?c:{value:c,symbol:a};this._addValueInfo(c)},removeValue:function(c){var a=u.indexOf(this.values,c);-1!==a&&(this.values.splice(a,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[c],this.infos.splice(a,1))},getUniqueValueInfo:function(c){var a=this.attributeField,b=c.attributes;if(this.valueExpression)a=this._getDataValue(c,this._uvInfo,null,this._cache.uvInfo),a=this._normalizeNullValue(a);else if(this._multiple){c=this.attributeField2;
var f=this.attributeField3,t=[];a&&t.push(this._normalizeNullValue(b[a]));c&&t.push(this._normalizeNullValue(b[c]));f&&t.push(this._normalizeNullValue(b[f]));a=t.join(this.fieldDelimiter||"")}else a=B.isFunction(a)?a(c):b[a],a=this._normalizeNullValue(a);return this._symbols[a]},setValueExpression:function(c){this.valueExpression=c;this._uvInfo={valueExpression:c};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(){var c=this.inherited(arguments);this.valueExpression&&
(c=c.concat(d.extractFieldNames(this.valueExpression)));c.sort();return u.filter(c,function(a,b){return 0===b||c[b-1]!==a})},getSymbol:function(c){return(c=this.getUniqueValueInfo(c))&&c.symbol||this.defaultSymbol},_addValueInfo:function(c,a){var b=c.value;this.values.push(b);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(c);var f=c.symbol;f&&!f.declaredClass&&(c.symbol=k.fromJson(f,a));this._symbols[b]=c},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(c){return this._hasNullKeyword&&
null==c?this._nullCode:c},_evalNullKeyword:function(c){var a=this.fieldDelimiter||"",b=new RegExp("(^|"+a+")("+this._nullCode+")("+a+"|$)");return u.some(c,function(f){return b.test(f)})},toJson:function(){var c=l.fixJson;var a={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:B.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:u.map(this.infos||[],function(b){b=B.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.value+="";return c(b)})};this.backgroundFillSymbol&&(a.backgroundFillSymbol=this.backgroundFillSymbol.toJson());a=B.mixin(this.inherited(arguments),a);return c(a)}})})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(e,u,B,A,p,l,k,g,d){return e(g,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(c,a,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(c&&!c.declaredClass){var f=c;a=b&&b.geometryType;this.attributeField=f.field;this.setValueExpression(f.valueExpression);this.valueExpressionTitle=f.valueExpressionTitle;this.legendOptions=f.legendOptions;this.defaultSymbol=(c=f.defaultSymbol)&&(c.declaredClass?c:k.fromJson(c,b));this.backgroundFillSymbol=(c=f.backgroundFillSymbol)&&
(c.declaredClass?c:k.fromJson(c,a?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],f,this);var t=f.minValue;(c=f.classBreakInfos)&&c[0]&&l.isDefined(c[0].classMaxValue)&&u.forEach(c,function(n){var m=n.classMaxValue;n.minValue=t;t=n.maxValue=m},this);"esriGeometryPolygon"===a&&(this.hasVisualVariables("sizeInfo",!1)||k.isPointSymbol(k.getFirstSupportedSymbol(u.map(c,function(n){return n.symbol}))))&&
(b={geometryType:"esriGeometryPoint"});u.forEach(c,function(n){this._addBreakInfo(n,b)},this)}else this.defaultSymbol=c,this.attributeField=a},addBreak:function(c,a,b){c=B.isObject(c)?c:{minValue:c,maxValue:a,symbol:b};this._addBreakInfo(c)},removeBreak:function(c,a){var b=this.breaks,f,t=b.length,n=this._symbols;for(f=0;f<t;f++){var m=b[f];if(m[0]==c&&m[1]==a){b.splice(f,1);delete n[c+"-"+a];this.infos.splice(f,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(c){var a=
this.attributeField,b=c.attributes,f=this.breaks,t=f.length,n=this.isMaxInclusive;if(this.valueExpression)c=this._getDataValue(c,this._cbInfo,null,this._cache.cbInfo);else if(B.isFunction(a))c=a(c);else if(c=parseFloat(b[a]),a=this.normalizationType,a){var m=parseFloat(this.normalizationTotal);b=parseFloat(b[this.normalizationField]);if("log"===a)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(m))c=c/m*100;else if("field"===a){if(isNaN(c)||isNaN(b))return-1;c/=b}}if(null!=c&&!isNaN(c)&&
"number"===typeof c)for(b=0;b<t;b++)if(a=f[b],a[0]<=c&&(n?c<=a[1]:c<a[1]))return b;return-1},getBreakInfo:function(c){c=this.getBreakIndex(c);return-1!==c?this.infos[c]:null},getSymbol:function(c){return(c=this.breaks[this.getBreakIndex(c)])?this._symbols[c[0]+"-"+c[1]]:this.defaultSymbol},setMaxInclusive:function(c){this.isMaxInclusive=c},setValueExpression:function(c){this.valueExpression=c;this._cbInfo={valueExpression:c};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(){var c=
this.inherited(arguments);this.valueExpression&&(c=c.concat(d.extractFieldNames(this.valueExpression)));c.sort();return u.filter(c,function(a,b){return 0===b||c[b-1]!==a})},isContinuousRenderer:function(){var c=!1;if(this.infos&&1===this.infos.length){var a=this.attributeField,b=this.normalizationField,f=this.valueExpression;c=this.getVisualVariablesForType("colorInfo",!1)||[];var t=this.getVisualVariablesForType("sizeInfo",!1)||[],n=this.getVisualVariablesForType("opacityInfo",!1)||[];c=c.concat(t).concat(n);
c=u.some(c,function(m){return(m.field===a||m.valueExpression===f)&&m.normalizationField==b})}return c},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"]],_copy:function(c,a,b){u.forEach(c,function(f){var t=f.split(":");if(1<t.length){f=t[0];var n=this["_"+f+"Enums"];if("rest"===t[1]){var m="1";var h="0"}else"sdk"===t[1]&&(m="0",h="1")}t=a[f];if(void 0!==t&&(b[f]=t,n&&m)){var v,r=n.length;for(v=0;v<r;v++)if(n[v][m]===t){b[f]=n[v][h];break}}},this)},_addBreakInfo:function(c,a){var b=c.minValue,f=c.maxValue;this.breaks.push([b,f]);this.infos.push(c);var t=c.symbol;t&&!t.declaredClass&&(c.symbol=k.fromJson(t,
a));this._symbols[b+"-"+f]=c.symbol},toJson:function(){var c=this.infos||[],a=l.fixJson,b=c[0]&&c[0].minValue,f=this.backgroundFillSymbol;c=B.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:B.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:f&&f.toJson(),minValue:-Infinity===b?-Number.MAX_VALUE:b,classBreakInfos:u.map(c,
function(t){t=B.mixin({},t);t.symbol=t.symbol&&t.symbol.toJson();t.classMaxValue=Infinity===t.maxValue?Number.MAX_VALUE:t.maxValue;delete t.minValue;delete t.maxValue;return a(t)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,c);c.hasOwnProperty("normalizationType")&&!c.normalizationType&&delete c.normalizationType;c.hasOwnProperty("classificationMethod")&&!c.classificationMethod&&delete c.classificationMethod;return a(c)}})})},
"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){var n=e(g,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(m){l.isDefined(m)||(m={});m.attributeField=
m.attributeField||"Magnitude";m.rotationInfo=m.rotationInfo||this._getRotationInfo(m);e.safeMixin(this,m);this.setRotationInfo(this.rotationInfo);this.style=this.style||n.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:f.fromJson(this.singleArrowSymbol));this.renderer=new d(this._getDefaultSymbol(),m.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(m){return this.renderer&&
this.renderer.getSymbol(m)},setVisualVariables:function(m){m=A.filter(m,function(h){if("sizeInfo"===h.type)return l.isDefined(this._updateSizeInfo(h))},this);this.inherited(arguments);return this},setSizeInfo:function(m){this._updateSizeInfo(m);this.inherited(arguments);return this},setProportionalSymbolInfo:function(m){this.setSizeInfo(m);return this},setColorInfo:function(m){return this},_updateRenderer:function(m){return l.isDefined(this.renderer)?m===n.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():
m===n.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():m===n.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():m===n.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():m===n.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():m===n.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():m===n.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():m===n.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():m===n.STYLE_SCALAR?this._createSimpleScalarRenderer():m===n.STYLE_WIND_BARBS?
this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(m){return m&&l.isDefined(m.minSize)&&l.isDefined(m.maxSize)&&l.isDefined(m.minDataValue)&&l.isDefined(m.maxDataValue)?(this.style===n.STYLE_WIND_BARBS&&(m.minSize=m.maxSize),m.field=m.field||"Magnitude",m.type="sizeInfo",this.minDataValue=m.minDataValue,this.maxDataValue=m.maxDataValue,m):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([56,
168,0]));var m=[0,1E-6,3.5,7,10.5,14];if(l.isDefined(this.minDataValue)&&l.isDefined(this.maxDataValue)){var h=(this.maxDataValue-this.minDataValue)/5;m=[];var v;var r=this.minDataValue;for(v=0;6>v;v++)m[v]=r,r+=h}this._addBreaks(m,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,
47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,
250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var m=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A.forEach(m,function(h,v){m[v]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var m=
[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A.forEach(m,function(h,v){m[v]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var m=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];A.forEach(m,function(h,v){m[v]*=3.6});this.renderer.defaultSymbol=
this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([177,
177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new a({url:t.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var m=[],h;for(h=0;150>=h;h+=5)m.push(h);var v="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var r=new a({url:t.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=r;for(h=0;h<m.length-1;h++)0===h?this.renderer.addBreak({minValue:m[h],maxValue:m[h+1],symbol:r}):this.renderer.addBreak({minValue:m[h],maxValue:m[h+1],symbol:(new c).setPath(v[h]).setOutline((new b).setWidth(1.5)).setSize(20).setColor(new k([0,0,0,255]))})},_getDefaultSymbol:function(m){return(new c).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new b).setWidth(0)).setSize(20).setColor(m||
new k([0,92,230]))},_getRotationInfo:function(m){var h=m&&m.flowRepresentation||n.FLOW_FROM,v=m&&m.rotationField||"Direction",r=n.FLOW_FROM;return{field:function(C){C=C.attributes[v];return h===r?C:C+180},type:"geographic"}},_addBreaks:function(m,h){if(!l.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(m&&h&&m.length&&h.length&&m.length>=h.length))return Error("AddBreaks: Input arguments break values and colors not valid");var v;for(v=0;v<h.length;v++)this.renderer.addBreak({minValue:m[v],
maxValue:m[v+1],symbol:this._getDefaultSymbol(new k(h[v]))})},toJson:function(){var m=u.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===n.STYLE_SINGLE_ARROW&&(m.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return l.fixJson(m)}});u.mixin(n,{STYLE_WIND_BARBS:"wind_speed",
STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});return n})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f){return e(c,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(t){this.dotSize=t.dotSize||3;this.dotValue=t.dotValue;this.fields=t.fields;this.outline=t.outline;this.backgroundColor=t.backgroundColor;this.exactCount=t.exactCount||!0;this.dotShape=t.dotShape||"square";this.legendOptions=t.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;window.CanvasRenderingContext2D||console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(t){this._currentGraphic=t;if(!this._supportsCanvas)return null;this._map||(this._map=t.getLayer()._map,this._objectIdField=t.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",
u.hitch(this,function(h){this._currentMapScale=this._map.getScale();this._currentResolution=h.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]]){var n=this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]];var m=this._getShapeProperties(t);n.setOffset(m.dx,m.dy);return n}n=this._generateFieldsCount(this.fields,t.attributes,this.dotValue);
m=this._getShapeProperties(t);if(!m.width||!m.height)return null;n=new a(this._generateImageSrc(m.width,m.height,n,m.minXY,m.maxXY),this.outline,m.width,m.height);n.setOffset(m.dx,m.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][t.attributes[this._objectIdField]]=n},_generateFieldsCount:function(t,n,m){var h;for(h=t.length-1;0<=h;h--){var v=n[t[h].name]/m;t[h].numPoints=Math.round(v)}return t},_getShapeProperties:function(t){var n=
t.geometry.getExtent();n.contains(this._map.extent)&&(n=this._map.extent);var m=Math.ceil(n.getWidth()/this._currentResolution);var h=Math.ceil(n.getHeight()/this._currentResolution);var v=this._map.toScreen(new f(n.xmin,n.ymin,n.spatialReference));n=this._map.toScreen(new f(n.xmax,n.ymax,n.spatialReference));t=t.getLayer().getNavigationTransform();return{minXY:v,maxXY:n,dx:(v.x-t.dx)%m,dy:(n.y-t.dy)%h,width:m,height:h}},_generateImageSrc:function(t,n,m,h,v,r){var C=this.dotSize,w;this._canvas?(this._canvas.width=
t,this._canvas.height=n):this._canvas=this._initCanvas(t,n);var y=this._canvas.getContext("2d");if(r=r||this.backgroundColor)y.fillStyle=r.toCss(!0),y.fillRect(0,0,t,n),y.fill();for(r=m.length-1;0<=r;r--)for(y.fillStyle=m[r].color.toCss(!0),w=m[r].numPoints-1;0<=w;w--){var q=this._getRandomPoint(t,n,h,v);"square"===this.dotShape?y.fillRect(q.x,q.y,C,C):"circle"===this.dotShape&&(y.beginPath(),y.arc(q.x,q.y,C/2,0,2*Math.PI,!0));y.fill()}return this._canvas.toDataURL()},_initCanvas:function(t,n){t=
A.create("canvas",{id:"canvas",width:t+"px",height:n+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(t);return t},_getRandomInt:function(t,n){return Math.floor(Math.random()*(n-t+1)+t)},_getRandomPoint:function(t,n,m,h){var v={},r=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&t*n>this._exactCountMinArea){t=!1;do v.x=this._getRandomInt(m.x,h.x),v.y=this._getRandomInt(h.y,m.y),t=new b(v.x,v.y),t=this._checkPointShapeBounds(t,
this.dotSize+r,this._currentGraphic.geometry),!0===t&&(v.x-=m.x,v.y-=h.y);while(!1===t)}else v.x=this._getRandomInt(0,t),v.y=this._getRandomInt(0,n);return v},_checkPointShapeBounds:function(t,n,m){var h=null;h=!1;var v=!0,r=0;do{switch(r){case 1:t.x+=n;break;case 2:t.y+=n;break;case 3:t.x-=n}h=this._map.toMap(t);h=m.contains(h);!1===h&&(v=!1);r+=1}while(3>=r&&!0===v);return h},setDotSize:function(t){0<t&&(this.dotSize=t)},setDotValue:function(t){0<t&&(this.dotValue=t)},setOutline:function(t){this.outline=
t},setBackgroundColor:function(t){this.backgroundColor=t},toJson:function(){var t=u.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:d.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?l.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:B.map(this.fields,function(n){return g.fixJson({color:d.toJsonColor(n.color),name:n.name})}),legendOptions:this.legendOptions&&g.fixJson({backgroundColor:d.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,
outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return g.fixJson(t)}})})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(e,u,B,A,p,l,k){return e(k,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(g){this.setRendererInfos(g&&g.rendererInfos||
[])},setRendererInfos:function(g){this.rendererInfos=g;this._setRangeType();return this},getSymbol:function(g){var d=this.getRendererInfo(g);return d&&d.renderer&&d.renderer.getSymbol(g)},getRendererInfo:function(g){g=g.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(g.getZoom()):this.getRendererInfoByScale(g.getScale())},getRendererInfoByZoom:function(g){var d=this.rendererInfos,c,a=0;do{var b=d[a];g>=b.minZoom&&g<=b.maxZoom&&(c=b);a++}while(!c&&a<d.length);return c},
getRendererInfoByScale:function(g){var d=this.rendererInfos,c,a=0;do{var b=d[a];var f=b.minScale;var t=b.maxScale;var n=!f;var m=!t;!n&&g<=f&&(n=!0);!m&&g>=t&&(m=!0);n&&m&&(c=b);a++}while(!c&&a<d.length);return c},addRendererInfo:function(g){var d=0,c=this.rendererInfos,a=g.hasOwnProperty("minZoom")?"minZoom":"minScale",b=c.length;do{var f=c[d];if(b===d||g[a]<f[a]){c.splice(d,0,g);this._setRangeType();var t=!0}d++}while(!t&&d<b);return this},_setRangeType:function(){var g=this.rendererInfos;if(g=
g&&g[0])this.rangeType=g.hasOwnProperty("minZoom")?"zoom":g.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var g=this.rendererInfos||[],d=g[0]&&g[0].minScale;g=B.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<d?d:0,rendererInfos:u.map(g,function(c){return l.fixJson({maxScale:0<c.maxScale?c.maxScale:0,renderer:c.renderer&&c.renderer.toJson()})})});return l.fixJson(g)}})})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(e,u,B,A,p,l,k,g,d,c){var a=e(c,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,f){this.infos=b;this.timeUnits=f||"day";b.sort(function(t,n){return t.minAge<n.minAge?-1:t.minAge>n.minAge?1:0})},getAgedSymbol:function(b,f){var t=f.getLayer();f=f.attributes;var n=k.isDefined;b=g.fromJson(b.toJson());var m=t._map.timeExtent.endTime;if(!m)return b;var h=p.difference(new Date(f[t._startTimeField]),m,this.timeUnits);u.some(this.infos,function(v){if(h>=v.minAge&&h<=v.maxAge){var r=
v.color,C=v.size;v=v.alpha;r&&b.setColor(r);n(C)&&this._setSymbolSize(b,C);n(v)&&b.color&&(b.color.a=v);return!0}},this);return b},toJson:function(){var b={agerClassBreakInfos:[]},f;b.timeUnits=this._getRestUnits(this.timeUnits);for(f=0;f<this.infos.length;f+=1){var t=this.infos[f];var n={};n.oldestAge=Infinity===t.maxAge?null:t.maxAge;n.size=t.size;t.color&&(n.color=d.toJsonColor(t.color));t.alpha&&(n.alpha=Math.round(255*t.alpha));b.agerClassBreakInfos[f]=n}return b},_getRestUnits:function(b){var f=
"esriTimeUnitsDays";switch(b){case a.UNIT_SECONDS:f="esriTimeUnitsSeconds";break;case a.UNIT_MILLISECONDS:f="esriTimeUnitsMilliseconds";break;case a.UNIT_HOURS:f="esriTimeUnitsHours";break;case a.UNIT_MINUTES:f="esriTimeUnitsMinutes";break;case a.UNIT_MONTHS:f="esriTimeUnitsMonths";break;case a.UNIT_WEEKS:f="esriTimeUnitsWeeks";break;case a.UNIT_YEARS:f="esriTimeUnitsYears"}return f}});B.mixin(a,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});return a})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,u,B,A){return e(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(p,l){},_setSymbolSize:function(p,l){switch(p.type){case "simplemarkersymbol":p.setSize(l);break;case "picturemarkersymbol":p.setWidth(l);p.setHeight(l);break;case "simplelinesymbol":case "cartographiclinesymbol":p.setWidth(l);
break;case "simplefillsymbol":case "picturefillsymbol":p.outline&&p.outline.setWidth(l)}}})})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(e,u,B,A,p,l,k,g){return e(g,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(d,c,a){this.colorRange=d;this.sizeRange=c;this.alphaRange=a},getAgedSymbol:function(d,c){var a=c.getLayer(),b=c.attributes;d=l.fromJson(d.toJson());
var f=a._map.timeExtent;c=f.startTime;f=f.endTime;if(!c||!f)return d;c=c.getTime();f=f.getTime();a=new Date(b[a._startTimeField]);a=a.getTime();a<c&&(a=c);a=f===c?1:(a-c)/(f-c);if(c=this.sizeRange)b=c[0],f=c[1],c=Math.abs(f-b)*a,this._setSymbolSize(d,b<f?b+c:b-c);if(c=this.colorRange){f=c[0];var t=c[1],n=Math.round;b=new B;var m=f.r,h=t.r;c=Math.abs(h-m)*a;b.r=n(m<h?m+c:m-c);m=f.g;h=t.g;c=Math.abs(h-m)*a;b.g=n(m<h?m+c:m-c);m=f.b;h=t.b;c=Math.abs(h-m)*a;b.b=n(m<h?m+c:m-c);f=f.a;t=t.a;c=Math.abs(t-
f)*a;b.a=f<t?f+c:f-c;d.setColor(b)}b=d.color;(c=this.alphaRange)&&b&&(f=c[0],t=c[1],c=Math.abs(t-f)*a,b.a=f<t?f+c:f-c);return d},toJson:function(){var d={};this.sizeRange&&(d.sizeRange=this.sizeRange);this.colorRange&&(d.colorRange=[k.toJsonColor(this.colorRange[0]),k.toJsonColor(this.colorRange[1])]);this.alphaRange&&(d.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return d}})})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./Renderer"],function(e,u,B,A,p){return e(p,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(l,k,g,d){this.observationRenderer=l;this.latestObservationRenderer=k;this.trackRenderer=g;this.observationAger=d},getSymbol:function(l){var k=l.getLayer(),g=this.getObservationRenderer(l),d=g&&g.getSymbol(l),c=this.observationAger;k.timeInfo&&k._map.timeExtent&&g===this.observationRenderer&&c&&d&&(d=c.getAgedSymbol(d,l));return d},getObservationRenderer:function(l){return 0===
l.getLayer()._getKind(l)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var l={type:"temporal"};l.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(l.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(l.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(l.observationAger=this.observationAger.toJson());return l}})})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(e,u,B,A,p,l,k,g,d,c){return e([c],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)?("string"==typeof a&&(a=JSON.parse(a)),u.mixin(this,a),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),
this.gradient=this._generateGradient(this.colorStops||this.colors)):console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=a.attributes.imageData;a=a.attributes.size;if(!a)return null;var f=this._getContext(a[0],a[1]),t=f.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&
1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&t.data instanceof window.CanvasPixelArray)for(var n=t.data,m=n.length;m--;)n[m]=b[m];else t.data.set(b);f.putImageData(t,0,0);return new g(f.canvas.toDataURL(),a[0],a[1])},setColors:function(a){a&&(a instanceof Array||a.colors)&&(this.gradient=this._generateGradient(a.colors||a),this.colors=a);return this},setColorStops:function(a){a&&(a instanceof Array||a.colorStops)&&
(this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a);return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=u.mixin(this.inherited(arguments),
{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);B.forEach(a.colorStops,function(b){b.color=d.toJsonColor(b.color)});return k.fixJson(a)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},
_initCanvas:function(a,b){var f=A.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);f.width=a;f.height=b;document.body.appendChild(f);return f},_generateGradient:function(a,b){b||(b=512);a=this._colorsToStops(a);for(var f=this._getContext(1,b||512),t=f.createLinearGradient(0,0,0,b),n=0,m;n<a.length;n++)m=a[n],t.addColorStop(m.ratio,m.color.toCss(!0));f.fillStyle=t;f.fillRect(0,0,1,b);return f.getImageData(0,0,1,b).data},_colorsToStops:function(a){var b=
[];if(!a[0])return b;if(null!=a[0].ratio)b=B.map(a,function(v){return{ratio:v.ratio,color:this._toColor(v.color)}},this);else if(null!=a[0].value){var f=Infinity;b=-Infinity;var t=0,n;for(n=0;n<a.length;n++){var m=a[n].value;m<f&&(f=m);m>b&&(b=m)}t=b-f;this.maxPixelIntensity=b;this.minPixelIntensity=f;b=B.map(a,function(v){var r=v.value;v=this._toColor(v.color);return{value:r,ratio:(r-f)/t,color:v}},this)}else{var h=a.length-1;b=B.map(a,function(v,r){return{color:this._toColor(v),ratio:r/h}},this)}return b},
_toColor:function(a){a.toRgba||a.declaredClass||(a=new d(a));return a}})})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(e,u,B,A,p,l,k,g){var d={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};e=e(null,{declaredClass:"esri.renderer.StretchRenderer",
constructor:function(c){c=c||{};this.stretchType=d.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;B.mixin(this,c);this.colorRamp=g.fromJson(c.colorRamp)},toJson:function(){var c={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,
statistics:B.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:B.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return l.fixJson(c)},toRenderingRule:function(c){c=c||{};var a=new k;a.functionName="Stretch";var b=this._convertStretchTypeEnumToIndex(this.stretchType),f={StretchType:b,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};
l.isDefined(this.min)&&(f.Min=this.min);l.isDefined(this.min)&&(f.Max=this.max);3===b?(f.NumberOfStandardDeviations=this.numberOfStandardDeviations,a.outputPixelType="U8"):6===b?(f.MinPercent=parseFloat(this.minPercent),f.MaxPercent=parseFloat(this.maxPercent),a.outputPixelType="U8"):5===b?a.outputPixelType="U8":9===b&&(f.SigmoidStrengthLevel=this.sigmoidStrengthLevel);a.functionArguments=f;a.variableName="Raster";return this.colorRamp?(b=new k,b.functionArguments=c.convertToColormap?{Colormap:g.convertColorRampToColormap(this.colorRamp,
256)}:{colorRamp:this.colorRamp.toJson()},b.variableName="Raster",b.functionName="Colormap",b.functionArguments.Raster=a,b):a},_convertStretchTypeEnumToIndex:function(c){var a=0;c===d.TYPE_STANDARDDEVIATION?a=3:c===d.TYPE_HISTOGRAMEQUALIZATION?a=4:c===d.TYPE_MINMAX?a=5:c===d.TYPE_PERCENTCLIP?a=6:c===d.TYPE_SIGMOID&&(a=9);return a},_convertStretchTypeIndexToEnum:function(c){var a=d.TYPE_NONE;3===c?a=d.TYPE_STANDARDDEVIATION:4===c?a=d.TYPE_HISTOGRAMEQUALIZATION:5===c?a=d.TYPE_MINMAX:6===c?a=d.TYPE_PERCENTCLIP:
9===c&&(a=d.TYPE_SIGMOID);return a}});B.mixin(e,d);return e})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,u,B,A,p){var l=e(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(k){if(u.isObject(k)){this._isRFTJson(k)&&(this._isTemplate=!0,this._templateJson=k);var g=
0;this.functionName=k.rasterFunction||k.name;this.functionArguments=u.clone(k.rasterFunctionArguments||k.arguments);u.mixin(this,k);if(k=this.functionArguments)if(k.Raster=this._toRasterFunction(k.Raster),k.Raster2=this._toRasterFunction(k.Raster2),k.DEM=this._toRasterFunction(k.DEM),k.FillRaster=this._toRasterFunction(k.FillRaster),k.Rasters&&k.Rasters.length)for(g=0;g<k.Rasters.length;g++)k.Rasters[g]=this._toRasterFunction(k.Rasters[g])}},_isRFTJson:function(k){return k.name&&k.arguments&&k.function&&
k.hasOwnProperty("functionType")},_toRasterFunction:function(k){return k&&(k.rasterFunction||k.functionName)?new l(k):k},_rfToJson:function(k){k&&"esri.layers.RasterFunction"===k.declaredClass&&(k=k.toJson());return k},toJson:function(){if(this._isTemplate)return this._templateJson;var k=u.clone(this.functionArguments||this.arguments);if(k&&(k.Raster=this._rfToJson(k.Raster),k.Raster2=this._rfToJson(k.Raster2),k.DEM=this._rfToJson(k.DEM),k.FillRaster=this._rfToJson(k.FillRaster),k.Rasters&&k.Rasters.length)){var g,
d=[];for(g=0;g<k.Rasters.length;g++)d.push(this._rfToJson(k.Rasters[g]));k.Rasters=d}return p.filter({rasterFunction:this.functionName,rasterFunctionArguments:k,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(c){if(null!==c&&void 0!==c)return!0})}});return l})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),
function(e,u,B,A,p,l,k){function g(r){if(null==r||"algorithmic"!==r.type&&!r.fromColor)return r;var C=r.declaredClass?new A:e.clone(r);C.fromColor=r.toColor;C.toColor=r.fromColor;C.algorithm=r.algorithm;return C}function d(r){if(null==r)return null;if("multipart"===r.type||r.colorRamps&&0<r.colorRamps.length){var C=r.declaredClass?new p:e.clone(r);C.colorRamps=u.map(r.colorRamps.slice().reverse(),function(w){return g(w)});return C}return g(r)}function c(r,C,w){if(!r)return{id:null,isInverted:!1};
var y=r.name;y&&(r.fromColor||r.colorRamps)&&(r.name=void 0);var q=a(r,C,w);if(q)return y&&(r.name=y),{id:q,isInverted:!1};q=a(r,C,w,!0);y&&(r.name=y);return q?{id:q,isInverted:!0}:y&&(q=a(r,C,w))?{id:q,isInverted:!1}:{id:null,isInverted:!1}}function a(r,C,w,y){if(r){y&&(r=d(r));C=C||m;w=w||h;var q=null;y=r.declaredClass;var x,E;if((x="string"===typeof r?r:r.name)&&u.some(w,function(z){if(z.name===x)return q=z.id,!0})&&q)return q;"esri.tasks.AlgorithmicColorRamp"===y?u.some(C,function(z){if(f(r.fromColor.toRgb(),
z.fromColor)&&f(r.toColor.toRgb(),z.toColor))return q=z.id,!0},this):"esri.tasks.MultipartColorRamp"===y&&u.some(C,function(z){if(r.colorRamps&&z.colorRamps&&r.colorRamps.length===z.colorRamps.length&&(E=r.colorRamps,!u.some(z.colorRamps,function(D,F){if(!f(E[F].fromColor.toRgb(),D.fromColor)||!f(E[F].toColor.toRgb(),D.toColor))return!0},this))){if(q)return!0;q=z.id}},this);return q}}function b(r){var C=new A,w=r.algorithm;C.fromColor=l.toDojoColor(r.fromColor);C.toColor=l.toDojoColor(r.toColor);
w?"esriCIELabAlgorithm"===w?C.algorithm="cie-lab":"esriHSVAlgorithm"===w?C.algorithm="hsv":"esriLabLChAlgorithm"===w&&(C.algorithm="lab-lch"):C.algorithm="hsv";return C}function f(r,C){if(!r||!C)return!1;r=r.slice(0,3);C=C.slice(0,3);return!u.some(r,function(w,y){if(w>C[y]+2||w<C[y]-2)return!0})}function t(r,C,w){r=k.toLAB(r);C=k.toLAB(C);return k.toRGB({l:r.l*(1-w)+w*C.l,a:r.a*(1-w)+w*C.a,b:r.b*(1-w)+w*C.b})}var n={},m=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,
190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,
255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,
130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,
80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],
toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,
42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,
45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,
48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,
52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,
55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],
toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,
62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,
112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,
115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,
127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,
130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,
141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,
145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,
157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,
160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,
173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,
176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,
189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,
193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,
117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,
131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",
colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",
fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,
1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,
8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,
50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,
12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,
12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,
11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,
10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,
100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,
252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,
255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,
9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,
12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,
15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,
17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,
18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,
17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,
16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],
toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,
164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,
199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,
234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,
7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",
type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,
225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,
13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,
153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],
toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],
toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],
toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",
fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",
fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],h=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},
{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},
{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",
id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",
id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},
{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},
{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",
name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],v=new B({data:h});e.mixin(n,{predefinedColorRamps:m,predefinedColorRampNameMap:h,getColorRampName:function(r){r=c(r);return r.id?(r=v.query({id:r.id}),r[0]?r[0].name:null):null},fromJson:function(r){var C=null;
if(!r)return C;"multipart"===r.type?(C=new p,C.colorRamps=u.map(r.colorRamps,function(w){return b(w)},this)):"algorithmic"===r.type&&(C=b(r));return C},colorsEqual:f,getColorRampId:c,invertColorRamp:d,convertColorRampToColormap:function(r,C){if(r&&C){var w=r.colorRamps?r.colorRamps.length:1,y=[],q=[],x,E,z,D,F=0,J=0;for(F=0;F<w;F++)y[F]={},y[F].start=J,y[F].end=J+1/w,J=y[F].end;for(F=0;F<C;F++){var L=(F+.5)/C;u.forEach(y,function(Q,ba){L>=Q.start&&L<Q.end&&(D=(L-Q.start)/(Q.end-Q.start),1<y.length?
(x=k.getDojoColor(r.colorRamps[ba].fromColor),E=k.getDojoColor(r.colorRamps[ba].toColor)):(x=k.getDojoColor(r.fromColor),E=k.getDojoColor(r.toColor)),z=t(x,E,D),q.push([F,z.r,z.g,z.b]))},this)}return q}},interpolateLabColor:t});return n})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(e,u,B){return e("dojo.store.Memory",null,{constructor:function(A){for(var p in A)this[p]=A[p];this.setData(this.data||[])},data:null,idProperty:"id",
index:null,queryEngine:B,get:function(A){return this.data[this.index[A]]},getIdentity:function(A){return A[this.idProperty]},put:function(A,p){var l=this.data,k=this.index,g=this.idProperty;g=A[g]=p&&"id"in p?p.id:g in A?A[g]:Math.random();if(g in k){if(p&&!1===p.overwrite)throw Error("Object already exists");l[k[g]]=A}else k[g]=l.push(A)-1;return g},add:function(A,p){(p=p||{}).overwrite=!1;return this.put(A,p)},remove:function(A){var p=this.index,l=this.data;if(A in p)return l.splice(p[A],1),this.setData(l),
!0},query:function(A,p){return u(this.queryEngine(A,p)(this.data))},setData:function(A){A.items?(this.idProperty=A.identifier||this.idProperty,A=this.data=A.items):this.data=A;this.index={};for(var p=0,l=A.length;p<l;p++)this.index[A[p][this.idProperty]]=p}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(e,u,B){var A=function(p){function l(g){p[g]=function(){var d=arguments,c=B(p,function(a){Array.prototype.unshift.call(d,a);return A(e[g].apply(e,
d))});if("forEach"!==g||k)return c}}if(!p)return p;var k=!!p.then;k&&(p=u.delegate(p));l("forEach");l("filter");l("map");null==p.total&&(p.total=B(p,function(g){return g.length}));return p};u.setObject("dojo.store.util.QueryResults",A);return A})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(e){return function(u,B){function A(l){l=e.filter(l,u);var k=B&&B.sort;k&&l.sort("function"==typeof k?k:function(d,c){for(var a,b=0;a=k[b];b++){var f=d[a.attribute],t=c[a.attribute];
f=null!=f?f.valueOf():f;t=null!=t?t.valueOf():t;if(f!=t)return!!a.descending==(null==f||f>t)?-1:1}return 0});if(B&&(B.start||B.count)){var g=l.length;l=l.slice(B.start||0,(B.start||0)+(B.count||Infinity));l.total=g}return l}switch(typeof u){default:throw Error("Can not query with a "+typeof u);case "object":case "undefined":var p=u;u=function(l){for(var k in p){var g=p[k];if(g&&g.test){if(!g.test(l[k],l))return!1}else if(g!=l[k])return!1}return!0};break;case "string":if(!this[u])throw Error("No filter function "+
u+" was found in store");u=this[u];case "function":}A.matches=u;return A}})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(e,u,B,A,p,l){return e(l,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var k="esriCIELabAlgorithm";break;case "hsv":k="esriHSVAlgorithm";
break;case "lab-lch":k="esriLabLChAlgorithm"}k={type:"algorithmic",algorithm:k};k.fromColor=p.toJsonColor(this.fromColor);k.toColor=p.toJsonColor(this.toColor);return k}})})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,u,B,A){return e(null,{declaredClass:"esri.tasks.ColorRamp",type:null})})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),
function(e,u,B,A,p,l){return e(l,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(k){this.colorRamps.push(k)},toJson:function(){return{type:"multipart",colorRamps:B.map(this.colorRamps,function(k){return k.toJson()})}}})})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(e,u){var B={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,
-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(p,l){var k=[],g,d;if(p[0].length!==l.length)throw"dimensions do not match";var c=p.length,a=p[0].length,b=0;for(g=0;g<c;g++){for(d=b=0;d<a;d++)b+=p[g][d]*l[d];k.push(b)}return k},rgb2xyz:function(p){p=[p.r/255,p.g/255,p.b/255].map(function(l){return.04045>=l?l/12.92:Math.pow((l+.055)/1.055,2.4)});p=this.matrixProduct(this.COEF_RGB2XYZ,p);return{x:100*p[0],y:100*p[1],z:100*p[2]}},xyz2rgb:function(p){p=this.matrixProduct(this.COEF_XYZ2RGB,
[p.x/100,p.y/100,p.z/100]).map(function(l){return Math.min(1,Math.max(.0031308>=l?12.92*l:1.055*Math.pow(l,1/2.4)-.055,0))});return{r:Math.round(255*p[0]),g:Math.round(255*p[1]),b:Math.round(255*p[2])}},xyz2lab:function(p){p=[p.x/95.047,p.y/100,p.z/108.883].map(function(l){return l>Math.pow(6/29,3)?Math.pow(l,1/3):1/3*Math.pow(29/6,2)*l+4/29});return{l:116*p[1]-16,a:500*(p[0]-p[1]),b:200*(p[1]-p[2])}},lab2xyz:function(p){var l=p.l;p=[(l+16)/116+p.a/500,(l+16)/116,(l+16)/116-p.b/200].map(function(k){return k>
6/29?Math.pow(k,3):3*Math.pow(6/29,2)*(k-4/29)});return{x:95.047*p[0],y:100*p[1],z:108.883*p[2]}},lab2lch:function(p){var l=p.l,k=p.a,g=p.b;p=Math.sqrt(k*k+g*g);k=Math.atan2(g,k);k=0<k?k:k+2*Math.PI;return{l:l,c:p,h:k}},lch2lab:function(p){var l=p.c,k=p.h;return{l:p.l,a:l*Math.cos(k),b:l*Math.sin(k)}},rgb2lab:function(p){return this.xyz2lab(this.rgb2xyz(p))},lab2rgb:function(p){return this.xyz2rgb(this.lab2xyz(p))},rgb2lch:function(p){return this.lab2lch(this.xyz2lab(this.rgb2xyz(p)))},lch2rgb:function(p){return this.xyz2rgb(this.lab2xyz(this.lch2lab(p)))}},
A={rgb2hsv:function(p){var l=p.r,k=p.g;p=p.b;var g=Math.max(l,k,p),d=g-Math.min(l,k,p),c;0===d?c=0:g===l?c=(k-p)/d%6:g===k?c=(p-l)/d+2:g===p&&(c=(l-k)/d+4);0>c&&(c+=6);return{h:60*c,s:100*(0===d?0:d/g),v:100/255*g}},hsv2rgb:function(p){var l=(p.h+360)%360/60,k=p.v/100*255;p=p.s/100*k;var g=p*(1-Math.abs(l%2-1));switch(Math.floor(l)){case 0:l={r:p,g:g,b:0};break;case 1:l={r:g,g:p,b:0};break;case 2:l={r:0,g:p,b:g};break;case 3:l={r:0,g:g,b:p};break;case 4:l={r:g,g:0,b:p};break;case 5:case 6:l={r:p,
g:0,b:g};break;default:l={r:0,g:0,b:0}}l.r=Math.round(l.r+k-p);l.g=Math.round(l.g+k-p);l.b=Math.round(l.b+k-p);return l}};return{toRGB:function(p){var l;void 0!==p.r&&void 0!==p.g&&void 0!==p.b?l=p:void 0!==p.l&&void 0!==p.c&&void 0!==p.h?l=B.lch2rgb(p):void 0!==p.l&&void 0!==p.a&&void 0!==p.b?l=B.lab2rgb(p):void 0!==p.x&&void 0!==p.y&&void 0!==p.z?l=B.xyz2rgb(p):void 0!==p.h&&void 0!==p.s&&void 0!==p.v&&(l=A.hsv2rgb(p));return l},toHSV:function(p){if(void 0!==p.h&&void 0!==p.s&&void 0!==p.v)return p;
p=this.toRGB(p);return A.rgb2hsv(p)},toLAB:function(p){return void 0!==p.l&&void 0!==p.a&&void 0!==p.b?p:B.rgb2lab(this.toRGB(p))},toLCH:function(p){return void 0!==p.l&&void 0!==p.c&&void 0!==p.h?p:B.rgb2lch(this.toRGB(p))},toXYZ:function(p){return void 0!==p.x&&void 0!==p.y&&void 0!==p.z?p:B.rgb2xyz(this.toRGB(p))},getDojoColor:function(p){if(p){if(Array.isArray(p))return e.fromArray(p);if(void 0!==p.r&&void 0!==p.g&&void 0!==p.b)return p}},correctRGBLimits:function(p){var l=[p.r,p.g,p.b];u.forEach(l,
function(k,g){0>l[g]?l[g]=0:255<l[g]&&(l[g]=255);l[g]=Math.floor(l[g])});return{r:l[0],g:l[1],b:l[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(e,u,B,A,p,l,k,g){return e(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(d){d=d||{};this.hillshadeType=d.hillshadeType||"traditional";this.azimuth=null!=d.azimuth?
d.azimuth:315;this.altitude=null!=d.altitude?d.altitude:45;this.zFactor=d.zFactor||1;this.scalingType=d.scalingType||"none";this.pixelSizePower=null!=d.pixelSizePower?d.pixelSizePower:.664;this.pixelSizeFactor=null!=d.pixelSizeFactor?d.pixelSizeFactor:.024;this.removeEdgeEffect=d.removeEdgeEffect||!1;this.colorRamp=g.fromJson(d.colorRamp)},toJson:function(){var d={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return l.fixJson(d)},toRenderingRule:function(d){}})})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(e,u,B,A,p,l,k,g,d){return e(g,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(c){this.colormapInfos=c&&
c.colormapInfos},toJson:function(){var c=l.fixJson;var a={type:"rasterColormap",colormapInfos:u.map(this.colormapInfos||[],function(b,f){var t={};b.color&&null!==b.color&&3<=b.color.length&&(t.color=b.color,t.value=b.value||f,t.label=(b.label||f)+"");return c(t)})};a=B.mixin(this.inherited(arguments),a);return c(a)}})})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(e,u,B,A){return A})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),
function(e,u,B,A,p,l,k,g){return e([l,k],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(d,c){u.mixin(this,c);this.initialize(d,c)},getTitle:function(d){var c;this.info&&(c=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(d,this._fetchAttributes(d,null,this.getExpressionFieldsInTitle()),!0).title);return c||""},getContent:function(d){return this.info?(new g({template:this,graphic:d,chartTheme:this.chartTheme},
A.create("div"))).domNode:""}})})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,
b,f,t,n,m,h,v,r,C,w,y){return e(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(q,x){if(q){u.mixin(this,x);this.info=q;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var E=this._fieldLabels={},z=this._fieldsMap=
{};this.info.fieldInfos&&B.forEach(this.info.fieldInfos,function(D){var F=D.fieldName.toLowerCase(),J=this._isExpressionField(F)?this.getExpressionInfo(F):null;E[F]=J?J.title:D.label;z[F]=D},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return A.fromJson(A.toJson(this.info))},getTitle:function(){},
getContent:function(){},getFieldInfo:function(q){var x;B.some(this.info&&this.info.fieldInfos,function(E){E.fieldName===q&&(x=E);return!!x});return x},getExpressionInfo:function(q){if(q=this._getExprField(q)){q=q.toLowerCase();var x;B.some(this.info.expressionInfos,function(E){E.name.toLowerCase()===q&&(x=E);return!!x});return x}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var q=this._collectExprFieldsFromTemplatedString(this.info.description,
[]);this.info.description||B.forEach(this.info.fieldInfos,function(x){x.visible&&this._collectExprField(x.fieldName,q)},this);B.forEach(this.info.mediaInfos,function(x){this._collectExprFieldsFromTemplatedString(x.title,q);this._collectExprFieldsFromTemplatedString(x.caption,q);if(x=x.value)this._collectExprFieldsFromTemplatedString(x.linkURL,q),this._collectExprFieldsFromTemplatedString(x.sourceURL,q),B.forEach(x.fields,function(E){this._collectExprField(E,q)},this),this._collectExprField(x.normalizeField,
q),this._collectExprField(x.tooltipField,q)},this);return q},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return B.some(this._getArcadeExpressions(),function(q){return q.hasGeometryOperations()})},hasAsyncExpressions:function(){return B.some(this._getArcadeExpressions(),function(q){return q.async})},initializeArcadeEngine:function(){return C.initialize(this._getArcadeExpressions())},getComponents:function(q,
x){var E=this.info,z={initArcadeEngine:this.initializeArcadeEngine()};E.fieldInfos&&(E=B.filter(E.fieldInfos,function(D){return-1!==D.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<E.length&&(z.relatedInfo=this._getRelatedRecords({graphic:q,fieldsInfo:E}));this._needFullResolutionFeature(q)&&(z.fullResolutionFeature=this._getFullResolutionFeature(q));this._needAggregatedFeaturesLayer(q)&&(z.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(q));return t(z).then(u.hitch(this,function(D){var F=
D.fullResolutionFeature,J=x&&x.evaluateAllExpressions,L=J?null:this.getRequiredExpressionFields();D=(J?this.hasAsyncExpressions():this._hasAsyncExpressions(L))?this._fetchAttributesAsync(q,F,L,D.aggregatedFeaturesLayer):this._fetchAttributes(q,F,L);return t([D]).then(u.hitch(this,function(Q){return this._getPopupValues(q,Q[0])}))}))},getAttachments:function(q){var x=q.getSourceLayer();q=q.attributes;if(this.info.showAttachments&&x&&x.hasAttachments&&x.objectIdField&&(q=q&&q[x.objectIdField]))return x.queryAttachmentInfos(q)},
_needAggregatedFeaturesLayer:function(q){return q.isAggregate()?B.some(this._getArcadeExpressions(),function(x){return x.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(q){return q.getAggregationSourceLayer().getFeatureCollectionLayer(q.getChildGraphics()).always(function(x){return x instanceof Error?null:x})},_needFullResolutionFeature:function(q){return(q=q.getSourceLayer())?"function"===typeof q.getMaxAllowableOffset&&0<q.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(q){var x=q.getSourceLayer(),E=x.objectIdField;q=(q=q.attributes)&&E&&q[E];if(null==q)return null;var z=new m;z.where=E+"\x3d"+q;z.maxAllowableOffset=0;z.outFields=[E];x._enableCacheHint(z);return x.queryFeatures(z).then(function(D){return D.features&&D.features[0]})},_isExpressionField:function(q){return this._reExprField.test(q)},_getExprField:function(q){return this._isExpressionField(q)?q.replace(this._reExprField,""):null},_collectExprField:function(q,x){(q=
this._getExprField(q))&&x.push(q);return x},_collectExprFieldsFromTemplatedString:function(q,x){q=this._getExprFieldsFromTemplatedString(q);q.length&&Array.prototype.push.apply(x,q);return x},_getExprFieldsFromTemplatedString:function(q){q=q?q.match(this._reExprFieldPattern):null;return B.map(q,function(x){return x.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(q){return B.some(q,function(x){x=this._exprCache[x];return!(!x||!x.async)},this)},_compileExpressions:function(q){var x={};B.forEach(q,function(E){var z=E.returnType&&E.returnType.toLowerCase();x[E.name]=new n({expression:E.expression,returnType:"number"===z?"number":"string",profile:C})});return x},_getArcadeExpressions:function(){var q=[],x;for(x in this._exprCache)q.push(this._exprCache[x]);return q},_fetchAttributesAsync:function(q,x,E,z){var D=this._fetchAttributes(q,
x,E,z);q={};for(var F in D)(x=D[F])&&x.then&&(q[F]=x);return t(q).then(u.hitch(this,function(J){for(var L in J){var Q=J[L];D[L]=Q instanceof Error?null:this._processArcadeResult(Q)}return D}))},_processArcadeResult:function(q){"string"===typeof q&&(q=c.encode(q));return q},_fetchAttributes:function(q,x,E,z){var D=u.clone(q.attributes)||{},F=x&&x.geometry,J=this._exprPrefix,L=this._exprCache;E=E||B.map(this.info.expressionInfos,function(Q){return Q.name});B.forEach(E,function(Q){var ba=J+Q;Q=(Q=L[Q])?
q.evaluateExpression(Q,this._getEvalOptions(Q,q,F,z)):null;D[ba]=this._processArcadeResult(Q)},this);return D},_getEvalOptions:function(q,x,E,z){var D=q.hasGeometryOperations(),F=x.getSourceLayer(),J=F&&(F.getMap()||F.parentLayer&&F.parentLayer.getMap());z&&(z._map=J);q=C.getEvalOptions({expression:q,feature:x,layer:F,aggregatedFeaturesLayer:z,map:J,spatialReference:J&&J.spatialReference});x=q.context.vars.$feature;D=!(!D||!E);x&&D&&(x._geometry=E);q.skipCache=D;return q},_getPopupValues:function(q,
x,E){x=x||this._fetchAttributes(q);var z=this.info,D=q.getSourceLayer(),F=u.clone(x),J="",L="",Q,ba,fa=D&&D._getDateOpts&&D._getDateOpts().properties;fa=fa&&fa.slice(0);var Y={dateFormat:{properties:fa,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(la in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(la)){var ma=this._relatedInfo[la],ca=this._relatedLayersInfo[la];ma&&(B.forEach(ma.relatedFeatures,function(ra){for(ba in ra.attributes)if(ra.attributes.hasOwnProperty(ba)&&
"esriRelCardinalityOneToOne"===ca.relation.cardinality){var M=this._toRelatedFieldName([ca.relation.id,ba]);x[M]=F[M]=ra.attributes[ba]}},this),B.forEach(ma.relatedStatsFeatures,function(ra){for(ba in ra.attributes)if(ra.attributes.hasOwnProperty(ba)){var M=this._toRelatedFieldName([ca.relation.id,ba]);x[M]=F[M]=ra.attributes[ba]}},this))}for(Q in F){var la=this._fieldsMap[Q.toLowerCase()];ma=this._getLayerFieldInfo(D,Q);la&&ma&&(la.fieldName=ma.name);F[Q]=this._formatValue(F[Q],Q,Y);fa&&la&&la.format&&
la.format.dateFormat&&(la=B.indexOf(fa,Q),-1<la&&fa.splice(la,1))}if(D)for(Q in fa=D.typeIdField,x)if(x.hasOwnProperty(Q)&&-1===Q.indexOf(this._relatedFieldPrefix)){var ta=x[Q];a.isDefined(ta)&&(la=this._getDomainName(D,q,Q,ta),a.isDefined(la)?F[Q]=la:Q===fa&&(la=this._getTypeName(D,q,ta),a.isDefined(la)&&(F[Q]=la)))}z.title&&(J=this._processFieldsInLinks(this._fixTokens(z.title,D),x),J=u.trim(this._removeEmptyHref(a.substitute(F,J,Y)||"")));if(E)return{title:J};z.description&&(L=this._processFieldsInLinks(this._fixTokens(z.description,
D),x),L=u.trim(this._removeEmptyHref(a.substitute(F,L,Y)||"")));if(z.fieldInfos){var za=[];B.forEach(z.fieldInfos,function(ra){(Q=ra.fieldName)&&ra.visible&&za.push([this._fieldLabels[Q.toLowerCase()]||Q,a.substitute(F,"${"+Q+"}",Y)||""])},this)}var P;if(z.mediaInfos){var ea=[];B.forEach(z.mediaInfos,function(ra){P=0;ta=ra.value;switch(ra.type){case "image":var M=ta.sourceURL;M=M&&u.trim(this._removeEmptyHref(a.substitute(x,this._fixTokens(M,D))));P=!!M;break;case "piechart":case "linechart":case "columnchart":case "barchart":M=
ta.normalizeField;ta.fields=B.map(ta.fields,function(Aa){return(Z=this._getLayerFieldInfo(D,Aa))?Z.name:Aa},this);if(M){var Z=this._getLayerFieldInfo(D,M);ta.normalizeField=Z?Z.name:M}P=B.some(ta.fields,function(Aa){return a.isDefined(x[Aa])||-1!==Aa.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(P){ra=u.clone(ra);ta=ra.value;M=ra.title?this._processFieldsInLinks(this._fixTokens(ra.title,D),x):"";var ka=ra.caption?this._processFieldsInLinks(this._fixTokens(ra.caption,
D),x):"";ra.title=M?u.trim(this._removeEmptyHref(a.substitute(F,M,Y)||"")):"";ra.caption=ka?u.trim(this._removeEmptyHref(a.substitute(F,ka,Y)||"")):"";if("image"===ra.type)ta.sourceURL=a.substitute(x,this._fixTokens(ta.sourceURL,D)),ta.linkURL&&(ta.linkURL=u.trim(a.substitute(x,this._fixTokens(ta.linkURL,D))||""));else{var qa,ua;B.forEach(ta.fields,function(Aa,ya){if(-1!==Aa.indexOf(this._relatedFieldPrefix))ua=this._getRelatedChartInfos(Aa,ta,x,Y),ua instanceof Array?ta.fields=ua:ta.fields[ya]=ua;
else{var G=x[Aa];G=void 0===G?null:G;qa=x[ta.normalizeField]||0;G&&qa&&(G/=qa);ta.fields[ya]={y:G,tooltip:(this._fieldLabels[Aa.toLowerCase()]||Aa)+":\x3cbr/\x3e"+this._formatValue(G,Aa,Y,!!qa)}}},this)}ea.push(ra)}},this)}return{title:J,description:L,hasDescription:!!z.description,fields:za&&za.length?za:null,mediaInfos:ea&&ea.length?ea:null,formatted:F,editSummary:!1!==z.showLastEditInfo&&D&&D.getEditSummary?D.getEditSummary(q):""}},_getRelatedChartInfos:function(q,x,E,z){var D,F;var J=[];var L=
this._fromRelatedFieldName(q);var Q=L[0];var ba=this._relatedInfo[Q];Q=this._relatedLayersInfo[Q];ba&&B.forEach(ba.relatedFeatures,function(fa){fa=fa.attributes;var Y;for(Y in fa)if(fa.hasOwnProperty(Y)&&Y===L[1]){var ma={};F=fa[Y];x.normalizeField&&(D=-1!==x.normalizeField.indexOf(this._relatedFieldPrefix)?fa[this._fromRelatedFieldName(x.normalizeField)[1]]:E[x.normalizeField]);F&&D&&(F/=D);if(x.tooltipField)if(-1!==x.tooltipField.indexOf(this._relatedFieldPrefix)){var ca=this._fromRelatedFieldName(x.tooltipField)[1],
la=a.isDefined(fa[ca])?this._formatValue(fa[ca],x.tooltipField,z,!!D):ca;ma.tooltip=la+":\x3cbr/\x3e"+this._formatValue(F,ca,z,!!D)}else ma.tooltip=(this._fieldLabels[q.toLowerCase()]||q)+":\x3cbr/\x3e"+this._formatValue(F,x.tooltipField,z,!!D);else ma.tooltip=F;ma.y=F;J.push(ma)}},this);return"esriRelCardinalityOneToMany"===Q.relation.cardinality||"esriRelCardinalityManyToMany"===Q.relation.cardinality?J:J[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(q,x){var E=this;return q.replace(/(\{([^\{\r\n]+)\})/g,function(z,D,F){z=E._getLayerFieldInfo(x,F);return"$"+(z?"{"+
z.name+"}":D)})},_encodeAttributes:function(q,x){q=u.clone(q)||{};var E,z;for(E in q)(z=q[E])&&"string"===typeof z&&(z=x?z:encodeURIComponent(z),z=z.replace(/'/g,"\x26apos;"),q[E]=z);return q},_processFieldsInLinks:function(q,x){var E=this._encodeAttributes(x),z=this._encodeAttributes(x,!0);x=u.hitch(this,this._addValuesToHref,x,E,z);q&&(q=q.replace(this._reHref,x).replace(this._reHrefApos,x));return q},_addValuesToHref:function(q,x,E,z,D,F){F=F&&u.trim(F);return z=a.substitute(F&&0===F.indexOf("${")?
"'"===D?E:q:x,z)},_getLayerFieldInfo:function(q,x){return q&&q.getField?q.getField(x):null},_formatValue:function(q,x,E,z){var D=this._fieldsMap[x.toLowerCase()],F=D&&D.format;x=-1!==B.indexOf(E.dateFormat.properties,x);var J="number"===typeof q&&!x&&(!F||!F.dateFormat);if(!a.isDefined(q)||!D||!a.isDefined(F))return this._applyFormatting(q,J);D=F.hasOwnProperty("places")||F.hasOwnProperty("digitSeparator");var L=F.hasOwnProperty("digitSeparator")?F.digitSeparator:!0;if(D&&!x)var Q={formatType:"NumberFormat",
places:a.isDefined(F.places)&&(!z||0<F.places)?Number(F.places):Infinity};else if(F.dateFormat)Q=u.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[F.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(q,J);var ba=this._applyFormatFunctions(q,Q,E);D&&-1<q.constructor.toString().indexOf("Array")&&(ba="",B.forEach(q,u.hitch(this,function(fa,Y){Y&&(ba+=" ");ba+=this._applyFormatFunctions(fa,Q,E)})));D&&!L&&y.group&&(ba=ba.replace(new RegExp("\\"+
y.group,"g"),""));x&&(ba='\x3cspan class\x3d"esriDateValue"\x3e'+ba+"\x3c/span\x3e");return this._applyFormatting(ba,J)},_applyFormatFunctions:function(q,x,E){x&&E&&(E.format={myKey:x});q=a.substitute({myKey:q},"${myKey}",E)||"";x&&E&&(E.format=null);return q},_applyFormatting:function(q,x){return x?this._forceLTR(q):this._applyPreWrap(q)},_forceLTR:function(q){var x=g("ie");return x&&10>=x?q:"\x3cspan class\x3d'esriNumericValue'\x3e"+q+"\x3c/span\x3e"},_applyPreWrap:function(q){return"string"===
typeof q?q.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):q},_insertOffset:function(q){q&&(q=a.isDefined(this.utcOffset)?q.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):q);return q},_getDomainName:function(q,x,E,z){return(q=q.getDomain&&q.getDomain(E,{feature:x}))&&q.codedValues?q.getName(z):null},_getTypeName:function(q,x,E){return(q=q.getType&&q.getType(x))&&q.name},_getRelatedRecords:function(q){var x=q.graphic,E;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(q).then(u.hitch(this,function(z){for(E in z)z.hasOwnProperty(E)&&z[E]&&(this._relatedLayersInfo[E].relatedLayerInfo=z[E])})));return this._relatedLayersInfoPromise.then(u.hitch(this,function(){return this._queryRelatedLayers(x)})).then(u.hitch(this,function(z){this._setRelatedRecords(x,z);return z}))},_getRelatedLayersInfo:function(q){var x=q.fieldsInfo,E,z={};var D=q.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});B.forEach(x,function(F){var J;
var L=this._fromRelatedFieldName(F.fieldName);var Q=L[0];L=L[1];if(Q&&(!this._relatedLayersInfo[Q]&&D&&D.relationships&&(B.some(D.relationships,function(fa){if(fa.id==Q)return J=fa,!0}),J&&(this._relatedLayersInfo[Q]={relation:J,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[Q]&&(this._relatedLayersInfo[Q].relatedFields.push(L),F.statisticType))){var ba=new r;ba.statisticType=F.statisticType;ba.onStatisticField=L;ba.outStatisticFieldName=L;this._relatedLayersInfo[Q].outStatistics.push(ba)}},
this);for(E in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(E)&&this._relatedLayersInfo[E]&&(q=this._relatedLayersInfo[E].relation,q=D.url.replace(/[0-9]+$/,q.relatedTableId),this._relatedLayersInfo[E].relatedLayerUrl=q,z[E]=f({url:q,content:{f:"json"},callbackParamName:"callback"}));return d(z)},_queryRelatedLayers:function(q){var x={},E;for(E in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(E)&&(x[E]=this._queryRelatedLayer({graphic:q,relatedInfo:this._relatedLayersInfo[E]}));
return d(x)},_queryRelatedLayer:function(q){var x,E;var z=q.graphic;var D=z.getSourceLayer();var F=D.url.match(/[0-9]+$/g)[0];var J=q.relatedInfo;var L=J.relatedLayerInfo;var Q=J.relatedLayerUrl;var ba=J.relation;q=B.filter(L.relationships,function(ta){return ta.relatedTableId===parseInt(F,10)});1===q.length?x=q[0]:1<q.length&&B.some(q,function(ta){ta.id===ba.id&&(x=ta);return!!x});if(x){var fa=new m;B.some(L.fields,function(ta){if(ta.name===x.keyField)return E=-1!==B.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],ta.type)?"number":"string",!0});if(x.relationshipTableId&&x.keyFieldInRelationshipTable){var Y=new k;this._queryRelatedRecords(z,x).then(u.hitch(this,function(ta){var za;(za=ta[z.attributes[D.objectIdField]])?(ta=B.map(za.features,function(P){return P.attributes[L.objectIdField]},this),J.outStatistics&&0<J.outStatistics.length&&L.supportsStatistics&&(ca=new m,ca.where=this._chunkWhereInClause(L.objectIdField,ta,1E3),ca.outFields=
fa.outFields,ca.outStatistics=J.outStatistics),ca&&(la=new h(Q),la.execute(ca).then(u.hitch(this,function(P){var ea=[];ea.push(za);ea.push(P);Y.resolve(ea)})))):Y.resolve()}))}else{var ma="string"===E?x.keyField+"\x3d'"+z.attributes[ba.keyField]+"'":x.keyField+"\x3d"+z.attributes[ba.keyField];fa.where=ma;fa.outFields=J.relatedFields;if(J.outStatistics&&0<J.outStatistics.length&&L.supportsStatistics){var ca=new m;ca.where=fa.where;ca.outFields=fa.outFields;ca.outStatistics=J.outStatistics}var la=new h(Q);
ma=[];ma.push(la.execute(fa));ca&&ma.push(la.execute(ca))}}return ma?d(ma):Y?Y.promise:void 0},_setRelatedRecords:function(q,x){this._relatedInfo=[];for(var E in x)x.hasOwnProperty(E)&&x[E]&&(q=x[E],this._relatedInfo[E]={},this._relatedInfo[E].relatedFeatures=q[0].features,a.isDefined(q[1])&&(this._relatedInfo[E].relatedStatsFeatures=q[1].features))},_handlerErrorResponse:function(q,x){q.reject(x)},_fromRelatedFieldName:function(q){var x=[];-1!==q.indexOf(this._relatedFieldPrefix)&&(q=q.split("/"),
x=q.slice(1));return x},_toRelatedFieldName:function(q){var x="";q&&0<q.length&&(x=this._relatedFieldPrefix+q[0]+"/"+q[1]);return x},_queryRelatedRecords:function(q,x){var E=q.getSourceLayer(),z=new v;z.outFields=["*"];z.relationshipId=x.id;z.objectIds=[q.attributes[E.objectIdField]];return E.queryRelatedFeatures(z)},_removeEmptyHref:function(q){return q.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(q,x,E){for(var z=0,D=[];z<x.length;)D.push(q+" IN ("+x.slice(z,E+z)+")"),z+=E;return D.join(" OR ")}})})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(e){var u=e.getObject("dojox.html.entities",!0),B=function(p,l){if(l._encCache&&l._encCache.regexp&&l._encCache.mapper&&l.length==l._encCache.length){var k=l._encCache.mapper;var g=l._encCache.regexp}else{k={};g=["["];var d;for(d=0;d<l.length;d++)k[l[d][0]]="\x26"+l[d][1]+";",g.push(l[d][0]);g.push("]");g=new RegExp(g.join(""),"g");l._encCache={mapper:k,regexp:g,length:l.length}}return p=p.replace(g,function(c){return k[c]})},A=function(p,
l){if(l._decCache&&l._decCache.regexp&&l._decCache.mapper&&l.length==l._decCache.length){var k=l._decCache.mapper;var g=l._decCache.regexp}else{k={};g=["("];var d;for(d=0;d<l.length;d++){var c="\x26"+l[d][1]+";";d&&g.push("|");k[c]=l[d][0];g.push(c)}g.push(")");g=new RegExp(g.join(""),"g");l._decCache={mapper:k,regexp:g,length:l.length}}return p=p.replace(g,function(a){return k[a]})};u.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];u.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];u.encode=function(p,l){p&&(l?p=B(p,l):(p=B(p,u.html),p=B(p,u.latin)));return p};u.decode=function(p,l){p&&(l?p=A(p,l):(p=A(p,u.html),p=A(p,u.latin)));return p};return u})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(e,u,B,A,p,l){return e(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,
syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(k){u.mixin(this,k);this.returnType=this.returnType||"string";this.id=p.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var k=this._traits.geometryOperations;void 0===k&&(k=this._traits.geometryOperations=l.hasGeometryOperations(this.syntaxTree));return k},hasFeatureSetOperations:function(){var k=
this._traits.featureSetOperations;void 0===k&&(k=this._traits.featureSetOperations=l.hasFeatureSetOperations(this.syntaxTree));return k},hasVariable:function(k){var g=this._traits.variables;void 0===g[k]&&(g[k]=l.hasVariable(this.syntaxTree,k));return g[k]},hasFunction:function(k){var g=this._traits.functions;void 0===g[k]&&(g[k]=l.hasFunction(this.syntaxTree,k));return g[k]},evaluate:function(k){this._compile();var g=this._attributeCache.compiledFunc;return this.async?l.executeAsyncFunction(g,k):
l.executeFunction(g,k)},_setSyntaxTree:function(k){this.syntaxTree=k;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}})})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){var m=d("esri-pbf"),h=u(null,{url:null,query:null,
requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(r){this._handleSuccess=B.hitch(this,this._handleSuccess);this._handleError=B.hitch(this,this._handleError);B.mixin(this,r);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var r=new p(this._canceler);this._fetchDfd=r;this._result=null;this._sendRequest();return r.promise},_canceler:function(r){var C=r._pendingRequest;if(!r.isFulfilled()&&
C&&!C.isFulfilled()){C.cancel();var w=C.results&&C.results[1]}r._pendingRequest=null;return w},_sendRequest:function(r){var C=this.query;this.pagination&&(this._startPage=C.resultOffset=null==r?0:r,C.resultRecordCount=this.pageSize);r=this.requestOptions;this._fetchDfd._pendingRequest=c({url:this.url,content:C,handleAs:"pbf"===C.f?"arraybuffer":"json",callbackParamName:"callback",timeout:r&&r.timeout},r);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(r){this.pagination?
(r.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(r.features):this._result=r,this._fetchDfd.progress(r),r.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(r),this._fetchDfd.resolve(r))},_handleError:function(r){this._fetchDfd.reject(r)}}),v=u(t,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],
"execute-relationship-query-complete":["featureSets"]},constructor:function(r,C){this._handler=B.hitch(this,this._handler);this._relationshipQueryHandler=B.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=B.hitch(this,this._executeForIdsHandler);this._countHandler=B.hitch(this,this._countHandler);this._extentHandler=B.hitch(this,this._extentHandler);this.source=C&&C.source;this.gdbVersion=C&&C.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],
e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(r,C,w,y,q){var x=q.assembly;r=this._encode(B.mixin({},
this._url.query,{f:y&&y.format||"json"},r.toJson(x&&x[0])));var E=this._handler,z=this._errorHandler;this.source&&(y={source:this.source.toJson()},r.layer=l.toJson(y));this.gdbVersion&&(r.gdbVersion=this.gdbVersion);var D="pbf"===r.f;if(D){var F;m||(F="QueryTask.execute: 'pbf' format is not supported in your browser.");if(F)return r=new p,r.addErrback(function(J){z(J,w,q.dfd)}),r.reject(Error(F)),r}F=this.requestOptions;F=c({url:this._url.path+"/query",content:r,callbackParamName:"callback",handleAs:D?
"arraybuffer":"json",timeout:F&&F.timeout},F);r=[F];D&&r.push(v.loadPBFReader());(new k(r)).then(function(J){q.dfd.isFulfilled()||(J=J[0],J[0]?E(J[1],D,C,w,q.dfd):z(J[1],w,q.dfd))});return F},rawExecute:function(r,C,w){C=C||{};r=this._encode(B.mixin({},this._url.query,{f:C.format||"json"},r.toJson(w.assembly&&w.assembly[0])));this.source&&(r.layer=l.toJson({source:this.source.toJson()}));this.gdbVersion&&(r.gdbVersion=this.gdbVersion);return(new h({url:this._url.path+"/query",query:r,requestOptions:this.requestOptions,
pagination:C.pagination,pageSize:C.pageSize})).execute().then(null,null,function(y){w.dfd.progress(y)}).then(B.hitch(this,function(y){this._successHandler([y],"onRawExecuteComplete",null,w.dfd)})).otherwise(B.hitch(this,function(y){this._errorHandler(y,null,w.dfd)}))},executeRelationshipQuery:function(r,C,w){r=this._encode(B.mixin({},this._url.query,{f:"json"},r.toJson()));var y=this._relationshipQueryHandler,q=this._errorHandler;this.gdbVersion&&(r.gdbVersion=this.gdbVersion);var x=new p(a._dfdCanceller),
E=this.requestOptions,z=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&z.endsWith("/dynamicLayer")&&(z=z.slice(0,-13),z=z+"/"+this.source.mapLayerId);x._pendingDfd=c({url:z+"/queryRelatedRecords",content:r,callbackParamName:"callback",timeout:E&&E.timeout,load:function(D,F){y(D,F,C,w,x)},error:function(D){q(D,w,x)}},E);return x},executeForIds:function(r,C,w,y){var q=y.assembly;r=this._encode(B.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},r.toJson(q&&
q[0])));var x=this._executeForIdsHandler,E=this._errorHandler;this.source&&(q={source:this.source.toJson()},r.layer=l.toJson(q));this.gdbVersion&&(r.gdbVersion=this.gdbVersion);q=this.requestOptions;return c({url:this._url.path+"/query",content:r,callbackParamName:"callback",timeout:q&&q.timeout,load:function(z,D){x(z,D,C,w,y.dfd)},error:function(z){E(z,w,y.dfd)}},q)},executeForCount:function(r,C,w,y){var q=y.assembly;r=this._encode(B.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},
r.toJson(q&&q[0])));var x=this._countHandler,E=this._errorHandler;this.source&&(q={source:this.source.toJson()},r.layer=l.toJson(q));this.gdbVersion&&(r.gdbVersion=this.gdbVersion);q=this.requestOptions;return c({url:this._url.path+"/query",content:r,callbackParamName:"callback",timeout:q&&q.timeout,load:function(z,D){x(z,D,C,w,y.dfd)},error:function(z){E(z,w,y.dfd)}},q)},executeForExtent:function(r,C,w,y){var q=y.assembly;r=this._encode(B.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},
r.toJson(q&&q[0])));var x=this._extentHandler,E=this._errorHandler;this.source&&(q={source:this.source.toJson()},r.layer=l.toJson(q));this.gdbVersion&&(r.gdbVersion=this.gdbVersion);q=this.requestOptions;return c({url:this._url.path+"/query",content:r,callbackParamName:"callback",timeout:q&&q.timeout,load:function(z,D){x(z,D,C,w,y.dfd)},error:function(z){E(z,w,y.dfd)}},q)},_handler:function(r,C,w,y,q){try{r&&C&&(r=v.pbfDeps.optimizedFeatures.convertToFeatureSet(v.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(r)));
var x=new n(r);this._successHandler([x],"onComplete",w,q)}catch(E){this._errorHandler(E,y,q)}},_relationshipQueryHandler:function(r,C,w,y,q){try{var x=r.geometryType,E=r.spatialReference,z={};A.forEach(r.relatedRecordGroups,function(D){var F={};F.geometryType=x;F.spatialReference=E;F.features=D.relatedRecords;F=new n(F);if(null!=D.objectId)z[D.objectId]=F;else for(var J in D)D.hasOwnProperty(J)&&"relatedRecords"!==J&&(z[D[J]]=F)});this._successHandler([z],"onExecuteRelationshipQueryComplete",w,q)}catch(D){this._errorHandler(D,
y,q)}},_executeForIdsHandler:function(r,C,w,y,q){try{this._successHandler([r.objectIds],"onExecuteForIdsComplete",w,q)}catch(x){this._errorHandler(x,y,q)}},_countHandler:function(r,C,w,y,q){try{var x=r.features,E=r.objectIds;if(E)var z=E.length;else{if(x)throw Error("Unable to perform query. Please check your parameters.");z=r.count}this._successHandler([z],"onExecuteForCountComplete",w,q)}catch(D){this._errorHandler(D,y,q)}},_extentHandler:function(r,C,w,y,q){try{r.extent&&(r.extent=new b(r.extent)),
this._successHandler([r],"onExecuteForExtentComplete",w,q)}catch(x){this._errorHandler(x,y,q)}}});v.loadPBFReader=function(){var r=new p;v.pbfDeps?r.resolve():e(["./support/pbfDeps"],function(C){v.pbfDeps=C;r.isFulfilled()||r.resolve()});return r.promise};f._createWrappers(v);return v})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(e,u,B,A,p,l,k,g){return e(g,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(d,c){d&&u.isString(d)&&(this._url=k.urlToObject(this.url=d));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;this._errorHandler=u.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var d=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));d&&d.path&&(d.path=d.path.replace(c,"https:"))},_encode:function(d,c,a){var b={},f;for(f in d)if("declaredClass"!==
f){var t=d[f];var n=typeof t;if(null!==t&&void 0!==t&&"function"!==n)if(u.isArray(t)){b[f]=[];var m=t.length;for(n=0;n<m;n++)b[f][n]=this._encode(t[n])}else"object"===n?t.toJson&&(n=t.toJson(a&&a[f]),"esri.tasks.FeatureSet"===t.declaredClass&&n.spatialReference&&(n.sr=n.spatialReference,delete n.spatialReference),b[f]=c?n:B.toJson(n)):b[f]=t}return b},_successHandler:function(d,c,a,b){c&&this[c].apply(this,d);a&&a.apply(null,d);b&&l._resDfd(b,d)},_errorHandler:function(d,c,a){this.onError(d);c&&c(d);
a&&a.errback(d)},setNormalization:function(d){this.normalization=d},onError:function(){}})})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b){e=e(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(f,t){if(f){u.mixin(this,f);var n=this.features=this.features||
[],m=f.spatialReference;m=this.spatialReference=a.createInstance(g.simpleConstructor,m);var h=a.getGeometryType(f.geometryType);this.geometryType=f.geometryType;f.fields&&(this.fields=f.fields);f=a.supportsLazyUnquantization(this.geometryType);var v=a.unquantizeFunction(this.geometryType,this.transform),r=!!(t&&f&&v),C=h&&(r?h.accessorConstructor:h.simpleConstructor);B.forEach(n,function(w,y){var q=a.createInstance(k.simpleConstructor),x=w.geometry;if(h&&x){var E=q.geometry=a.createInstance(C,r?null:
x);E.setSpatialReference(x.spatialReference?a.createInstance(g.simpleConstructor,x.spatialReference):m);r&&E.setupLazyUnquantization(v,x)}q.symbol=w.symbol?b.fromJson(w.symbol):null;q.attributes=w.attributes;n[y]=q});r||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(f){var t={};this.displayFieldName&&(t.displayFieldName=this.displayFieldName);this.fields&&(t.fields=this.fields);this.spatialReference?t.spatialReference=
this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(t.geometryType=a.getJsonType(this.features[0].geometry)),t.features=d._encodeGraphics(this.features,f));t.geometryType=t.geometryType||this.geometryType;t.exceededTransferLimit=this.exceededTransferLimit;t.transform=this.transform;return l.fixJson(t)},_hydrate:function(){a.unquantize(this.features,this.geometryType,
this.transform);this.transform=null},quantize:function(f){if(!this.geometryType)return this.transform=null,this;var t=f.translate[0],n=f.translate[1],m=f.scale[0],h=f.scale[1],v=this.features,r=function(q,x,E){var z,D=[];var F=0;for(z=q.length;F<z;F++){var J=q[F];if(0<F){var L=x(J[0]);J=E(J[1]);if(L!==Q||J!==ba){D.push([L-Q,J-ba]);var Q=L;var ba=J}}else Q=x(J[0]),ba=E(J[1]),D.push([Q,ba])}return 0<D.length?D:null},C=function(q,x,E){if("esriGeometryPoint"===q)return function(z){z.x=x(z.x);z.y=E(z.y);
return z};if("esriGeometryPolyline"===q||"esriGeometryPolygon"===q)return function(z){var D;var F=z.rings||z.paths;var J=[];var L=0;for(D=F.length;L<D;L++){var Q=F[L];(Q=r(Q,x,E))&&J.push(Q)}return 0<J.length?(z.rings?z.rings=J:z.paths=J,z):null};if("esriGeometryMultipoint"===q)return function(z){var D=r(z.points,x,E);return 0<D.length?(z.points=D,z):null};if("esriGeometryEnvelope"===q)return function(z){return z}}(this.geometryType,function(q){return Math.round((q-t)/m)},function(q){return Math.round((n-
q)/h)}),w;var y=0;for(w=v.length;y<w;y++)v[y].geometry&&(C(v[y].geometry)||v[y].setGeometry(null));this.transform=f;return this}});e.createGraphics=function(f){var t=f.geometryType,n=a.createInstance(g.simpleConstructor,f.spatialReference),m=a.getGeometryType(t).accessorConstructor,h=a.unquantizeFunction(t,f.transform);return B.map(f.features,function(v,r){r=a.createInstance(k.simpleConstructor);var C=v.geometry;if(C){var w=r.geometry=a.createInstance(m);w.setSpatialReference(n);w.setupLazyUnquantization(h,
C)}r.attributes=v.attributes;return r})};e.createPolygon=function(f,t,n){if(f){var m=a.createInstance(c.accessorConstructor);m.setSpatialReference(t);t=a.unquantizeFunction("esriGeometryPolygon",n);m.setupLazyUnquantization(t,f)}return m};return e})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(e,u,B,A,p){return{graphicsExtent:function(l){if(!l||!l.length)return null;var k=null,g,d=l.length;for(g=0;g<d;g++){var c=
l[g].geometry;if(c){var a=c.getExtent();a||"point"!==c.type||null==c.x||null==c.y||(a=new p(c.x,c.y,c.x,c.y,c.spatialReference));a&&(k=k?k.union(a):a)}}return 0>k.getWidth()&&0>k.getHeight()?null:k},getGeometries:function(l){return u.map(l,function(k){return k.geometry})},_encodeGraphics:function(l,k){return u.map(l,function(g,d){g=g.toJson();var c={};g.geometry&&(d=k&&k[d],c.geometry=d&&d.toJson()||g.geometry);g.attributes&&(c.attributes=g.attributes);return c})}}})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(e,u,B,A,p){return e(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var l={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},
k=this.objectIds,g=this.outFields,d=this.outSpatialReference,c=this.orderByFields;k&&(l.objectIds=k.join(","));g&&(l.outFields=g.join(","));d&&(l.outSR=d.wkid||B.toJson(d.toJson()));c&&(l.orderByFields=c.join(","));l._ts=this._ts;return l}})})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,u,B,A){return e(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(e,u,B,A,p,l,k,g){return new (e(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map",
"$aggregatedfeatures"],async:["$layer","$datastore","$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(d){var c=[];g.hasGeometryOperations(d)&&c.push(k.enableGeometryOperations());(g.hasFeatureSetOperations(d)||g.hasVariables(d,this.defaults.globals.featureSet))&&c.push(k.enableFeatureSetOperations());g.isAsync(d)&&c.push(k.enableAsyncOperations());return p(c)},isAsync:function(d){d=[d];return g.hasFeatureSetOperations(d)||
g.hasVariables(d,this.defaults.globals.async)},parse:function(d){return k.createSyntaxTree(d.expression)},compile:function(d){var c=u.clone(this.defaults.context);c.useAsync=d.async;return d.syntaxTree?k.createFunction(d.syntaxTree,c):null},getEvalOptions:function(d){var c=d.expression,a=d.feature,b=d.layer,f=d.aggregatedFeaturesLayer,t=d.map;d=d.spatialReference;a=a&&c.hasVariable("$feature")?l.createFromGraphicLikeObject(a.geometry,a.attributes,b):null;var n,m;if(b){var h={spatialReference:d};c.hasVariable("$layer")&&
(n=b.getMap()?k.createFeatureSetFromLayer(b,h):k.createFeatureSetFromLayerUrl(b.url,h));if(c.hasVariable("$datastore"))var v=(v=g.getServiceUrl(b.url))?k.createFeatureSetCollectionFromServiceUrl(v,h):null;c.hasVariable("$aggregatedfeatures")&&f&&(m=f.getMap()?k.createFeatureSetFromLayer(f,h):null)}c=t&&c.hasVariable("$map")?k.createFeatureSetCollectionFromMap(t):null;return{context:{vars:{$feature:a,$layer:n,$datastore:v,$map:c,$aggregatedfeatures:m},spatialReference:d}}}}))})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w){var y=0,q=w.widgets.popup,x=w.widgets.templatePicker;return u([C,n,m],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=A.mixin({},q)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(x.loading);this._contentDfd=this.template.getComponents(this.graphic).then(A.hitch(this,this._handleComponentsSuccess)).otherwise(A.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var E=this._mediaInfos,z=E.length,D=this.domNode,F=this._prevMedia,J=this._nextMedia;if(1<z){var L=0,Q=0;p.forEach(E,function(ba){"image"===ba.type?L++:-1!==ba.type.indexOf("chart")&&Q++});L&&(c.set(this._imageCount,"innerHTML",L),l.query(".summary .image",
D).removeClass("hidden"));Q&&(c.set(this._chartCount,"innerHTML",Q),l.query(".summary .chart",D).removeClass("hidden"))}else l.query(".summary",D).addClass("hidden"),a.add(F,"hidden"),a.add(J,"hidden");E=this._mediaPtr;0===E?a.add(F,"hidden"):a.remove(F,"hidden");E===z-1?a.add(J,"hidden"):a.remove(J,"hidden");this._destroyFrame()},_displayMedia:function(){var E=this._mediaInfos[this._mediaPtr],z=E.title,D=E.caption,F=l.query(".mediaSection .hzLine",this.domNode)[0];c.set(this._mediaTitle,"innerHTML",
z);a[z?"remove":"add"](this._mediaTitle,"hidden");c.set(this._mediaCaption,"innerHTML",D);a[D?"remove":"add"](this._mediaCaption,"hidden");a[z&&D?"remove":"add"](F,"hidden");this._rid=null;if("image"===E.type)this._showImage(E);else{var J=this;z=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];D=E.value.theme||this.chartTheme;A.isString(D)&&(D=D.replace(/\./gi,"/"),-1===D.indexOf("/")&&(D="dojox/charting/themes/"+D));D||(D="./Rainbow");z.push(D);try{var L=this._rid=y++;e(z,function(Q,
ba,fa){L===J._rid&&(J._rid=null,J._showChart(E.type,E.value,Q,ba,fa))})}catch(Q){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(E){return(E=E&&A.trim(E).toLowerCase())&&(0===E.indexOf("mailto:")||0===E.indexOf("tel:"))},_showImage:function(E){a.add(this._mediaFrame,"image");var z=f.get(this._gallery,"height"),D=E.value,F=t.decode(D.linkURL);D=t.decode(D.sourceURL);var J;F&&(J=b.create("a",{href:F,target:this._preventNewTab(F)?"":"_blank"},this._mediaFrame));F=E.refreshInterval?
this._addURLParameter(D,"timestamp",Date.now()):D;b.create("img",{className:"esriPopupMediaImage",src:F},J||this._mediaFrame);var L=l.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=B.connect(L,"onload",this,function(){this._clearImageHandles();this._imageLoaded(L,z);this._initImageRefresh(E)})},_addURLParameter:function(E,z,D){var F=-1===E.indexOf("?")?"?":"\x26";return E+F+z+"\x3d"+D},_initImageRefresh:function(E){if(E.refreshInterval){var z=6E4*E.refreshInterval;this._imageRefreshHandle=
setTimeout(A.hitch(this,function(){this._destroyFrame();this._showImage(E)}),z)}},_clearImageHandles:function(){B.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(E,z,D,F,J){a.remove(this._mediaFrame,"image");D=this._chart=new D(b.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});J&&D.setTheme(J);switch(E){case "piechart":D.addPlot("default",{type:"Pie",labels:!1});D.addSeries("Series A",
z.fields);break;case "linechart":D.addPlot("default",{type:"Markers"});D.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});D.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});p.forEach(z.fields,function(L,Q){L.x=Q+1});D.addSeries("Series A",z.fields);break;case "columnchart":D.addPlot("default",{type:"Columns",gap:3});D.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});D.addSeries("Series A",z.fields);break;case "barchart":D.addPlot("default",{type:"Bars",
gap:3}),D.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),D.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),D.addSeries("Series A",z.fields)}this._action=new F(D);D.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);c.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(E,z){var D=E.height;D<z&&f.set(E,"marginTop",
Math.round((z-D)/2)+"px")},_attListHandler:function(E,z){if(E===this._attachmentsDfd){this._attachmentsDfd=null;var D="";z instanceof Error||!z||!z.length||p.forEach(z,function(F){D+="\x3cli\x3e";D+="\x3ca href\x3d'"+r.addProxy(F.url)+"' target\x3d'_blank'\x3e"+(F.name||"[No name]")+"\x3c/a\x3e";D+="\x3c/li\x3e"});c.set(this._attachmentsList,"innerHTML",D||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(E,z){var D=r.getURIInfo(E);if(D){var F=E.match(D.pattern);E=F&&
F[2];F=t.decode(F[1]);b.create("a",{target:"_blank",href:F,title:F,innerHTML:v.substitute({appName:D.appName,hierPart:E},D.label)},z)}else c.set(z,"innerHTML",E)},_showStatus:function(E){c.set(this._status,"innerHTML",E);a.remove(this._status,"hidden");l.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){c.set(this._status,"innerHTML","");a.add(this._status,"hidden");l.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(E){if(E){this._hideStatus();
var z=this.showTitle?E.title:"",D=E.description,F=E.fields,J=E.mediaInfos,L=this.domNode,Q=this._nls,ba=this,fa=this.template,Y=this.graphic;this._prevMedia.title=Q.NLS_prevMedia;this._nextMedia.title=Q.NLS_nextMedia;c.set(this._title,"innerHTML",z);z||a.add(this._title,"hidden");if(!E.hasDescription&&F&&(D="",F=p.map(F,function(ca){var la=b.create("tr",{vAlign:"top"});b.create("td",{className:"attrName",innerHTML:t.encode(ca[0])},la);var ta=b.create("td",{className:"attrValue"},la);this._createLinkIfURI(ca[1],
ta);return la},this),F.length)){var ma=b.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});p.forEach(F,function(ca){ma.appendChild(ca)})}ma?(this._description.appendChild(ma),D=!0):c.set(this._description,"innerHTML",D);D||a.add(this._description,"hidden");l.query("a",this._description).forEach(function(ca){ba._preventNewTab(ca.href)?"_blank"===ca.target&&c.remove(ca,"target"):c.set(ca,"target","_blank")});z&&D?l.query(".mainSection .hzLine",L).removeClass("hidden"):z||D?
l.query(".mainSection .hzLine",L).addClass("hidden"):l.query(".mainSection",L).addClass("hidden");if(z=this._attachmentsDfd=fa.getAttachments(Y))z.addBoth(A.hitch(this,this._attListHandler,z)),c.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+Q.NLS_searching+"...\x3c/li\x3e"),l.query(".attachmentsSection",L).removeClass("hidden");J&&J.length&&(l.query(".mediaSection",L).removeClass("hidden"),d.setSelectable(this._mediaFrame,!1),this._mediaInfos=J,this._mediaPtr=0,this._updateUI(),this._displayMedia());
E.editSummary&&(c.set(this._editSummary,"innerHTML",E.editSummary),J&&J.length&&a.remove(this._mediaBreak,"hidden"),a.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(q.NLS_noInfo)},_handleComponentsError:function(E){E&&"cancel"===E.dojoType||(console.log("PopupRenderer: error loading template",E),this._showStatus(q.NLS_noInfo))}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(e,u,B,A,p,l,k){l.extend(e,{waiRole:"",waiState:""});return p("dijit._Templated",[u,B],{constructor:function(){k.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(g,d){var c=this.inherited(arguments),a=d(g,"waiRole");a&&g.setAttribute("role",a);(a=d(g,"waiState"))&&A.forEach(a.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),g.setAttribute("aria-"+b[0],b[1]))});
return c}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,u,B,A,p){return B("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var l=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);p.parse(l,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(A.hitch(this,function(k){this._startupWidgets=k;for(var g=0;g<k.length;g++)this._processTemplateNode(k[g],function(d,c){return d[c]},function(d,c,a){return c in d?d.connect(d,c,a):d.on(c,a,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(l,k,g){return k(l,"dojoType")||k(l,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){e.forEach(this._startupWidgets,function(l){l&&!l._started&&l.startup&&l.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(e,u,B,A,p,l){return e([l,p],{_onMap:function(k){var g=this.constructor._onMap;
g&&g.FINAL||(delete this.constructor._onMap,g=this.registerConnectEvents(),g.FINAL=!0);k=k.toLowerCase();if(g[k])var d=this[g[k].method];else k=this._onCamelCase(k),this[k]&&(d=k);return d},on:function(k,g){var d=this._onMap(k),c=k.replace(/\-/g,""),a="on"+c in this.domNode;return d||!a?this.inherited(arguments):this.own(A(this.domNode,c,g))[0]},emit:function(k,g,d){var c,a=k.toLowerCase(),b=this.constructor._onMap||this.registerConnectEvents();var f=this[this._onMap(a)];g=g||{};g.target||(g.target=
this);if(f&&b&&b[a]){this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},b[a].argKeys)(g);var t=u.mixin({},arguments);t[2]=c;t[0]=b[a].name.replace(/^on/,"")}return this.inherited(t||arguments)}})})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){e=e(c,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(m){m=u.hitch;this._projectHandler=m(this,this._projectHandler);this._simplifyHandler=m(this,this._simplifyHandler);this._bufferHandler=m(this,this._bufferHandler);this._areasAndLengthsHandler=m(this,this._areasAndLengthsHandler);this._lengthsHandler=
m(this,this._lengthsHandler);this._labelPointsHandler=m(this,this._labelPointsHandler);this._relationHandler=m(this,this._relationHandler);this._convexHullHandler=m(this,this._convexHullHandler);this._unionHandler=m(this,this._unionHandler);this._autoCompleteHandler=m(this,this._autoCompleteHandler);this._reshapeHandler=m(this,this._reshapeHandler);this._cutHandler=m(this,this._cutHandler);this._intersectHandler=m(this,this._intersectHandler);this._differenceHandler=m(this,this._differenceHandler);
this._trimExtendHandler=m(this,this._trimExtendHandler);this._densifyHandler=m(this,this._densifyHandler);this._generalizeHandler=m(this,this._densifyHandler);this._offsetHandler=m(this,this._offsetHandler);this._distanceHandler=m(this,this._distanceHandler);this._toGeoCoordinateHandler=m(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=m(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(m){var h=[],v,r=m.length;for(v=0;v<r;v++)h.push(m[v].toJson());
return{geometryType:n.getJsonType(m[0]),geometries:h}},_decodeGeometries:function(m,h,v){var r=n.getGeometryType(h);m=m.geometries;var C=[],w={spatialReference:v.toJson()},y=u.mixin;B.forEach(m,function(q,x){C[x]=new r(y(q,w))});return C},_toProjectGeometry:function(m){var h=m.spatialReference.toJson();return m instanceof a?new f({rings:[[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]],spatialReference:h}):new b({paths:[[].concat(m.points)],spatialReference:h})},
_fromProjectedGeometry:function(m,h,v){return"esriGeometryEnvelope"===h?(m=m.rings[0],new a(m[0][0],m[0][1],m[2][0],m[2][1],v)):new t({points:m.paths[0],spatialReference:v.toJson()})},project:function(m,h,v,r){var C=u.mixin({},this._url.query,{f:"json"});if(m.geometries){r=v;v=h;h=m.outSR;var w=m.geometries[0];C=u.mixin(C,m.toJson())}else w=m[0],C=u.mixin(C,{outSR:h.wkid||A.toJson(h.toJson()),inSR:w.spatialReference.wkid||A.toJson(w.spatialReference.toJson()),geometries:A.toJson(this._encodeGeometries(m))});
var y=n.getJsonType(w),q=this._projectHandler,x=this._errorHandler,E=new p(d._dfdCanceller);E._pendingDfd=g({url:this._url.path+"/project",content:C,callbackParamName:"callback",load:function(z,D){q(z,D,y,h,v,r,E)},error:function(z){x(z,r,E)}});return E},_projectHandler:function(m,h,v,r,C,w,y){try{var q=this._decodeGeometries(m,v,r);this._successHandler([q],"onProjectComplete",C,y)}catch(x){this._errorHandler(x,w,y)}},onProjectComplete:function(){},simplify:function(m,h,v){var r=m[0].spatialReference,
C=u.mixin({},this._url.query,{f:"json",sr:r.wkid?r.wkid:A.toJson(r.toJson()),geometries:A.toJson(this._encodeGeometries(m))}),w=n.getJsonType(m[0]),y=this._simplifyHandler,q=this._errorHandler,x=new p(d._dfdCanceller);x._pendingDfd=g({url:this._url.path+"/simplify",content:C,callbackParamName:"callback",load:function(E,z){y(E,z,w,r,h,v,x)},error:function(E){q(E,v,x)}});return x},_simplifyHandler:function(m,h,v,r,C,w,y){try{var q=this._decodeGeometries(m,v,r);this._successHandler([q],"onSimplifyComplete",
C,y)}catch(x){this._errorHandler(x,w,y)}},onSimplifyComplete:function(){},convexHull:function(m,h,v){var r=m[0].spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(r.toJson()),geometries:A.toJson(this._encodeGeometries(m))});var C=this._convexHullHandler,w=this._errorHandler,y=new p(d._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/convexHull",content:m,callbackParamName:"callback",load:function(q,x){C(q,x,r,h,v,y)},error:function(q){w(q,v,y)}});return y},_convexHullHandler:function(m,
h,v,r,C,w){try{var y=n.fromJson(m.geometry).setSpatialReference(v);this._successHandler([y],"onConvexHullComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onConvexHullComplete:function(){},union:function(m,h,v){var r=m[0].spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(r.toJson()),geometries:A.toJson(this._encodeGeometries(m))});var C=this._unionHandler,w=this._errorHandler,y=new p(d._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/union",content:m,callbackParamName:"callback",
load:function(q,x){C(q,x,r,h,v,y)},error:function(q){w(q,v,y)}});return y},_unionHandler:function(m,h,v,r,C,w){try{var y=n.fromJson(m.geometry).setSpatialReference(v);this._successHandler([y],"onUnionComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onUnionComplete:function(){},autoComplete:function(m,h,v,r){var C=m[0].spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(C.toJson()),polygons:A.toJson(this._encodeGeometries(m).geometries),polylines:A.toJson(this._encodeGeometries(h).geometries)});
var w=this._autoCompleteHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/autoComplete",content:m,callbackParamName:"callback",load:function(x,E){w(x,E,C,v,r,q)},error:function(x){y(x,r,q)}});return q},_autoCompleteHandler:function(m,h,v,r,C,w){try{var y=m.geometries;m=[];var q,x=y.length;for(q=0;q<x;q++)m[q]=new f({spatialReference:v,rings:y[q].rings});this._successHandler([m],"onAutoCompleteComplete",r,w)}catch(E){this._errorHandler(E,C,w)}},onAutoCompleteComplete:function(){},
reshape:function(m,h,v,r){var C=m.spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(C.toJson()),target:A.toJson({geometryType:n.getJsonType(m),geometry:m.toJson()}),reshaper:A.toJson(h.toJson())});var w=this._reshapeHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/reshape",content:m,callbackParamName:"callback",load:function(x,E){w(x,E,C,v,r,q)},error:function(x){y(x,r,q)}});return q},_reshapeHandler:function(m,h,v,r,C,w){try{var y=n.fromJson(m.geometry).setSpatialReference(v);
this._successHandler([y],"onReshapeComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onReshapeComplete:function(){},cut:function(m,h,v,r){var C=m[0].spatialReference,w=B.map(m,function(E){return E.toJson()});m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(C.toJson()),target:A.toJson({geometryType:n.getJsonType(m[0]),geometries:w}),cutter:A.toJson(h.toJson())});var y=this._cutHandler,q=this._errorHandler,x=new p(d._dfdCanceller);x._pendingDfd=g({url:this._url.path+"/cut",content:m,callbackParamName:"callback",
load:function(E,z){y(E,z,C,v,r,x)},error:function(E){q(E,r,x)}});return x},_cutHandler:function(m,h,v,r,C,w){try{var y=m.geometries,q={};q.cutIndexes=m.cutIndexes;q.geometries=[];B.forEach(y,function(x){q.geometries.push(n.fromJson(x).setSpatialReference(v))});this._successHandler([q],"onCutComplete",r,w)}catch(x){this._errorHandler(x,C,w)}},onCutComplete:function(){},intersect:function(m,h,v,r){var C=m[0].spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(C.toJson()),geometries:A.toJson(this._encodeGeometries(m)),
geometry:A.toJson({geometryType:n.getJsonType(h),geometry:h.toJson()})});var w=this._intersectHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/intersect",content:m,callbackParamName:"callback",load:function(x,E){w(x,E,C,v,r,q)},error:function(x){y(x,r,q)}});return q},_intersectHandler:function(m,h,v,r,C,w){try{var y=[];B.forEach(m.geometries,function(q){y.push(n.fromJson(q).setSpatialReference(v))});this._successHandler([y],"onIntersectComplete",r,w)}catch(q){this._errorHandler(q,
C,w)}},onIntersectComplete:function(){},difference:function(m,h,v,r){var C=m[0].spatialReference;m=u.mixin({},this._url.query,{f:"json",sr:A.toJson(C.toJson()),geometries:A.toJson(this._encodeGeometries(m)),geometry:A.toJson({geometryType:n.getJsonType(h),geometry:h.toJson()})});var w=this._differenceHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/difference",content:m,callbackParamName:"callback",load:function(x,E){w(x,E,C,v,r,q)},error:function(x){y(x,
r,q)}});return q},_differenceHandler:function(m,h,v,r,C,w){try{var y=[];B.forEach(m.geometries,function(q){y.push(n.fromJson(q).setSpatialReference(v))});this._successHandler([y],"onDifferenceComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onDifferenceComplete:function(){},buffer:function(m,h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.outSpatialReference||m.geometries[0].spatialReference,w=this._bufferHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+
"/buffer",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_bufferHandler:function(m,h,v,r,C,w){try{var y=m.geometries;m=[];var q,x=y.length;for(q=0;q<x;q++)m[q]=new f({spatialReference:v,rings:y[q].rings});this._successHandler([m],"onBufferComplete",r,w)}catch(E){this._errorHandler(E,C,w)}},onBufferComplete:function(){},areasAndLengths:function(m,h,v){m=u.mixin({},this._url.query,{f:"json"},m.toJson());var r=this._areasAndLengthsHandler,
C=this._errorHandler,w=new p(d._dfdCanceller);w._pendingDfd=g({url:this._url.path+"/areasAndLengths",content:m,callbackParamName:"callback",load:function(y,q){r(y,q,h,v,w)},error:function(y){C(y,v,w)}});return w},_areasAndLengthsHandler:function(m,h,v,r,C){try{this._successHandler([m],"onAreasAndLengthsComplete",v,C)}catch(w){this._errorHandler(w,r,C)}},onAreasAndLengthsComplete:function(){},lengths:function(m,h,v){m=u.mixin({},this._url.query,{f:"json"},m.toJson());var r=this._lengthsHandler,C=this._errorHandler,
w=new p(d._dfdCanceller);w._pendingDfd=g({url:this._url.path+"/lengths",content:m,callbackParamName:"callback",load:function(y,q){r(y,q,h,v,w)},error:function(y){C(y,v,w)}});return w},_lengthsHandler:function(m,h,v,r,C){try{this._successHandler([m],"onLengthsComplete",v,C)}catch(w){this._errorHandler(w,r,C)}},onLengthsComplete:function(){},labelPoints:function(m,h,v){var r=B.map(m,function(x){return x.toJson()}),C=m[0].spatialReference;r=u.mixin({},this._url.query,{f:"json",sr:C.wkid?C.wkid:A.toJson(C.toJson()),
polygons:A.toJson(r)});var w=this._labelPointsHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/labelPoints",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,m,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_labelPointsHandler:function(m,h,v,r,C,w,y){try{var q=[];B.forEach(m.labelPoints,function(x){q.push(n.fromJson(x).setSpatialReference(r))});this._successHandler([q],"onLabelPointsComplete",C,y)}catch(x){this._errorHandler(x,w,y)}},onLabelPointsComplete:function(){},
relation:function(m,h,v){m=u.mixin({},this._url.query,{f:"json"},m.toJson());var r=this._relationHandler,C=this._errorHandler,w=new p(d._dfdCanceller);w._pendingDfd=g({url:this._url.path+"/relation",content:m,callbackParamName:"callback",load:function(y,q){r(y,q,h,v,w)},error:function(y){C(y,v,w)}});return w},_relationHandler:function(m,h,v,r,C){try{this._successHandler([m.relations],"onRelationComplete",v,C)}catch(w){this._errorHandler(w,r,C)}},onRelationComplete:function(){},trimExtend:function(m,
h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.sr,w=this._trimExtendHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/trimExtend",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_trimExtendHandler:function(m,h,v,r,C,w){try{var y=m.geometries;m=[];var q,x=y.length;for(q=0;q<x;q++)m[q]=new b({spatialReference:v,paths:y[q].paths});this._successHandler([m],"onTrimExtendComplete",
r,w)}catch(E){this._errorHandler(E,C,w)}},onTrimExtendComplete:function(){},densify:function(m,h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.geometries[0].spatialReference,w=this._densifyHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/densify",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_densifyHandler:function(m,h,v,r,C,w){try{var y=[];B.forEach(m.geometries,function(q){y.push(n.fromJson(q).setSpatialReference(v))});
this._successHandler([y],"onDensifyComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onDensifyComplete:function(){},generalize:function(m,h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.geometries[0].spatialReference,w=this._generalizeHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/generalize",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_generalizeHandler:function(m,
h,v,r,C,w){try{var y=[];B.forEach(m.geometries,function(q){y.push(n.fromJson(q).setSpatialReference(v))});this._successHandler([y],"onGeneralizeComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onGeneralizeComplete:function(){},offset:function(m,h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.geometries[0].spatialReference,w=this._offsetHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/offset",content:r,callbackParamName:"callback",load:function(x,
E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_offsetHandler:function(m,h,v,r,C,w){try{var y=[];B.forEach(m.geometries,function(q){y.push(n.fromJson(q).setSpatialReference(v))});this._successHandler([y],"onOffsetComplete",r,w)}catch(q){this._errorHandler(q,C,w)}},onOffsetComplete:function(){},distance:function(m,h,v){var r=u.mixin({},this._url.query,{f:"json"},m.toJson()),C=m.geometry1.spatialReference,w=this._distanceHandler,y=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=
g({url:this._url.path+"/distance",content:r,callbackParamName:"callback",load:function(x,E){w(x,E,C,h,v,q)},error:function(x){y(x,v,q)}});return q},_distanceHandler:function(m,h,v,r,C,w){try{m=m&&m.distance,this._successHandler([m],"onDistanceComplete",r,w)}catch(y){this._errorHandler(y,C,w)}},onDistanceComplete:function(){},toGeoCoordinateString:function(m,h,v){var r={};u.isObject(m.sr)?r.sr=m.sr.wkid||A.toJson(m.sr.toJson()):r.sr=m.sr;r.coordinates=A.toJson(m.coordinates);r.conversionType=m.conversionType||
"MGRS";r.conversionMode=m.conversionMode;r.numOfDigits=m.numOfDigits;r.rounding=m.rounding;r.addSpaces=m.addSpaces;m=u.mixin({},this._url.query,{f:"json"},r);var C=this._toGeoCoordinateHandler,w=this._errorHandler,y=new p(d._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/toGeoCoordinateString",content:m,callbackParamName:"callback",load:function(q,x){C(q,x,h,v,y)},error:function(q){w(q,v,y)}});return y},_toGeoCoordinateHandler:function(m,h,v,r,C){try{this._successHandler([m.strings],"onToGeoCoordinateStringComplete",
v,C)}catch(w){this._errorHandler(w,r,C)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(m,h,v){var r={};u.isObject(m.sr)?r.sr=m.sr.wkid||A.toJson(m.sr.toJson()):r.sr=m.sr;r.strings=A.toJson(m.strings);r.conversionType=m.conversionType||"MGRS";r.conversionMode=m.conversionMode;m=u.mixin({},this._url.query,{f:"json"},r);var C=this._fromGeoCoordinateHandler,w=this._errorHandler,y=new p(d._dfdCanceller);y._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:m,
callbackParamName:"callback",load:function(q,x){C(q,x,h,v,y)},error:function(q){w(q,v,y)}});return y},_fromGeoCoordinateHandler:function(m,h,v,r,C){try{this._successHandler([m.coordinates],"onToGeoCoordinateStringComplete",v,C)}catch(w){this._errorHandler(w,r,C)}},onFromGeoCoordinateStringComplete:function(){}});u.mixin(e,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return e})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi require".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q,ba,fa,Y,ma,ca,la,ta,za,P,ea,ra,M,Z,ka,qa,ua,Aa,ya,G,I,R,X,W,sa,T,S,ia,na,va){var Ba=C.defaults,Na=!!m("esri-pbf"),Va=!!m("esri-featurelayer-pbf"),Da=B(ra,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(K,V){this._preventInit||this._initFeatureLayer(K,V)},_initFeatureLayer:function(K,V){V=V||{};this._tileWidth=V.tileWidth||512;this._tileHeight=V.tileHeight||512;this.i18n=va;this._featureReduction=this._featureReduction||V.featureReduction;this._featureReductionEnabled=null!=V.featureReductionEnabled?V.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=V.featureUpdatesCheckEnabled?V.featureUpdatesCheckEnabled:!0;this.showLabels=null!=V.showLabels?V.showLabels:
!0;this._outFields=V.outFields;this._defnExpr=V.definitionExpression;this._loadCallback=V.loadCallback;this._trackIdField=V.trackIdField;this.objectIdField=V.objectIdField;var ha=null!=V.resolution,N=null!=V.maxAllowableOffset;this._maxOffset=this._optMaxOffset=ha||N?ha?V.resolution:V.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=V.quantize?V.quantize:!0;this._optEditable=V.editable;this._optAutoGen=V.autoGeneralize;this.editSummaryCallback=V.editSummaryCallback;this.userId=V.userId;
this.userIsAdmin=V.userIsAdmin;this.useMapTime=V.hasOwnProperty("useMapTime")?!!V.useMapTime:!0;this.source=V.source;this.gdbVersion=V.gdbVersion;this.orderByFields=V.orderByFields;this.maxPointCountForAuto=null!=V.maxPointCountForAuto?V.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=V.maxRecordCountForAuto?V.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=V.maxVertexCountForAuto?V.maxVertexCountForAuto:this.maxVertexCountForAuto;
this.generalizeForScale=null!=V.generalizeForScale?V.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=V.queryPagination?V.queryPagination:!0;this.multipatchOption=V.multipatchOption;this.subtypeSublayerInfo=V.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();ha=v.isDefined(V.mode)?V.mode:Da.MODE_ONDEMAND;this._isStream&&(ha=Da.MODE_STREAM);this.mode=ha;switch(ha){case Da.MODE_SNAPSHOT:this.currentMode=
Da.MODE_SNAPSHOT;this._mode=new R(this);break;case Da.MODE_ONDEMAND:case Da.MODE_AUTO:this.currentMode=Da.MODE_ONDEMAND;this._mode=new X(this);this.latticeTiling=V.latticeTiling;break;case Da.MODE_SELECTION:this.currentMode=Da.MODE_SELECTION;this._mode=new W(this);this._isSelOnly=!0;break;case Da.MODE_STREAM:this.currentMode=Da.MODE_STREAM,this._mode=new sa(this),this._isStream=!0}this._initLayer=p.hitch(this,this._initLayer);this._selectHandler=p.hitch(this,this._selectHandler);this._editable=!1;
if(p.isObject(K)&&K.layerDefinition)return this._collection=!0,this.mode=this._isStream?Da.MODE_STREAM:Da.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(K),this;this.source&&(K={source:this.source.toJson()},this._url.query=p.mixin(this._url.query,{layer:k.toJson(K)}));this.gdbVersion&&(this._url.query=p.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new Y(this.url,{source:this.source,gdbVersion:this.gdbVersion});K=this._url.path;this._fserver=
!1;-1!==K.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(V=V.resourceInfo)?this._initLayer(V):r({url:K,content:p.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(K,V){if(K||V){this._json=K;V=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||K&&K._ssl)this._useSSL(),this._task._useSSL();this._collection&&(this._isStream||
(this.currentMode=Da.MODE_SNAPSHOT,this._mode=new R(this)),this._featureSet=K.featureSet,this._nextId=K.nextObjectId,K=K.layerDefinition);this.version=K.currentVersion;this.version||(this.version="capabilities"in K||"drawingInfo"in K||"hasAttachments"in K||"htmlPopupType"in K||"relationships"in K||"timeInfo"in K||"typeIdField"in K||"types"in K?10:9.3);this.geometryType=K.geometryType;K.bandCount&&K.fields&&1<K.fields.length&&(this.geometryType="esriGeometryPolygon",this._isImageService=!0);"string"!==
typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(K.hasOwnProperty("capabilities")){var ha=this.capabilities=K.capabilities;ha&&-1!==ha.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);v.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._isImageService&&
(this._editable=!1);this._json=k.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=v.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Da.MODE_ONDEMAND||this.mode===Da.MODE_AUTO,delete this._optAutoGen);ha=K.effectiveMinScale||K.minScale;var N=K.effectiveMaxScale||K.maxScale;!this._hasMin&&ha&&this.setMinScale(ha);!this._hasMax&&N&&this.setMaxScale(N);this.layerId=K.id;this.name=V&&V.title||K.name;this.description=K.description;this.copyright=
K.copyrightText;this.type=K.type;this.displayField=K.displayField;this.defaultDefinitionExpression=K.definitionExpression||(K.isView?K.viewDefinitionQuery:K.definitionQuery);this.fullExtent=new ta(K.extent);this.initialExtent=new ta(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new q(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=K.defaultVisibility;this.editingInfo=K.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||null==this.editingInfo.lastEditDate);
if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=K.hasM||!1;this.hasZ=K.hasZ||!1;this.indexedFields=K.indexedFields;this.indexes=K.indexes;this.maxRecordCount=K.maxRecordCount;this.canModifyLayer=K.canModifyLayer;this.supportsStatistics=K.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:K.supportsAdvancedQueries;this.supportsCalculate=K.supportsCalculate;this.supportsASyncCalculate=K.supportsASyncCalculate;
this.supportsAttachmentsByUploadId=K.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=K.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=K.supportsQuantizationEditMode;this.supportsFieldDescription=K.supportsFieldDescriptionProperty;this.supportsFormatPBF=K.supportedQueryFormats?-1!==l.map(K.supportedQueryFormats.toLowerCase().split(","),p.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=K.hasLabels;this.canScaleSymbols=
K.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=K.supportsRollbackOnFailure;this.syncCanReturnChanges=K.syncCanReturnChanges;this.isDataVersioned=K.isDataVersioned;this.editFieldsInfo=K.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=K.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=K.relationships;this.allowGeometryUpdates=
v.isDefined(K.allowGeometryUpdates)?K.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!K.allowUpdateWithoutMValues;this.enableZDefaults=!!K.enableZDefaults;this.zDefault=v.isDefined(K.zDefault)?K.zDefault:null;this.advancedQueryCapabilities=K.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=K.hasGeometryProperties&&K.geometryProperties||null;this.url&&(this.advancedQueryCapabilities.supportsPagination=
this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=K.useStandardizedQueries;this.tileMaxRecordCount=K.tileMaxRecordCount;this.standardMaxRecordCount=K.standardMaxRecordCount;if(ha=K.dateFieldsTimeReference)this.dateFieldsTimeReference=new ka(ha);this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;N=K.fields;
this._createFields(N);if(!this.objectIdField){this.objectIdField=K.objectIdField;if(!this.objectIdField)for(N=K.fields,ha=0;ha<N.length;ha++){var aa=N[ha];if("esriFieldTypeOID"===aa.type){this.objectIdField=aa.name;break}}this.objectIdField||this._isStream||console.debug("esri.layers.FeatureLayer: "+v.substitute({url:this.url},"objectIdField is not set [url: ${url}]"))}if(!v.isDefined(this._nextId)){N=this.objectIdField;aa=-1;if(this._collection&&N){var ja=(ha=this._featureSet)&&ha.features,pa=ja?
ja.length:0;for(ha=0;ha<pa;ha++){var wa=(wa=ja[ha].attributes)&&wa[N];wa>aa&&(aa=wa)}}this._nextId=aa+1}this.globalIdField=K.globalIdField;if(ha=this.typeIdField=K.typeIdField)if(ha=!this._getField(ha)&&this._getField(ha,!0))this.typeIdField=ha.name;this.visibilityField=K.visibilityField;if(N=K.defaultSymbol)this.defaultSymbol=F.fromJson(N);var Ja=this.types=[],Ea=K.types;aa=(ha=this.editFieldsInfo)&&ha.creatorField;ja=ha&&ha.editorField;wa=aa||ja;pa=[];if(Ea)for(ha=0;ha<Ea.length;ha++){var Qa=new qa(Ea[ha]);
var Ka=Qa.templates;wa&&Ka&&Ka.length&&(pa=pa.concat(Ka));Ja.push(Qa)}Ea=K.templates;Qa=this.templates=[];if(Ea)for(ha=0;ha<Ea.length;ha++)Ja=new ua(Ea[ha]),wa&&pa.push(Ja),Qa.push(Ja);for(ha=0;ha<pa.length;ha++)if(wa=p.getObject("prototype.attributes",!1,pa[ha]))aa&&delete wa[aa],ja&&delete wa[ja];if(ha=K.subtypeField)this.subtypeField=(ha=this.getField(ha))?ha.name:null;this.defaultSubtypeCode=K.defaultSubtypeCode;this.subtypes=l.map(K.subtypes,function(db){return new Aa(db)});this._applySTSublayerInfo(V);
if(V=K.timeInfo)this.timeInfo=new Z(V),this._startTimeField=V.startTimeField,this._endTimeField=V.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?V.trackIdField=this._trackIdField:this._trackIdField=V.trackIdField;this.hasAttachments=!this._collection&&K.hasAttachments?!0:!1;this.htmlPopupType=K.htmlPopupType;V=K.drawingInfo;(ha=V&&V.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=l.map(ha,function(db){return new G(db)}),this._fixLabelExpr());
if(!this.renderer)if(V&&V.renderer){var Pa=V.renderer;this.setRenderer(Q.fromJson(Pa,{geometryType:this.geometryType}));"classBreaks"===Pa.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var Ua=Pa.type;ha=[];Pa=this.renderer;switch(Ua){case "simple":ha.push(Pa.symbol);break;case "uniqueValue":case "classBreaks":ha.push(Pa.defaultSymbol),ha=ha.concat(l.map(Pa.infos,function(db){return db.symbol}))}ha=l.filter(ha,v.isDefined);var eb=this._url.path+"/images/",ab=this._getToken();l.forEach(ha,
function(db){var kb=db.url;kb&&(-1===kb.search(/https?:/)&&-1===kb.indexOf("data:")&&(db.url=eb+kb),ab&&-1!==db.url.search(/https?:/)&&(db.url+="?token\x3d"+ab))})}}else if(N)Ea=this.types,0<Ea.length?(Pa=new L(this.defaultSymbol,this.typeIdField),l.forEach(Ea,function(db){Pa.addValue(db.id,db.symbol)})):Pa=new J(this.defaultSymbol),this.setRenderer(Pa);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":Ua=new E;break;case "esriGeometryPolyline":Ua=
new z;break;case "esriGeometryPolygon":Ua=new D;break;default:this.hasXYFootprint()&&(Ua=new D)}this.setRenderer(Ua?new J(Ua):null)}Ua=V&&V.transparency||0;!this.hasOwnProperty("opacity")&&0<Ua&&(this.opacity=1-Ua/100);(m("ie")||7<=m("trident")||m("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=K.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var gb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||
this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==Da.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var db=this._loadCallback;db&&(delete this._loadCallback,db(this))};K=[];this._collection?(Ua=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new ca(Ua)),this._fcAdded=!0):(K.push(this._forceIdentity()),this._limitPromise&&K.push(this._limitPromise));K.push(this._evalArcadeSupport());K.length?y(K).then(p.hitch(this,
function(){gb.call(this)})):gb.call(this)}},_applySTSublayerInfo:function(K){K&&this.subtypeField&&(this.subtypeCode=K.subtypeCode,this._applySTSublayerDefinitionExpression(K),this._filterSubtypes(K),this._applySTTemplates(K),this._applySTFieldOverrides(K))},_applySTSublayerDefinitionExpression:function(K){var V=[],ha=this.getDefinitionExpression();ha&&V.push(ha);(K=K.layerDefinition&&K.layerDefinition.definitionExpression)&&V.push(K);1<V.length&&(V=l.map(V,function(N){return"("+N+")"}));this.setDefinitionExpression(V.length?
V.join(" AND "):null)},_applySTTemplates:function(K){if(K=K.layerDefinition&&K.layerDefinition.templates)this.templates=l.map(K,function(V){return new ua(V)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=l.filter(this.subtypes,function(K){return K.code===this.subtypeCode},this))},_applySTFieldOverrides:function(K){var V=K.layerDefinition&&K.layerDefinition.fieldOverrides;if(V){this.fields=l.filter(this.fields,function(N){return l.some(V,function(aa){return aa.name===N.name})});var ha=
this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(N){var aa=l.filter(V,function(ja){return ja.name===N.name})[0];aa.alias&&(N.alias=aa.alias);if(!1===aa.editable||N.name===this.subtypeField)N.editable=!1;ha&&(aa=ha[N.name])&&"inherited"!==aa.type&&(N.domain=I.fromJson(aa.toJson()))},this)}},setShowLabels:function(K){var V=this.showLabels;this.showLabels=K;V!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(K){this.inherited(arguments);
var V=this._map;this._ager=!!(K&&K.observationAger&&K.observationRenderer);K&&"colors"in K&&"blurRadius"in K&&"maxPixelIntensity"in K?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&V&&(this._heatmapManager=new ia(this),this._heatmapManager.initialize(V))):this.renderer&&this.renderer.getRendererInfo?l.some(this.renderer.rendererInfos,function(aa){return aa.renderer&&"colors"in aa.renderer&&"blurRadius"in aa.renderer})||(this._heatmapManager=null):this._heatmapManager=
null;this.timeInfo&&V&&(K&&(K.latestObservationRenderer||K.trackRenderer)?this._trackManager||(this._trackManager=new S(this),this._trackManager.initialize(V),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(K){var ha=[];V=l.filter([K,K.observationRenderer,K.latestObservationRenderer,K.trackRenderer],v.isDefined);var N=function(aa){return null!=aa&&"function"!=typeof aa&&aa};
l.forEach(V,function(aa){var ja=N(aa.attributeField),pa=N(aa.attributeField2);aa=N(aa.attributeField3);!1!==ja&&ha.push(ja);!1!==pa&&ha.push(pa);!1!==aa&&ha.push(aa)});this._requiredFields=ha}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(K){K&&(K=p.mixin({},K),null!=K.clusterSize&&null==K.clusterRadius&&(K.clusterRadius=K.clusterSize),delete K.clusterSize);this.loaded?
this._isFeatureReductionSupported(K)?this._featureReduction=K:(this._featureReduction=null,K&&console.log("Clustering is not supported for this layer: "+this.url)):this._featureReduction=K;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var K=this._featureReduction;if(K){K=p.mixin({},K);var V=this._clusterManager;if(V=V&&V.aggregationInfo)K.clusterRadius=V.clusterRadius,K.infoTemplate=V.infoTemplate}return K},
isFeatureReductionActive:function(){var K=this._clusterManager;return!!(K&&K.isClusteringEnabled()&&K.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},
isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(K){return this._clusterManager?this._clusterManager.getFeaturesInCluster(K):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?
this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(K){var V,ha=this._clusterManager?this._clusterManager.getClusterFields():null;K=K?K.toLowerCase():"";l.some(ha,function(N){K===N.name.toLowerCase()&&(V=N);return!!V});return V},_isFeatureReductionSupported:function(K){return K&&"cluster"===K.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||
this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(K){K=K&&K.declaredClass||"";K=K.toLowerCase();return-1<K.indexOf("simplerenderer")||-1<K.indexOf("classbreaksrenderer")||-1<K.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(K){this.loaded&&this.getMap()&&(K=K||this.getFeatureReduction(),this._evalModeFromFReduction(K),K&&this.isFeatureReductionEnabled()?this._canCluster(K)?this._clusterManager?this._updateClusterManager(K):
(this._clusterManager=this._createClusterManager(K),this.onFeatureReductionChange()):(console.log("Clustering is supported only for point layers where map spatial reference is WGS84 or Web Mercator"),this._destroyClusterManager()):this._destroyClusterManager())},_canCluster:function(K){var V=this._map;if(!V)return!1;V=V.spatialReference;return this._isFeatureReductionSupported(K)&&this._isReductionCompatibleRenderer(this.renderer)&&(V.isWebMercator()||4326===V.wkid)},_createClusterManager:function(K){K=
new na({layer:this,aggregationInfo:K});this._clusterHandles=[K.on("renderer-change",p.hitch(this,function(){this.onFeatureReductionRendererChange()}))];K.initialize(this._map);return K},_updateClusterManager:function(K){var V=this._clusterManager;V&&V.setAggregationInfo(K)},_destroyClusterManager:function(K){l.forEach(this._clusterHandles,function(V){V.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(K),this._clusterManager=null,this.onFeatureReductionChange())},
redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(K){this.inherited(arguments);var V=this._getRenderer();this._ager=!!(V&&V.observationAger&&V.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(V&&V.trackRenderer);K&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(K){this._clusterManager?
this._clusterManager.toggleFeatureVisibility(K):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(K){this._hasOnDemandDrillMode()&&(K=K||{},null!=K.maxDrillLevel&&(this._mode.maxDrillLevel=K.maxDrillLevel),null!=K.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=K.maxRecordCountFactor),null!=K.enablePBFQuery&&(this._mode.enablePBFQuery=K.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&
(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Da.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===Da.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var K=this.renderer,V=K.declaredClass?K.declaredClass.toLowerCase():
"";return(-1<V.indexOf("simplerenderer")||-1<V.indexOf("classbreaksrenderer")||-1<V.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(K)&&this._hasWebGLCompatibleVVs(K)},_hasWebGLCompatibleSymbols:function(K){K=this._getAllSymbolsInRenderer(K);return!(this._hasSLSWithMarker(K)||this._hasIncompatibleSMSStyles(K)||this._hasGIFMarker(K))},_hasWebGLCompatibleVVs:function(K){return!l.some(K&&K.visualVariables,function(V){var ha=V.type;return("colorInfo"===ha||"opacityInfo"===ha)&&V.stops&&
8<V.stops.length||"sizeInfo"===ha&&(V.field||V.valueExpression&&"$view.scale"!==V.valueExpression||V.expression&&"view.scale"!==V.expression)&&V.stops&&6<V.stops.length?!0:!1})},_hasSLSWithMarker:function(K){return l.some(K,function(V){return V&&"simplelinesymbol"===V.type&&!!V.marker})},_hasIncompatibleSMSStyles:function(K){var V=void 0===m("ie")&&7==m("trident");return l.some(K,function(ha){return ha&&"simplemarkersymbol"===ha.type&&("triangle"===ha.style||"path"===ha.style&&V)})},_hasGIFMarker:function(K){var V=
/\.gif$/,ha=/^image\/gif$/;return l.some(K,function(N){return N&&"picturemarkersymbol"===N.type?V.test(N.url)||ha.test(N.contentType):!1})},_getAllSymbolsInRenderer:function(K){var V=[];K&&(V.push(K.symbol),V.push(K.defaultSymbol),l.forEach(K.infos,function(ha){V.push(ha.symbol)}),V=l.filter(V,function(ha){return!!ha}));return V},_setMap:function(K){var V=this.inherited(arguments),ha=this._mode,N=this;ha&&K.loaded&&ha.initialize(K);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,
"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(aa){aa=aa.graphic.attributes;(aa=N._selectedFeatures[aa&&aa[N.objectIdField]])&&aa.attr("data-selected","")});return V},_unsetMap:function(K){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);A.disconnect(this._zoomConnect);A.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},
onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(K){!this._needsRefresh&&K&&K.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(K=this._mode)&&K.refresh())},setFeatureUpdatesCheckEnabled:function(K){this._featureUpdatesCheckEnabled=K},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&
!!this.refreshInterval&&!!p.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var K=new g;if(!this.supportsLastEditDate)return K.reject(Error("FeatureLayer does not support supportsLastEditDate")),K.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=r({url:this._url.path,content:p.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(p.hitch(this,function(V){V=V.editingInfo.lastEditDate;var ha=this.editingInfo.lastEditDate!==
V;this.editingInfo.lastEditDate=V;return ha}));this._fetchMetadataPromise.then(function(V){K.isFulfilled()||K.resolve(V)}).otherwise(function(V){K.isFulfilled()||K.reject(V)});return K.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return l.filter(this._getOutFields(),function(K){return"*"===K||!!this._getField(K)},this)},getField:function(K){return this._getField(K,!0)},isOutField:function(K){K=
this.getField(K);if(!K)return!1;var V=this.getOutFields();return-1<l.indexOf(V,"*")||-1<l.indexOf(V,K.name)},getFieldLabel:function(K){var V=this.infoTemplate;V=V&&V.getFieldInfo&&V.getFieldInfo(K);K=p.isFunction(K)?null:this.getField(K);var ha=V||K,N="";ha&&(N=V&&V.label||K&&K.alias||ha.name||ha.fieldName);return N},getDomain:function(K,V){var ha,N,aa=(V=V&&V.feature)&&this.typeIdField&&V.attributes&&V.attributes[this.typeIdField];null!=aa&&l.some(this.types,function(ja){return ja.id==aa?((ha=ja.domains&&
ja.domains[K])&&"inherited"===ha.type&&(ha=this._getLayerDomain(K),N=!0),!0):!1},this);N||ha||(ha=this._getLayerDomain(K));return ha},_getLayerDomain:function(K){this._createFieldsIndex();var V=this._fieldsIndex;if(V)return V=V.caseSensitive,(V=V.get(K))?V.domain:null;var ha;l.some(this.fields,function(N){N.name===K&&(ha=N.domain);return!!ha});return ha},getType:function(K){return this.getTypeById(K&&this.typeIdField&&K.attributes&&K.attributes[this.typeIdField])},getTypeById:function(K){var V;l.some(this.types,
function(ha){ha.id==K&&(V=ha);return!!V});return V},getSubtypeByCode:function(K){var V;l.some(this.subtypes,function(ha){ha.code==K&&(V=ha);return!!V});return V},setEditable:function(K){if(!this._collection)return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),this;if(this._isImageService)return this;if(!this.loaded)return this._optEditable=K,this;var V=this._editable;this._editable=K;this._updateCaps();if(V!==K)this.onCapabilitiesChange();
return this},getEditCapabilities:function(K){var V={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return V;var ha=K&&K.feature;K=K&&K.userId||this.getUserId();var N=l.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],p.trim),aa=(V=-1<l.indexOf(N,"editing"))&&-1<l.indexOf(N,"create"),ja=V&&-1<l.indexOf(N,"update");N=V&&-1<l.indexOf(N,"delete");var pa=this.ownershipBasedAccessControlForFeatures,wa=this.editFieldsInfo,Ja=wa&&wa.creatorField;
wa=wa&&wa.realm;ha=(ha=ha&&ha.attributes)&&Ja?ha[Ja]:void 0;var Ea=!!this.userIsAdmin;Ja=!pa||Ea||!(!pa.allowOthersToUpdate&&!pa.allowUpdateToOthers);var Qa=!pa||Ea||!(!pa.allowOthersToDelete&&!pa.allowDeleteToOthers),Ka=!pa||Ea||!pa.hasOwnProperty("allowAnonymousToUpdate")||pa.allowAnonymousToUpdate;pa=!pa||Ea||!pa.hasOwnProperty("allowAnonymousToDelete")||pa.allowAnonymousToDelete;K&&wa&&(K=K+"@"+wa);if(Ea||V&&!(aa||ja||N))aa=ja=N=!0;V={canCreate:aa,canUpdate:ja,canDelete:N,canUpdateGeometry:Ea||
this.allowGeometryUpdates};K||(V.canUpdate=V.canUpdate&&Ka,V.canDelete=V.canDelete&&pa);null===ha?(V.canUpdate=V.canUpdate&&Ja,V.canDelete=V.canDelete&&Qa):""!==ha&&ha&&K.toLowerCase()!==ha.toLowerCase()&&(V.canUpdate=V.canUpdate&&Ja,V.canDelete=V.canDelete&&Qa);return V},getUserId:function(){var K;this.loaded&&(K=this.credential&&this.credential.userId||this.userId||"");return K},setUserIsAdmin:function(K){this.userIsAdmin=K},setEditSummaryCallback:function(K){this.editSummaryCallback=K},getEditSummary:function(K,
V,ha){ha=v.isDefined(ha)?ha:(new Date).getTime();var N="";ha=this.getEditInfo(K,V,ha);(V=V&&V.callback||this.editSummaryCallback)&&(ha=V(K,ha)||"");if(p.isString(ha))N=ha;else{if(ha){K=ha.action;V=ha.userId;var aa=ha.timeValue,ja=0;K&&ja++;V&&ja++;v.isDefined(aa)&&ja++;1<ja&&(N=("edit"===K?"edit":"create")+(V?"User":"")+(v.isDefined(aa)?ha.displayPattern:""))}N=N&&v.substitute(ha,this.i18n.layers.FeatureLayer[N])}return N},getEditInfo:function(K,V,ha){if(this.loaded){ha=v.isDefined(ha)?ha:(new Date).getTime();
V=V&&V.action||"last";var N=this.editFieldsInfo,aa=N&&N.creatorField,ja=N&&N.creationDateField,pa=N&&N.editorField;N=N&&N.editDateField;pa=(K=K&&K.attributes)&&pa?K[pa]:void 0;N=K&&N?K[N]:null;aa=this._getEditData(K&&aa?K[aa]:void 0,K&&ja?K[ja]:null,ha);ha=this._getEditData(pa,N,ha);switch(V){case "creation":var wa=aa;break;case "edit":wa=ha;break;case "last":wa=ha||aa}wa&&(wa.action=wa===ha?"edit":"creation");return wa}},_getEditData:function(K,V,ha){if(v.isDefined(V)){var N=ha-V;var aa=0>N?"Full":
6E4>N?"Seconds":12E4>N?"Minute":36E5>N?"Minutes":72E5>N?"Hour":864E5>N?"Hours":6048E5>N?"WeekDay":"Full"}if(void 0!==K||aa){var ja=ja||{};ja.userId=K;aa&&(K=d.format,ha=new Date(V),ja.minutes=Math.floor(N/6E4),ja.hours=Math.floor(N/36E5),ja.weekDay=K(ha,{datePattern:"EEEE",selector:"date"}),ja.formattedDate=K(ha,{selector:"date"}),ja.formattedTime=K(ha,{selector:"time"}),ja.displayPattern=aa,ja.timeValue=V)}return ja},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var K=
l.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],p.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==l.indexOf(K,"query")||-1!==l.indexOf(K,"catalog")},setResolution:function(K){return this.setMaxAllowableOffset(K)},setMaxAllowableOffset:function(K){this.isEditable()||(this._optMaxOffset=K,this._setMaxOffset(K,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},
_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var K=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:K},_setMaxOffset:function(K,V){if(null==K)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?
("esriGeometryPolyline"===this.geometryType?this._maxOffset=K:delete this._maxOffset,this._quantizationParameters=K?{mode:"view",originPosition:"upperLeft",tolerance:K,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&V||(K=Math.floor(K)),isNaN(K)||0===K?delete this._maxOffset:this._maxOffset=K,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},
_isLangWithDot:function(K){K=(K=K&&K.split("-"))&&K[0]&&K[0].toLowerCase();return-1!==l.indexOf(this._langsWithDot,K)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(K){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=K)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=K;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Da.MODE_SNAPSHOT},setGDBVersion:function(K){this._collection||
K===this.gdbVersion||!K&&!this.gdbVersion||(this.gdbVersion=K,this._task.gdbVersion=K,this._url.query=p.mixin(this._url.query,{gdbVersion:K}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(K){this._defnExpr=K;this._hasPendingLimitQuery()||((K=this._checkFeatureLimit())?
this._evalModeAndApplyDefnExpr(K):this._applyDefnExpr());return this},_applyDefnExpr:function(){var K=this._mode;K&&K.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(K){K.then(p.hitch(this,function(V){V&&(V instanceof Error||!V.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(K){this._isSnapshotMode()?
(this._timeDefn=K,(K=this._mode)&&K.propertyChangeHandler(2)):console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d "+this.id+", Layer URL \x3d "+this.url);return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(K,V){this._timeOffset=K;this._timeOffsetUnits=V;(K=this._mode)&&K.propertyChangeHandler(0);return this},setUseMapTime:function(K){this.useMapTime=K;this._toggleTime(!this.suspended);
(K=this._mode)&&K.propertyChangeHandler(0)},selectFeatures:function(K,V,ha,N){V=V||Da.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;K=this._getShallowClone(K);var aa=this._map,ja=this,pa=w._fixDfd(new g(w._dfdCanceller));K.outFields=this.getOutFields();K.returnGeometry=!0;K.multipatchOption=this.multipatchOption;aa&&(K.outSpatialReference=new q(aa.spatialReference.toJson()));if(!this._applyQueryFilters(K,!0)){var wa={features:[]};this._selectHandler(wa,V,ha,N,pa);return pa}if(aa=
this._canDoClientSideQuery(K))pa._pendingDfd=f(this._doQuery(K,aa)),pa._pendingDfd.then(function(Ea){wa={features:Ea};ja._selectHandler(wa,V,ha,N,pa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,N,pa,!0),pa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,N,pa,!0),pa;var Ja=this;this._ts&&(K._ts=(new Date).getTime());aa=this._canFetchPBFForQuery(K);this._enableEditModeQuantization(K,
aa);(pa._pendingDfd=this._task.execute(K,null,null,aa?{format:"pbf"}:null)).addCallbacks(function(Ea){Ja._selectHandler(Ea,V,ha,N,pa)},function(Ea){Ja._hasPartialSelectedFeatures=!0;Ja._hasSelectionError=!0;Ja._resolve([Ea],null,N,pa,!0)})}return pa},getSelectedFeatures:function(){var K=this._selectedFeatures,V=[],ha;for(ha in K)K.hasOwnProperty(ha)&&V.push(K[ha]);return V},clearSelection:function(K){var V=this._selectedFeatures,ha=this._mode,N;for(N in V)V.hasOwnProperty(N)&&(this._unSelectFeatureIIf(N,
ha),ha._removeFeatureIIf(N));this._selectedFeatures={};this._isSelOnly&&ha._applyTimeFilter(!0);if(!K)this.onSelectionClear();return this},setSelectionSymbol:function(K){if(this._selectionSymbol=K){var V=this._selectedFeatures,ha;for(ha in V)V.hasOwnProperty(ha)&&V[ha].setSymbol(K)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(K){K?(this.labelingInfo=K,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();
this.onLabelingInfoChange()},_fixLabelExpr:function(){var K=/\[([^\[\]]+)\]/ig,V,ha=this,N=function(aa,ja){aa=ha._getField(ja,!0);return"["+(aa&&aa.name||ja)+"]"};l.forEach(this.labelingInfo,function(aa){if(V=aa.labelExpression)aa.labelExpression=V.replace(K,N)})},_updateRequiredFieldsFromLabelingInfo:function(){var K=[];l.forEach(this.labelingInfo,function(V){var ha=V.labelExpressionInfo;if(V.labelExpression){var N=/[\[\]]/ig;V=V.labelExpression.match(/\[[^\[\]]+\]/ig);(V=l.map(V,function(ja){return ja.replace(N,
"")}))&&(K=K.concat(V))}if(ha){if(ha.value){var aa=/[\{\}]/ig;V=ha.value.match(/\{[^\{\}]+\}/ig);(V=l.map(V,function(ja){return ja.replace(aa,"")}))&&(K=K.concat(V))}ha.expression&&(K=K.concat(ba.extractFieldNames(ha.expression)))}});K=l.map(K,function(V){var ha=this.getField(V);return ha?ha.name:V},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(K))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(K,V,ha,N,aa,ja){var pa=ja.assembly,wa=ja.dfd;
this._applyNormalized(K,pa&&pa[0]);this._applyNormalized(V,pa&&pa[1]);this.onBeforeApplyEdits(K,V,ha);var Ja={},Ea=this.objectIdField;pa={f:"json"};var Qa=!1;if(this._collection)ja={},ja.addResults=K?l.map(K,function(){Qa=!0;return{objectId:this._nextId++,success:!0}},this):null,ja.updateResults=V?l.map(V,function(Ua){Qa=!0;var eb=Ua.attributes[Ea];Ja[eb]=Ua;return{objectId:eb,success:!0}},this):null,ja.deleteResults=ha?l.map(ha,function(Ua){Qa=!0;return{objectId:Ua.attributes[Ea],success:!0}},this):
null,Qa?this._editHandler(ja,K,Ja,N,aa,wa):this._resolve([ja.addResults,ja.updateResults,ja.deleteResults],null,N,wa);else{K&&0<K.length&&(pa.adds=this._convertFeaturesToJson(K,0,1),Qa=!0);if(V&&0<V.length){for(ja=0;ja<V.length;ja++){var Ka=V[ja];Ja[Ka.attributes[Ea]]=Ka}pa.updates=this._convertFeaturesToJson(V,0,0,1);Qa=!0}if(ha&&0<ha.length){V=[];for(ja=0;ja<ha.length;ja++)V.push(ha[ja].attributes[Ea]);pa.deletes=V.join(",");Qa=!0}if(Qa){var Pa=this;return r({url:this._url.path+"/applyEdits",content:p.mixin(pa,
this._url.query),callbackParamName:"callback",load:function(Ua){Pa._editHandler(Ua,K,Ja,N,aa,wa)},error:function(Ua){Pa._resolve([Ua],null,aa,wa,!0)}},{usePost:!0})}this._resolve([],null,N,wa)}},queryFeatures:function(K,V,ha,N){return this._query("execute","onQueryFeaturesComplete",K,V,ha,N)},queryRelatedFeatures:function(K,V,ha){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",K,V,ha)},queryIds:function(K,V,ha,N){return this._query("executeForIds","onQueryIdsComplete",
K,V,ha,N)},queryCount:function(K,V,ha,N){return this._query("executeForCount","onQueryCountComplete",K,V,ha,N)},queryExtent:function(K,V,ha,N){return this._query("executeForExtent","onQueryExtentComplete",K,V,ha,N)},queryAttachmentInfos:function(K,V,ha){var N=this._url.path+"/"+K+"/attachments",aa=new g(w._dfdCanceller),ja=this;N=x.normalize(N);aa._pendingDfd=r({url:N,content:p.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(pa){pa=pa.attachmentInfos;var wa;l.forEach(pa,
function(Ja){wa=c.objectToQuery({gdbVersion:ja._url.query&&ja._url.query.gdbVersion,layer:ja._url.query&&ja._url.query.layer,token:ja._getToken()});Ja.url=N+"/"+Ja.id+(wa?"?"+wa:"");Ja.objectId=K});ja._resolve([pa],"onQueryAttachmentInfosComplete",V,aa)},error:function(pa){ja._resolve([pa],null,ha,aa,!0)}});return aa},addAttachment:function(K,V,ha,N){return this._sendAttachment("add",K,V,ha,N)},updateAttachment:function(K,V,ha,N,aa){ha.appendChild(a.create("input",{type:"hidden",name:"attachmentId",
value:V}));return this._sendAttachment("update",K,ha,N,aa)},deleteAttachments:function(K,V,ha,N){var aa=this._url.path+"/"+K+"/deleteAttachments",ja=new g(w._dfdCanceller),pa=this;V={f:"json",attachmentIds:V.join(",")};ja._pendingDfd=r({url:aa,content:p.mixin(V,this._url.query),callbackParamName:"callback",load:p.hitch(this,function(wa){wa=wa.deleteAttachmentResults;wa=l.map(wa,function(Ja){Ja=new ya(Ja);Ja.attachmentId=Ja.objectId;Ja.objectId=K;return Ja});pa._resolve([wa],"onDeleteAttachmentsComplete",
ha,ja)}),error:function(wa){pa._resolve([wa],null,N,ja,!0)}},{usePost:!0});return ja},addType:function(K){var V=this.types;if(V){if(l.some(V,function(ha){return ha.id==K.id?!0:!1}))return!1;V.push(K)}else this.types=[K];return this._typesDirty=!0},deleteType:function(K){if(this._collection){var V=this.types;if(V){var ha=-1;l.some(V,function(N,aa){return N.id==K?(ha=aa,!0):!1});if(-1<ha)return this._typesDirty=!0,V.splice(ha,1)[0]}}},toJson:function(){var K=this._cloneJson();if(K){K=K.layerDefinition?
K:{layerDefinition:K};var V=K.layerDefinition,ha=this._collection;this._updateLayerDefinition(V);var N=null;if(!ha||this._fcAdded)N={geometryType:V.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};K.featureSet=p.mixin({},K.featureSet||{},N);if(K.featureSet.transform){var aa=K.featureSet.transform;delete K.featureSet.transform;N=new ca(K.featureSet);N.quantize(aa);K.featureSet=N.toJson()}ha&&(K.nextObjectId=this._nextId,V.capabilities=this.capabilities);return K}},getLayerDefinition:function(){var K=
this._cloneJson();(K=K?K.layerDefinition||K:null)&&this._updateLayerDefinition(K);return K},getFeatureCollectionLayer:function(K){var V=new g,ha=this.getLayerDefinition();if(!ha)return V.reject(Error("layerDefinition not available")),V.promise;K=K||[];var N=new Da({layerDefinition:ha,featureSet:{geometryType:ha.geometryType,features:l.map(K,function(pa){return pa.toJson()})}}),aa=N.on("load",function(){aa.remove();ja.remove();V.resolve(N)}),ja=N.on("error",function(){N.loaded||(aa.remove(),ja.remove(),
V.reject(N.loadError))});return V.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},
onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_cloneJson:function(){var K=this._json;return p.isString(K)?k.fromJson(K):p.clone(K)},_updateLayerDefinition:function(K){if(this._collection&&this._typesDirty){K.types=l.map(this.types||[],function(aa){return aa.toJson()});var V=this.renderer,ha=this.labelingInfo,
N=K.drawingInfo;!V&&!ha||N||(N=K.drawingInfo={});N&&V&&-1===V.declaredClass.indexOf("TemporalRenderer")&&(N.renderer=V.toJson());ha&&(N.labelingInfo=l.map(ha,function(aa){return aa.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(K){return!(K&&"cancel"===K.dojoType)}).always(p.hitch(this,function(K){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:K})}))},
_evalRefresh:function(K){(K.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var K=new g;setTimeout(p.hitch(this,function(){this._initializeArcadeEngine().always(function(){K.resolve()})}),0);return K.promise},_initializeArcadeEngine:function(){var K=[],V=this.infoTemplate;V&&V.initializeArcadeEngine&&K.push(V.initializeArcadeEngine());(V=this.renderer)&&V.initializeArcadeEngine&&K.push(V.initializeArcadeEngine());var ha=[];l.forEach(this.labelingInfo,
function(N){(N=N.labelExpressionInfo)&&N.expression&&ha.push(N.expression)});K.push(fa.initialize(ha));return y(K)},_isGeometryOperationsUsed:function(){var K=this.infoTemplate,V=this.renderer,ha=this.labelingInfo;return K&&K.hasGeometryOperations&&K.hasGeometryOperations()||V&&V.hasGeometryOperations&&V.hasGeometryOperations()||l.some(ha,function(N){return ba.hasGeometryOperations(N.labelExpressionInfo&&N.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var K=new g,V=this,ha=this._url&&
this._url.path;var N=ha&&ha.toLowerCase().indexOf("/rest/services");var aa=this.editFieldsInfo;aa=aa&&(aa.creatorField||aa.editorField);(this.userIsAdmin||aa)&&!this._getToken()&&-1<N&&h.id?(N=ha.substring(0,N)+"/rest/info",r({url:N,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ja){if(ja.owningSystemUrl)return h.id.checkSignInStatus(ja.owningSystemUrl+"/sharing")}).then(function(ja){if(ja)return h.id.getCredential(ha)}).then(function(ja){ja&&V._findCredential()}).always(function(){K.resolve()})):
K.resolve();return K.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(R):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(X):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Da.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var K=this.geometryType;if("esriGeometryPolyline"===K||"esriGeometryPolygon"===K||"esriGeometryMultipoint"===K||this.hasXYFootprint())var V=this.maxRecordCountForAuto;else"esriGeometryPoint"===
K&&(V=this.maxPointCountForAuto);return V},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(K){this._lastExceedsLimitResult=K=(K=K&&K.features&&K.features[0])&&K.attributes&&K.attributes.exceedslimit;return!(this.mode!==Da.MODE_AUTO||this.isEditable()||0!==K||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(K){this._canUseSnapshotMode(K)?this._enableAutoSnapshotMode():
this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var K=Da.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(K):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(K),this._evalSurfaceType(!0)):this.currentMode!==K&&this._setFetchMode(Da.MODE_AUTO,K)},_enableAutoOnDemandMode:function(){var K=Da.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(K):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(K):this.currentMode!==
K&&(this._setFetchMode(Da.MODE_AUTO,K),this._evalSurfaceType())},_evalModeFromFReduction:function(K){this.loaded&&(K&&this.isFeatureReductionEnabled()&&this._canCluster(K)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var K=this.currentMode;K!==Da.MODE_SNAPSHOT&&K!==Da.MODE_STREAM&&K!==Da.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===
Da.MODE_AUTO?Da.MODE_AUTO:Da.MODE_SNAPSHOT,Da.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var K=this._preFReductionState;this._preFReductionState=null;!K||K.mode===this.mode&&K.currentMode===this.currentMode||(this._setFetchMode(K.mode,K.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(K){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=Da.MODE_AUTO;this._preFReductionState.currentMode=K},_evalModeFromSurface:function(){this.hasWebGLSurface()?
this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Da.MODE_AUTO?Da.MODE_AUTO:Da.MODE_ONDEMAND,Da.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var K=this._preSurfaceChangeState;K&&(this._preSurfaceChangeState=null,this._setFetchMode(K.mode,K.currentMode))},_updatePreSurfaceChangeState:function(K){this._preSurfaceChangeState=
this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Da.MODE_AUTO;this._preSurfaceChangeState.currentMode=K},_setFetchMode:function(K,V,ha){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=K;this.currentMode=V;ha=ha||this._getModeConstructor(V);this._mode=new ha(this);this.queryPagination=V===Da.MODE_ONDEMAND&&-1===ha.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(K=this.getMap())&&K.loaded&&(this._resetMaxAllowableOffset(),
this._mode.initialize(K),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(K){var V;K===Da.MODE_SNAPSHOT?V=R:K===Da.MODE_ONDEMAND&&(V=X);return V},_hasOnDemandDrillMode:function(){var K=this._mode;K=K&&K.declaredClass;return!!(K&&-1<K.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=
null);var K=this._queryLimit();K&&(this._lastExceedsLimitResult=null,this._limitPromise=K.then(p.hitch(this,function(V){var ha=this.currentMode;this._evalModeFromFLimit(V);return{modeChanged:this.currentMode!==ha}})).always(p.hitch(this,function(V){this._limitPromise=null;return V})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var K,V,ha=new g(function(){clearTimeout(K);K=null;V&&!V.isFulfilled()&&
V.cancel();V=null});this._exceedsLimitTimer=K=setTimeout(p.hitch(this,function(){this._exceedsLimitTimer=null;var N=new ma,aa=new la;aa.statisticType="exceedslimit";aa.maxPointCount=this.maxPointCountForAuto;aa.maxRecordCount=this.maxRecordCountForAuto;aa.maxVertexCount=this.maxVertexCountForAuto;aa.outStatisticFieldName="exceedslimit";N.outStatistics=[aa];V=this.queryFeatures(N).promise.then(function(ja){ha.resolve(ja)}).otherwise(function(ja){ha.reject(ja)})}),0);return ha.promise}},_isAutoModeEnabled:function(){return this.mode===
Da.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var K=this._editable,V=p.trim(this.capabilities||""),ha=l.map(V?V.split(","):[],p.trim),N=l.map(V?V.toLowerCase().split(","):[],p.trim);V=l.indexOf(N,"editing");var aa;N={Create:l.indexOf(N,"create"),Update:l.indexOf(N,"update"),Delete:l.indexOf(N,"delete")};if(K&&-1===V)ha.push("Editing");else if(!K&&-1<V){K=[V];for(aa in N)-1<N[aa]&&K.push(N[aa]);K.sort();for(aa=K.length-1;0<=aa;aa--)ha.splice(K[aa],1)}this.capabilities=ha.join(",")},
_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(K){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var V=this._mode;V&&(V.suspend(),K&&V.destroy())},onResume:function(K){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",p.hitch(this,this._evalRefresh));var V=this._map,ha=this._getRenderer();
if(K.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||ha&&(ha.latestObservationRenderer||ha.trackRenderer))&&(this._trackManager=new S(this),this._trackManager.initialize(V),this._childLayer=this._trackManager.container),ha&&"colors"in ha&&"blurRadius"in ha&&"maxPixelIntensity"in ha&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&
(this._heatmapManager=new ia(this),this._heatmapManager.initialize(V)),this._zoomConnect=A.connect(V,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),ha=this._mode)ha._init||ha.initialize(V),ha.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var K=this._map;this._updateMaxOffset();this._prevScale=K.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var K=this._map;K&&K.loaded&&this._autoGeneralize&&
(this._isAutoSnapshotMode()?(K=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=K!=this.getMaxAllowableOffset())):this._setMaxOffset(K.extent.getWidth()/K.width,!K.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var K=this._map.getScale(),V=this._calculatedScale,ha=this._calcMaxOffset,N=this._prevScale;return K>=V&&(null==N||N<V)?ha:K<V&&(null==N||N>=V)?null:this.getMaxAllowableOffset()}},
_calcMaxOffsetForAutoSnapshot:function(){var K=this._map;if(K&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var V=this.generalizeForScale;this._calculatedScale=V=this.maxScale?this.maxScale:this.minScale?Math.min(V,this.minScale):Math.min(V,ea.getScale(K,this.initialExtent));this._calcMaxOffset=K.extent.getWidth()/K.width/K.getScale()*V}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(K){var V=this._map;
K&&this.timeInfo&&this.useMapTime&&V?(this._mapTimeExtent=V.timeExtent,this._timeConnect||(this._timeConnect=A.connect(V,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,A.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(K){this._mapTimeExtent=K;(K=this._mode)&&K.propertyChangeHandler(0)},_getOffsettedTE:function(K){var V=this._timeOffset,ha=this._timeOffsetUnits;return K&&V&&ha?K.offset(-1*V,ha):K},_getTimeOverlap:function(K,V){return K&&
V?K.intersection(V):K||V},_getTimeFilter:function(K){var V=this.getTimeDefinition();if(V){var ha=this._getTimeOverlap(V,null);if(!ha)return[!1]}if(K){if(K=ha?this._getTimeOverlap(K,ha):K,!K)return[!1]}else K=ha;return[!0,K]},_getAttributeFilter:function(K){var V=[],ha=this.getDefinitionExpression();ha&&V.push(ha);K&&V.push(K);this.subtypeField&&this.subtypeCode&&V.push(this.subtypeField+" \x3d "+this.subtypeCode);1<V.length&&(V=l.map(V,function(N){return"("+N+")"}));return V.length?V.join(" AND "):
null},_applyQueryFilters:function(K,V){K.where=this._getAttributeFilter(K.where);K.returnGeometry&&null==K.maxAllowableOffset&&!K.quantizationParameters&&(K.maxAllowableOffset=this._maxOffset,K.quantizationParameters=this._quantizationParameters);V&&this.supportsAdvancedQueries&&(K.orderByFields=K.orderByFields||this.getOrderByFields());if(this.timeInfo)if(V=this._getTimeFilter(K.timeExtent),V[0])K.timeExtent=V[1];else return!1;return!0},_add:function(K){var V=this._selectionSymbol,ha=K.attributes,
N=this.visibilityField;V&&this._isSelOnly&&K.setSymbol(V);if(N&&ha&&ha.hasOwnProperty(N))K[ha[N]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(K,V){var ha=[],N=this._map,aa;if((this._collection||!this._isTable&&N)&&!(K.text||K.where&&K.where!==this.getDefinitionExpression()||K.orderByFields&&K.orderByFields.length&&(aa=this.getOrderByFields()||[])&&K.orderByFields.join()!==aa.join()||K.outStatistics||
K.returnDistinctValues)){aa=this._isSnapshotMode();var ja=this._isSelOnly;V=aa?null:V?this._getExtentOfTiles(N.extent):N.extent;if(N=K.geometry){if(ja||K.spatialRelationship!==ma.SPATIAL_REL_INTERSECTS||"extent"!==N.type||!aa&&!V.contains(N))return;ha.push(1)}if(V=K.objectIds)if(aa)ha.push(2);else{N=V.length;var pa=this._mode,wa=0,Ja;for(Ja=0;Ja<N;Ja++)pa._getFeature(V[Ja])&&wa++;if(wa===N)ha.push(2);else return}if(this.timeInfo)if(K=K.timeExtent,V=this._mapTimeExtent,aa)K&&ha.push(3);else if(ja){if(K)return}else if(V)if(-1!==
l.indexOf(ha,2))K&&ha.push(3);else if(-1!==l.indexOf(ha,1))K==V&&ha.push(3);else return;else if(0<ha.length)K&&ha.push(3);else if(K)return;return 0<ha.length?ha:null}},_getAbsMid:function(K){return e.toAbsMid?e.toAbsMid(K):u.id.replace(/\/[^\/]*$/ig,"/")+K},_doQuery:function(K,V,ha){var N=[],aa=this.objectIdField,ja=this,pa=new g,wa=new g,Ja=this.graphics;if(-1!==l.indexOf(V,1)){var Ea=this.spatialIndex||this._map&&this._map.spatialIndex,Qa,Ka=K.geometry._normalize(null,!0);null==Ea&&Ba.autoSpatialIndexing?
Qa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(p.hitch(this,p.partial(this._getFromIndex,Ka,Ea)),function(Pa){wa.resolve(p.hitch(this,p.partial(this._filterByExtent,Ja,Ka)))}):Ea&&(Qa=this._getFromIndex(Ka,Ea));Qa?Qa.then(function(Pa){for(var Ua=0;Ua<Pa.length;Ua++)Pa[Ua].results&&(N=N.concat(Pa[Ua].results));wa.resolve(N)}).otherwise(function(Pa){wa.reject(Pa)}):wa.resolve(this._filterByExtent(Ja,Ka))}else wa.resolve(Ja);wa.then(function(Pa){N=Pa;if(-1!==l.indexOf(V,
2)){var Ua=K.objectIds;N=l.filter(N,function(eb){return-1<l.indexOf(Ua,eb.attributes[aa])})}-1!==l.indexOf(V,3)&&ja.timeInfo&&(Pa=K.timeExtent,N=ja._filterByTime(N,Pa.startTime,Pa.endTime).match);ha&&(N=l.map(N,function(eb){return eb.attributes[aa]},this));pa.resolve(N)});return pa},_getFromIndex:function(K,V){V=V||this.spatialIndex||this._map.spatialIndex;K instanceof Array||(K=[K]);var ha=this.id;return n(l.map(K,function(N){return V.intersects(N,ha)}))},_filterByExtent:function(K,V){for(var ha=
[],N=0,aa=K.length;N<aa;N++){var ja=K[N],pa=ja.geometry;pa&&(this.normalization&&V.length?(V[0].intersects(pa)||V[1].intersects(pa))&&ha.push(ja):V.intersects(pa)&&ha.push(ja))}return ha},_filterByTime:function(K,V,ha){var N=this._startTimeField,aa=this._endTimeField,ja;this._twoTimeFields||(ja=N||aa);var pa=v.isDefined,wa=[],Ja=[],Ea,Qa=K.length;V=V?V.getTime():-Infinity;ha=ha?ha.getTime():Infinity;if(ja)for(Ea=0;Ea<Qa;Ea++){var Ka=K[Ea];var Pa=Ka.attributes;N=Pa[ja];N>=V&&N<=ha?wa.push(Ka):Ja.push(Ka)}else for(Ea=
0;Ea<Qa;Ea++)Ka=K[Ea],Pa=Ka.attributes,ja=Pa[N],Pa=Pa[aa],ja=pa(ja)?ja:-Infinity,Pa=pa(Pa)?Pa:Infinity,ja>=V&&ja<=ha||Pa>=V&&Pa<=ha||V>=ja&&ha<=Pa?wa.push(Ka):Ja.push(Ka);return{match:wa,noMatch:Ja}},_getSizeVariables:function(K){return K&&l.filter(K.getVisualVariablesForType("sizeInfo",!1),function(V){return!(!V.field&&!V.valueExpression)})},_needClientSideSorting:function(K){return this._collection?!(!K||!K.length):l.some(K,function(V){return!!V.valueExpression})},_sortFeatures:function(K){var V=
this.renderer,ha=this._getSizeVariables(V);if(K&&1<K.length&&this._needClientSideSorting(ha)){var N=ha[0],aa=this;K.sort(function(ja,pa){ja._layer||(ja._layer=aa);pa._layer||(pa._layer=aa);ja=V._getDataValue(ja,N,"sizeInfo");pa=V._getDataValue(pa,N,"sizeInfo");return null==ja?-1:null==pa?1:pa-ja})}return K},_resolve:function(K,V,ha,N,aa){V&&this[V].apply(this,K);ha&&ha.apply(null,K);N&&w._resDfd(N,K,aa)},_getShallowClone:function(K){var V=new ma,ha;for(ha in K)K.hasOwnProperty(ha)&&(V[ha]=K[ha]);
return V},_canFetchPBF:function(){return!!(Na&&Va&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(K){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(K)&&this._isAutoSnapshotMode()||!(K.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||K.outStatistics)},_enableEditModeQuantization:function(K,V){K&&V&&!K.quantizationParameters&&(K.quantizationParameters={mode:"edit"})},_enableCacheHint:function(K,V){var ha=this.advancedQueryCapabilities;ha&&ha.supportsQueryWithCacheHint?
null==K.cacheHint&&(K.cacheHint=!0):ha&&ha.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!K.resultType&&(K.resultType=V||"coherent")},_isCacheHintSupported:function(){var K=this.advancedQueryCapabilities;return K?!!(K.supportsQueryWithCacheHint||K.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(K){var V=this.advancedQueryCapabilities;return K&&V?!!(V.supportsQueryWithCacheHint&&K.cacheHint||V.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&
("coherent"===K.resultType||"tile"===K.resultType)):!1},_query:function(K,V,ha,N,aa,ja){var pa=this,wa=this._map;ja=ja&&ja.snapToTiles;var Ja=new g(w._dfdCanceller),Ea=ha,Qa,Ka,Pa;if("executeRelationshipQuery"!==K){Ea=this._getShallowClone(ha);var Ua=this.getOutFields();Ea.outFields||(Ea.outFields=Ua);Ea.outFields&&Ea.outFields.length&&(Ka=-1<l.indexOf(Ua,"*")?!1:!l.every(Ea.outFields,function(ab){return-1<l.indexOf(Ua,ab)}));Ea.returnGeometry=ha.hasOwnProperty("returnGeometry")?ha.returnGeometry:
!ha.outStatistics;Ea.returnGeometry&&(Ea.multipatchOption=this.multipatchOption,null!=Ea.maxAllowableOffset||Ea.quantizationParameters)&&(ha=null!=Ea.maxAllowableOffset?Ea.maxAllowableOffset:Ea.quantizationParameters.tolerance,null!=ha&&ha!==this.getMaxAllowableOffset()&&(Pa=!0));wa&&(wa=wa&&wa.spatialReference,(ha=Ea.outSpatialReference)?Qa=!ha.equals(wa):Ea.outSpatialReference=new q(wa.toJson()));ja&&(wa=Ea.geometry)&&"extent"===wa.type&&(Ea.geometry=this._getExtentOfTiles(wa),wa!==Ea.geometry&&
this._enableCacheHint(Ea));if(!this._applyQueryFilters(Ea,"execute"===K&&!Ea.outStatistics)){switch(K){case "execute":var eb=new ca({features:[]});break;case "executeForIds":eb=[];break;case "executeForCount":eb=0;break;case "executeForExtent":eb={}}this._resolve([eb],V,N,Ja);return Ja}if(ja="executeForExtent"!==K&&!Qa&&!Ka&&!Pa&&this._canDoClientSideQuery(Ea,ja))return Ja._pendingDfd=f(this._doQuery(Ea,ja,"executeForIds"===K||"executeForCount"===K)),Ja._pendingDfd.then(function(ab){switch(K){case "execute":eb=
new ca;eb.features=ab;break;case "executeForIds":eb=ab;break;case "executeForCount":eb=ab.length}pa._resolve([eb],V,N,Ja)}),Ja}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,aa,Ja,!0),Ja;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,aa,Ja,!0),Ja;this._ts&&(Ea._ts=(new Date).getTime());ja="execute"===K&&this._canFetchPBFForQuery(Ea);this._enableEditModeQuantization(Ea,ja);(Ja._pendingDfd=
this._task[K](Ea,null,null,ja?{format:"pbf"}:null)).addCallbacks(function(ab){var gb=!!Ea.outStatistics||Qa||Ka||Pa;if("execute"===K||"executeRelationshipQuery"===K)if("execute"===K){var db=ab.features;var kb=db.length;for(--kb;0<=kb;kb--)if(db[kb]._layer=pa,!gb&&!pa._isTable){var rb=pa._mode._getFeature(db[kb].attributes[pa.objectIdField]);rb&&db.splice(kb,1,rb)}}else for(rb in ab)if(ab.hasOwnProperty(rb))for(db=ab[rb].features,kb=db.length,--kb;0<=kb;kb--)db[kb]._layer=pa;pa._resolve([ab],V,N,Ja)},
function(ab){pa._resolve([ab],null,aa,Ja,!0)});return Ja},_getExtentOfTiles:function(K){var V=this._isOnDemandMode()&&this._mode._gridLayer||T.createFromFeatureLayer({layer:this}),ha=this.getMap();ha=ha&&ha.getTargetExtent(K);return V&&ha&&V.getExtentOfIntersectingCells(ha)||K},_convertFeaturesToJson:function(K,V,ha,N){var aa=[],ja=this._selectionSymbol,pa=this.visibilityField,wa,Ja=this.objectIdField;this.loaded&&(ha||N)&&(wa=l.filter(this.fields,function(eb){return!1===eb.editable&&(!N||eb.name!==
Ja)}));for(ha=0;ha<K.length;ha++){var Ea=K[ha],Qa={},Ka=Ea.geometry,Pa=Ea.attributes,Ua=Ea.symbol;!Ka||N&&this.loaded&&!this.allowGeometryUpdates||(Qa.geometry=Ka.toJson());pa?(Qa.attributes=Pa=p.mixin({},Pa),Pa[pa]=Ea.visible?1:0):Pa&&(Qa.attributes=p.mixin({},Pa));Qa.attributes&&wa&&wa.length&&l.forEach(wa,function(eb){delete Qa.attributes[eb.name]});Ua&&Ua!==ja&&(Qa.symbol=Ua.toJson());aa.push(Qa)}return V?aa:k.toJson(aa)},_selectHandler:function(K,V,ha,N,aa){switch(V){case Da.SELECTION_NEW:this.clearSelection(!0);
var ja=!0;break;case Da.SELECTION_ADD:ja=!0;break;case Da.SELECTION_SUBTRACT:ja=!1}N=K.features;var pa=this._mode,wa=[],Ja=this.objectIdField;if(ja)for(ja=0;ja<N.length;ja++){var Ea=N[ja];var Qa=Ea.attributes[Ja];Ea=pa._addFeatureIIf(Qa,Ea);wa.push(Ea);this._selectFeatureIIf(Qa,Ea,pa)}else for(ja=0;ja<N.length;ja++)Ea=N[ja],Qa=Ea.attributes[Ja],this._unSelectFeatureIIf(Qa,pa),Qa=pa._removeFeatureIIf(Qa),wa.push(Qa||Ea);this._isSelOnly&&pa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&
void 0===K.exceededTransferLimit&&(K.exceededTransferLimit=N.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!K.exceededTransferLimit;this._resolve([wa,V,K.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",ha,aa);if(K.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(K,V,ha){var N=this._selectedFeatures,aa=N[K];aa||(ha._incRefCount(K),N[K]=V,this._isTable||(this._setSelectSymbol(V),V.attr("data-selected","")));return aa||V},_unSelectFeatureIIf:function(K,
V){var ha=this._selectedFeatures[K];ha&&(V._decRefCount(K),delete this._selectedFeatures[K],this._isTable||(this._setUnSelectSymbol(ha),ha.attr("data-selected")));return ha},_setSelectSymbol:function(K){var V=this._selectionSymbol;V&&!this._isSelOnly&&K.setSymbol(V)},_setUnSelectSymbol:function(K){var V=this._selectionSymbol;V&&!this._isSelOnly&&V===K.symbol&&K.setSymbol(null,!0)},_getOutFields:function(){var K=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,
this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);K=l.filter(K,function(ha,N,aa){return!!ha&&l.indexOf(aa,ha)===N});var V=p.clone(this._outFields);if(V){if(-1!==l.indexOf(V,"*"))return V;l.forEach(K,function(ha){-1===l.indexOf(V,ha)&&V.push(ha)});return V}return K},_checkFields:function(K){var V=K||this._getOutFields();l.forEach(V,function(ha){"*"!==ha&&(this._getField(ha)||console.debug("esri.layers.FeatureLayer: "+v.substitute({url:this.url,field:ha},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))},
this);K||this._isTable||this._fserver||this._collection||this._isStream||l.some(this.fields,function(ha){return ha&&"esriFieldTypeGeometry"===ha.type?!0:!1})||console.debug("esri.layers.FeatureLayer: "+v.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"))},_fixFieldCase:function(K,V,ha){var N=K&&K[V],aa;if(N&&!p.isFunction(N)){if(aa=!this._getField(N)&&
this._getField(N,!0))N=K[V]=aa.name;ha&&ha.push(N)}return N},_fixRendererFields:function(){var K=this.renderer;this._orderBy=null;this._requiredFields=[];if(K&&0<this.fields.length){var V=[],ha;K=l.filter([K,K.observationRenderer,K.latestObservationRenderer,K.trackRenderer],v.isDefined);var N=[].concat(K);l.forEach(K,function(aa){l.forEach(aa.rendererInfos,function(ja){ja.renderer&&N.push(ja.renderer)})});l.forEach(N,function(aa){this._fixFieldCase(aa,"attributeField",V);this._fixFieldCase(aa,"attributeField2",
V);this._fixFieldCase(aa,"attributeField3",V);this._fixFieldCase(aa.rotationInfo,"field",V);(ha=this._fixFieldCase(aa.sizeInfo,"field",V))&&!this._orderBy&&(this._orderBy=[ha+" DESC"]);this._fixFieldCase(aa.sizeInfo,"normalizationField",V);this._fixFieldCase(aa.colorInfo,"field",V);this._fixFieldCase(aa.colorInfo,"normalizationField",V);this._fixFieldCase(aa.field,"field",V);this._fixFieldCase(aa.opacityInfo,"field",V);this._fixFieldCase(aa.opacityInfo,"normalizationField",V);l.forEach(aa.visualVariables,
function(pa){ha=this._fixFieldCase(pa,"field",V);"sizeInfo"===pa.type&&ha&&!this._orderBy&&(this._orderBy=[ha+" DESC"]);this._fixFieldCase(pa,"normalizationField",V)},this);var ja=l.map(aa.getFieldsUsedInExpressions(),function(pa){var wa=this.getField(pa);return wa?wa.name:pa},this);V=V.concat(ja);this._orderBy||!aa.addBreak||p.isFunction(aa.attributeField)||!aa.backgroundFillSymbol&&!this._hasSizeDiff(aa)||(this._orderBy=[aa.attributeField+" DESC"])},this);this._requiredFields=l.filter(V,v.isDefined)}},
_hasSizeDiff:function(K){var V=Number.MAX_VALUE,ha=-Number.MAX_VALUE,N,aa;l.forEach(K.infos,function(ja){if(aa=ja.symbol){N=0;switch(aa.type){case "simplemarkersymbol":N=aa.size;break;case "picturemarkersymbol":N=(aa.width+aa.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":N=aa.width;break;case "simplefillsymbol":case "picturefillsymbol":N=aa.outline&&aa.outline.width}N&&(V=Math.min(V,N),ha=Math.max(ha,N))}});return V!==Number.MAX_VALUE&&ha!==-Number.MAX_VALUE&&1<Math.abs(ha-
V)},getOrderByFields:function(){var K=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&K?l.filter(K,function(V){V=V.split(" ")[0];return!!this._getField(V,!0)},this):null},_createFields:function(K){var V=K?K.length:0,ha,N=[];for(ha=0;ha<V;ha++)N.push(new M(K[ha]));this.fields=N},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var K=this.fields,V=K?K.length:0;if(50<V&&this._canUseFieldsIndex()){var ha=new Map;for(var N=new Map,aa=0;aa<V;aa++){var ja=K[aa];ha.set(ja.name,
ja);N.set(ja.name.toLowerCase(),ja)}ha={caseSensitive:ha,caseInsensitive:N}}this._fieldsIndex=ha;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var K=t.Map;return!("function"!==typeof t.Proxy||"function"!==typeof t.Proxy.revocable||"function"!==typeof K||!K.prototype||"function"!==typeof K.prototype.set)},_getField:function(K,V){var ha=this.fields;if(!ha||0===ha.length)return null;V&&(K=K.toLowerCase());this._createFieldsIndex();var N=this._fieldsIndex;if(N)return N=V?N.caseInsensitive:
N.caseSensitive,N.get(K);var aa;l.some(ha,function(ja){var pa=!1;(pa=V?ja&&ja.name.toLowerCase()===K?!0:!1:ja&&ja.name===K?!0:!1)&&(aa=ja);return pa});return aa},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:l.map(l.filter(this.fields,function(K){return!(!K||"esriFieldTypeDate"!==K.type)}),function(K){return K.name})});return this._dtOpts},_applyNormalized:function(K,V){K&&V&&l.forEach(K,function(ha,N){ha&&V[N]&&ha.setGeometry(V[N])})},_editHandler:function(K,V,ha,N,aa,ja){aa=K.addResults;
var pa=K.updateResults;K=K.deleteResults;var wa,Ja=this.objectIdField,Ea=this._mode,Qa=this._isTable;var Ka=this.editFieldsInfo;var Pa=this.getOutFields()||[];var Ua=Ka&&Ka.creatorField,eb=Ka&&Ka.creationDateField,ab=Ka&&Ka.editorField,gb=Ka&&Ka.editDateField;Ka=Ka&&Ka.realm;-1===l.indexOf(Pa,"*")&&(Ua&&-1===l.indexOf(Pa,Ua)&&(Ua=null),eb&&-1===l.indexOf(Pa,eb)&&(eb=null),ab&&-1===l.indexOf(Pa,ab)&&(ab=null),gb&&-1===l.indexOf(Pa,gb)&&(gb=null));var db=eb||gb?(new Date).getTime():null,kb=Ua||ab?this.getUserId():
void 0;kb&&Ka&&(kb=kb+"@"+Ka);if(aa){var rb=this.globalIdField;for(Ka=0;Ka<aa.length;Ka++)if(aa[Ka]=new ya(aa[Ka]),!Qa){var mb=aa[Ka];if(mb.success){var Za=mb.objectId;Pa=V[Ka];(wa=Pa._graphicsLayer)&&wa!==this&&wa.remove(Pa);wa=Pa.attributes||{};wa[Ja]=Za;Za=mb.globalId;rb&&Za&&(wa[rb]=Za);Ua&&(wa[Ua]=kb);ab&&(wa[ab]=kb);eb&&(wa[eb]=db);gb&&(wa[gb]=db);Pa.setAttributes(wa);Ea._init&&Ea.drawFeature(Pa)}}}if(pa)for(Ka=0;Ka<pa.length;Ka++)if(pa[Ka]=new ya(pa[Ka]),!Qa&&(mb=pa[Ka],mb.success)){Za=mb.objectId;
Pa=ha[Za];if(V=Ea._getFeature(Za))V.geometry!==Pa.geometry&&Pa.geometry&&V.setGeometry(za.fromJson(Pa.geometry.toJson())),V.attributes!==Pa.attributes&&Pa.attributes&&V.setAttributes(p.mixin(V.attributes,Pa.attributes)),this._repaint(V,Za);Pa=V||Pa;wa=Pa.attributes||{};ab&&(wa[ab]=kb);gb&&(wa[gb]=db);Pa.setAttributes(wa)}if(K){ha=[];for(Ka=0;Ka<K.length;Ka++)if(K[Ka]=new ya(K[Ka]),!Qa&&(mb=K[Ka],mb.success&&(Za=mb.objectId,Pa=Ea._getFeature(Za))))this._unSelectFeatureIIf(Za,Ea)&&ha.push(Pa),Pa._count=
0,Ea._removeFeatureIIf(Za);if(0<ha.length)this.onSelectionComplete(ha,Da.SELECTION_SUBTRACT)}this._resolve([aa,pa,K],"onEditsComplete",N,ja)},_sendAttachment:function(K,V,ha,N,aa){var ja=this;return r({url:this._url.path+"/"+V+"/"+("add"===K?"addAttachment":"updateAttachment"),form:ha,content:p.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(pa){var wa="add"===K?"onAddAttachmentComplete":"onUpdateAttachmentComplete";
pa=new ya(pa["add"===K?"addAttachmentResult":"updateAttachmentResult"]);pa.attachmentId=pa.objectId;pa.objectId=V;ja._resolve([pa],wa,N);return pa}).addErrback(function(pa){ja._resolve([pa],null,aa,null,!0)})},_repaint:function(K,V,ha){V=v.isDefined(V)?V:K.attributes[this.objectIdField];V in this._selectedFeatures&&this._selectionSymbol||K.setSymbol(K.symbol,ha)},_getKind:function(K){var V=this._trackManager;return V?V.isLatestObservation(K)?1:0:0}});p.mixin(Da,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,
SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});P._createWrappers(Da);Object.defineProperty(Da.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(K){this._graphicsVal=K}});Object.defineProperty(Da.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?
this.arcgisProps.title:this._name},set:function(K){this._name=K;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Da.prototype,"fields",{get:function(){return this._fields},set:function(K){K&&this._canUseFieldsIndex()&&(K=new Proxy(K,{set:p.hitch(this,function(V,ha,N){if(ha)if("length"===ha)this._fieldsIndexDirty=!0;else{var aa=Number(ha);"number"!==typeof aa||isNaN(aa)||(this._fieldsIndexDirty=!0)}V[ha]=N;return!0})}));this._fields=K;this._fieldsIndexDirty=!0}});
return Da})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(e,u,B,A,p,l,k,g){return new (e(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(d){var c=[];g.hasGeometryOperations(d)&&c.push(k.enableGeometryOperations());return p(c)},isAsync:function(d){return!1},parse:function(d){return k.createSyntaxTree(d.expression)},
compile:function(d){var c=u.clone(this.defaults.context);return d.syntaxTree?k.createFunction(d.syntaxTree,c):null},getEvalOptions:function(d){var c=d.feature;return{context:{vars:{$feature:c&&d.expression.hasVariable("$feature")?l.createFromGraphicLikeObject(c.geometry,c.attributes,d.layer):null},spatialReference:d.spatialReference}}}}))})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),
function(e,u,B,A,p,l,k,g,d){return e(null,{declaredClass:"esri.layers.FeatureType",constructor:function(c){if(c&&u.isObject(c)){this.id=c.id;this.name=c.name;var a=c.symbol;a&&(this.symbol=k.fromJson(a));a=c.domains;var b=this.domains={};for(f in a)a.hasOwnProperty(f)&&(b[f]=d.fromJson(a[f]));if(c=c.templates){var f=this.templates=[];for(a=0;a<c.length;a++)f.push(new g(c[a]))}}},toJson:function(){var c={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},a,b=this.domains,f=this.templates,
t=l.fixJson;if(b){var n=c.domains={};for(a in b)b.hasOwnProperty(a)&&(n[a]=b[a]&&b[a].toJson());t(n)}f&&(c.templates=B.map(f,function(m){return m.toJson()}));return t(c)}})})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(e,u,B,A,p,l){e=e(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(k){k&&u.isObject(k)&&(this.name=k.name,this.description=k.description,this.drawingTool=k.drawingTool,
this.thumbnail=k.thumbnail,k=k.prototype,this.prototype=new l(k.geometry,null,k.attributes))},toJson:function(){return p.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:p.fixJson(u.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});u.mixin(e,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",
TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return e})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),
function(e,u,B,A,p,l){return{fromJson:function(k){if(k)switch(k.type){case "range":var g=new A(k);break;case "codedValue":g=new p(k);break;case "inherited":g=new l(k)}return g}}})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(e,u,B,A,p){return e([p],{declaredClass:"esri.layers.InheritedDomain"})})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),
function(e,u,B,A,p,l){return e(null,{declaredClass:"esri.layers.FeatureSubtype",constructor:function(k){if(k&&u.isObject(k)){this.code=k.code;this.name=k.name;this.defaultValues=k.defaultValues;k=k.domains;var g=this.domains={},d;for(d in k)k.hasOwnProperty(d)&&(g[d]=l.fromJson(k[d]))}},toJson:function(){var k=p.fixJson,g={code:this.code,name:this.name,defaultValues:k(u.clone(this.defaultValues))},d=this.domains;if(d){var c=g.domains={},a;for(a in d)d.hasOwnProperty(a)&&(c[a]=d[a]&&d[a].toJson());
k(c)}return k(g)}})})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,u,B,A){return e(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(p){p&&u.isObject(p)&&(this.objectId=p.objectId,this.globalId=p.globalId,this.success=p.success,p.success||(p=p.error,this.error=Error(),this.error.code=p.code,this.error.message=p.description))}})})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(e,u,B,A,p,l,k,g){var d=/__begin__/ig,c=/__end__/ig,a=/^__begin__/i,b=/__end__$/i;return e(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(f){f&&(u.mixin(this,f),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=l.valueOf(this._labelPlacementLookup,f.labelPlacement)),f.format&&(this.format=f.format),f.fieldInfos&&(this.fieldInfos=f.fieldInfos),f.symbol&&(this.symbol="esriSHD"===f.symbol.type?new g(f.symbol):new k(f.symbol)),f=this.sizeInfo)&&(f.minSize&&(f.minSize=A.pt2px(f.minSize)),f.maxSize&&(f.maxSize=A.pt2px(f.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var f=this.sizeInfo;f&&(f=u.mixin({},f),f.minSize&&(f.minSize=A.px2pt(f.minSize)),f.maxSize&&(f.maxSize=A.px2pt(f.maxSize)));var t=l.fixJson(this.labelExpressionInfo&&u.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(t);f={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:t,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:f||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return l.fixJson(f)},_processLabelExpressionInfo:function(f){f&&f.value&&(f.expression=this._convertTemplatedStringToArcade(f.value))},_convertTemplatedStringToArcade:function(f){if(f){var t=u.replace(f,function(n,m){return'__begin__$feature["'+m+'"]__end__'});t=a.test(t)?t.replace(a,
""):'"'+t;t=b.test(t)?t.replace(b,""):t+'"';t=t.replace(d,'" + ').replace(c,' + "')}return t}})})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(e,u,B,A,p,l,k,g,d){var c={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};e=e(g,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:A.defaultFont,
constructor:function(a,b,f,t,n){a?u.isString(a)?(this.url=a,b&&(this.color=b),f&&(this.width=f),t&&(this.height=t),void 0!==n&&(this.font=n)):(this.width=A.pt2px(a.width),this.height=A.pt2px(a.height),b=a.imageData,9>B("ie")||!b||(f=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+b,this.imageData=f)):u.mixin(this,c)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},
setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,
b=this.imageData;if(0===a.indexOf("data:")){var f=a;a=b;b=f.indexOf(";base64,")+8;b=f.substr(b)}a=k.getAbsoluteUrl(a);f=A.px2pt(this.width);f=isNaN(f)?void 0:f;var t=A.px2pt(this.height);t=isNaN(t)?void 0:t;a=l.fixJson(u.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:b,contentType:this.contentType,width:f,height:t}));this.font?(b=new d(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});e.defaultProps=c;return e})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),
function(e,u,B,A,p,l,k,g,d){return e([g],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(c){this.featureLayer=c;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=u.hitch(this,this._drawFeatures);this._queryErrorHandler=u.hitch(this,this._queryErrorHandler);this._handleSuccess=u.hitch(this,this._handleSuccess);this._handleError=u.hitch(this,this._handleError);
this._handleProgress=u.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var c=this.featureLayer,a=c.reHostedFS.test(c.url);this.pagination=c.queryPagination&&null!=c.maxRecordCount;this._cacheHintSupported=c._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();a&&this.pagination&&(this._parallelSnapshot=new d({layer:c,mode:this,queryTask:c._task}));this._isSuspendedAtStartup=c.suspended;this._startup()}},
propertyChangeHandler:function(c){this._init&&(c?this.featureLayer._collection?console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d "+this.featureLayer.id):this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},
drawFeature:function(c){var a=c.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(a,c);this._incRefCount(a)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var c=this.featureLayer;c._collection?(c._fireUpdateStart(),c._refresh(!0),c._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},
canFetchPBF:function(c){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(c)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var c=this.featureLayer;c._collection||c.suspended||!c.isQueryable()?this._pendingRefresh=c.suspended:(this._pendingRefresh=!1,c._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,
this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(c){this._hasPartialFeatures=c.hasPartialFeatures;this._hasUpdateError=c.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(c){this._queryErrorHandler(c)},_handleProgress:function(c){c.isError?this.featureLayer._errorHandler(c.error):this._addFeatures(c.features)},_getScaleToTileFactor:function(){var c=this.featureLayer.tileMaxRecordCount,a=this.featureLayer.maxRecordCount,b=1;null!=c&&null!=
a&&(b=Number((c/a).toFixed(2)));return b},_getPageSize:function(c){var a=this.featureLayer.tileMaxRecordCount;a="tile"===c.resultType&&a?a:this.featureLayer.maxRecordCount;c.maxRecordCountFactor&&(a=Math.floor(a*c.maxRecordCountFactor));return a},_sendRequest:function(c){var a=this.featureLayer,b=this._createQueryInfo(),f=b.query;this.pagination&&(this._pageSize=this._getPageSize(f),this._start=f.start=null==c?0:c,f.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);
this._pendingRequest=a._task.execute(f,this._drawFeatures,this._queryErrorHandler,b.pbf?{format:"pbf"}:null)},_drawFeatures:function(c){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);var a=this.featureLayer,b=c.exceededTransferLimit,f=b&&!a._collection;c=this._checkMaxLimit(c.features);var t=c.maxLimitReached;this._addFeatures(c.features);this.pagination&&
f&&!t||(this._hasPartialFeatures=!!b,a._fireUpdateEnd(null,b?{queryLimitExceeded:!0}:null));f&&(this.pagination&&!t&&this._sendRequest(this._start+this._pageSize),a.onQueryLimitExceeded())},_queryErrorHandler:function(c){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var a=this.featureLayer;a._errorHandler(c);a._fireUpdateEnd(c)},_checkMaxLimit:function(c){var a=c?c.length:0,b=this.featureLayer.graphics.length+a,f=b>=this.maxFeatures;if(f){var t=b-this.maxFeatures;t&&c.splice(a-
t,t)}return{maxLimitReached:f,featuresDiscarded:b>this.maxFeatures,features:c}},_createQueryInfo:function(){var c=this.featureLayer,a=new k;a.outFields=c.getOutFields();a.where=c._getAttributeFilter()||"1\x3d1";a.returnGeometry=!0;a.outSpatialReference=l.createSpatialReference(this.map.spatialReference.toJson());a.timeExtent=c.getTimeDefinition();a.maxAllowableOffset=c._maxOffset;a.quantizationParameters=c._quantizationParameters;a.orderByFields=c.supportsAdvancedQueries?c.getOrderByFields():null;
a.multipatchOption=c.multipatchOption;c._ts&&(a._ts=(new Date).getTime());this._cacheHintSupported&&c._enableCacheHint(a);var b=this.canFetchPBF(a);c._enableEditModeQuantization(a,b);this._applyMaxRecordCountFactor(a,b);return{query:a,pbf:b}},_applyMaxRecordCountFactor:function(c,a){var b=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(c)&&b&&b.supportsMaxRecordCountFactor&&("tile"!==c.resultType&&1<this.scaleToTileFactor&&(c.maxRecordCountFactor=this.scaleToTileFactor),
a&&1<this.maxRecordCountFactor&&(c.maxRecordCountFactor=this.maxRecordCountFactor),5<c.maxRecordCountFactor&&(c.maxRecordCountFactor=5))},_addFeatures:function(c){var a=this.featureLayer,b=a.objectIdField,f=c.length,t=a._selectedFeatures,n=a.mode===a.constructor.MODE_AUTO;a._fireUpdateStart();a._sortFeatures(c);for(a=0;a<f;a++){var m=c[a];var h=m.attributes[b];var v=this._addFeatureIIf(h,m);this._incRefCount(h);n&&v!==m&&t[h]&&(v.setGeometry(m.geometry),v.setAttributes(m.attributes))}this._applyTimeFilter(!0)}})})},
"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(e,u,B,A,p){u=!!A("esri-pbf");A=!!A("esri-featurelayer-pbf");return e(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:u&&A,initialize:function(l){this.map=l;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(l){},destroy:function(){this._init=this._started=!1},drawFeature:function(l){},suspend:function(){},resume:function(){},
refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(l){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(l){(l=this._featureMap[l])&&l._count++},_decRefCount:function(l){(l=this._featureMap[l])&&l._count--},_getFeature:function(l){return this._featureMap[l]},_addFeatureIIf:function(l,k){var g=this._featureMap,d=g[l],c=this.featureLayer;d||(g[l]=k,c._add(k),k._count=0);return d||k},_removeFeatureIIf:function(l){var k=
this._featureMap[l],g=this.featureLayer;if(k){if(k._count)return;delete this._featureMap[l];g._remove(k)}return k},_registerFeature:function(l,k){var g=this._featureMap,d=g[l];d?(d.attributes=k.attributes,d.geometry=k.geometry):(g[l]=k,k._count=0,k._layer=k._graphicsLayer=k._sourceLayer=this.featureLayer);return d||k},_unregisterFeature:function(l){var k=this._featureMap,g=k[l];g&&!g._count&&(delete k[l],g._graphicsLayer=null)},_clearIIf:function(){var l=this.featureLayer;var k=l.graphics,g=l._selectedFeatures,
d=l.getSelectedFeatures().length,c=l.objectIdField;if(d)for(l=k.length-1;0<=l;l--){d=k[l];var a=d.attributes[c];a in g?d._count=1:(d._count=0,this._removeFeatureIIf(a))}else l.clear(),this._featureMap={}},_cancelPendingRequest:function(l){if(l)try{l.cancel()}catch(k){}},_toggleVisibility:function(l){var k=this.featureLayer,g=k.graphics,d=l?"show":"hide",c,a=g.length;l=l&&k._ager;for(c=0;c<a;c++){var b=g[c];b[d]();l&&k._repaint(b)}},_applyTimeFilter:function(l){var k=this.featureLayer;if(k.timeInfo&&
!k.suspended){l||k._fireUpdateStart();var g=k._trackManager;g&&g.clearTracks();var d=k.getTimeDefinition(),c=k._getOffsettedTE(k._mapTimeExtent);c?(c=k._getTimeOverlap(d,c))?(d=k._filterByTime(k.graphics,c.startTime,c.endTime),g&&g.addFeatures(d.match),B.forEach(d.match,function(a){var b=a._shape;a.visible||(a.show(),(b=a._shape)&&b._moveToFront());k._ager&&b&&k._repaint(a)}),B.forEach(d.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(g&&g.addFeatures(k.graphics),this._toggleVisibility(!0));
g&&(g.moveLatestToFront(),g.drawTracks());l||k._fireUpdateEnd()}}})})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(e,u,B,A,p,l){return e(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(k){u.mixin(this,
k);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var k=new p;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=k;this._sendRequests();return k.promise},cancel:function(k){this._cancelPendingRequests(k);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===
this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(k){var g=this._queryInfo.query,d=this.queryTask,c=this._requests;k=null==k?1:k;var a=k+this.batchSize-1;a>this._maxPages&&(a=this._maxPages);if(!(k>a))for(this._startPage=k,this._lastPage=a;k<=a;k++)g.start=(k-1)*this._pageSize,g.num=this._pageSize,c[k]=d.execute(g,null,null,this._queryInfo.pbf?{format:"pbf"}:null),c[k].then(u.hitch(this,
this._handleSuccess,k)).otherwise(u.hitch(this,this._handleError,k))},_evalNextBatch:function(k){k===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(k,g){g.exceededTransferLimit||this._cancelLaterRequests(k,!0);var d=this.mode._checkMaxLimit(g.features);this._fetchDfd.progress({features:d.features,isError:!1});d.maxLimitReached?((k=d.featuresDiscarded||this._hasRejectedRequests())||(k=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(k)):
(g.exceededTransferLimit&&this._evalNextBatch(k),this._evalResolution())},_handleError:function(k,g){var d=this._requests;d&&d[k]&&(1===k?this._rejectFetch(g):(this._evalNextBatch(k),this._fetchDfd.progress({error:g,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(k){var g=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:k,hasUpdateError:g})},_rejectFetch:function(k){this.cancel(!0);
this._fetchDfd.reject(k)},_getResult:function(k){return k&&k.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var k=this._requests,g,d=[];for(g in k){var c=k[g];c.isFulfilled()||d.push({pageId:Number(g),dfd:c})}return d},_getLastSuccessfulRequest:function(){var k=this._getResolvedRequests(),g=-Infinity,d;k=B.filter(k,function(c){return!!this._getResult(c).features.length||1===c.pageId},this);B.forEach(k,function(c){c.pageId>g&&
(g=c.pageId,d=c)});return d},_getResolvedRequests:function(){var k=this._requests,g,d=[];for(g in k){var c=k[g];c.isResolved()&&d.push({pageId:Number(g),dfd:c})}return d},_hasRejectedRequests:function(){var k=this._getRejectedRequests(),g=this._getLastSuccessfulRequest(),d=this._getResult(g);d&&!d.exceededTransferLimit&&(k=B.filter(k,function(c){return c.pageId<=g.pageId}));return!!k.length},_getRejectedRequests:function(){var k=this._requests,g,d=[];for(g in k){var c=k[g];c.isRejected()&&d.push({pageId:Number(g),
dfd:c})}return d},_cancelPendingRequests:function(k){this._cancelRequests(this._getPendingRequests(),k)},_cancelLaterRequests:function(k,g){var d=B.filter(this._getPendingRequests(),function(c){return c.pageId>k});this._cancelRequests(d,g)},_cancelRequests:function(k,g){var d=this.mode,c=this._requests;B.forEach(k,function(a){g&&delete c[a.pageId];d._cancelPendingRequest(a.dfd)})}})})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),
function(e,u,B,A,p,l,k,g,d,c){return e([d],{declaredClass:"esri.layers._OnDemandMode",constructor:function(a){this.featureLayer=a;this._featureMap={}},initialize:function(a){this.inherited(arguments);this._cellMap={};this._gridLayer=c.createFromFeatureLayer({layer:this.featureLayer,map:a})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),
this._enableConnectors())},propertyChangeHandler:function(a){this._init&&(2>a?this._zoomHandler():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(a){var b=a.geometry,f=[];if(b){f=this._gridLayer.getCellsInExtent("point"===b.type?{xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y}:
b.getExtent(),!1).cells;b=this._cellMap;var t,n=a.attributes[this.featureLayer.objectIdField];for(t=0;t<f.length;t++){var m=f[t];var h=m.latticeID;var v=m.row;var r=m.col;h?m=b[h]=b[h]||m:(b[v]=b[v]||{},m=b[v][r]=b[v][r]||m);m.features=m.features||[];m.features.push(a);this._addFeatureIIf(n,a);this._incRefCount(n)}}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var a=
!1,b=this._getCurrentCells(),f;for(f=0;f<b.length;f++)if(b[f].hasPartialFeatures){a=!0;break}return!a},hasUpdateError:function(){var a=!1,b=this._getCurrentCells(),f;for(f=0;f<b.length;f++)if(b[f].hasUpdateError){a=!0;break}return a},canFetchPBF:function(a){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(a)},_enableConnectors:function(){var a=this.map;this._zoomConnect=u.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=u.connect(a,"onPanEnd",this,this._panHandler);
this._resizeConnect=u.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){u.disconnect(this._zoomConnect);u.disconnect(this._panConnect);u.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,b=this.map;!a.suspended&&a.isQueryable()&&(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();
var b=this.featureLayer._resized;a=b?a:null;b&&this._gridLayer.setMapState(a,this.map.width,this.map.height);this._sendRequest(a)}},_sendRequest:function(a){this._exceeds=!1;var b=this.featureLayer,f=this.map;a=a||f.extent;f=this._gridLayer.getCellsInExtent(a,b.latticeTiling).cells;if(!b.isEditable()){var t=this._cellMap;f=A.filter(f,function(v){if(v.lattice){if(t[v.latticeID])return!1}else if(t[v.row]&&t[v.row][v.col])return!1;return!0})}this._pending=this._pending||0;var n;for(n=0;n<f.length;n++){var m=
f[n],h=this._createQueryInfo(m);this._pending++;this._ioQueue.push(b._task.execute(h.query,B.hitch(this,this._drawFeatures,m),B.hitch(this,this._queryErrorHandler,m),h.pbf?{format:"pbf"}:null))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===b.exceededTransferLimit&&(b.exceededTransferLimit=b.features.length===this.featureLayer.maxRecordCount);a.hasPartialFeatures=!!b.exceededTransferLimit;a.hasUpdateError=
!1;this._exceeds=this._exceeds||b.exceededTransferLimit;this._finalizeIO();var f=this.featureLayer,t=this.map.extent,n=a.extent,m=a.row,h=a.col,v=f.objectIdField;b=b.features;var r=this._gridLayer,C=this._cellMap,w=a.latticeID;C=w?C[w]:C[m]&&C[m][h];if(a.resolution==r.resolution&&(w?w===r.getLatticeID(t):r.intersects(n,t)))if(C)f._sortFeatures(b),this._updateCell(C,b);else for(f._sortFeatures(b),a.features=b,this._addCellToCellMap(a),f=b.length,a=0;a<f;a++)t=b[a],n=t.attributes[v],this._addFeatureIIf(n,
t),this._incRefCount(n);else C&&this._removeCell(m,h,w);this._endCheck()},_queryErrorHandler:function(a,b){this._finalizeIO();a.hasPartialFeatures=!0;a.hasUpdateError=!0;this._addCellToCellMap(a);this.featureLayer._errorHandler(b);this._endCheck(b)},_finalizeIO:function(){this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var b=this.featureLayer,f=b._trackManager;f&&(f.clearTracks(),f.addFeatures(b.graphics),b._ager&&A.forEach(b.graphics,function(t){t._shape&&b._repaint(t)}),
f.moveLatestToFront(),f.drawTracks());this.featureLayer._fireUpdateEnd(!!a&&Error("FeatureLayer: "+(a.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=A.filter(this._ioQueue,function(b){return-1<b.fired?!1:!0});a&&A.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(a){var b=this.featureLayer,f=new g;f.outFields=b.getOutFields();f.where=
b._getAttributeFilter();f.returnGeometry=!0;f.geometry=a.extent||a.lattice;b.latticeTiling&&a.extent&&(f.spatialRelationship=g.SPATIAL_REL_CONTAINS);f.timeExtent=b._getOffsettedTE(b._mapTimeExtent);f.maxAllowableOffset=b._maxOffset;f.quantizationParameters=b._quantizationParameters;f.orderByFields=b.supportsAdvancedQueries?b.getOrderByFields():null;f.multipatchOption=b.multipatchOption;b._ts&&(f._ts=(new Date).getTime());(a=b.advancedQueryCapabilities)&&a.supportsQueryWithResultType&&(f.resultType=
"tile");a=this.canFetchPBF(f);b._enableEditModeQuantization(f,a);return{query:f,pbf:a}},_getCurrentCells:function(a){var b=[];a=a||this._cellMap;for(var f in a)if(a.hasOwnProperty(f)){var t=a[f];t&&(t.hasOwnProperty("row")||t.hasOwnProperty("latticeID")?b.push(t):"object"===typeof t&&b.push.apply(b,this._getCurrentCells(t)))}return b},_addCellToCellMap:function(a){var b=this._cellMap;if(a.latticeID)b[a.latticeID]=a;else{var f=a.row,t=a.col;b[f]=b[f]||{};b[f][t]=a}},_removeOldCells:function(a){var b=
this._cellMap,f=this._gridLayer,t,n;for(t in b)if(b[t]){var m=b[t],h=m.latticeID,v=0,r=0;if(h)v++,h!==f.getLatticeID(a)&&(this._removeCell(null,null,h),r++);else for(n in m)m[n]&&(v++,f.intersects(m[n].extent,a)||(this._removeCell(t,n),r++));r===v&&delete b[t]}},_updateCell:function(a,b){var f=this.featureLayer,t=f.objectIdField;f=f._selectedFeatures;var n,m=b.length;a.features=a.features||[];for(n=0;n<m;n++){var h=b[n],v=h.attributes[t],r=this._addFeatureIIf(v,h);r===h?(this._incRefCount(v),a.features.push(r)):
v in f||(r.setGeometry(h.geometry),r.setAttributes(h.attributes))}},_removeCell:function(a,b,f){var t=this._cellMap,n=this.featureLayer,m=n.objectIdField,h=f?t[f]:t[a]&&t[a][b];if(h&&(f?delete t[f]:delete t[a][b],a=h.features))for(b=0;b<a.length;b++)f=a[b].attributes[m],this._decRefCount(f),f in n._selectedFeatures||this._removeFeatureIIf(f)}})})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a){var b=e(null,{declaredClass:"esri.layers._GridLayout",constructor:function(f,t,n,m){this.origin=f;this.cellWidth=t.width;this.cellHeight=t.height;this.mapWidth=n.width;this.mapHeight=n.height;this.srInfo=m},setResolution:function(f){this.resolution=(f.xmax-f.xmin)/this.mapWidth;this.srInfo&&(f=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[f,0,f-1])},setMapState:function(f,t,n){this.mapWidth=t;this.mapHeight=n;this.setResolution(f)},
getCellCoordinates:function(f){var t=this.resolution,n=this.origin;return{row:Math.floor((n.y-f.y)/(this.cellHeight*t)),col:Math.floor((f.x-n.x)/(this.cellWidth*t))}},normalize:function(f){var t=this._frameStats;if(t){var n=t[0],m=t[1];t=t[2];f<m?(f%=n,f=f<m?f+n:f):f>t&&(f%=n)}return f},intersects:function(f,t){var n=this.srInfo;return n?B.some(t._getParts(n),function(m){return f.intersects(m.extent)}):f.intersects(t)},getCellExtent:function(f,t){var n=this.resolution,m=this.origin,h=this.cellWidth,
v=this.cellHeight;return new k(t*h*n+m.x,m.y-(f+1)*v*n,(t+1)*h*n+m.x,m.y-f*v*n,a.createSpatialReference(m.spatialReference.toJson()))},getLatticeID:function(f){var t=this.getCellCoordinates({x:f.xmin,y:f.ymax}),n=this.getCellCoordinates({x:f.xmax,y:f.ymin});f=t.row;var m=n.row;t=this.normalize(t.col);n=this.normalize(n.col);return f+"_"+m+"_"+t+"_"+n},sorter:function(f,t){return f<t?-1:1},getCellsInExtent:function(f,t){var n=this.getCellCoordinates({x:f.xmin,y:f.ymax}),m=this.getCellCoordinates({x:f.xmax,
y:f.ymin}),h=n.row,v=m.row;n=n.col;m=m.col;var r=[],C,w,y=[],q=[],x=[];for(C=h;C<=v;C++)for(w=n;w<=m;w++){var E=this.normalize(w);f=this.getCellExtent(C,E);B.some(r,function(F){return F.row===C&&F.col===E})||r.push({row:C,col:E,extent:f,resolution:this.resolution});t&&(y.push(f.xmin,f.xmax),q.push(f.ymin,f.ymax))}n=this.normalize(n);m=this.normalize(m);y.sort(this.sorter);q.sort(this.sorter);t=y.length;for(C=t-1;0<=C;C--)C<t-1&&y[C]===y[C+1]&&y.splice(C,1);t=q.length;for(C=t-1;0<=C;C--)C<t-1&&q[C]===
q[C+1]&&q.splice(C,1);if(y.length&&q.length){f=y[0];w=y[y.length-1];var z=q[0];var D=q[q.length-1];t=y.length;for(C=0;C<t;C++)x.push([[y[C],D],[y[C],z]]);t=q.length;for(C=0;C<t;C++)x.push([[f,q[C]],[w,q[C]]]);y=new g({paths:x,spatialReference:this.origin.spatialReference.toJson()});r.push({latticeID:h+"_"+v+"_"+n+"_"+m,lattice:y,resolution:this.resolution})}return{minRow:h,maxRow:v,minCol:n,maxCol:m,topRow:h,bottomRow:v,leftCol:n,rightCol:m,cells:r}},_findCell:function(f,t,n){var m;B.some(f,function(h){h.row===
t&&h.col===n&&(m=h);return!!m});return m},getExtentOfIntersectingCells:function(f){var t=this.getCellsInExtent(f),n=t&&t.cells;if(n&&n.length){var m=t.topRow,h=t.leftCol,v=0;B.forEach(n,function(y){y.row===m&&v++});var r=this._findCell(n,m,h).extent,C=this.srInfo;if(!C||v!==this._frameStats[0]&&h!==t.rightCol){var w=r.xmin;C=w+v*r.getWidth()}else w=C.valid[0],C=C.valid[1];t=this._findCell(n,t.bottomRow,h).extent.ymin;(f=(new k(w,t,C,r.ymax,f.spatialReference))._normalize(!1,!1))&&f.rings&&(f=new d(f),
f=c.getDenormalizedExtent(f));return f}}});b.createFromFeatureLayer=function(f){var t=f.layer;f=t.getMap()||f.map;var n=t._srInfo;(t=f&&f.loaded?new b(new l(n?n.valid[0]:f.extent.xmin,n?n.valid[1]:f.extent.ymax,f.spatialReference),{width:t._tileWidth,height:t._tileHeight},{width:f.width,height:f.height},n):null)&&t.setResolution(f.extent);return t};return b})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(e,u,
B,A,p){return e([p],{declaredClass:"esri.layers._SelectionMode",constructor:function(l){this.featureLayer=l;this._featureMap={}},propertyChangeHandler:function(l){this._init&&0===l&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}})})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a){return e([a],{declaredClass:"esri.layers._StreamMode",constructor:function(b,f){this.featureLayer=b;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=u.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;b.purgeOptions&&b.purgeOptions.age&&"number"===typeof b.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*b.purgeOptions.age));this._drawFeatures=
u.hitch(this,this._drawFeatures);this._queryErrorHandler=u.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(b){this._init&&(0===b?this._applyTimeFilter():3===b?this._redrawAllTracks():console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d "+this.featureLayer.id))},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=
this._featureMap=null},drawFeature:function(b){var f=this.featureLayer,t=f.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));f._joinField&&this._getFeature(b.attributes[t])?this._drawBuffer.updates.push({oid:b.attributes[t],updates:b}):this._drawBuffer.adds.push(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var b=this.featureLayer;b&&(b._relatedUrl||b._keepLatestUrl?
(b._fireUpdateStart(),b._refreshing=!0,b.disconnect(),b.clear(),b._relatedQueried=!1,b._keepLatestQueried=!1,b.connect()):(b._fireUpdateStart(),b.clear(),b._fireUpdateEnd()))},_drawFeatures:function(b,f){var t=this.featureLayer;t._create(b.features||[]);t._fireUpdateEnd(null,f)},_applyTimeFilter:function(b){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var f=this.featureLayer,t=f.objectIdField;b&&B.forEach(b,function(n){n=n.attributes[t];f._unSelectFeatureIIf(n,this);
this._decRefCount(n);this._removeFeatureIIf(n)},this)},_addFeatures:function(b){var f=this.featureLayer,t=f._endTimeField,n=f._startTimeField,m,h=[],v=[],r=[];var C=f._trackManager;var w=f.objectIdField;if(C)for(m in b=C.addFeatures(b),b)b.hasOwnProperty(m)&&(h.push(m),b[m].adds&&(v=v.concat(b[m].adds)),b[m].deletes&&(r=r.concat(b[m].deletes)));else v=b;B.forEach(v,function(y){var q=y.attributes[w];var x=t&&y.attributes[t];!x&&this._maxFeatureAge&&(x=n&&y.attributes[n]?y.attributes[n]+this._maxFeatureAge:
Date.now()+this._maxFeatureAge);x&&(x=1E3*Math.ceil(x/1E3),this._featuresByTime[x]?this._featuresByTime[x].push(q):this._featuresByTime[x]=[q]);this._addFeatureIIf(q,y);this._incRefCount(q)},this);r.length&&this._removeFeatures(r);C&&C.refreshTracks(h)},_updateFeatures:function(b){var f=this.featureLayer,t=[];var n=f._trackManager;var m=f._trackIdField;B.forEach(b,function(h){var v=h.updates;h=this._getFeature(h.oid);var r;if(h){v.geometry&&h.setGeometry(v.geometry);v=v.attributes||{};for(r in v)v.hasOwnProperty(r)&&
(h.attributes[r]=v[r]);h.setAttributes(h.attributes);h.visible=this._checkFeatureTimeIntersects(h);n&&h.attributes[m]?t.push(h.attributes[m]):f._repaint(h,null,!0)}},this);t.length&&n.refreshTracks(t)},_redrawAllTracks:function(){var b=this.featureLayer._trackManager,f;b&&(f=b.trimTracks())&&0<f.length&&(this._removeFeatures(f),b.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var b=this._drawBuffer,f=b.adds.splice(0,b.adds.length),t=b.updates.splice(0,b.updates.length);
b=this.featureLayer;if(!b)return!1;b.updating||b._fireUpdateStart();this._addFeatures(f);this._updateFeatures(t);(f=this._getExpiredFeatures())&&f.length&&(this._removeFeatures(f),b._trackManager&&b._trackManager.removeFeatures(f));b._purge();b._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var b=this._timeoutId,f=this._drawBuffer,t=f.adds;f=f.updates;b&&clearTimeout(b);t.splice(0,t.length);f.splice(0,f.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime=
{};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(b){b=b||0===b?b:200;0>b&&(b=200);this._refreshRate=b},_checkFeatureTimeIntersects:function(b){var f=this.featureLayer,t=f.getMap();return(t=t?t.timeExtent:null)&&f.timeInfo&&(f.timeInfo.startTimeField||f.timeInfo.endTimeField)?0<f._filterByTime([b],t.startTime,t.endTime).match.length:!0},_fetchArchive:function(b){var f=new A,t=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);
t._fireUpdateStart();if(b&&this.map){b=new d(b);var n=new g;var m=this.map;var h=t.getFilter()||{};var v=h.where||"1\x3d1";var r=h.geometry?c.fromJson(h.geometry):null;h=h.outFields?h.outFields.split(","):["*"];n.geometry=r;n.where=v;n.outFields=h;n.returnGeometry=!0;n.outSpatialReference=new k(m.spatialReference.toJson());this._pendingRequest=b.execute(n).then(function(C){this._pendingRequest=null;var w=this._fixFieldNameCasing(t,C);C.features=w;this._drawFeatures(C);t._fireUpdateEnd();f.resolve()}.bind(this)).otherwise(function(C){this._pendingRequest=
null;t._errorHandler(C);t._fireUpdateEnd(C);f.reject(C)}.bind(this))}else f.resolve();return f.promise},_queryErrorHandler:function(b){var f=this.featureLayer;f._errorHandler(b);f._fireUpdateEnd(b)},_fixFieldNameCasing:function(b,f){var t=f.features||[],n=f.fields;if(!n||!t.length)return t;b=this._mapFieldNameDifferences(b.fields,n);n=[];for(var m,h=0,v=f.features.length;h<v;h++)f=t[h],m=this._swizzleResponseAttributes(f.attributes,b),n.push({geometry:f.geometry,attributes:m});return n},_mapFieldNameDifferences:function(b,
f){var t=[],n={},m;var h=0;for(m=f.length;h<m;h++)t.push(f[h].name);h=0;for(m=b.length;h<m;h++){f=b[h].name;var v=this._checkForStreamFieldName(f,t);v&&(n[v]=f)}return n},_checkForStreamFieldName:function(b,f){b=b.toLowerCase();for(var t,n=0,m=f.length;n<m;n++)if(f[n].toLowerCase()===b){t=f[n];break}return t},_swizzleResponseAttributes:function(b,f){var t={},n;for(n in b)if(b.hasOwnProperty(n)){var m=b[n];f.hasOwnProperty(n)?t[f[n]]=m:t[n]=m}return t},_getExpiredFeatures:function(){var b,f,t=[],n=
[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return n;var m=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=b=1E3*Math.ceil(Date.now()/1E3);if(m&&m!==b)for(f=this._featuresByTime;m<=b;m+=1E3)f[m]&&(t=t.concat(f[m]),delete f[m]);B.forEach(t,function(h){(h=this._getFeature(h))&&n.push(h)},this);return n}})})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(e,u,B,A,p,l,k,g,d,c){var a=-1!==l.renderer.toLowerCase().indexOf("canvas");return e(null,{declaredClass:"esri.layers._TrackManager",constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;b=this.layer;this.createTracklineContainer()&&(this._handles=[b.on("visibility-change",u.hitch(this,function(f){this.container.setVisibility(f.visible);this.container.evaluateSuspension()})),b.on("scale-range-change",u.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var b=this.layer;if("esriGeometryPoint"!==b.geometryType)return null;var f=this.map,t=b._getRenderer();t=t&&t.trackRenderer;var n=this.container=new c._GraphicsLayer({id:b.id+"_tracks",_child:!0,visible:b.visible,minScale:b.minScale,maxScale:b.maxScale});n.loaded=!0;n.onLoad(n);n._setMap(f,b._div);a||(f=n._div.getNode(),b=b._div.getNode(),f&&b&&p.place(f,b,"first"));n.setRenderer(t);return n},addFeatures:function(b){var f=this.trackMap,
t=this.layer,n=t._trackIdField,m=[];B.forEach(b,function(C){var w=C.attributes[n];(f[w]=f[w]||[]).push(C);-1===B.indexOf(m,w)&&m.push(w)});var h=t._startTimeField,v=t.objectIdField,r=function(C,w){var y=C.attributes[h],q=w.attributes[h];return y===q?C.attributes[v]<w.attributes[v]?-1:1:y<q?-1:1};B.forEach(m,function(C){f[C].sort(r)})},trimTracks:function(b){function f(v){for(v=t[v]||[];v.length>n;)m.push(v.shift())}var t=this.trackMap,n=this.layer.maximumTrackPoints||0,m=[],h;if(!n)return m;if(b)B.forEach(b,
function(v){f(v)});else for(h in t)t.hasOwnProperty(h)&&f(h);return m},drawTracks:function(b){function f(C){var w=h[C],y,q;var x=t.trackLineMap[C];n.remove(x);delete t.trackLineMap[C];x=null;if(!w||2>w.length)return!1;x=[];for(y=w.length-1;0<=y;y--)(q=w[y].geometry)&&x.push([q.x,q.y]);w={};w[r]=C;1<x.length&&(x=new g(new d({paths:[x],spatialReference:v}),null,w),n.add(x),t.trackLineMap[C]=x)}var t=this,n=this.container,m;if(n){var h=this.trackMap;var v=this.map.spatialReference;var r=this.layer._trackIdField;
if(b)B.forEach(b,function(C){f(C)});else for(m in h)h.hasOwnProperty(m)&&f(m)}},refreshTracks:function(b){function f(r){var C;t.drawTracks([r]);if(h&&h.latestObservationRenderer){r=n[r]||[];var w=r.length;for(C=0;C<w;C++)m._repaint(r[C],null,!0)}}var t=this,n=this.trackMap,m=this.layer,h=m._getRenderer(),v;if(b)B.forEach(b,function(r){f(r)});else for(v in n)n.hasOwnProperty(v)&&f(v);this.moveLatestToFront()},moveLatestToFront:function(b){B.forEach(this.getLatestObservations(b),function(f){var t=f._shape;
t&&t._moveToFront();this._repaint(f,null,!0)},this.layer)},getLatestObservations:function(b){function f(v){v=m[v];return v[v.length-1]}var t=[],n=this.layer._getRenderer(),m=this.trackMap,h;if(!n.latestObservationRenderer)return t;if(b)B.forEach(b,function(v){t.push(f(v))});else for(h in m)m.hasOwnProperty(h)&&t.push(f(h));return t},clearTracks:function(b){var f=this.getLatestObservations(b),t=this.container,n=this.trackMap,m;if(b)B.forEach(b,function(v){delete this.trackMap[v];t&&(h=this.trackLineMap[v],
t.remove(h),delete this.trackLineMap[v])},this);else{if(t)for(m in n){var h=this.trackLineMap[m];t.remove(h)}this.trackMap={};this.trackLineMap={}}B.forEach(f,function(v){this._repaint(v,null,!0)},this.layer)},isLatestObservation:function(b){var f=this.trackMap[b.attributes[this.layer._trackIdField]];return f?f[f.length-1]===b:!1},destroy:function(){B.forEach(this._handles,function(f){f.remove()});var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}})})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f){function t(){}function n(m){var h=m.layer;return{geometry:m.geometry,attributes:m.attributes,getLayer:function(){return h}}}return e(null,{declaredClass:"esri.layers.HeatmapManager",
heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(m){this.sourceLayer=m;this._hndls=[]},initialize:function(m){this.map=m;var h=this.sourceLayer,v=h.renderer;h.setDrawMode(!1);this.imageLayer=m._getMapImageLyr();var r=this;this.heatmapRenderer=v instanceof a?v:(v.getRendererInfoByZoom(m.getZoom())||v.getRendererInfoByScale(m.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);
this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);p(["../workers/heatmapCalculator"],function(C){r._calculator=new C(u.mixin({width:r.map.width,height:r.map.height},r._getOptions()));r._setupRenderer();r.heatmapRenderer.getStats=
C.calculateStats;r.heatmapRenderer.getHistogramData=C.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(m){var h=m.renderer,v=h instanceof a;this.heatmapRenderer?v?this.heatmapRenderer=h:this._removeRenderer(m):v&&(this.heatmapRenderer=h,this.sourceLayer&&this.map&&this._setupRenderer())},
_handleOpacityChange:function(m){m=m.opacity;var h=this._getImageBySourceId(this.sourceLayer.id);h&&h.setOpacity(m)},_setupRenderer:function(){var m=this._hndls,h=this.sourceLayer,v=this.map,r=this;h._originalDraw=h._draw;h._draw=t;h._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);m.push(h.on("update-end",this.redraw));m.push(h.on("suspend",function(C){(C=r._getImageBySourceId(r.sourceLayer.id))&&C.hide()}));m.push(h.on("resume",function(C){(C=
r._getImageBySourceId(r.sourceLayer.id))&&C.show()}));m.push(B.after(h,"redraw",this.redraw));m.push(v.on("layer-remove",function(C){C.layer==h&&((C=r._getImageBySourceId(r.sourceLayer.id))&&r.imageLayer.removeImage(C),r._removeRenderer({target:h}))}));h._collection&&m.push(h.on("graphic-add",function(C){r._reprojectFeature(C.graphic);r.redraw()}));1!==h.mode&&(m.push(v.on("resize, pan-end",this.redraw)),m.push(v.on("zoom-end",this.redraw)));m.push(h.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();h.graphics&&h.graphics.length&&(h.graphics[0].geometry&&!v.spatialReference.equals(h.graphics[0].geometry.spatialReference)&&A.forEach(h.graphics,function(C){this._reprojectFeature(C)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var m=this;this._drawTimer=setTimeout(function(){clearTimeout(m._drawTimer);m._drawTimer=null;m.sourceLayer._getRenderer().isInstanceOf(a)&&m.recalculateHeatmap()},16)}},_removeRenderer:function(m){var h=
m.target;h._draw=h._originalDraw;delete h._originalDraw;h.setDrawMode(!0);this._removeHandlers();this._hndls=[];var v=this._getImageBySourceId(this.sourceLayer.id);v&&this.imageLayer.removeImage(v);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;h.renderer!=m.renderer&&h.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),h.renderer&&h.renderer.getRendererInfo&&h.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(m){if(m&&m.geometry){var h=m.geometry,v=this.map.spatialReference;v.equals(h.spatialReference)||(h=d.project(h,v),null==h?console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer"):m.geometry=h)}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var m=this.sourceLayer,h=this.map,v=this.heatmapRenderer,r=this.map.extent,C=this.map.width,
w=this.map.height,y=this._calculator,q=this,x=function(z){z=q._getScreenPoints(z.features,h,m);z=y.calculateImageData(u.mixin({screenPoints:z,mapinfo:{extent:[r.xmin,r.ymin,r.xmax,r.ymax],resolution:h.getResolution()},width:C,height:w},q._getOptions()));z=v.getSymbol(n({geometry:h.extent,attributes:{size:[C,w],imageData:z},layer:m}));z=new c({extent:h.extent,href:z.url,opacity:0,sourceId:m.id});q._swapMapImages(z,q._getImageBySourceId(m.id));m.suspended&&z.hide()},E={geometry:h.extent,timeExtent:m.useMapTime?
h.timeExtent:void 0,spatialRelationship:b.SPATIAL_REL_INTERSECTS};null!=m._canDoClientSideQuery(E)?m.queryFeatures(E,x):x({features:m.graphics})},_getScreenPoints:function(m,h,v){var r=[],C=m.length,w=0,y=0,q=new g(h.extent.xmin,h.extent.ymax,h.spatialReference),x=h.toScreen(q),E=x.x;x=x.y;var z=h.getResolution(),D;for((y=h.extent.getCacheValue("_parts"))&&(D=A.map(y,function(J){return v._intersects(h,J.extent)[0]}));C--;)if(y=m[C],y.geometry&&y.visible){var F={x:Math.ceil((y.geometry.x-q.x)/z+E),
y:Math.floor((q.y-y.geometry.y)/z-x),attributes:y.attributes};D&&(y=1<D.length&&F.x<-D[0]?D[1]:D[0],F.x+=y);r[w++]=F}return r},_getImageBySourceId:function(m){var h=this.imageLayer.getImages();h=A.filter(h,function(v){return v.sourceId==m});if(h.length)return h[h.length-1]},_swapMapImages:function(m,h){function v(){r.removeImage(h)}var r=this.imageLayer,C=this.sourceLayer.opacity;r.addImage(m);f.anim(m._node,{opacity:C},null,null,function(){m.opacity=C});null!=h&&f.anim(h._node,{opacity:0},null,null,
v)},_removeHandlers:function(){if(null!=this._hndls)for(var m=this._hndls.length;m--;)this._hndls[m].remove()},_getOptions:function(){var m=this.heatmapRenderer;return{blurRadius:m.blurRadius,gradient:m.gradient,maxPixelIntensity:m.maxPixelIntensity,minPixelIntensity:m.minPixelIntensity,field:m.field,fieldOffset:m.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var m=this.sourceLayer.graphics,h=m.length,v;h--;)v=m[h],v._shape=v._offsets=void 0}})})},
"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(e,u,B,A,p,l,k){return e(null,{declaredClass:"esri.layers.MapImage",constructor:function(g){u.mixin(this,g);this.extent=new k(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var g=this._node,d=this._layer,c;if(g){if(c=d&&d._div)d.suspended||
d._setPos(g,c._left,c._top),(d._active||c).appendChild(g);l.show(g)}}},hide:function(){if(this.visible){this.visible=!1;var g=this._node;g&&(l.hide(g),g.parentNode&&g.parentNode.removeChild(g))}},setOpacity:function(g){var d=this._node;this.opacity=g;d&&B.set(d,"opacity",g)}})})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C){var w=C.layers.clusters,y=C.widgets.popup,q=w.numFeatures,x=Math.pow(2,53)-1;return e(l,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,
_clusterRadius:null,_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(E){this._eventHandles=[];this.layer=E.layer;this.setAggregationInfo(E.aggregationInfo)},initialize:function(E){this._initialized=!0;this._map=E;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();
this._createPopupEventListeners()},destroy:function(E){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(E);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(E){this.aggregationInfo=E?u.mixin({},E):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},
getClusterFields:function(){return this._fields||[]},getFeaturesInCluster:function(E){E=E&&E.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(E):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},
isClusteringActive:function(){return!!(this._clusterGenerator&&0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(E){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(E)},_createContainer:function(){var E=this.layer,z=new m._GraphicsLayer({_child:!0,id:E.id+"_clusters",visible:E.visible,minScale:E.minScale,maxScale:E.maxScale,infoTemplate:this._infoTemplate});z.fields=this._fields;z.setRenderer(this._renderer);z.loaded=!0;z.onLoad(z);z._setMap(this._map,
E._div);return E._childLayer=z},_destroyContainer:function(){var E=this.container;E&&(E.clear(),E._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new v({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var E=this._clusterGenerator;E.loaded?this._awaitClusterGenerator():this._eventHandles.push(E.on("load",u.hitch(this,function(){this._awaitClusterGenerator()})),
E.on("load-error",u.hitch(this,function(z){console.log(z.error)})))},_destroyClusterGenerator:function(E){this._clusterGenerator&&this._clusterGenerator.destroy(E);this._clusterGenerator=null},_awaitClusterGenerator:function(){var E=this._clusterGenerator;E.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(E.on("start",u.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();
this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&this.redraw()},_applyClusterRadius:function(){var E=this.aggregationInfo;this._clusterRadius=E&&E.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var E=this.aggregationInfo||{};E.clusterRadius=this._clusterRadius;this.aggregationInfo=E},_applyRenderer:function(){var E=this.container,z=this._getClusterRendererInfo(),
D=this._compareStatInfos(this._statisticInfos,z.statisticInfos);D&&(this._statisticInfos=z.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(B.map(this._statisticInfos,function(F){return{attributeInfo:F.attributeInfo,statisticType:F.statisticType}})),E&&B.forEach(E.graphics,function(F){this._applyClusterAttributes(F,F.getAggregationInfo())},this)));this._renderer=z.renderer;this._applyFields();this._applyInfoTemplate(!!D&&this._initialized);E&&(E.setRenderer(this._renderer),
this.emit("renderer-change"))},_applyFields:function(){this._fields=this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(E){var z=this.aggregationInfo,D=z&&z.disablePopup;this.layer.infoTemplate&&!D?(z=z&&z.infoTemplate||this._infoTemplate,E=E||!z?this._createInfoTemplate():this._updateInfoTemplate(z)):E=null;this._infoTemplate=E;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var E=
this.aggregationInfo||{};E.infoTemplate=this._infoTemplate;this.aggregationInfo=E},_getClusterRendererInfo:function(){var E=this.layer&&this.layer.renderer;return E?this._createClusterRenderer(E):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var E=this._createContinuousCountRenderer();this._addSizeByCountVariable(E);return{renderer:E,statisticInfos:[]}},_createContinuousCountRenderer:function(E){var z=new f(null,"cluster_count");z.addBreak({minValue:-x,maxValue:x,symbol:E?
new E.constructor(E.toJson()):new t(u.clone(this.defaults.markerSymbol))});return z},_createClusterRenderer:function(E){if(!this._isSupportedRenderer(E))return this._getDefaultClusterRenderer();var z=[];if(this._isSimpleRenderer(E))var D=this._createContinuousCountRenderer(E.symbol);else{D=new E.constructor(E.toJson());var F=this._getRendererAttributeInfo(E);if(this._isCBRenderer(D)){var J=r.getClusterField(F,"avg");z.push(this._getStatInfo(F,"avg"));D.normalizationType=null;D.normalizationField=
null;D.normalizationTotal=null}else this._isUVRenderer(D)&&(J=r.getClusterField(F,"type"),z.push(this._getStatInfo(F,"type")));D.attributeField=J;D.setValueExpression(null);D.valueExpressionTitle=null;D.setVisualVariables(null);this._setRendererTitle(D,E)}E=this._getSupportedVariables(E);F=this._createClusterVariables(E.allVars,z);D.setVisualVariables(F);E.sizeVars.length||this._isCBSizeRenderer(D)||this._addSizeByCountVariable(D);return{renderer:D,statisticInfos:z}},_isSupportedRenderer:function(E){if(this._isSimpleRenderer(E))return!0;
if(this._isCBRenderer(E)){var z=E.normalizationType;return"function"===typeof E.attributeField||z&&"field"!==z?!1:!0}return this._isUVRenderer(E)?"function"===typeof E.attributeField||E.attributeField2?!1:!0:!1},_isSimpleRenderer:function(E){return-1<E.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(E){return-1<E.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(E){return-1<E.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},
_isCBSizeRenderer:function(E){var z=E.infos;if(!this._isCBRenderer(E)||!z||2>z.length)return!1;var D=Infinity,F=-Infinity;B.forEach(z,function(J){if(J=J.symbol){var L=0;switch(J.type){case "simplemarkersymbol":L=J.size;break;case "picturemarkersymbol":L=(J.width+J.height)/2}D=Math.min(D,L);F=Math.max(F,L)}});return Infinity!==D&&-Infinity!==F&&D!==F},_getRendererAttributeInfo:function(E){var z=E.attributeField,D=z?this.layer.getField(z):null;return{field:z,attributeType:D&&"esriFieldTypeDate"===D.type?
"date":null,rotationType:null,valueExpression:E.valueExpression,valueExpressionTitle:E.valueExpressionTitle,normalizationField:E.normalizationField}},_setRendererTitle:function(E,z){E.legendOptions=u.clone(z.legendOptions);E.legendOptions&&E.legendOptions.title||(E.legendOptions=E.legendOptions||{},E.legendOptions.title=b.getRendererTitle(z,this.layer))},_getSupportedVariables:function(E){var z=E.getVisualVariablesForType("colorInfo",!1)||[],D=E.getVisualVariablesForType("sizeInfo",!1)||[],F=E.getVisualVariablesForType("opacityInfo",
!1)||[];E=E.getVisualVariablesForType("rotationInfo",!1)||[];z=B.filter(z,this._variableFilter);D=B.filter(D,this._variableFilter);F=B.filter(F,this._variableFilter);E=B.filter(E,this._variableFilter);return{sizeVars:D,allVars:z.concat(D).concat(F).concat(E)}},_variableFilter:function(E){return"function"!==typeof E.field&&!n.viewScaleRE.test(E.valueExpression)},_createClusterVariables:function(E,z){return B.map(E,function(D){return this._createVarForAvg(D,z)},this)},_createVarForAvg:function(E,z){var D=
u.clone(E),F=this._getVariableAttributeInfo(E);D.field=r.getClusterField(F,"avg");D.normalizationField=null;D.valueExpression=null;D.valueExpressionTitle=null;F=this._getStatInfo(F,"avg");this._addStatInfo(z,F);this._setVariableTitle(D,E);return D},_getVariableAttributeInfo:function(E){var z="rotationInfo"===E.type,D=z?"angle":null;z=z?E.rotationType:null;var F=E.legendOptions&&E.legendOptions.title,J=E.field,L=J?this.layer.getField(J):null;L&&"esriFieldTypeDate"===L.type&&(D="date");return{field:J,
attributeType:D,rotationType:z,valueExpression:E.valueExpression,valueExpressionTitle:E.valueExpressionTitle||E.valueExpression&&F,normalizationField:E.normalizationField}},_setVariableTitle:function(E,z){E.legendOptions&&E.legendOptions.title||(E.legendOptions=E.legendOptions||{},E.legendOptions.title=b.getVisualVariableTitle(z,this.layer))},_getStatInfo:function(E,z){return{statisticHash:r.getStatisticHash(E,z),attributeInfo:E,statisticType:z}},_addStatInfo:function(E,z){var D=this._findStatInfo(E,
z);D?D.attributeInfo.valueExpressionTitle||(D.attributeInfo.valueExpressionTitle=z.attributeInfo.valueExpressionTitle):E.push(z)},_findStatInfo:function(E,z){var D;B.some(E,function(F){F.statisticHash===z.statisticHash&&(D=F);return!!D});return D},_compareStatInfos:function(E,z){var D=B.filter(E,function(J){return!this._findStatInfo(z,J)},this),F=B.filter(z,function(J){return!this._findStatInfo(E,J)},this);return F.length||D.length?{added:F,removed:D}:null},_addSizeByCountVariable:function(E){var z=
this._createSizeByCountVariable();z&&this._addVariable(E,z)},_getSizeByCountVariable:function(E){E=E.getVisualVariablesForType("sizeInfo",!1)||[];return B.filter(E,function(z){return"cluster_count"===z.field})[0]},_updateSizeByCountVariable:function(){var E=this._renderer,z=this._getSizeByCountVariable(E);if(z){var D=this._createSizeByCountVariable();D&&this._replaceVariable(E,z,D)}},_createSizeByCountVariable:function(){var E=this._clusterGenerator;if(E){var z=E.getCurrentLodStats();if(z){var D=
E.getNumFeatures();E=E.clusters;var F=z.min,J=z.max;1===z.count&&F===D||1===E.length&&E[0].count===D?(F=1,J=D):F&&F===J&&(J=2*F);D={type:"sizeInfo",field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:F,maxDataValue:J,legendOptions:{title:q}}}}return D},_addVariable:function(E,z){var D=E.visualVariables||[];D.push(z);E.setVisualVariables(D)},_replaceVariable:function(E,z,D){var F=E.visualVariables;z=B.indexOf(F,z);-1<z&&F.splice(z,1);F.push(D);E.setVisualVariables(F)},_getFields:function(E){var z=
[new h({name:"cluster_count",type:"esriFieldTypeInteger"})];B.forEach(E,function(D){var F=D.statisticType;D=D.attributeInfo;var J;"avg"===F?J="date"===D.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===F&&(J=D.field?this.layer.getField(D.field).type:"esriFieldTypeString");z.push(new h({name:r.getClusterField(D,F),type:J}))},this);return z},_createInfoTemplate:function(){var E=this._statisticInfos,z=this._renderer,D=[{fieldName:"cluster_count",label:q,visible:!0,format:{digitSeparator:!0,
places:0}}],F=[],J=[g.substitute({count:"{cluster_count}"},w.countSummary)],L=this._isUVRenderer(z)?z.infos:[];B.forEach(E,function(Q){var ba=Q.statisticType,fa=Q.attributeInfo,Y=r.getClusterField(fa,ba),ma=this._getFieldLabel(Q);if("avg"===ba){var ca={fieldName:Y,label:ma,visible:!0,format:"date"===fa.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var la=this._getFieldSummary(Q,Y)}else"type"===ba&&(la="expression/"+Y,ca={fieldName:la,visible:!0},F.push({name:Y,title:ma,
returnType:"string",expression:this._getExpression(L,Y)}),la=this._getFieldSummary(Q,la));ca&&D.push(ca);la&&J.push(la)},this);return new a({fieldInfos:D,expressionInfos:F,description:J.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(E){var z=E.toJson(),D=this._isUVRenderer(this._renderer)?this._renderer.infos:[];B.forEach(this._statisticInfos,function(F){var J=F.statisticType;F=r.getClusterField(F.attributeInfo,J);"type"===J&&(J=this._findExpressionInfo(F,z))&&(J.expression=this._getExpression(D,
F))},this);return new a(z)},_findExpressionInfo:function(E,z){var D;B.some(z.expressionInfos,function(F){F.name===E&&(D=F);return!!D});return D},_escapeDoubleQuotes:function(E){return E?E.replace(/"/g,'\\"'):""},_getExpression:function(E,z){return["var uvInfos \x3d ["+this._getObjects(E).join(", ")+"];",'var predominantType \x3d Text($feature["'+z+'"]);','var label \x3d "'+this._escapeDoubleQuotes(w.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},
_getObjects:function(E){return B.map(E,function(z){return'{"value": "'+String(z.value)+'","label": "'+this._escapeDoubleQuotes(String(z.label))+'"}'},this)},_getFieldLabel:function(E){var z=E.statisticType,D=E.attributeInfo,F=D.field;E=D.normalizationField;var J="";if("avg"===z)var L=E?w.avgNormFieldLabel:w.avgFieldLabel;else"type"===z&&(L=w.predominantFieldLabel);L&&(z=D.valueExpression?D.valueExpressionTitle:this.layer.getFieldLabel(F),E=E&&this.layer.getFieldLabel(E),J=g.substitute({fieldLabel:z||
"",normFieldLabel:E||""},L));return J},_getFieldSummary:function(E,z){var D=E.statisticType,F=E.attributeInfo,J=F.field;E=F.normalizationField;var L="";if("avg"===D)var Q=E?w.avgNormFieldSummary:w.avgFieldSummary;else"type"===D&&(Q=w.predominantFieldSummary);Q&&(D=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(J),E=E&&this.layer.getFieldLabel(E),L=g.substitute({fieldLabel:D||"",normFieldLabel:E||"",fieldValue:"{"+z+"}"},Q));return L},_removeFromPopup:function(E){var z=this._map.infoWindow,
D=z.features;if(D&&D.length){var F=B.filter(D,function(J){return J.getLayer()!==E});F.length<D.length&&(F.length?z.setFeatures(F):(z.clearFeatures(),z.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(E,z){(z=z.clusterFillSymbol)&&(z=new z.constructor(z.toJson()));
E=new k(E,z);this._map.graphics.add(E);this._clusterBoundary=E},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:y.NLS_browseFeatures,className:"browseFeatures",callback:u.hitch(this,function(E){E.preventDefault();E=this._map.infoWindow;var z=E.getSelectedFeature(),D=z.getChildGraphics(),F=E.getCurrentAnchor();E.setFeatures(D,{anchor:F});if(D=c.graphicsExtent(D))this._addClusterBoundary(D,
E),E.show(this._getPopupLocation(D,F));this._popupClusterGraphic=z})}])[0]},_getPopupLocation:function(E,z){var D=E.getCenter();z=z.toLowerCase();-1<z.indexOf("top")?D.update(D.x,E.ymax):-1<z.indexOf("bottom")?D.update(D.x,E.ymin):-1<z.indexOf("left")?D.update(E.xmin,D.y):D.update(E.xmax,D.y);return D},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:y.NLS_viewSummary,className:"viewSummary",callback:u.hitch(this,function(E){E.preventDefault();E=this._popupClusterGraphic;
var z=this._map.infoWindow;z.setFeatures([E]);z.show(E.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",u.hitch(this,function(E){(E.mapLevelChange||E.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",u.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();
var E=[],z=[];B.forEach(this._clusterGenerator.clusters,function(D){var F=new k(D.centroid);F.setAggregationSourceLayer(this.layer);F.setAggregationInfo(D);this._applyClusterAttributes(F,D);1===D.count?(D=this._getSingleGraphic(F),z.push(D)):E.push(F)},this);this._showSingleGraphics(z);this._addGraphics(E)},_addGraphics:function(E){var z=this.container;z.clear();B.forEach(E,function(D){z.add(D)})},_getSingleGraphic:function(E){var z=this._clusterGenerator.getCell(E.getAggregationInfo().primary).features[0],
D=this.layer.renderer;D=D&&D.getSymbol(z);var F=this._getSizeByCountVariable(this._renderer);D&&F&&(E=F?this._renderer.getSize(E,{sizeInfo:F,shape:D.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,z.setSize(E));return z},_showSingleGraphics:function(E){B.forEach(E,this._showSingleGraphic);this._singleGraphics=E},_hideSingleGraphics:function(){B.forEach(this._singleGraphics,function(E){E.setSize(null);this._hideSingleGraphic(E)},this);this._singleGraphics=null},
_clearSingleGraphics:function(){B.forEach(this._singleGraphics,function(E){E.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(E){E&&E._resume()},_hideSingleGraphic:function(E){E&&E._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(E,z){E.setAttributes(z.attributes)},_createLayerEventListeners:function(){var E=this.layer;this._eventHandles.push(E.on("visibility-change",
u.hitch(this,function(z){this.container.setVisibility(z.visible)})),E.on("scale-range-change",u.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),E.on("renderer-change",u.hitch(this,function(){this._applyRenderer()})),E.on("info-template-change",u.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",u.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);
this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var E=this._map.infoWindow;this._eventHandles.push(E.on("selection-change",u.hitch(this,function(){this._resetClusterNavPartial();var z=this._map.infoWindow.getSelectedFeature(),D=z&&z.getLayer();if(D){if(D===this.container){this._removeClusterBoundary();var F=this._createBrowseFeaturesAction()}else D===this.layer&&z._isSuspended()?(F=this._createViewSummaryAction(),
this._popupSingleGraphic=z,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=F?[F]:null}})),E.on("clear-features",u.hitch(this,function(z){this._resetClusterNav();z.isIntermediate||this._removeClusterBoundary()})),E.on("hide",u.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),E.on("show",u.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();
this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){B.forEach(this._eventHandles,function(E){E.remove()})}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(e,u,B){var A=B.widgets.legend;return{getVisualVariableTitle:function(p,l){var k=p.field,g=p.normalizationField,d=!1,c=!1,a=!1;k=e.isFunction(k)?null:k;g=e.isFunction(g)?null:g;if(p.legendOptions&&p.legendOptions.title)var b=p.legendOptions.title;
else if(p.valueExpressionTitle)b=p.valueExpressionTitle;else{if(l.renderer&&l.renderer.authoringInfo&&l.renderer.authoringInfo.visualVariables){var f=l.renderer.authoringInfo.visualVariables;for(p=0;p<f.length;p++){var t=f[p];if("colorInfo"===t.type&&"ratio"===t.style){d=!0;break}else if("colorInfo"===t.type&&"percent"===t.style){c=!0;break}else if("colorInfo"===t.type&&"percentTotal"===t.style){a=!0;break}}}(d=a&&"showRatioPercentTotal"||c&&"showRatioPercent"||d&&"showRatio"||g&&"showNormField"||
k&&"showField"||null)&&(b=u.substitute({field:k&&l.getFieldLabel(k),normField:g&&l.getFieldLabel(g)},"showField"===d?"${field}":A[d]))}return b},getRendererTitle:function(p,l){if(p){if("esri.renderer.ClassBreaksRenderer"===p.declaredClass){var k=p.attributeField;var g=p.normalizationField;var d="percent-of-total"===p.normalizationType}k=e.isFunction(k)?null:k;g=e.isFunction(g)?null:g;if(p.legendOptions&&p.legendOptions.title)var c=p.legendOptions.title;else p.valueExpressionTitle?c=p.valueExpressionTitle:
(p=g&&"showNormField"||(d?"showNormPct":null)||k&&"showField"||null)&&(c=u.substitute({field:k&&l.getFieldLabel(k),normField:g&&l.getFieldLabel(g)},"showField"===p?"${field}":A[p]))}return c}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){return u(l,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(n){this._update=B.hitch(this,this._update);this._indexFeatures=B.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=n.map;this.layer=n.layer;this.setLod(n.lod);this.setTolerance(n.tolerance);this.setClusterMode(n.clusterMode);this.setClusterRadius(n.clusterRadius);this.setSortEnabled(n.sortEnabled);this.setFilterEnabled(n.filterEnabled);this.setBufferEnabled(n.bufferEnabled);this.setUpdateEnabled(n.updateEnabled);this.setStatisticInfos(n.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",B.hitch(this,this._startup)))},destroy:function(n){this._displayFeatures(!0,
n);A.forEach(this._eventHandles,function(m){m.remove()});a.clearTimeout(this._updateHandle);a.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(n){var m=this.lod;this.lod=n||this.defaults.lod;m!==this.lod&&this.update()},setTolerance:function(n){var m=this.tolerance;this.tolerance=n||this.defaults.tolerance;m!==this.tolerance&&this.update()},setClusterMode:function(n){var m=
this.clusterMode;this.clusterMode=n||this.defaults.clusterMode;this._evalClusterParams();m!==this.clusterMode&&this.update()},setClusterRadius:function(n){var m=this.clusterRadius;this.clusterRadius=null!=n?n:this.defaults.clusterRadius;this._evalClusterParams();m!==this.clusterRadius&&this.update()},setSortEnabled:function(n){var m=this.sortEnabled;this.sortEnabled=null!=n?!!n:this.defaults.sortEnabled;m!==this.sortEnabled&&this.update()},setFilterEnabled:function(n){var m=this.filterEnabled;this.filterEnabled=
null!=n?!!n:this.defaults.filterEnabled;m!==this.filterEnabled&&this.update()},setBufferEnabled:function(n){var m=this.bufferEnabled;this.bufferEnabled=null!=n?!!n:this.defaults.bufferEnabled;m!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(n){var m=this.updateEnabled;(this.updateEnabled=null!=n?!!n:this.defaults.updateEnabled)&&m!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(n){this.statisticInfos=n||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=a.setTimeout(this._update,a.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=a.setTimeout(this._indexFeatures,a.priority.HIGH))},getCell:function(n){return this._cellIndex[n.length][n]},getCluster:function(n){var m;A.some(this.clusters,function(h){-1<A.indexOf(h.geohashes,n)&&(m=h);return!!m});return m},getCellsInCluster:function(n){var m=
[];A.forEach(n&&n.geohashes,function(h){(h=this.getCell(h))&&m.push(h)},this);return m},getFeaturesInCluster:function(n){var m=[];n=this.getCellsInCluster(n);A.forEach(n,function(h){Array.prototype.push.apply(m,h.features)});return m},toggleFeatureVisibility:function(n){this.index()},getCurrentLodStats:function(){var n=this._globalIndex.lodStats;return n&&n[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var n=this._globalIndex.fullExtent;return n&&
Infinity!==n.xmin?new g(n):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",B.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",B.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var n=Error("GeohashAggregation is supported only for points");else{var m=this.map.spatialReference;
m.isWebMercator()||4326===m.wkid||(n=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}n?(this.loadError=n,this.emit("load-error",{error:n})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",B.hitch(this,this.index)),this.layer.on("edits-complete",B.hitch(this,this.index)),this.layer.on("graphics-clear",B.hitch(this,this.index)),
this.layer.on("suspend",B.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",B.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",B.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(n){this._mapLevelChange=!(!n||!n.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var n=
this.map.geographicExtent;if(n){var m=this._getIntersectingCells(n);n=this._getClusters(m.cells,n);this.clusters=n.clusters;this._applyStatInfosToClusters();m=m.profile;n=n.profile;var h=m.total+n.total;m.total=this._getElapsedTime(m.total);n.total=this._getElapsedTime(n.total);var v=this._perfProfile.lastUpdate={};v.cells=m;v.clusters=n;v.total=this._getElapsedTime(h)}}else this.clusters=[],this._perfProfile.lastUpdate=null;m=this._indexUpdated;this._indexUpdated=!1;n=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:n,indexChange:m})}},_displayFeatures:function(n,m){var h=this.layer;n=!n;h.suspendGraphics(n);!1!==m&&(n?h.clearNodes():h.redraw())},_indexFeatures:function(){this._indexHandle=null;var n=this._getTime();this._initializeIndexing();var m=0,h=this._globalIndex.fullExtent;A.forEach(this.layer.graphics,function(C){if(C.visible){var w=C.geometry,y=this._getLngLat(w);if(y){var q=w.getCacheValue("_geohash");void 0===q&&(q=f.pointToGeohash(y),
w.setCacheValue("_geohash",q||null))}q&&(this._addGeohashToIndex(q,C,y),m++,this._updateExtent(h,y))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=m;for(var v=this._globalIndex.lodStats,r=1;r<=this._maxGeohashLength;r++)v[r]=this._getLODStats(r,m);this._perfProfile.lastIndex.total=this._getElapsedTime(n,this._getTime());this._perfProfile.lastIndex.numFeatures=m;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var n=this._cellIndex=[],m=1;m<=this._maxGeohashLength;m++)n[m]={}},_getLngLat:function(n){if(n){var m=n.getLongitude();n=n.getLatitude();n=null!=m&&null!=n?{x:m,y:n}:null}return n},_addGeohashToIndex:function(n,m,h){for(var v=this._cellIndex,r="",C=0;C<this._maxGeohashLength;C++){r+=n[C];var w=v[r.length],y=w[r];y||(y=w[r]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:r,statistics:null});this._updateItem(y,1,h,!0);y.features.push(m)}},_getLODStats:function(n,m){var h=this._cellIndex[n],v=0,r=Infinity,C=-Infinity,w=null,y;for(y in h){var q=h[y];v++;q.count<r&&(r=q.count);q.count>C&&(C=q.count)}0<v&&(w=Number((m/v).toFixed(2)));return{lod:n,count:v,min:Infinity===r?null:r,max:-Infinity===C?null:C,avg:w}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var n=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==n.lod;this.lod=n.lod;this.tolerance=n.tolerance}},_getClusterParams:function(n,m,h){m<h&&(m=h);n=Math.ceil(n*m);m=this._getClosestLODRange(n).max;do h=this._getCellSize(m),(h=n>=this._cellSizeScaleFactor*h||1===h)||(m+=1);while(!h);h=n/this._getCellSize(m);return{lod:m,tolerance:n,multiplier:Number(h.toFixed(2))}},_getClosestLODRange:function(n){for(var m,h=this._maxGeohashLength;1<=
h;h--)if(this._getCellSize(h)>=n){m=h;break}null==m&&(m=1);n=m+1;n>this._maxGeohashLength&&(n=this._maxGeohashLength);return{min:m,max:n}},_getCellSize:function(n){n=f.getCellSizeInMeters(n);return Math.ceil(Math.min(n.width,n.height))},_sorter:function(n,m){var h=n.centroid,v=m.centroid;return n.count>m.count?-1:n.count<m.count?1:h.x>v.x?-1:h.x<v.x?1:0},_getIntersectingCells:function(n){var m=this._getTime();this.bufferEnabled&&(n=n.expand(this._extentScaleFactor));var h=f.getIntersecting(n,this.lod,
this.bufferEnabled?this.tolerance:0);n=this._getTime();var v=[],r=this.tolerance,C=this.sortEnabled;A.forEach(h,function(w){(w=this.getCell(w))&&v.push(w)},this);r&&C&&v.sort(this._sorter);h=this._getTime();return{cells:v,profile:{findCells:this._getElapsedTime(m,n),scanAndSortCells:this._getElapsedTime(n,h),total:h-m}}},_getClusters:function(n,m){var h=this._getTime(),v=[],r={},C={findCells:0};A.forEach(n,function(w,y){(w=this._createCluster(w,r,C))&&v.push(w)},this);this._markIntersecting(v,m);
this.filterEnabled&&(v=this._getIntersectingClusters(v));n=this._getTime();return{clusters:v,profile:{findCellsInCluster:this._getElapsedTime(C.findCells),total:n-h}}},_markIntersecting:function(n,m){var h=m.normalize();A.forEach(n,function(v){var r=v.centroid.x,C=v.centroid.y;v.isIntersecting=A.some(h,function(w){return r>=w.xmin&&r<=w.xmax&&C>=w.ymin&&C<=w.ymax})})},_getIntersectingClusters:function(n){return A.filter(n,function(m){return m.isIntersecting})},_createCluster:function(n,m,h){if(!m[n.geohash]){var v=
[{cell:n,distance:0}];if(this.tolerance){var r=this._getTime(),C=f.getNeighborsWithinDistance(n.centroid,this.lod,this.tolerance);h.findCells+=this._getTime()-r;A.forEach(C,function(w){if(w!==n.geohash&&(w=this.getCell(w))){var y=this._calculateDistance(n.centroid,w.centroid);y<=this.tolerance&&v.push({cell:w,distance:y})}},this)}return this._mergeCells(v,m)}},_calculateDistance:function(n,m){return d.getLength(f.geographicToWebMercator(n),f.geographicToWebMercator(m))},_mergeCells:function(n,m){var h=
this._initializeCluster({},n[0].cell.geohash);A.forEach(n,function(v){var r=v.cell,C=r.geohash;v=v.distance;var w=m[C];if(w)if(v<w.distance)this._removeCellFromCluster(C,m);else return;m[C]={cluster:h,distance:v};this._updateItem(h,r.count,r.centroid);h.geohashes.push(C)},this);return h},_removeCellFromCluster:function(n,m){var h=m[n].cluster;delete m[n];n=A.indexOf(h.geohashes,n);-1<n&&h.geohashes.splice(n,1);this._reevaluateCluster(h)},_reevaluateCluster:function(n){var m=n.geohashes;n=this._initializeCluster(n,
n.primary);A.forEach(m,function(h){var v=this.getCell(h);v&&(this._updateItem(n,v.count,v.centroid),n.geohashes.push(h))},this)},_initializeCluster:function(n,m){n.count=0;n.centroid=new k(null,null);n.geohashes=[];n.primary=m;n.statistics=null;return n},_applyStatInfos:function(n){n=this._getValidStatInfos(n);this._applyStatInfosToIndex(n);this._applyStatInfosToClusters(n)},_getValidStatInfos:function(n){var m=[];A.forEach(n,function(h){var v=h.attributeInfo;h=h.statisticType;var r="angle"===v.attributeType;
if(t.isSupportedStatisticType(h)&&(!r||"avg"===h)){var C="arithmetic"===v.rotationType;m.push({attributeCache:b.createAttributeCache(v,"type"===h),identifier:t.getStatisticId(v,h),statFunctions:t.getStatisticFunctions(h),isAngular:r,isDate:"date"===v.attributeType,isArithmetic:C})}});return m},_applyStatInfosToIndex:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var m=this._cellIndex;if(m)for(var h=1;h<=this._maxGeohashLength;h++){var v=m[h],r;for(r in v)this._applyStatInfosToCell(v[r],
n)}},_applyStatInfosToCell:function(n,m){var h=this._initializeStats(n,m);A.forEach(n.features,function(v){this._calcFeatureStats(v,m,h)},this);this._summarizeStats(n,h,m)},_calcFeatureStats:function(n,m,h){n.attributes&&A.forEach(m,function(v){var r=h[v.identifier],C=v.attributeCache;C=C?n._getDataValue(C.attributeInfo,C,c):null;v.statFunctions.updateCellStat(r,C,v)})},_applyStatInfosToClusters:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var m=this._clusterFieldPrefix;A.forEach(this.clusters,
function(h){var v=this._initializeStats(h,n);A.forEach(this.getCellsInCluster(h),function(r){this._calcCellStats(r,n,v)},this);this._summarizeStats(h,v,n,m);h.attributes[m+"id"]=h.primary},this)},_calcCellStats:function(n,m,h){var v=n.statistics;A.forEach(m,function(r){var C=r.identifier;r.statFunctions.updateClusterStat(h[C],v[C],r)})},_initializeStats:function(n,m){var h=n.statistics={};A.forEach(m,function(v){h[v.identifier]=v.statFunctions.initialize(v)});return h},_summarizeStats:function(n,
m,h,v){var r=n.attributes={};v=v||"";r[v+"count"]=n.count;A.forEach(h,function(C){var w=this._getStatFieldName(C,v);r[w]=C.statFunctions.summarize(m[C.identifier],C)},this)},_getStatFieldName:function(n,m){return(m||"")+n.identifier},_updateItem:function(n,m,h,v){var r=h.y,C=n.centroid,w=n.count;C.x=(w*C.x+m*h.x)/(w+m);C.y=(w*C.y+m*r)/(w+m);n.count+=m;v&&this._updateExtent(n.extent,h)},_updateExtent:function(n,m){var h=m.x;m=m.y;h<n.xmin&&(n.xmin=h);h>n.xmax&&(n.xmax=h);m<n.ymin&&(n.ymin=m);m>n.ymax&&
(n.ymax=m)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(n,m){n=null!=n&&null!=m?m-n:n;if(null!=n){var h="millisecond";1E3<=n&&(n/=1E3,h="second",60<=n&&(n/=60,h="minute"));h={value:Number(n.toFixed(2)),unit:h}}return h}})})},"esri/core/timerUtils":function(){define([],function(){function e(l){var k,g=l.length;for(k=0;k<g;k++)l[k]()}var u={LOW:1,HIGH:2},B,A={};A[u.LOW]=[];A[u.HIGH]=[];var p=function(){clearTimeout(B);B=null;
var l=A[u.HIGH];A[u.HIGH]=[];e(l);l=A[u.LOW];A[u.LOW]=[];e(l)};return{priority:u,callbackQueue:A,setTimeout:function(l,k){l=[k,A[k].push(l)-1];B||(B=setTimeout(p,0));return l},clearTimeout:function(l){l&&A[l[0]].splice(l[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),function(e,u,B,A,p,l,k,g,d){function c(L){var Q=
L.spatialReference;if(!Q)return{x:L.x,y:L.y};var ba=Q.isWebMercator(),fa;4326===Q.wkid?fa={x:L.x,y:L.y}:ba&&(fa={x:L.getLongitude(),y:L.getLatitude()});return fa}function a(L){var Q=L.spatialReference,ba=!(!Q||!Q.isWebMercator()),fa;Q&&4326===Q.wkid?fa=new k(L.toJson()):ba&&(fa=d.webMercatorToGeographic(L,!0));return fa}function b(L,Q){Q.x=l.prototype._normalizeX(L.x,g.prototype._info[4326]);Q.y=L.y;return Q}function f(L){L=F.decimals[L].toString(2);return u.pad(L,F.bitsPerBase32Char,"0")}function t(L,
Q){Q=Q.slice();Q.splice(1,0,0);for(var ba=Q[0],fa=Q[2],Y=0;Y<L.length;Y++){Number(L[Y])?Q[0]=Q[1]:Q[2]=Q[1];var ma=Q[1]=(Q[0]+Q[2])/2;ba=Q[0];fa=Q[2]}return{value:ma,min:ba,max:fa}}function n(L,Q,ba){var fa=[];Q=Q.slice();Q.splice(1,0,0);for(var Y=Q[0],ma=Q[2],ca=0;ca<ba;ca++)L>=Q[1]?(Q[0]=Q[1],Y=1):(Q[2]=Q[1],Y=0),Q[1]=(Q[0]+Q[2])/2,fa.push(Y),Y=Q[0],ma=Q[2];return{value:fa.join(""),min:Y,max:ma}}function m(L){var Q=L*F.bitsPerBase32Char;0===Q%2?L=Q/=2:(L=(Q+1)/2,Q-=L);return{lon:L,lat:Q}}function h(L){var Q=
0;L=L.split("").reverse().join("");for(var ba=0;ba<L.length;ba++)Q+=Number(L[ba])*Math.pow(2,ba);return F.base32[Q]}function v(L,Q){var ba={x:L.xmin,y:L.ymax},fa={x:L.xmax,y:L.ymin},Y={x:L.xmax,y:L.ymax};return{sw:J.pointToGeohash({x:L.xmin,y:L.ymin},Q),nw:J.pointToGeohash(ba,Q),se:J.pointToGeohash(fa,Q),ne:J.pointToGeohash(Y,Q)}}function r(L,Q,ba,fa,Y){var ma=L;do Y[ma]||(Y[ma]=!0,fa.push(ma)),(L=ma===Q)||(ma=D(ma,ba));while(!L)}function C(L,Q,ba,fa){var Y=v(L,Q);L=[];r(Y.sw,Y.nw,"n",L,{});Q=[];
r(Y.se,Y.ne,"n",Q,{});for(Y=0;Y<L.length;Y++)r(L[Y],Q[Y],"e",ba,fa)}function w(L){return A.filter(L,function(Q){return 180===Q.xmax?!0:!1})[0]}function y(L){return A.filter(L,function(Q){return-180===Q.xmin?!0:!1})[0]}function q(L,Q,ba,fa){var Y=J.geographicToWebMercator(L);L={x:Y.x-Q,y:Y.y-Q};Q=J.webMercatorToGeographic({x:Y.x+Q,y:Y.y+Q},!0);L=J.webMercatorToGeographic(L,!0);return new k(null!=ba?ba:L.x,L.y,null!=fa?fa:Q.x,Q.y)}function x(L,Q,ba,fa){L=v(L,Q);var Y,ma;"min"===fa?ma=180:"max"===fa&&
(Y=-180);var ca=Y;fa=ma;var la=J.geohashToCell(L.sw).extent;Q=J.geohashToCell(L.ne).extent;L=null!=ca?ca:la.xmin;la=la.ymin;fa=null!=fa?fa:Q.xmax;Q=Q.ymax;L=q({x:L,y:la},ba,Y,ma);ba=q({x:fa,y:Q},ba,Y,ma);return new k(L.xmin,L.ymin,ba.xmax,ba.ymax)}function E(L,Q,ba){var fa=L,Y=0;do Y++,(L=fa===Q)||(fa=D(fa,ba));while(!L);return Y}function z(L,Q){L=v(L,Q);Q=E(L.nw,L.ne,"e");return{rows:E(L.nw,L.sw,"s"),cols:Q}}function D(L,Q){var ba=L.length%2,fa=L.slice(-1),Y=F.decimals[fa];L=L.slice(0,-1);-1!=F.borders[Q][ba].indexOf(fa)&&
L&&(L=D(L,Q));return L+F.neighbors[Q][ba][Y]}var F={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var L={},Q=0;32>Q;Q++)L["0123456789bcdefghjkmnpqrstuvwxyz"[Q]]=Q;return L}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,
longitudeRange:[-180,180],latitudeRange:[-90,90]};F.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";F.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";F.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";F.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";F.borders.n[0]="prxz";F.borders.s[0]="028b";F.borders.e[0]="bcfguvyz";F.borders.w[0]="0145hjnp";var J={geographicToWebMercator:function(L){L=l.lngLatToXY(L.x,L.y);return{x:L[0],y:L[1]}},webMercatorToGeographic:function(L,Q){L=l.xyToLngLat(L.x,
L.y,Q);return{x:L[0],y:L[1]}},geohashToCell:function(L){var Q;var ba=[];for(Q=0;Q<L.length;Q++)ba.push(f(L[Q]));ba=ba.join("");Q=[];for(var fa=[],Y=0;Y<ba.length;Y++)0===Y%2?Q.push(ba[Y]):fa.push(ba[Y]);Q=Q.join("");fa=fa.join("");Q=[Q,fa];ba=t(Q[0],F.longitudeRange);fa=t(Q[1],F.latitudeRange);Q=ba.value;return{point:{x:Q,y:fa.value},extent:{xmin:ba.min,xmax:ba.max,ymin:fa.min,ymax:fa.max},geohash:L}},pointToCell:function(L,Q){Q=Q||F.maxGeohashLength;if(L=c(L)){L=b(L,L);var ba=m(Q);Q=n(L.x,F.longitudeRange,
ba.lon);var fa=n(L.y,F.latitudeRange,ba.lat);ba=Q.value;var Y=fa.value;Q={xmin:Q.min,xmax:Q.max,ymin:fa.min,ymax:fa.max};fa=[];for(var ma=Math.ceil((ba.length+Y.length)/F.bitsPerBase32Char),ca=0,la=0,ta=0;ta<ma*F.bitsPerBase32Char;ta++){var za=0===ta%2?ba[ca++]:Y[la++];null==za&&(za=0);fa.push(za)}ba=fa.join("");Y=F.bitsPerBase32Char;fa=ba.length/Y;ma=[];for(ca=0;ca<fa;ca++)la=ba.substr(ca*Y,Y),ma.push(h(la));ba=ma.join("");return{point:L,extent:Q,geohash:ba}}},geohashToPoint:function(L){return J.geohashToCell(L).point},
pointToGeohash:function(L,Q){return(L=J.pointToCell(L,Q))&&L.geohash},getCells:function(L){return A.map(L,function(Q){return J.geohashToCell(Q)})},getCellSize:function(L){var Q=F.longitudeRange,ba=F.latitudeRange;Q=Math.abs(Q[1]-Q[0]);ba=Math.abs(ba[1]-ba[0]);L=m(L||1);return{width:Q/Math.pow(2,L.lon),height:ba/Math.pow(2,L.lat)}},getCellSizeInMeters:function(L){L=J.getCellSize(L);var Q=d.metersPerDegree;L.width*=Q;L.height*=Q;return L},getIntersecting:function(L,Q,ba){Q=Q||1;ba=ba||0;var fa=[],Y=
a(L);if(Y){ba&&(Y=J.expandExtent(L,Q,ba));L=Y.normalize();var ma={};A.forEach(L,function(ca){C(ca,Q,fa,ma)})}return fa},countIntersecting:function(L,Q,ba){Q=Q||1;ba=ba||0;var fa=0,Y=a(L);if(Y){ba&&(Y=J.expandExtent(L,Q,ba));L=Y.normalize();if(2===L.length){fa=w(L);Y=y(L);ba=z(fa,Q);var ma=z(Y,Q);L=ba.rows;ba=ba.cols+ma.cols;fa={x:fa.xmin,y:fa.ymax};Y={x:Y.xmax,y:Y.ymax};fa=b(fa,{});Y=b(Y,{});fa=J.pointToGeohash(fa,Q);Q=J.pointToGeohash(Y,Q);fa===Q&&ba--;Q={rows:L,cols:ba}}else Q=z(L[0],Q);fa=Q.cols*
Q.rows}return fa},getChildren:function(L){L=L||"";var Q=[],ba;for(ba in F.decimals)Q.push(L+ba);return Q},getNeighbors:function(L){var Q=D(L,"n"),ba=D(L,"s");return[Q,D(Q,"e"),D(Q,"w"),ba,D(ba,"e"),D(ba,"w"),D(L,"e"),D(L,"w")]},getExtentFromDistance:function(L,Q){Q=Q||1E3;var ba;(L=c(L))&&(ba=q(L,Q));return ba},expandExtent:function(L,Q,ba){Q=Q||1;ba=ba||0;if(L=a(L)){if(ba){L=L.normalize();if(2===L.length){var fa=ba;ba=w(L);L=y(L);ba=x(ba,Q,fa,"min");L=x(L,Q,fa,"max");360<=ba.getWidth()+L.getWidth()?
(Q=-180,L=180):(Q=ba.xmin,L=L.xmax);return new k(Q,ba.ymin,L,ba.ymax)}return x(L[0],Q,ba)}return L}},getNeighborsWithinDistance:function(L,Q,ba){ba=ba||1E3;Q=Q||1;var fa=[];if(L=c(L)){ba=q(L,ba).normalize();var Y={};A.forEach(ba,function(ma){C(ma,Q,fa,Y)})}return fa}};return J})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(e,u){function B(l){return"number"===typeof l&&!isNaN(l)&&Infinity!==l&&-Infinity!==l}var A={sum:{initialize:function(){return{count:0,
sum:null}},updateCellStat:function(l,k){B(k)&&(l.count++,l.sum+=k)},updateClusterStat:function(l,k){k.count&&(l.count+=k.count,l.sum+=k.sum)},summarize:function(l){return l.sum}},avg:{initialize:function(l){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(l,k,g){B(k)&&(l.count++,g.isAngular?(g.isArithmetic||(k=-1*k+90),l.sum_cosine+=Math.cos(k*Math.PI/180),l.sum_sine+=Math.sin(k*Math.PI/180)):l.sum+=k)},updateClusterStat:function(l,k,g){k.count&&(l.count+=k.count,
g.isAngular?(l.sum_cosine+=k.sum_cosine,l.sum_sine+=k.sum_sine):l.sum+=k.sum)},summarize:function(l,k){if(0<l.count){var g=l.count;k.isAngular?(g=180*Math.atan2(l.sum_sine/g,l.sum_cosine/g)/Math.PI,k.isArithmetic||(g=-1*(g-90)),l.avg=0>g?g+360:g):(l.avg=l.sum/g,k.isDate&&(l.avg=Math.ceil(l.avg)))}return l.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(l,k){if(null==k||""===k||"string"===typeof k&&""===e.trim(k))k=null;l=l.uvInfos;null==l[k]?l[k]={count:1,value:k}:l[k].count++},
updateClusterStat:function(l,k){l=l.uvInfos;k=k.uvInfos;for(var g in k){var d=k[g];null==l[g]?l[g]={count:d.count,value:d.value}:l[g].count+=d.count}},summarize:function(l){l=l.uvInfos;var k,g=-Infinity;for(k in l){var d=l[k];if(d.count>g){g=d.count;var c=d.value}else d.count===g&&(c=null)}return c}}},p={isSupportedStatisticType:function(l){return A.hasOwnProperty(l)},getStatisticFunctions:function(l){return A[l]},getStatisticId:function(l,k){var g=u.getAttributeIdSource(l);l=g&&u.getAttributeId(g)||
l.field;return k+"_"+l},getClusterField:function(l,k){return"cluster_"+p.getStatisticId(l,k)},getStatisticHash:function(l,k){k=[p.getStatisticId(l,k)];l.attributeType&&k.push(l.attributeType.toLowerCase());l.rotationType&&k.push(l.rotationType.toLowerCase());return k.join("_")}};return p})},"presentation/common/util/errorPopup":function(){define(["./html","dojo/dom-construct"],function(e,u){return{showNonRecoverableError:function(B){var A=u.create("div",{className:"centeredContainer"}),p=u.create("div",
{id:"errorPopup",className:"centeredContent"},A);u.create("span",{className:"errorIcon"},p);u.create("span",{className:"errorMessage",innerHTML:e.normalizeNewlines(B)},p);u.place(A,document.body,"first")}}})},"presentation/common/util/html":function(){define(["dojox/html/entities"],function(e){return{normalizeNewlines:function(u){return u.replace(/\r\n|\n|\r|\f/g,"\x3cbr\x3e")},sanitize:function(u){return e.encode(u)}}})},"presentation/common/util/knownErrorMessage":function(){define("../error/MissingWebMapIdError ../error/NotAPresentationError ../error/UnlicensedUserError ../error/UnsupportedInternetExplorerError dojo/_base/lang dojo/i18n!../nls/common".split(" "),
function(e,u,B,A,p,l){return{getErrorMessage:function(k){return k instanceof u?l.missingPresentation:k instanceof e?l.missingWebMapId:k instanceof A?l.unsupportedIE:k instanceof B?p.replace(l.unlicensedUser,{username:k.details.username}):"httpCode"in k?"IdentityManagerBase.1"===k.code&&403===k.httpCode?l.cannotViewPrivateWebMap:l.unavailablePresentation:p.replace(l.unknownError,{message:k.message})}}})},"presentation/common/error/NotAPresentationError":function(){define(["dojo/errors/create"],function(e){return e("NotAPresentationError")})},
"presentation/common/util/page":function(){define(["dojo/_base/lang","dojo/i18n!../nls/common"],function(e,u){return{setTitle:function(B){document.title=e.replace(u.pageTitle,{title:B})}}})},"presentation/common/util/startup":function(){define(["./dom","dojo/dom-class","dojo/dom-construct"],function(e,u,B){return{addOverlay:function(){if(!this._overlay){var A=document.createDocumentFragment(),p=B.create("div",{id:"startup",className:"startup"},A),l=B.create("div",{className:"animation"});e.placeInCenteredContainer(l,
p);B.place(A,document.body);this._overlay=p}},removeOverlay:function(){if(this._overlay){u.add(this._overlay,"invisible");var A=this,p=setTimeout(function(){clearTimeout(p);A._removeOverlayImmediately()},200)}},_removeOverlayImmediately:function(){this._overlay&&(B.destroy(this._overlay),this._overlay=null)}}})},"presentation/common/util/dom":function(){define(["dojo/dom-class","dojo/dom-construct","dojo/dom-geometry"],function(e,u,B){return{placeInCenteredContainer:function(A,p){p=p||u.create("div");
var l=u.create("div"),k=u.create("div");e.add(p,"centerContainer table");e.add(l,"tableCell");e.add(k,"centerBlock");u.place(A,k);u.place(k,l);u.place(l,p);return p},showAndIncludeInLayout:function(A){e.remove(A,"gone")},hideAndExcludeFromLayout:function(A){e.add(A,"gone")},isHidden:function(A){return e.contains(A,"gone")},isWithinBounds:function(A,p){A=B.position(A,!0);p=B.position(p,!0);return A.y>=p.y&&A.y+A.h<=p.y+p.h}}})},"presentation/viewer/app":function(){define("../common/error/NotAPresentationError ../common/util/mapControls ../common/util/mapCreator ../common/util/MapSlide ../common/widget/Title ../config ./util/deckParser ./util/slideControl dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/text!./template/app.html".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b){return{startUp:function(){c.add(document.body,"viewer");a.place(b,document.body);return B.createWebMap("map",{item:l.item,itemData:l.itemData}).then(d.hitch(this,function(f){function t(y){r.applySlide(y);C.setTitle(y.title)}var n=l.itemData.presentation;if(!n||!n.slides)throw new e;var m=f.map,h=k.parse(n),v=u.addHomeButton(m);u.addLocateButton(m);n.showLegend&&u.addLegend(f,"open"===l.legend);var r=new A({map:m,useSlideTimeExtent:n.useTimeExtentOfSlide,homeButton:v}),
C=new p("title"),w=g.createControl("controls",h);f=l.slide-1;r.hideAllLayers();h.goTo(f);(function(){w.on("listShow",function(){m.disableKeyboardNavigation()});w.on("listHide",function(){m.enableKeyboardNavigation()});h.on("slideChanged",function(){t(h.current())})})();t(h.current());c.remove("app","invisible")}))}}})},"presentation/common/util/mapControls":function(){define("dojo/_base/array dojo/aspect dojo/dom dojo/dom-class dojo/dom-construct dojo/on dojo/query esri/arcgis/utils esri/dijit/HomeButton esri/dijit/Legend esri/dijit/LocateButton dojo/i18n!../nls/common".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b){return{addHomeButton:function(f){var t=k("#"+f.id+"_zoom_slider div.esriSimpleSliderIncrementButton")[0];t=p.create("div",{},t,"after");f=new d({map:f,theme:"homeButton"},t);f.startup();return f},addLocateButton:function(f){var t=B.byId(f.id+"_zoom_slider");t=p.create("div",{},t,"last");f=new a({map:f,theme:"locateButton"},t);f.startup();return f},addLegend:function(f,t){var n=f.map,m=p.create("div",{className:"legendContainer"},n.container),h=p.create("div",{className:"legendViewport gone"},
m);m=p.create("div",{className:"legendOpenButton",title:b.legend},h);var v=p.create("div",{className:"legendContent"},h),r=p.create("div",{className:"legendHeaderContainer"},v);p.create("div",{innerHTML:b.legend,className:"legendContentTitle esriFloatLeading"},r);r=p.create("div",{className:"legendCloseButton esriFloatTrailing"},r);l(r,"click",function(){A.remove(h,"legendViewport--expanded")});l(m,"click",function(){A.add(h,"legendViewport--expanded")});v=p.create("div",{},v);var C=new c({layerInfos:g.getLegendLayers(f),
map:n},v);u.after(C,"_createLegend",function(){function w(y){y=Array.prototype.slice.call(y);return e.filter(y,function(q){return"none"!=q.style.display})}return function(){var y=w(C.domNode.children);A.toggle(h,"gone",1===y.length&&y[0].id===C.id+"_msg")}}());C.startup();t&&l.emit(m,"click",{});return C}}})},"esri/dijit/HomeButton":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel dijit/_WidgetBase dijit/a11yclick dijit/_TemplatedMixin dojo/on dojo/Deferred dojo/text!./templates/HomeButton.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){return u("esri.dijit.HomeButton",[l,g,e],{templateString:a,options:{theme:"HomeButton",map:null,extent:null,fit:!1,visible:!0},constructor:function(n,m){n=B.mixin({},this.options,n);this.domNode=m;this._i18n=b;this.set("map",n.map);this.set("theme",n.theme);this.set("visible",n.visible);this.set("extent",n.extent);this.set("fit",n.fit);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this._css={container:"homeContainer",home:"home",
loading:"loading"}},postCreate:function(){this.inherited(arguments);this.own(d(this._homeNode,k,B.hitch(this,this.home)))},startup:function(){this.inherited(arguments);this.map||(this.destroy(),console.log("HomeButton::map required"));if(this.map.loaded)this._init();else d.once(this.map,"load",B.hitch(this,function(){this._init()}))},destroy:function(){this.inherited(arguments)},home:function(){var n=new c,m=this.get("extent");this._showLoading();var h={extent:m};m?this.map.extent!==m?this.map.setExtent(m,
this.get("fit")).then(B.hitch(this,function(){this._hideLoading();this.emit("home",h);n.resolve(h)}),B.hitch(this,function(v){v||(v=Error("HomeButton::Error setting map extent"));h.error=v;this.emit("home",h);n.reject(v)})):(this._hideLoading(),this.emit("home",h),n.resolve(h)):(this._hideLoading(),m=Error("HomeButton::home extent is undefined"),h.error=m,this.emit("home",h),n.reject(m));return n.promise},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},_init:function(){this._visible();
this.get("extent")||this.set("extent",this.map.extent);this.set("loaded",!0);this.emit("load",{})},_showLoading:function(){f.add(this._homeNode,this._css.loading)},_hideLoading:function(){f.remove(this._homeNode,this._css.loading)},_updateThemeWatch:function(n,m,h){f.remove(this.domNode,m);f.add(this.domNode,h)},_visible:function(){this.get("visible")?t.set(this.domNode,"display","block"):t.set(this.domNode,"display","none")}})})},"esri/dijit/Legend":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/Color dojo/debounce dojo/has dojo/sniff dojo/Deferred dojo/DeferredList dojo/json dojo/dom dojo/dom-construct dojo/dom-style dojo/dom-class dijit/_Widget dojox/gfx dojox/gfx/matrix dojox/html/entities ../kernel ../config ../request ../lang ../numberUtils ../renderers/utils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/ClassBreaksRenderer ../renderers/ScaleDependentRenderer ../renderers/DotDensityRenderer ../renderers/TemporalRenderer ../renderers/VectorFieldRenderer ../renderers/HeatmapRenderer ../symbols/PictureFillSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/utils ../symbols/jsonUtils ../renderers/jsonUtils ./_EventedWidget dojo/i18n!../nls/jsapi".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q,x,E,z,D,F,J,L,Q,ba,fa,Y,ma,ca,la,ta,za,P,ea,ra,M,Z){var ka=D.getClassValuesForRelationship(),qa={defaultShape:{type:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15"},stroke:{width:1,color:"#555555"}},ua={HH:315,HL:45,LL:135,LH:225},Aa=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,ya=u([M,v],{declaredClass:"esri.dijit.Legend",widgetsInTemplate:!1,layers:null,alignRight:!1,hoverLabelShowing:!1,dotDensitySwatchSize:26,dotCoverage:75,gradientHeight:30,transparencyRampColor:new k([64,
64,64]),defaultText:"Aa",sizeRampLightColor:new k([255,255,255]),sizeRampDarkColor:new k([128,128,128]),gradientWidth:34,colorRampBorder:"1px solid",_specialChars:{lt:"\x3c",gt:"\x3e"},_ieTimer:100,_isRightToLeft:!1,_align:null,_legendAlign:null,_preserveCacheOnDestroy:!1,_layerConnects:null,_mapConnects:null,constructor:function(G,I){B.mixin(this,Z.widgets.legend);this._i18n=Z.widgets.legend;G=G||{};G.map?I?(this.map=G.map,this.layerInfos=G.layerInfos,this._respectCurrentMapScale=!1===G.respectCurrentMapScale?
!1:!0,this._respectVisibility=!1===G.respectVisibility?!1:!0,this._preserveCacheOnDestroy=G.preserveCacheOnDestroy?!0:!1,this.arrangement=G.arrangement===ya.ALIGN_RIGHT?ya.ALIGN_RIGHT:ya.ALIGN_LEFT,this.arrangement===ya.ALIGN_RIGHT&&(this.alignRight=!0),this.autoUpdate=!1===G.autoUpdate?!1:!0,this._surfaceItems=[],this.hideLayersInLegend={},this.refresh=g(this.refresh,0)):console.error("esri.dijit.Legend: must specify a container for the legend"):console.error("esri.dijit.Legend: unable to find the 'map' property in parameters")},
postMixInProperties:function(){this.inherited(arguments);var G=["ar","he"],I;for(I=0;I<G.length;I+=1){var R=G[I];e.locale&&-1!==e.locale.indexOf(R)&&(-1!==e.locale.indexOf("-")?-1!==e.locale.indexOf(R+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0)}this._isRightToLeft?(this._align=this.alignRight?"left":"right",this._legendAlign=this.alignRight?"esriLegendLeft":"esriLegendRight"):(this._align=this.alignRight?"right":"left",this._legendAlign=this.alignRight?"esriLegendRight":"esriLegendLeft")},
startup:function(){this.inherited(arguments);this._initialize();9>d("ie")&&(this._repaintItems=B.hitch(this,this._repaintItems),setTimeout(this._repaintItems,this._ieTimer))},destroy:function(){this._deactivate();this._removeCachedLegendResponses();this._removeHoverHandlers();this.inherited(arguments)},_removeCachedLegendResponses:function(){this._preserveCacheOnDestroy||A.forEach(this.layers,function(G){delete G.legendResponse})},refresh:function(G){if(this.domNode){G?(this.layerInfos=G,this.layers=
[],A.forEach(this.layerInfos,function(I){this._isSupportedLayerType(I.layer)&&(I.title&&(I.layer._titleForLegend=I.title),I.layer._hideDefaultSymbol=!1===I.defaultSymbol?!0:!1,I.hideLayers?(this.hideLayersInLegend[I.layer.id]=I.hideLayers,this._addSubLayersToHide(I)):this.hideLayersInLegend[I.layer.id]=[],I.hoverLabel&&(I.layer._hoverLabel=I.hoverLabel),I.hoverLabels&&(I.layer._hoverLabels=I.hoverLabels),this.layers.push(I.layer))},this)):this.useAllMapLayers&&(this.layers=this.layerInfos=null);for(G=
this.domNode.children.length-1;0<=G;G--)n.destroy(this.domNode.children[G]);this._removeHoverHandlers();this.startup()}},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",_initialize:function(){this.layerInfos&&(this.layers=[],A.forEach(this.layerInfos,function(R){this._isSupportedLayerType(R.layer)&&(R.title&&(R.layer._titleForLegend=R.title),R.layer._hideDefaultSymbol=!1===R.defaultSymbol?!0:!1,R.hideLayers?(this.hideLayersInLegend[R.layer.id]=R.hideLayers,this._addSubLayersToHide(R)):
this.hideLayersInLegend[R.layer.id]=[],R.hoverLabel&&(R.layer._hoverLabel=R.hoverLabel),R.hoverLabels&&(R.layer._hoverLabels=R.hoverLabels),this.layers.push(R.layer))},this));this.useAllMapLayers=!1;if(!this.layers){this.useAllMapLayers=!0;this.layers=[];var G=[],I=[];A.forEach(this.map.layerIds,function(R){R=this.map.getLayer(R);this._isSupportedLayerType(R)&&(R.arcgisProps&&R.arcgisProps.title&&(R._titleForLegend=R.arcgisProps.title),this.layers.push(R));if("esri.layers.KMLLayer"===R.declaredClass){var X=
R.getLayers();A.forEach(X,function(W){G.push(W.id)},this)}"esri.layers.GeoRSSLayer"===R.declaredClass&&(X=R.getFeatureLayers(),A.forEach(X,function(W){I.push(W.id)},this))},this);A.forEach(this.map.graphicsLayerIds,function(R){var X=this.map.getLayer(R);-1===A.indexOf(G,R)&&-1===A.indexOf(I,R)&&this._isSupportedLayerType(X)&&this._isLayerDrawingEnabled(X)&&(X.arcgisProps&&X.arcgisProps.title&&(X._titleForLegend=X.arcgisProps.title),this.layers.push(X))},this)}this._createLegend()},_isLayerDrawingEnabled:function(G){return G&&
(G._params&&G._params.drawMode||G.isFeatureReductionActive&&G.isFeatureReductionActive())},_activate:function(){this._deactivate();if(this.autoUpdate){this._mapConnects=[];this._layerConnects={};var G=this._mapConnects;this._respectCurrentMapScale&&G.push(p.connect(this.map,"onZoomEnd",this,"_refreshLayers"));this.useAllMapLayers&&(G.push(p.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers")),G.push(p.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers")),G.push(p.connect(this.map,"onLayersReordered",
this,"_updateAllMapLayers")));A.forEach(this.layers,function(I){var R=[p.connect(I,"onFeatureReductionRendererChange",this,"_refreshLayers"),p.connect(I,"onFeatureReductionChange",this,"_refreshLayers"),p.connect(I,"onVisibilityChange",this,"_refreshLayers"),p.connect(I,"onOpacityChange",this,"_refreshLayers"),p.connect(I,"onScaleRangeChange",this,"_refreshLayers")];"esri.layers.ArcGISDynamicMapServiceLayer"===I.declaredClass&&I.supportsDynamicLayers&&R.push(p.connect(I,"_onDynamicLayersChange",B.hitch(this,
"_updateDynamicLayers",I)));if("esri.layers.ArcGISImageServiceLayer"===I.declaredClass||"esri.layers.RasterXLayer"===I.declaredClass)R.push(p.connect(I,"onRenderingChange",B.partial(this._updateImageServiceLayers,this,I))),R.push(p.connect(I,"onRendererChange",B.partial(this._updateImageServiceLayers,this,I)));("esri.layers.ArcGISImageServiceVectorLayer"===I.declaredClass||I.setWebGLEnabled)&&R.push(p.connect(I,"onRendererChange",B.hitch(this,"_refreshLayers")));this._layerConnects[I.id]=R},this)}},
_deactivate:function(){A.forEach(this._mapConnects,function(G){p.disconnect(G)});A.forEach(this.layers,function(G){var I=this._layerConnects;I&&A.forEach(I[G.id],function(R){p.disconnect(R)})},this);this._mapConnects=this._layerConnects=null},_updateDynamicLayers:function(G){delete G.legendResponse;this._refreshLayers()},_updateImageServiceLayers:function(G,I){delete I.legendResponse;G._refreshLayers()},_refreshLayers:function(){this.refresh()},_updateAllMapLayers:function(){this.layers=[];A.forEach(this.map.layerIds,
function(G){G=this.map.getLayer(G);this._isSupportedLayerType(G)&&this.layers.push(G)},this);A.forEach(this.map.graphicsLayerIds,function(G){G=this.map.getLayer(G);this._isSupportedLayerType(G)&&this._isLayerDrawingEnabled(G)&&this.layers.push(G)},this);this.refresh()},_createLegend:function(){var G=!1,I=!1;m.set(this.domNode,"position","relative");n.create("div",{id:this.id+"_msg",className:"esriLegendMsg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var R=[];A.forEach(this.layers,function(W){if("esri.layers.KMLLayer"===
W.declaredClass||"esri.layers.GeoRSSLayer"===W.declaredClass)if(W.loaded){if("esri.layers.KMLLayer"===W.declaredClass)var sa=W.getLayers();else"esri.layers.GeoRSSLayer"===W.declaredClass&&(sa=W.getFeatureLayers(),this.hideLayersInLegend[W.id]&&(sa=A.filter(sa,function(S){return-1===A.indexOf(this.hideLayersInLegend[W.id],S.id)},this)));A.forEach(sa,function(S){"esri.layers.FeatureLayer"===S.declaredClass&&W._titleForLegend&&(S._titleForLegend=W._titleForLegend+" - ","esriGeometryPoint"===S.geometryType?
S._titleForLegend+=this.NLS_points:"esriGeometryPolyline"===S.geometryType?S._titleForLegend+=this.NLS_lines:"esriGeometryPolygon"===S.geometryType&&(S._titleForLegend+=this.NLS_areas),R.push(S))},this)}else p.connect(W,"onLoad",B.hitch(this,function(){this.refresh(this.layerInfos)}));else if("esri.layers.WMSLayer"===W.declaredClass)if(!W.loaded)p.connect(W,"onLoad",B.hitch(this,function(){this.refresh(this.layerInfos)}));else{if((!this._respectVisibility||this._respectVisibility&&W.visible)&&0<W.layerInfos.length&&
A.some(W.layerInfos,function(S){return S.legendURL})){var T=!1;A.forEach(W.layerInfos,function(S){if(S.legendURL&&-1<A.indexOf(W.visibleLayers,S.name)){T||(n.create("div",{innerHTML:"\x3cspan class\x3d'esriLegendServiceLabel'\x3e"+(W._titleForLegend||W.name||W.id)+"\x3c/span\x3e"},this.domNode),T=!0);var ia;S=S.legendURL;if(W.customParameters||W.customLayerParameters){var na=B.clone(W.customParameters||{});B.mixin(na,W.customLayerParameters||{});for(ia in na)S+=(-1===S.indexOf("?")?"?":"\x26")+ia+
"\x3d"+na[ia]}n.create("div",{innerHTML:"\x3cimg src\x3d'"+S+"'/\x3e"},this.domNode);G=!0}},this)}}else"esri.layers.WFSLayer"!==W.declaredClass||W.renderer?R.push(W):(sa=n.create("div",{id:this.id+"_"+W.id,"class":"esriLegendService"}),n.create("span",{innerHTML:this._getServiceTitle(W),"class":"esriLegendServiceLabel"},n.create("td",{align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%"},sa))))),n.place(sa,this.id,"first"),sa=n.create("table",{cellpadding:0,cellspacing:0,
width:"95%","class":"esriLegendLayer"},sa),sa=n.create("tbody",{},sa),"esriGeometryComplex"===W.geometryType?(this._buildRow_Renderer(W,W._pointSymbol,null,this.NLS_points,null,sa),this._buildRow_Renderer(W,W._lineSymbol,null,this.NLS_lines,null,sa),this._buildRow_Renderer(W,W._polygonSymbol,null,this.NLS_areas,null,sa)):"esriGeometryPoint"===W.geometryType?this._buildRow_Renderer(W,W._pointSymbol,null,"",null,sa):"esriGeometryPolyline"===W.geometryType?this._buildRow_Renderer(W,W._lineSymbol,null,
"",null,sa):"esriGeometryPolygon"===W.geometryType&&this._buildRow_Renderer(W,W._polygonSymbol,null,"",null,sa),I=!0)},this);var X=[];A.forEach(R,function(W){if(!W.loaded)var sa=p.connect(W,"onLoad",this,function(S){p.disconnect(sa);sa=null;this.refresh()});else if((!this._respectVisibility||this._respectVisibility&&W.visible)&&(W.layerInfos||W.renderer||"esri.layers.ArcGISImageServiceLayer"===W.declaredClass||"esri.layers.RasterXLayer"===W.declaredClass)){var T=n.create("div",{id:this.id+"_"+W.id,
style:{display:"none"},"class":"esriLegendService"});n.create("span",{innerHTML:this._getServiceTitle(W),"class":"esriLegendServiceLabel"},n.create("td",{align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%"},T)))));n.place(T,this.id,"first");W.legendResponse||W.renderer&&"esri.renderer.StretchRenderer"!==W.renderer.declaredClass||W.renderer&&"esri.renderer.StretchRenderer"===W.renderer.declaredClass&&1===W.bandCount?this._createLegendForLayer(W):this.isHostedTileService(W)?
this._getLayerInfos(W).then(B.hitch(this,function(S){this._createLegendForLayer(S)}),B.hitch(this,function(S){X.push(this._legendRequest(S))})):"esri.layers.RasterXLayer"===W.declaredClass&&-1<W.capabilities.toLowerCase().indexOf("tilesonly")?this._createLegendForTileOnlyService(W):X.push(this._legendRequest(W))}},this);0!==X.length||G||I?(new b(X)).addCallback(B.hitch(this,function(W){G||I?t.byId(this.id+"_msg").innerHTML="":t.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate()})):
(t.byId(this.id+"_msg").innerHTML=this.NLS_noLegend,this._activate())},_createLegendForTileOnlyService:function(G){function I(na,va){var Ba=["red","green","blue"],Na=[[255,0,0],[0,255,0],[0,0,255]];(va&&va.length>=sa?R(va):R()).forEach(function(Va,Da){var K=new la(la.STYLE_SQUARE,20,new ta(ta.STYLE_SOLID,new k([0,0,0]),1),new k(Na[Da]));na._buildRow_Renderer(G,K,null,Ba[Da]+": "+Va,null,W)},na)}function R(na){var va=(G.bandIds&&G.bandIds.length?G.bandIds:[0,1,2]).map(function(Ba){return na&&na[Ba]&&
na[Ba].BandName||"Band_"+(Ba+1)});3>va.length?va.push(va[1]):3<va.length&&va.splice(3);return va}var X=n.create("div",{id:this.id+"_"+G.id+"_clientLegend","class":"esriLegendServiceLabel"},t.byId(this.id+"_"+G.id));n.create("td",{align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%","class":"esriLegendLayerLabel"},X))));X=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},X);var W=n.create("tbody",{},X),sa=G.bandCount;if(1<sa&&(!G.bandIds||
0===G.bandIds.length||1<G.bandIds.length))G.getKeyProperties().then(B.hitch(this,function(na){I(this,na.BandProperties)}),B.hitch(this,function(na){I(this)}));else{X={colorRamp:{type:"algorithmic",fromColor:[0,0,0],toColor:[255,255,255]}};var T=G.renderer;if(T&&T.statistics&&T.statistics.length){var S=null!=T.statistics[0].min?T.statistics[0].min:T.statistics[0][0];var ia=null!=T.statistics[0].max?T.statistics[0].max:T.statistics[0][1]}else S=G.serviceInfo.minValues.length?G.serviceInfo.minValues[0]:
0,ia=G.serviceInfo.maxValues.length?G.serviceInfo.maxValues[0]:255;this._createStretchLegend(W,T||X,S,ia)}m.set(t.byId(this.id+"_"+G.id),"display","block");m.set(t.byId(this.id+"_msg"),"display","none")},_createLegendForLayer:function(G){if(G.legendResponse||G.renderer||this.isHostedTileService(G)){var I=!1;if(G.legendResponse||this.isHostedTileService(G)){var R=G.dynamicLayerInfos||G.layerInfos;if(R&&R.length)A.forEach(R,function(X,W){this.hideLayersInLegend[G.id]&&-1!==A.indexOf(this.hideLayersInLegend[G.id],
X.id)||(X=this._buildLegendItems(G,X,W),I=I||X)},this);else if("esri.layers.ArcGISImageServiceLayer"===G.declaredClass||"esri.layers.RasterXLayer"===G.declaredClass)I=this._buildLegendItems(G,{id:0,name:null,title:G.name,subLayerIds:null,parentLayerId:-1},0)}else G.renderer&&(R=G.url?G.url.substring(G.url.lastIndexOf("/")+1,G.url.length):"fc_"+G.id,I=this._buildLegendItems(G,{id:R,name:null,subLayerIds:null,parentLayerId:-1},0));I&&(m.set(t.byId(this.id+"_"+G.id),"display","block"),m.set(t.byId(this.id+
"_msg"),"display","none"))}},_legendRequest:function(G){if(G.loaded)return 10.01<=G.version?this._legendRequestServer(G):this._legendRequestTools(G);p.connect(G,"onLoad",B.hitch(this,"_legendRequest"))},_legendRequestServer:function(G){var I=G.url,R=I.indexOf("?");I=-1<R?I.substring(0,R)+"/legend"+I.substring(R):I+"/legend";(R=G._getToken())&&(I+="?token\x3d"+R);var X=B.hitch(this,"_processLegendResponse"),W={f:"json"};G._params.dynamicLayers&&(W.dynamicLayers=f.stringify(this._createDynamicLayers(G)),
"[{}]"===W.dynamicLayers&&(W.dynamicLayers="[]"));G._params.bandIds&&(W.bandIds=G._params.bandIds);G._params.renderingRule?W.renderingRule=G._params.renderingRule:G.rasterFunctionInfos&&0<G.rasterFunctionInfos.length&&A.forEach(G.rasterFunctionInfos,function(sa){sa&&sa.name&&"none"===sa.name.toLowerCase()&&(W.renderingRule=f.stringify({rasterFunction:sa.name}))});(R=G._params.mosaicRule&&JSON.parse(G._params.mosaicRule))&&R.multidimensionalDefinition&&R.multidimensionalDefinition.length&&(W.variable=
R.multidimensionalDefinition[0].variableName);return x({url:I,content:W,callbackParamName:"callback",load:function(sa,T){X(G,sa,T)},error:q.defaults.io.errorHandler})},_legendRequestTools:function(G){var I=G.url.toLowerCase().indexOf("/rest/");I=G.url.substring(0,I)+G.url.substring(I+5,G.url.length);I=this._legendUrl+"?soapUrl\x3d"+window.escape(I);if(!d("ie")||8<d("ie"))I+="\x26returnbytes\x3dtrue";var R=B.hitch(this,"_processLegendResponse");return x({url:I,content:{f:"json"},callbackParamName:"callback",
load:function(X,W){R(G,X,W)},error:q.defaults.io.errorHandler})},_processLegendResponse:function(G,I){I&&I.layers?(G.legendResponse=I,t.byId(this.id+"_"+G.id)&&n.empty(t.byId(this.id+"_"+G.id)),n.create("span",{innerHTML:this._getServiceTitle(G),"class":"esriLegendServiceLabel"},n.create("td",{align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%"},t.byId(this.id+"_"+G.id)))))),this._createLegendForLayer(G)):console.log("Legend could not get generated for "+G.url+": "+
l.toJson(I))},_buildLegendItems:function(G,I,R){var X=!1,W=t.byId(this.id+"_"+G.id),sa=I.parentLayerId;if(I.subLayerIds)G=n.create("div",{id:this.id+"_"+G.id+"_"+I.id+"_group",style:{display:"none"},"class":-1==sa?0<R?"esriLegendGroupLayer":"":this._legendAlign},-1==sa?W:t.byId(this.id+"_"+G.id+"_"+sa+"_group")),n.create("td",{innerHTML:w.encode(I.name),align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%","class":"esriLegendLayerLabel"},G))));else{if(this._respectVisibility&&
G.visibleLayers)if(R=G.dynamicLayerInfos||G.layerInfos)if(G._params&&G._params.layers){if(-1===A.indexOf(G.visibleLayers,I.id))return X}else{if(R=this._getReallyVisibleLayers(R,G.visibleLayers),-1===A.indexOf(R,I.id))return X}else if(-1===A.indexOf(G.visibleLayers,I.id))return X;W=n.create("div",{id:this.id+"_"+G.id+"_"+I.id,style:{display:"none"},"class":-1<sa?this._legendAlign:""},-1==sa?W:t.byId(this.id+"_"+G.id+"_"+sa+"_group"));n.create("td",{innerHTML:w.encode(I.name)||"",align:this._align},
n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%","class":"esriLegendLayerLabel"},W))));R=G.dynamicLayerInfos||G.layerInfos;sa=!1;R&&R.length&&(sa=A.some(R,function(T){return!!T.drawingInfo}));if(G.legendResponse)X=X||this._buildLegendItems_Tools(G,I,W);else if(G.renderer||sa)X=X||this._buildLegendItems_Renderer(G,I,W)}return X},_getReallyVisibleLayers:function(G,I){if(!G||!I||!I.length)return[];var R=[],X=[],W;for(W=0;W<G.length;W++)if(G[W].subLayerIds){if(-1===A.indexOf(I,G[W].id)||
-1<A.indexOf(X,G[W].id))X=X.concat(G[W].subLayerIds)}else-1<A.indexOf(I,G[W].id)&&-1===A.indexOf(X,G[W].id)&&R.push(G[W].id);return R},_buildLegendItems_Tools:function(G,I,R){var X=I.parentLayerId,W=this.map.getScale(),sa=!1,T=function(Da,K){var V,ha;for(V=0;V<Da.length;V++)if(K.dynamicLayerInfos)for(ha=0;ha<K.dynamicLayerInfos[ha].length;ha++){if(K.dynamicLayerInfos[ha].mapLayerId==Da[V].layerId)return Da[V]}else if(K.id==Da[V].layerId)return Da[V];return{}};if(!this._respectCurrentMapScale||this._respectCurrentMapScale&&
this._isLayerInScale(G,I,W)){var S=!0;if(this._respectCurrentMapScale&&("esri.layers.ArcGISDynamicMapServiceLayer"===G.declaredClass||"esri.layers.ArcGISMapServiceLayer"===G.declaredClass)){var ia=this._getEffectiveScale(G,I);if(ia.minScale&&ia.minScale<W||ia.maxScale&&ia.maxScale>W)S=!1}if(S){W=T(G.legendResponse.layers,I);var na=W.legendType,va=W.layerType,Ba=W.legend;if(Ba){"esri.layers.ArcGISImageServiceLayer"===G.declaredClass&&"esri.layers.RasterXLayer"===G.declaredClass||this._sanitizeLegendResponse(G,
W,I);R=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R);var Na=n.create("tbody",{},R);(G._hoverLabel||G._hoverLabels)&&this._createHoverAction(R,G,I);var Va=[];A.forEach(Ba,function(Da){if(!(10.1<=G.version&&!Da.values&&1<Ba.length)||!G._hideDefaultSymbol&&"\x3call other values\x3e"!==Da.label&&(Da.label||"esri.layers.ArcGISImageServiceLayer"===G.declaredClass&&10.3<=G.version||"Raster Layer"===va)){var K=Da.label;if(Da.url&&0===Da.url.indexOf("http")||Da.imageData&&
0<Da.imageData.length)sa=!0,K&&-1!==A.indexOf(Va,K)||(Va.push(K),this._buildRow_Tools(Da,Na,G,I.id,na))}},this)}}}sa&&(m.set(t.byId(this.id+"_"+G.id+"_"+I.id),"display","block"),-1<X&&(m.set(t.byId(this.id+"_"+G.id+"_"+X+"_group"),"display","block"),this._findParentGroup(G.id,G,X)));return sa},_getLayerInfos:function(G){var I=new a,R=G.dynamicLayerInfos||G.layerInfos;if(R&&R.length)if(A.some(R,function(sa){return!!sa.drawingInfo}))I.resolve(G);else{var X=G.url,W=X.indexOf("?");X=-1===W?X+"/layers":
X.substring(0,W)+"/layers"+X.substring(W,X.length);x({url:X,content:{f:"json"},callbackParamName:"callback",load:function(sa,T){sa.layers?(A.forEach(R,function(S){var ia=A.filter(sa.layers,function(na){return S.source?na.id===S.source.mapLayerId:na.id===S.id});ia&&ia[0]&&ia[0].drawingInfo&&(S.drawingInfo=ia[0].drawingInfo,S.fields=ia[0].fields)}),I.resolve(G)):I.reject(G)},error:function(sa){I.reject(G)}})}return I},_sanitizeLegendResponse:function(G,I,R){var X=I.legend;if(10.1<=G.version&&1<X.length&&
!I._sanitized){G=B.getObject("layerDefinition.drawingInfo.renderer",!1,R);var W,sa;G||(G=B.getObject("drawingInfo.renderer",!1,R));A.some(X,function(T){if(T.values)return!0})&&A.some(X,function(T,S){T.values||(sa=S,W=T);return!!W});G?"uniqueValue"===G.type?W&&(X.splice(sa,1),X.push(W)):"classBreaks"===G.type&&(W&&X.splice(sa,1),X.reverse(),W&&X.push(W)):W&&(X.splice(sa,1),X.push(W));I._sanitized=!0}},_buildRow_Tools:function(G,I,R,X,W){var sa=n.create("tr",{},I);if(this.alignRight){I=n.create("td",
{align:this._isRightToLeft?"left":"right"},sa);var T=n.create("td",{align:this._isRightToLeft?"left":"right",width:35},sa)}else T=n.create("td",{width:35,align:"center"},sa),I=n.create("td",{},sa);sa=G.url;(!d("ie")||9<=d("ie")||9>d("ie")&&("esri.layers.ArcGISImageServiceLayer"===R.declaredClass||"esri.layers.RasterXLayer"===R.declaredClass))&&G.imageData&&0<G.imageData.length?sa="data:image/png;base64,"+G.imageData:0!==G.url.indexOf("http")&&(sa=R.url+"/"+X+"/images/"+G.url,(X=R._getToken())&&(sa+=
"?token\x3d"+X));X=n.create("img",{src:sa,border:0,style:"opacity:"+R.opacity},T);G=n.create("td",{innerHTML:w.encode(G.label),align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%",dir:"ltr"},I))));W&&"Stretched"===W&&10.3<=R.version&&("esri.layers.ArcGISImageServiceLayer"===R.declaredClass||"esri.layers.RasterXLayer"===R.declaredClass)&&(G.style.verticalAlign="top",G.style.lineHeight="1",X.style.marginBottom="-1px",X.style.display="block",I.style.verticalAlign="top");
9>d("ie")&&(X.style.filter="alpha(opacity\x3d"+100*R.opacity+")")},_getVariable:function(G,I,R){if(G)var X=(G=G.getVisualVariablesForType(I,R))&&G[0];return X},_getVariables:function(G,I,R){G=[this._getVariable(G,"colorInfo",!1),this._getVariable(G,"opacityInfo",!1),this._getVariable(G,"sizeInfo",!1)];return I?A.filter(G,function(X){return!(!X||X.field!==I||X.normalizationField!=R)}):G},_getFieldAlias:function(G,I,R){var X=I.infoTemplate||(I.infoTemplates&&R&&I.infoTemplates[R.id]?I.infoTemplates[R.id].infoTemplate:
null);X=X&&X.getFieldInfo&&X.getFieldInfo(G);G=B.isFunction(G)?null:this.getField(I,G,R);I=X||G;R="";I&&(R=X&&X.label||G&&G.alias||I.name||I.fieldName);return R},_getDomainName:function(G,I,R,X){if(G&&!B.isFunction(G))var W=(R=(G=this.getField(R,G,X))&&R.getDomain?R.getDomain(G.name):null)&&R.codedValues?R.getName(I):null;return W},_getRampTitle:function(G,I,R){var X=G.field,W=G.normalizationField,sa=!1,T=!1,S=!1;X=B.isFunction(X)?null:X;W=B.isFunction(W)?null:W;if(G.legendOptions&&G.legendOptions.title)var ia=
G.legendOptions.title;else if(G.valueExpressionTitle)ia=G.valueExpressionTitle;else{if(I.renderer&&I.renderer.authoringInfo&&I.renderer.authoringInfo.visualVariables){var na=I.renderer.authoringInfo.visualVariables;for(G=0;G<na.length;G++){var va=na[G];if("colorInfo"===va.type&&"ratio"===va.style){sa=!0;break}else if("colorInfo"===va.type&&"percent"===va.style){T=!0;break}else if("colorInfo"===va.type&&"percentTotal"===va.style){S=!0;break}}}(sa=S&&"showRatioPercentTotal"||T&&"showRatioPercent"||
sa&&"showRatio"||W&&"showNormField"||X&&"showField"||null)&&(ia=E.substitute({field:X&&this._getFieldAlias(X,I,R),normField:W&&this._getFieldAlias(W,I,R)},"showField"===sa?"${field}":this._i18n[sa]))}return ia},_getRendererTitle:function(G,I,R){if(G){if("esri.renderer.ClassBreaksRenderer"===G.declaredClass){var X=G.attributeField;var W=G.normalizationField;var sa="percent-of-total"===G.normalizationType}X=B.isFunction(X)?null:X;W=B.isFunction(W)?null:W;if(G.legendOptions&&G.legendOptions.title)var T=
G.legendOptions.title;else G.valueExpressionTitle?T=G.valueExpressionTitle:(G=W&&"showNormField"||(sa?"showNormPct":null)||X&&"showField"||null)&&(T=E.substitute({field:X&&this._getFieldAlias(X,I,R),normField:W&&this._getFieldAlias(W,I,R)},"showField"===G?"${field}":this._i18n[G]))}return T},_buildLegendItems_Renderer:function(G,I,R){function X(){m.set(t.byId(gb.id+"_"+G.id+"_"+I.id),"display","block");-1<W&&(m.set(t.byId(gb.id+"_"+G.id+"_"+W+"_group"),"display","block"),this._findParentGroup(G.id,
W))}var W=I.parentLayerId,sa=this.map,T=sa.getScale(),S=!1;if(!this._respectCurrentMapScale||this._isLayerInScale(G,I,T)){var ia,na,va;var Ba="esri.layers.ArcGISImageServiceVectorLayer"===G.declaredClass?G.renderer.renderer:I&&I.drawingInfo?ra.fromJson(B.clone(I.drawingInfo.renderer)):G.isFeatureReductionActive&&G.isFeatureReductionActive()?G.getFeatureReductionRenderer():G.renderer;if("esri.renderer.ScaleDependentRenderer"===Ba.declaredClass&&(Ba=(sa="zoom"===Ba.rangeType?Ba.getRendererInfoByZoom(sa.getZoom()):
Ba.getRendererInfoByScale(T))&&sa.renderer,!Ba))return!1;sa=Ba&&Ba.authoringInfo&&"relationship"===Ba.authoringInfo.type;if("esri.renderer.StretchRenderer"!==Ba.declaredClass&&"esri.renderer.ShadedReliefRenderer"!==Ba.declaredClass){var Na=this._getVariables(Ba),Va=A.filter(Na,function(Za){return!!Za}).length,Da=Na[0],K=Na[1];Na=Na[2];if(Da){var V=this._getMedianColor(Ba,Da);Da.field&&(ia=B.isFunction(Da.field)?null:this.getField(G,Da.field,I));var ha=!(Da.legendOptions&&!1===Da.legendOptions.showLegend)}if(K){K.field&&
(va=B.isFunction(K.field)?null:this.getField(G,K.field,I));var N=!(K.legendOptions&&!1===K.legendOptions.showLegend)}if(Na){Na.field&&(na=B.isFunction(Na.field)?null:this.getField(G,Na.field,I));var aa=!(Na.legendOptions&&!1===Na.legendOptions.showLegend)}}if("esri.renderer.HeatmapRenderer"===Ba.declaredClass){var ja=S=!0;this._showHeatRamp(G,I,Ba,R)}else if("esri.renderer.DotDensityRenderer"===Ba.declaredClass)ja=S=!0,this._showDotDensityLegend(G,I,Ba,R);else if("esri.renderer.TemporalRenderer"===
Ba.declaredClass){ja=S=!0;T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R);var pa=n.create("tbody",{},T);(G._hoverLabel||G._hoverLabels)&&this._createHoverAction(T,G,I);Ba.latestObservationRenderer&&"esri.renderer.SimpleRenderer"===Ba.latestObservationRenderer.declaredClass&&this._buildRow_Renderer(G,Ba.latestObservationRenderer.symbol,V,w.encode(Ba.latestObservationRenderer.label)||this.NLS_currentObservations,null,pa);Ba.observationRenderer&&"esri.renderer.SimpleRenderer"===
Ba.observationRenderer.declaredClass&&this._buildRow_Renderer(G,Ba.observationRenderer.symbol,V,w.encode(Ba.observationRenderer.label)||this.NLS_previousObservations,null,pa)}else if("esri.renderer.UniqueValueRenderer"===Ba.declaredClass){if(Ba.infos&&0<Ba.infos.length){ja=S=!0;if(Ba.legendOptions&&Ba.legendOptions.title||Ba.valueExpressionTitle)T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R),pa=n.create("tbody",{},T),Va=Ba.legendOptions&&Ba.legendOptions.title?
Ba.legendOptions.title:Ba.valueExpressionTitle,this._buildRow_Renderer(G,null,V,w.encode(Va),null,pa);T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R);pa=n.create("tbody",{},T);(G._hoverLabel||G._hoverLabels)&&this._createHoverAction(T,G,I);Ba.attributeField&&Na&&this._addSubHeader(pa,this._getFieldAlias(Ba.attributeField,G,I));if(sa){var wa=Ba.authoringInfo;var Ja=wa.focus;Va=wa.numClasses;var Ea=wa.field1.field;T=wa.field2.field;if(Va&&Ea&&T){var Qa=wa.field1.normalizationField;
wa=wa.field2.normalizationField;var Ka=Qa&&this._i18n.showNormField||Ea&&"${field}",Pa=wa&&this._i18n.showNormField||T&&"${field}";Ea=E.substitute({field:this._getFieldAlias(Ea,G,I),normField:Qa&&this._getFieldAlias(Qa,G,I)},Ka);T=E.substitute({field:this._getFieldAlias(T,G,I),normField:wa&&this._getFieldAlias(wa,G,I)},Pa);Qa={shapeDescriptor:qa,rotation:this._getRotationAngleForFocus(Ja)||0};this._buildRow_Renderer(G,null,null,w.encode(Ea),null,pa,null,Qa);Qa.rotation+=90;this._buildRow_Renderer(G,
null,null,w.encode(T),null,pa,null,Qa);this._drawRelationshipLegend(R,{numClasses:Va,focus:Ja,uvInfos:Ba.infos})}}else{var Ua=[];A.forEach(Ba.infos,function(Za){var hb=null;this._isLayerEditable(G)&&G.types&&(hb=this._getTemplateFromTypes(G.types,Za.value));var jb=Za.label;null==jb&&(jb=this._getDomainName(Ba.attributeField,Za.value,G,I)||Za.value);-1===A.indexOf(Ua,jb)&&(Ua.push(jb),this._buildRow_Renderer(G,Za.symbol,V,w.encode(jb),hb,pa))},this)}}Ja=!sa&&this._displayDefaultSymbol(G,Ba,R)}else if("esri.renderer.ClassBreaksRenderer"===
Ba.declaredClass){if(Ba.infos&&0<Ba.infos.length||"esri.layers.ArcGISImageServiceVectorLayer"===G.declaredClass){ja=S=!0;var eb=this._isUnclassedRenderer(Ba);if(!Da&&1===Ba.infos.length)var ab=(ab=Ba.infos[0])&&ab.symbol;eb||(T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R),pa=n.create("tbody",{},T),Va=this._getRendererTitle(Ba,G,I),this._buildRow_Renderer(G,null,V,w.encode(Va),null,pa));T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
R);pa=n.create("tbody",{},T);(G._hoverLabel||G._hoverLabels)&&this._createHoverAction(T,G,I);eb&&Na&&aa||(sa=Ba.infos.slice(0).reverse(),A.forEach(sa,function(Za){var hb=Za.label;null!=hb||eb||(hb=Za.minValue+" - "+Za.maxValue);this._buildRow_Renderer(G,Za.symbol,V,w.encode(hb),null,pa)},this));"esri.layers.ArcGISImageServiceVectorLayer"!==G.declaredClass||G.renderer.style!==Y.STYLE_SCALAR&&G.renderer.style!==Y.STYLE_SINGLE_ARROW||(this._buildRow_Renderer(G,Ba.defaultSymbol,null,"",null,pa),G._hideDefaultSymbol=
!0)}eb||(Ja=this._displayDefaultSymbol(G,Ba,R))}else if("esri.renderer.StretchRenderer"===Ba.declaredClass){ja=S=!0;T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%",class:"esriLegendLayer"},R);pa=n.create("tbody",{},T);var gb=this,db,kb,rb=function(){Ba.statistics.length?(db=Ba.statistics[0][1],kb=Ba.statistics[0][0]):(kb=mb?mb.minValues[0]:G.minValues[0],db=mb?mb.maxValues[0]:G.maxValues[0]);gb._createStretchLegend(pa,Ba,kb,db)};if(G.renderingRule)G.getRenderingRuleServiceInfo(G.renderingRule).then(function(Za){var hb=
Za&&Za.minValues&&0<Za.minValues.length&&Za.maxValues&&0<Za.maxValues.length;Za&&1<Za.bandCount||!hb?gb._legendRequest(G).then(function(jb){gb._processLegendResponse(G,jb)}):rb()});else{var mb=G.serviceInfo;if("esri.layers.RasterXLayer"===G.declaredClass&&(mb=G.raster.serviceInfo,G.hasMultidimensions&&!Ba.statistics.length))return R=G.mosaicRule&&G.mosaicRule.multidimensionalDefinition,G.getStatistics(R&&R.length?R[0].variableName:G._defaultMultidimensionalDefinition[0].variableName).then(B.hitch(this,
function(Za){this._createStretchLegend(pa,Ba,Za[0][0],Za[0][1]);X()})),S;rb()}}else"esri.renderer.ShadedReliefRenderer"===Ba.declaredClass?(ja=S=!0,T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%",class:"esriLegendLayer"},R),pa=n.create("tbody",{},T),this._createStretchLegend(pa,Ba,0,255)):"esri.renderer.SimpleRenderer"===Ba.declaredClass?(ja=S=!0,T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R),pa=n.create("tbody",{},T),(G._hoverLabel||G._hoverLabels)&&
this._createHoverAction(T,G,I),ab=null,this._isLayerEditable(G)&&G.templates&&0<G.templates.length&&(ab=G.templates[0]),sa=1<Va?null:ia&&ha||va&&N||na&&aa,this._buildRow_Renderer(G,Ba.symbol,V,w.encode(sa?this._getRampTitle(1<Va?null:Da||K||Na,G,I):Ba.label),ab,pa),ab=Da?null:Ba.symbol,sa&&(ia=va=na=null)):"esri.renderer.ColormapRenderer"===Ba.declaredClass&&(Ba.colormapInfos&&Ba.colormapInfos.length&&(ja=S=!0),T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
R),pa=n.create("tbody",{},T),Ba.colormapInfos.forEach(function(Za){var hb=new za(za.STYLE_SOLID,null,new k(Za.color));this._buildRow_Renderer(G,hb,null,Za.label,null,pa)},this),G._hideDefaultSymbol=!0);ja&&(Da&&ha&&(Da.field||Da.valueExpression)&&this._showGradientRamp(G,I,Ba,null,R,Da,ia,null,Na&&aa?!0:!1),Na&&aa&&(Na.field||Na.valueExpression&&!Aa.test(Na.valueExpression))&&(ja=Da&&ha||"esri.renderer.UniqueValueRenderer"===Ba.declaredClass?!1:!0,this._showSizeLegend(G,I,Ba,Na,V,R,na,null,ja)),K&&
N&&(K.field||K.valueExpression)&&this._showGradientRamp(G,I,Ba,ab&&!ab.url&&ab.color?ab.color:this.transparencyRampColor,R,K,va,null,!1));Ja||eb&&!ha&&!aa&&!N||(Ja=this._displayDefaultSymbol(G,Ba,R));S=S||Ja}gb=this;S&&X();return S},_createStretchLegend:function(G,I,R,X){var W=n.create("tr",{},G);var sa=n.create("td",{rowspan:2,"class":"esriStretchLegend"},W);I=n.toDom(this._addColorRamp(I.colorRamp));n.place(I,sa);n.create("td",{},W).innerHTML=this._i18n.high+": "+Math.round(X*Math.pow(10,3))/Math.pow(10,
3);G=n.create("tr",{},G);n.create("td",{},G).innerHTML=this._i18n.low+": "+Math.round(R*Math.pow(10,3))/Math.pow(10,3)},_addColorRamp:function(G){G||(G={algorithm:"hsv",fromColor:[0,0,0,1],toColor:[255,255,255,1]});var I=this._generateColorRampDivs(G);G.label="\x3cdiv class\x3d'esriStretchLegendGradientLabel'\x3e"+I+"\x3c/div\x3e";return G.label},_generateColorRampDivs:function(G){if(G){var I="";if("multipart"===G.type){var R=100/G.colorRamps.length;var X=G.colorRamps;Object.keys(X).reverse().forEach(function(W){I+=
this._generateSingleGradientDiv(X[W].fromColor,X[W].toColor,R)},this)}else I=this._generateSingleGradientDiv(G.fromColor,G.toColor,100);return I}},_generateSingleGradientDiv:function(G,I,R){if(G&&I){var X="";G=G.toRgb?G.toRgb():G;I=I.toRgb?I.toRgb():I;var W="(0deg, rgb("+G.slice(0,3).join()+"), rgb("+I.slice(0,3).join()+"));";A.forEach(["-webkit-linear-gradient","-o-linear-gradient","-moz-linear-gradient","linear-gradient"],function(sa){X+="background: "+sa+W});return"\x3cdiv class\x3d'esriStretchLegendSingleGradient' style\x3d'height:"+
R+"%;"+X+"'\x3e\x3c/div\x3e"}},_isLayerEditable:function(G){return"function"===typeof G.isEditable&&G.isEditable()},_isUnclassedRenderer:function(G,I){var R=G.infos;R=R?R.length:0;if("esri.renderer.ClassBreaksRenderer"===G.declaredClass&&1===R){R=G.attributeField;var X=G.normalizationField;G=I?R===I:!!this._getVariables(G,R,X).length}else G=G.authoringInfo&&G.authoringInfo.type,G=2===R&&"univariateColorSize"===G;return G},_displayDefaultSymbol:function(G,I,R){if(!G._hideDefaultSymbol&&I.defaultSymbol){var X=
!0;R=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},R);R=n.create("tbody",{},R);this._buildRow_Renderer(G,I.defaultSymbol,null,w.encode(I.defaultLabel)||"others",null,R)}return X},_showGradientRamp:function(G,I,R,X,W,sa,T,S,ia){ia=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(ia?"":" esriLegendSubFragment")},W);W=n.create("tbody",{},ia);(G._hoverLabel||G._hoverLabels||S)&&this._createHoverAction(ia,G,I,S);(T||sa.valueExpression||
sa.legendOptions&&sa.legendOptions.title)&&this._addSubHeader(W,this._getRampTitle(sa,G,I));T=sa.field;var na;T&&(na=B.isFunction(T)?null:this.getField(G,T,I));if(sa=(I=this._getRampStops(R,sa,X,na&&"esriFieldTypeDate"===na.type))?I.length:0)sa=10<sa,this._drawGradientRamp(W,I,!sa,G,this._getRampBorderColor(R),!!X,sa)},_getMedianColor:function(G,I){if(I.colors){var R=I.minDataValue;var X=I.maxDataValue}else I.stops&&(R=I.stops[0].value,X=I.stops[I.stops.length-1].value);return G.getColor(R+(X-R)/
2,{colorInfo:I})},_getRampStops:function(G,I,R,X){var W,sa,T=!1;if(I.colors||I.opacityValues){var S=I.maxDataValue-I.minDataValue;var ia=A.map([0,.25,.5,.75,1],function(Na){W=I.minDataValue+Na*S;return Number(W.toFixed(6))});this._checkPrecision(0,4,ia)}else I.stops&&(ia=A.map(I.stops,function(Na){return Na.value}),X||A.some(ia,function(Na){return 2<z.getDigits(Na).fractional})&&(ia=z.round(ia)),(T=A.some(I.stops,function(Na){return!!Na.label}))&&(sa=A.map(I.stops,function(Na){return Na.label})));
var na=ia[0],va,Ba;S=ia[ia.length-1]-na;return A.map(ia,function(Na,Va){R?(va=new k(R.toRgba()),Ba=G.getOpacity(Na,{opacityInfo:I}),null!=Ba&&(va.a=Ba)):va=G.getColor(Na,{colorInfo:I});var Da="";if(T)Da=sa[Va];else{Da=X?D.formatDate(Na,D.timelineDateFormatOptions):z.format(Na);var K="";0===Va?K=this._specialChars.lt+" ":Va===ia.length-1&&(K=this._specialChars.gt+" ");Da=K+Da}return{value:Na,color:va,offset:1-(Na-na)/S,label:Da}},this).reverse()},_checkPrecision:function(G,I,R){var X=G+(I-G)/2,W=R[G],
sa=R[X],T=R[I],S=Math.floor(W),ia=Math.floor(sa),na=Math.floor(T);S===W&&na===T&&ia!==sa&&S!==ia&&na!==ia&&(R[X]=ia);G+1!==X&&this._checkPrecision(G,X,R);X+1!==I&&this._checkPrecision(X,I,R)},_getRampBorderColor:function(G){if("esri.renderer.SimpleRenderer"===G.declaredClass)var I=G.symbol;else if("esri.renderer.UniqueValueRenderer"===G.declaredClass||"esri.renderer.ClassBreaksRenderer"===G.declaredClass)I=G.infos[0].symbol;return(G=I&&-1===I.type.indexOf("linesymbol")?I.getStroke():null)&&G.color},
_drawGradientRamp:function(G,I,R,X,W,sa,T){var S=n.create("tr",{},G),ia=I.length-1,na;var va=0;if(this.alignRight){G=n.create("td",{align:this._isRightToLeft?"left":"right"},S);var Ba=n.create("td",{align:this._isRightToLeft?"left":"right",width:this.gradientWidth},S)}else Ba=n.create("td",{width:this.gradientWidth,align:"center"},S),G=n.create("td",{},S);S=W&&0<W.a&&!(240<=W.r&&240<=W.g&&240<=W.b);var Na=n.create("div",{"class":S?"":"esriLegendBorderLessColorRamp",style:"position: relative; width:"+
this.gradientWidth+"px;"},Ba);Ba=n.create("div",{"class":"esriLegendColorRamp"+(sa?" esriLegendTransparencyRamp":"")},Na);sa=m.get(Ba,"width");S&&(W=9>d("ie")?W.toHex():"rgba("+W.toRgba().join(",")+")",m.set(Ba,"border",this.colorRampBorder+" "+W));R?(W=this.gradientHeight*ia,m.set(Ba,"height",W+"px")):W=m.get(Ba,"height");m.set(Na,"height",W+"px");S=r.createSurface(Ba,sa,W);9>d("ie")&&(va=S.getEventSource(),m.set(va,"position","relative"),m.set(va.parentNode,"position","relative"),va=1);try{R&&A.forEach(I,
function(K,V){K.offset=V/ia});var Va=S.createRect({x:-va,y:-va,width:sa+va,height:W+va});Va.setFill({type:"linear",x1:0,y1:0,x2:0,y2:W,colors:I}).setStroke(null);S.createRect({width:sa,height:W}).setFill(new k([255,255,255,1-X.opacity])).setStroke(null);this._surfaceItems.push(S)}catch(K){S.clear(),S.destroy()}A.forEach(I,function(K,V){K.label&&(na="top:"+100*K.offset+"%;",K="",0===V&&(K+=" esriLegendColorRampTickFirst"),V===I.length-1&&(K+=" esriLegendColorRampTickLast"),n.create("div",{"class":"esriLegendColorRampTick"+
K,innerHTML:"\x26nbsp;",style:na},Na))});var Da=n.create("div",{"class":"esriLegendColorRampLabels",style:{height:W+this.gradientHeight+"px"}},G);R?A.forEach(I,function(K){n.create("div",{"class":"esriLegendColorRampLabel",innerHTML:w.encode(K.label)||"\x26nbsp;"},Da)}):(n.create("div",{"class":"esriLegendColorRampLabel",innerHTML:T?w.encode(I[0].label)||"\x26nbsp;":this._i18n.high},Da),n.create("div",{"class":"esriLegendColorRampLabel",innerHTML:T?w.encode(I[I.length-1].label)||"\x26nbsp;":this._i18n.low,
style:"top: "+(W+this.gradientHeight-2*this.gradientHeight)+"px;"},Da))},_showHeatRamp:function(G,I,R,X,W){var sa=R.field;var T=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},X);X=n.create("tbody",{},T);(G._hoverLabel||G._hoverLabels||W)&&this._createHoverAction(T,G,I,W);(sa=sa&&this.getField(G,sa,I))&&this._addSubHeader(X,this._getFieldAlias(sa.name,G,I));I=this._getHeatmapStops(R);I.length&&this._drawGradientRamp(X,I,!1,G)},_getHeatmapStops:function(G){var I=
G.colorStops;G=G.colors;if(I&&I[0]){var R=I.length-1;if(G=I[0]&&null!=I[0].ratio)(G=I[R])&&1!==G.ratio&&(I=I.slice(0),I.push({ratio:1,color:G.color}),R++);else{var X=I[0].value;var W=I[R].value-X;I=A.map(I,function(T){return{color:T.color,ratio:(T.value-X)/W}})}}else if(G&&G[0]){R=G.length-1;var sa=1/(G.length-1);I=A.map(G,function(T,S){return{color:T,ratio:S*sa}})}I=A.map(I,function(T,S){var ia="";0===S?ia="Low":S===R&&(ia="High");return{color:T.color,label:ia,offset:1-T.ratio}});return I.reverse()},
_showDotDensityLegend:function(G,I,R,X){var W=R.legendOptions,sa,T=this.dotDensitySwatchSize,S=Math.round(T/2);if(W){var ia=W.backgroundColor;var na=W.outline;var va=W.valueUnit;var Ba=W.dotCoverage}Ba=(Ba||this.dotCoverage)/100;var Na=Math.round(T*T/Math.pow(R.dotSize,2)*Ba);X=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},X);var Va=n.create("tbody",{},X);(G._hoverLabel||G._hoverLabels)&&this._createHoverAction(X,G,I);this._addSubHeader(Va,E.substitute({value:R.dotValue,
unit:va||""},this.NLS_dotValue));A.forEach(R.fields,function(Da){Da=B.mixin({},Da);Da.numPoints=Na;sa=new ca(R._generateImageSrc(T,T,[Da],{x:0,y:0},{x:T,y:T},ia),na||R.outline,T,T);Da=this.getField(G,Da.name,I)||Da;this._buildRow_Renderer(G,sa,null,w.encode(this._getFieldAlias(Da.name,G,I)),null,Va,{type:"path",path:"M "+-S+","+-S+" L "+S+","+-S+" L "+S+","+S+" L "+-S+","+S+" L "+-S+","+-S+" E"})},this)},_showSizeLegend:function(G,I,R,X,W,sa,T,S,ia){var na=X.legendOptions;na=na&&na.customValues;W=
this._getSizeSymbol(R,W);if((!X.valueUnit||"unknown"===X.valueUnit)&&W&&(na||null!=X.minSize&&null!=X.maxSize&&null!=X.minDataValue&&null!=X.maxDataValue||X.stops&&!(1>=X.stops.length))){ia=n.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(ia?"":" esriLegendSubFragment")},sa);sa=n.create("tbody",{},ia);(G._hoverLabel||G._hoverLabels||S)&&this._createHoverAction(ia,G,I,S);(T||X.valueExpression||X.legendOptions&&X.legendOptions.title)&&this._addSubHeader(sa,this._getRampTitle(X,
G,I));T=(ia=(S=X.field)&&!B.isFunction(S))&&"cluster_count"===S.toLowerCase();I=(I=ia?G.isFeatureReductionActive&&G.isFeatureReductionActive()?G.getFeatureReductionField(S):this.getField(G,S,I):null)&&"esriFieldTypeDate"===I.type;na=na||this._getDataValues(R,W,X,I,T);var va=na.length-1;for(S=va;0<=S;S--){ia=na[S];W=ea.fromJson(W.toJson());this._applySize(W,R,X,ia);ia=I?D.formatDate(ia,D.timelineDateFormatOptions):z.format(ia);var Ba="";S===va?Ba=this._specialChars.gt+" ":0===S&&(Ba=T&&1===na[S]?"":
this._specialChars.lt+" ");Ba="\x3cspan class\x3d'esriLegendSizeRampLabel'\x3e"+w.encode(Ba+ia)+"\x3c/span\x3e";this._buildRow_Renderer(G,W,null,Ba,null,sa)}}},_getSizeSymbol:function(G,I){if("esri.renderer.SimpleRenderer"===G.declaredClass)var R=G.symbol;else if("esri.renderer.VectorFieldRenderer"===G.declaredClass)R=G.defaultSymbol;else if("esri.renderer.UniqueValueRenderer"===G.declaredClass||"esri.renderer.ClassBreaksRenderer"===G.declaredClass){R=G.infos[0].symbol;var X=1<G.infos.length}if(R=
R&&-1!==R.type.indexOf("fillsymbol")?null:R)if(R=ea.fromJson(R.toJson()),I||X)-1!==R.type.indexOf("linesymbol")?R.setColor(new k(this.sizeRampDarkColor)):(R.setColor(new k(this.sizeRampLightColor)),R.setOutline&&(G=new ta,G.setColor(new k(this.sizeRampDarkColor)),G.setWidth(1.5),R.setOutline(G)));return R},_getDataValues:function(G,I,R,X,W){if(W){var sa;A.some([5,3,2],function(T){T=this._getDataValuesByCount(G,I,R,X,T);this._hasFractionalValues(T)||(sa=T);return!!sa},this);return sa}return(W=G.authoringInfo)&&
"univariateColorSize"===W.type&&"above-and-below"===W.univariateTheme&&R.stops?this._getDataValuesFromStops(R,X):this._getDataValuesByCount(G,I,R,X,5)},_getDataValuesFromStops:function(G,I){G=A.map(G.stops,function(R){return R.value});return I?G:z.round(G)},_getDataValuesByCount:function(G,I,R,X,W,sa){W=null==W?5:W;sa=null==sa?20:sa;var T=G.getSizeRangeAtScale(R,this.map.getScale());W=this._interpolateSizeRange(T,W);var S=this._getDataRange(R),ia=A.map(W,function(va){return this._getDataValueFromSize(va,
S,T)},this);if(!X){var na;ia=z.round(ia);for(X=1;X<ia.length-1;X++)if(na=this._roundDataValue(G,I,R,ia[X],ia[X-1],sa))ia[X]=na[0],W[X]=na[1]}return ia},_hasFractionalValues:function(G){return A.some(G,function(I){return I!==Math.floor(I)})},_getDataRange:function(G){var I=G.stops;return I?{min:I[0].value,max:I[I.length-1].value}:{min:G.minDataValue,max:G.maxDataValue}},_interpolateSizeRange:function(G,I){var R=G.minSize;G=(G.maxSize-R)/(I-1);var X,W=[];for(X=0;X<I;X++)W.push(R+G*X);return W},_getDataValueFromSize:function(G,
I,R){var X=R.minSize;R=R.maxSize;var W=I.min;I=I.max;return G<=X?W:G>=R?I:(G-X)/(R-X)*(I-W)+W},_roundDataValue:function(G,I,R,X,W,sa){var T=this._getSize(I,G,R,X);W=this._getSize(I,G,R,W);var S=z.getDigits(X),ia=S.integer;S=S.fractional;var na;if(0<X&&1>X){var va=Math.pow(10,S);X*=va;ia=z.getDigits(X).integer}for(--ia;0<=ia;ia--){var Ba=Math.pow(10,ia);S=Math.floor(X/Ba)*Ba;Ba*=Math.ceil(X/Ba);null!=va&&(S/=va,Ba/=va);var Na=(S+Ba)/2;Na=z.round([S,Na,Ba],{indexes:[1]})[1];var Va=this._getSize(I,G,
R,S);var Da=this._getSize(I,G,R,Ba);var K=this._getSize(I,G,R,Na);var V=z.getPctChange(T,Va,W,null);var ha=z.getPctChange(T,Da,W,null);var N=z.getPctChange(T,K,W,null);var aa=V.prev<=sa;var ja=ha.prev<=sa;aa&&ja&&(V.prev<=ha.prev?(aa=!0,ja=!1):(ja=!0,aa=!1));aa?na=[S,Va]:ja?na=[Ba,Da]:N.prev<=sa&&(na=[Na,K]);if(na)break}return na},_applySize:function(G,I,R,X){var W=G.type;I=this._getSize(G,I,R,X);switch(W){case "simplemarkersymbol":G.setSize(I);break;case "picturemarkersymbol":W=G.width;R=G.height;
G.setHeight(I);G.setWidth(W/R*I);break;case "simplelinesymbol":case "cartographiclinesymbol":G.setWidth(I);break;case "textsymbol":G.font&&G.font.setSize(I)}},_getSize:function(G,I,R,X){return I.getSize(X,{sizeInfo:R,scale:this.map.getScale(),shape:-1!==G.type.indexOf("markersymbol")?G.style:null})},_buildRow_Renderer:function(G,I,R,X,W,sa,T,S){var ia=!!S,na=n.create("tr",{},sa);if(this.alignRight){if(sa=n.create("td",{align:this._isRightToLeft?"left":"right"},na),I||ia)var va=n.create("td",{align:this._isRightToLeft?
"left":"right",width:35},na)}else{if(I||ia)va=n.create("td",{width:35,align:"center"},na);sa=n.create("td",{},na)}var Ba=na=30;if(I)if("simplemarkersymbol"===I.type)na=Math.min(Math.max(na,I.size+12),125),Ba=Math.min(Math.max(Ba,I.size+12),125);else if("picturemarkersymbol"===I.type)na=Math.min(Math.max(na,I.width),125),Ba=Math.min(I.height||Ba,125);else if("textsymbol"===I.type){if(!I.text){var Na=I.text;var Va=!0;I.setText(this.defaultText)}na=Math.min(Math.max(na,I.getWidth()+12),125);Ba=Math.min(Math.max(Ba,
I.getHeight()+12),125);Va&&I.setText(Na)}if(I||ia)var Da=n.create("div",{style:"width:"+na+"px;height:"+Ba+"px;"},va);E.isDefined(X)&&"number"===typeof X&&(X=""+X);n.create("td",{innerHTML:X||"",align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%"},sa))));if(I||ia)G=this._drawSymbol(Da,I,R,na,Ba,W,G,T,S),this._surfaceItems.push(G)},_addSubHeader:function(G,I){G=n.create("tr",{},G);G=n.create("td",{align:this._align,colspan:2},G);n.create("td",{innerHTML:w.encode(I)||
"",align:this._align},n.create("tr",{},n.create("tbody",{},n.create("table",{width:"95%"},G))))},_drawSymbol:function(G,I,R,X,W,sa,T,S,ia){var na=I&&ea.fromJson(I.toJson()),va=T.opacity;I=!!ia;if(na)if(R&&na.setColor(new k(R.toRgba())),"simplelinesymbol"===na.type||"cartographiclinesymbol"===na.type||"textsymbol"===na.type){if(!na.color)return;R=na.color.toRgba();R[3]*=va;na.color.setColor(R)}else"simplemarkersymbol"===na.type||"simplefillsymbol"===na.type?(na.color&&(R=na.color.toRgba(),R[3]*=va,
na.color.setColor(R)),na.outline&&na.outline.color&&(R=na.outline.color.toRgba(),R[3]*=va,na.outline.color.setColor(R))):"picturemarkersymbol"===na.type&&(G.style.opacity=va,G.style.filter="alpha(opacity\x3d("+100*va+"))");G=r.createSurface(G,X,W);9>d("ie")&&(R=G.getEventSource(),m.set(R,"position","relative"),m.set(R.parentNode,"position","relative"));sa=I?ia.shapeDescriptor:this._getDrawingToolShape(na,sa)||ea.getShapeDescriptors(na);va=(R=sa.defaultShape)&&"text"===R.type;try{va&&!R.text&&(R.text=
this.defaultText);var Ba=G.createShape(S||R).setFill(sa.fill).setStroke(sa.stroke);va&&Ba.setFont(sa.font)}catch(Da){G.clear();G.destroy();return}var Na=Ba.getBoundingBox();S=Na.width;sa=Na.height;va=-(Na.x+S/2);var Va=-(Na.y+sa/2);R=G.getDimensions();va={dx:va+R.width/2,dy:Va+R.height/2};if(na&&"simplemarkersymbol"===na.type&&"path"===na.style)X=T._getScaleMatrix(Na,na.size),Ba.applyTransform(C.scaleAt(X.xx,X.yy,{x:R.width/2,y:R.height/2}));else if(S>X||sa>W)T=S/X>sa/W,X=((T?X:W)-5)/(T?S:sa),B.mixin(va,
{xx:X,yy:X});Ba.applyTransform(va);I&&Ba.applyTransform(C.rotategAt(ia.rotation,S/2,sa/2));return G},_getDrawingToolShape:function(G,I){switch(I?I.drawingTool||null:null){case "esriFeatureEditToolArrow":I={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 Z"};break;case "esriFeatureEditToolTriangle":I={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 Z"};break;case "esriFeatureEditToolRectangle":I={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"};break;
case "esriFeatureEditToolCircle":I={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":I={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null}return{defaultShape:I,fill:G.getFill(),stroke:G.getStroke()}},_drawRelationshipLegend:function(G,I){var R=I.focus,X=I.numClasses,W=ka[X],sa=!!R,T=Math.sqrt(Math.pow(75,2)+Math.pow(75,2)),S={};I.uvInfos.forEach(function(Ba){S[Ba.value]={label:Ba.label,fill:this._getSymbolColor(Ba.symbol)}},this);I=[];for(var ia=0;ia<X;ia++){for(var na=
[],va=0;va<X;va++)na.push(S[W[ia][va]].fill);I.push(na)}W=this._getRelationshipCornerLabels(R,S);G=this._drawRampLayout(G,W,T,sa);G=r.createSurface(G,T,T);sa||(G.rawNode.style.margin="-15px -15px -18px -15px");I=P.create2DColorRamp({surface:G,colors:I,numClasses:X,size:75});X=(T-75)/2;T=(T-75)/2;I.applyTransform(C.translate(X,T));sa&&I.applyTransform(C.rotategAt(this._getRotationAngleForFocus(R),37.5,37.5));I=G.createGroup();W={width:1,color:"#555555"};ia=G.defNode;this._createArrowMarker(ia,"start");
this._createArrowMarker(ia,"end");ia=I.createLine({x1:-10,y1:60,x2:-10,y2:15}).setStroke(W);W=I.createLine({x1:15,y1:85,x2:60,y2:85}).setStroke(W);this._setLineArrow(ia.rawNode,"left",R);this._setLineArrow(W.rawNode,"right",R);I.applyTransform(C.translate(X,T));sa&&I.applyTransform(C.rotategAt(-45,37.5,37.5));this._surfaceItems.push(G)},_drawRampLayout:function(G,I,R,X){var W=n.create("div",{style:{padding:"10px"}},G);G=R+"px";R+="px";X?(X=n.create("div",{style:{display:"flex"}},W),n.create("div",
{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:G,textAlign:"right"},innerHTML:I.left},X),W=n.create("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"}},X),n.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:G},innerHTML:I.right},X),X=n.create("div",{class:"esriLegendRelationshipLabel",style:{alignSelf:"center",maxWidth:G},innerHTML:I.top},W),X=n.create("div",{style:{height:R,width:R}},W),W=n.create("div",{class:"esriLegendRelationshipLabel",
style:{alignSelf:"center",maxWidth:G},innerHTML:I.bottom},W)):(W=n.create("div",{style:{display:"table",color:"#555555"}},W),X=n.create("div",{style:{display:"table-row"}},W),R=n.create("div",{style:{display:"table-row"}},W),W=n.create("div",{style:{display:"table-row"}},W),n.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:G,textAlign:"right",verticalAlign:"bottom"},innerHTML:I.left},X),n.create("div",{style:{display:"table-cell"}},X),n.create("div",{class:"esriLegendRelationshipLabel",
style:{display:"table-cell",maxWidth:G,textAlign:"left",verticalAlign:"bottom"},innerHTML:I.top},X),n.create("div",{style:{display:"table-cell"}},R),X=n.create("div",{style:{display:"table-cell"}},R),n.create("div",{style:{display:"table-cell"}},R),n.create("div",{class:"esriLegendRelationshipLabel",style:{display:"table-cell",maxWidth:G,textAlign:"right",verticalAlign:"top"},innerHTML:I.bottom},W),n.create("div",{style:{display:"table-cell"}},W),n.create("div",{class:"esriLegendRelationshipLabel",
style:{display:"table-cell",maxWidth:G,textAlign:"left",verticalAlign:"top"},innerHTML:I.right},W));return X},_getSymbolColor:function(G){if(G)return"simplelinesymbol"===G.type||"simplemarkersymbol"===G.type&&(G.style===la.STYLE_X||G.style===la.STYLE_CROSS)?(G=G.getStroke())&&G.color:G.getFill()},_getRotationAngleForFocus:function(G){var I=ua[G];G&&null==I&&(I=ua.HH);return I},_setLineArrow:function(G,I,R){var X=this.id+"_arrowStart",W=this.id+"_arrowEnd";I="left"===I;switch(R){case "HL":G.setAttribute(I?
"marker-start":"marker-end","url(#"+(I?W:X)+")");break;case "LL":G.setAttribute("marker-start","url(#"+W+")");break;case "LH":G.setAttribute(I?"marker-end":"marker-start","url(#"+(I?X:W)+")");break;default:G.setAttribute("marker-end","url(#"+X+")")}},_createArrowMarker:function(G,I){var R="start"===I,X=this.id+(R?"_arrowStart":"_arrowEnd");I=R?"0,0 5,5 0,10":"5,0 0,5 5,10";var W=R?5:0;R=document.createElementNS("http://www.w3.org/2000/svg","marker");R.setAttribute("id",X);R.setAttribute("markerWidth",
"10");R.setAttribute("markerHeight","10");R.setAttribute("refX",W);R.setAttribute("refY","5");R.setAttribute("markerUnits","strokeWidth");R.setAttribute("orient","auto");X=document.createElementNS("http://www.w3.org/2000/svg","polyline");X.setAttribute("points",I);X.setAttribute("fill","none");X.setAttribute("stroke","#555555");X.setAttribute("stroke-width","1");R.appendChild(X);G.appendChild(R)},_getRelationshipCornerLabels:function(G,I){var R=I.HH.label,X=I.LL.label,W=I.HL.label;I=I.LH.label;switch(G){case "HH":return{top:R,
bottom:X,left:W,right:I};case "HL":return{top:W,bottom:I,left:X,right:R};case "LL":return{top:X,bottom:R,left:I,right:W};case "LH":return{top:I,bottom:W,left:R,right:X};default:return{top:R,bottom:X,left:W,right:I}}},_repaintItems:function(){A.forEach(this._surfaceItems,function(G){this._repaint(G)},this)},_repaint:function(G){if(G){G.getStroke&&G.setStroke&&G.setStroke(G.getStroke());try{G.getFill&&G.setFill&&G.setFill(G.getFill())}catch(I){}G.children&&B.isArray(G.children)&&A.forEach(G.children,
this._repaint,this)}},_createHoverAction:function(G,I,R,X){if(X=I._hoverLabel||I._hoverLabels&&I._hoverLabels[R.id]||X)X=w.encode(X),I.mouseMoveHandler=I.mouseMoveHandler||{},I.mouseMoveHandler[R.id]=p.connect(G,"onmousemove",B.hitch(this,function(W,sa){this.mouseX=sa.clientX;this.mouseY=sa.clientY;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,m.set(t.byId(this.id+"_hoverLabel"),"display","none"));setTimeout(B.hitch(this,function(T,S,ia){if(T==this.mouseX&&S==this.mouseY&&!this.hoverLabelShowing)if(this.hoverLabelShowing=
!0,t.byId(this.id+"_hoverLabel")){var na=t.byId(this.id+"_hoverLabel");na.innerHTML="\x3cspan\x3e"+ia+"\x3c/span\x3e";m.set(na,"top",S+"px");m.set(na,"left",T+15+"px");m.set(na,"display","")}else n.create("div",{innerHTML:"\x3cspan\x3e"+ia+"\x3c/span\x3e",id:this.id+"_hoverLabel","class":"esriLegendHoverLabel",style:{top:S+"px",left:T+15+"px"}},document.body)},sa.clientX,sa.clientY,W),500)},X)),I.mouseOutHandler=I.mouseOutHandler||{},I.mouseOutHandler[R.id]=p.connect(G,"onmouseout",B.hitch(this,function(W){this.mouseY=
this.mouseX=-1;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,m.set(t.byId(this.id+"_hoverLabel"),"display","none"))}))},_removeHoverHandlers:function(){var G;A.forEach(this.layers,function(I){if(I.mouseMoveHandler)for(G in I.mouseMoveHandler)p.disconnect(I.mouseMoveHandler[G]);if(I.mouseOutHandler)for(G in I.mouseOutHandler)p.disconnect(I.mouseOutHandler[G])})},_createDynamicLayers:function(G){var I=[],R;A.forEach(G.dynamicLayerInfos||G.layerInfos,function(X){R={id:X.id};R.source=X.source&&X.source.toJson();
var W;G.layerDefinitions&&G.layerDefinitions[X.id]&&(W=G.layerDefinitions[X.id]);W&&(R.definitionExpression=W);var sa;G.layerDrawingOptions&&G.layerDrawingOptions[X.id]&&(sa=G.layerDrawingOptions[X.id]);sa&&(R.drawingInfo=sa.toJson());R.minScale=X.minScale||0;R.maxScale=X.maxScale||0;I.push(R)});return I},_getTemplateFromTypes:function(G,I){var R;for(R=0;R<G.length;R++)if(G[R].id==I&&G[R].templates&&0<G[R].templates.length)return G[R].templates[0];return null},_findParentGroup:function(G,I,R){var X,
W=I.dynamicLayerInfos||I.layerInfos;for(X=0;X<W.length;X++)if(R==W[X].id){-1<W[X].parentLayerId&&(m.set(t.byId(this.id+"_"+G+"_"+W[X].parentLayerId+"_group"),"display","block"),this._findParentGroup(G,I,W[X].parentLayerId));break}},_addSubLayersToHide:function(G){function I(R,X){var W=G.layer.dynamicLayerInfos||G.layer.layerInfos,sa,T;for(sa=0;sa<W.length;sa++)if(W[sa].id===R&&W[sa].subLayerIds)for(T=0;T<W[sa].subLayerIds.length;T++){var S=W[sa].subLayerIds[T];-1===A.indexOf(X,S)&&(X.push(S),I(S,
X))}}G.layer.layerInfos&&A.forEach(this.hideLayersInLegend[G.layer.id],function(R){I(R,this.hideLayersInLegend[G.layer.id])},this)},_isLayerInScale:function(G,I,R){var X,W=!0;if(G.legendResponse&&G.legendResponse.layers)for(X=0;X<G.legendResponse.layers.length;X++){var sa=G.legendResponse.layers[X];if(I.id==sa.layerId){if(!G.minScale&&0!==G.minScale||!G.maxScale&&0!==G.maxScale){if(0==sa.minScale&&G.tileInfo)var T=G.tileInfo.lods[0].scale;if(0==sa.maxScale&&G.tileInfo)var S=G.tileInfo.lods[G.tileInfo.lods.length-
1].scale}else T=Math.min(G.minScale,sa.minScale)||G.minScale||sa.minScale,S=Math.max(G.maxScale,sa.maxScale);if(0<T&&T<R||S>R)W=!1;break}}else if(G.minScale||G.maxScale)if(G.minScale&&G.minScale<R||G.maxScale&&G.maxScale>R)W=!1;return W},_getServiceTitle:function(G){var I=G._titleForLegend;I||(I=G.url,G.url?-1<G.url.indexOf("/MapServer")?(I=G.url.substring(0,G.url.indexOf("/MapServer")),I=I.substring(I.lastIndexOf("/")+1,I.length)):-1<G.url.indexOf("/ImageServer")?(I=G.url.substring(0,G.url.indexOf("/ImageServer")),
I=I.substring(I.lastIndexOf("/")+1,I.length)):-1<G.url.indexOf("/FeatureServer")&&(I=G.url.substring(0,G.url.indexOf("/FeatureServer")),I=I.substring(I.lastIndexOf("/")+1,I.length)):I="",G.name&&(I=0<I.length?I+(" - "+G.name):G.name));"esri.layers.ArcGISImageServiceVectorLayer"===G.declaredClass&&G.vectorFieldPixelFilter&&(G=G.vectorFieldPixelFilter.outputUnit?this["NLS_"+G.vectorFieldPixelFilter.outputUnit]:this["NLS_"+G.vectorFieldPixelFilter.inputUnit],E.isDefined(G)&&(I+=" ("+G+")"));return w.encode(I)},
_getEffectiveScale:function(G,I){var R=I.minScale,X=I.maxScale;if(E.isDefined(I.parentLayerId)){G=G.layerInfos;I=I.parentLayerId;var W;for(W=G.length-1;0<=W;W--)if(G[W].id==I)if(0==R&&0<G[W].minScale?R=G[W].minScale:0<R&&0==G[W].minScale||0<R&&0<G[W].minScale&&(R=Math.min(R,G[W].minScale)),X=Math.max(X||0,G[W].maxScale||0),-1<G[W].parentLayerId)I=G[W].parentLayerId;else break}return{minScale:R,maxScale:X}},_isSupportedLayerType:function(G){return!(!G||!("esri.layers.ArcGISDynamicMapServiceLayer"===
G.declaredClass||"esri.layers.ArcGISImageServiceLayer"===G.declaredClass&&10.2<=G.version||"esri.layers.RasterXLayer"===G.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===G.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===G.declaredClass||"esri.layers.FeatureLayer"===G.declaredClass||"esri.layers.StreamLayer"===G.declaredClass||"esri.layers.KMLLayer"===G.declaredClass||"esri.layers.GeoRSSLayer"===G.declaredClass||"esri.layers.WMSLayer"===G.declaredClass||"esri.layers.WFSLayer"===
G.declaredClass||"esri.layers.CSVLayer"===G.declaredClass))},isHostedTileService:function(G){var I=/(https?:)?\/\/services.*\.arcgis\.com/i;return!("esri.layers.ArcGISTiledMapServiceLayer"!==G.declaredClass||!I.test(G.url))},getField:function(G,I,R){if(G.getField)return G.getField(I);if(R&&R.fields){var X;A.forEach(R.fields,function(W){W.name===I&&(X=W)});return X}return null}});B.mixin(ya,{ALIGN_LEFT:0,ALIGN_RIGHT:1});return ya})},"dojo/debounce":function(){define([],function(){return function(e,
u){var B;return function(){B&&clearTimeout(B);var A=this,p=arguments;B=setTimeout(function(){e.apply(A,p)},u)}}})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(e,u,B,A){var p=function(k,g){return k-g},l={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(k){var g=String(k),d=g.match(l._reNumber);k={integer:0,fractional:0};d&&d[1]?(k.integer=d[1].split("").length,k.fractional=d[3]?d[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&
(d=g.split("e"),g=d[0],d=d[1],g&&d&&(g=Number(g),d=Number(d),(k=0<d)||(d=Math.abs(d)),g=l.getDigits(g),k?(g.integer+=d,g.fractional=d>g.fractional?0:g.fractional-d):(g.fractional+=d,g.integer=d>g.integer?1:g.integer-d),k=g));return k},getFixedNumbers:function(k,g){var d=Number(k.toFixed(g));d<k?k=d+1/Math.pow(10,g):(k=d,d-=1/Math.pow(10,g));d=Number(d.toFixed(g));k=Number(k.toFixed(g));return[d,k]},getPctChange:function(k,g,d,c){var a={prev:null,next:null};if(null!=d){var b=k-d;a.prev=Math.floor(Math.abs(100*
(g-d-b)/b))}null!=c&&(b=c-k,a.next=Math.floor(Math.abs(100*(c-g-b)/b)));return a},round:function(k,g){k=k.slice(0);var d,c,a=g&&null!=g.tolerance?g.tolerance:2,b=g&&g.indexes,f=g&&null!=g.strictBounds?g.strictBounds:!1;if(b)b.sort(p);else for(b=[],d=0;d<k.length;d++)b.push(d);for(d=0;d<b.length;d++){var t=b[d];g=k[t];var n=0===t?null:k[t-1];var m=t===k.length-1?null:k[t+1];var h=l.getDigits(g);if(h=h.fractional){var v=0;for(c=!1;v<=h&&!c;){var r=l.getFixedNumbers(g,v);r=f&&0===d?r[1]:r[0];c=l.hasMinimalChange(g,
r,n,m,a);v++}c&&(k[t]=r)}}return k},hasMinimalChange:function(k,g,d,c,a){k=l.getPctChange(k,g,d,c);g=null==k.prev||k.prev<=a;d=null==k.next||k.next<=a;return g&&d||k.prev+k.next<=2*a},_reAllZeros:new RegExp("\\"+B.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(k,g){g=g||{places:20,round:-1};(k=u.format(k,g))&&(k=k.replace(l._reSomeZeros,"$1").replace(l._reAllZeros,""));return k}};return l})},"esri/renderers/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!dojo/cldr/nls/gregorian".split(" "),
function(e,u,B,A,p,l,k,g){function d(h){return h&&u.map(h,function(v){return new k(v)})}function c(h,v,r){var C="";0===v?C=b.lt+" ":v===r&&(C=b.gt+" ");return C+h}var a={},b={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},f={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},t={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},n={formatLength:"short",fullYear:!0},m={formatLength:"short"};e.mixin(a,{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(h,v){var r=[];null==h||h instanceof Date||
(h=new Date(h));v=v||{};v=e.mixin({},v);var C=v.selector?v.selector.toLowerCase():null,w=!C||-1<C.indexOf("time");C=!C||-1<C.indexOf("date");w&&(v.timeOptions=v.timeOptions||m,v.timeOptions&&(v.timeOptions=e.mixin({},v.timeOptions),v.timeOptions.selector=v.timeOptions.selector||"time",r.push(v.timeOptions)));C&&(v.dateOptions=v.dateOptions||n,v.dateOptions&&(v.dateOptions=e.mixin({},v.dateOptions),v.dateOptions.selector=v.dateOptions.selector||"date",r.push(v.dateOptions)));r&&r.length?(r=u.map(r,
function(y){return A.format(h,y)}),v=1==r.length?r[0]:g["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(y,q){return r[q]})):v=A.format(h);return v},createColorStops:function(h){var v=h.values,r=h.colors,C=h.labelIndexes,w=h.isDate,y=h.dateFormatOptions;h=[];return h=u.map(v,function(q,x){var E=null;if(!C||-1<u.indexOf(C,x)){var z;(z=w?a.formatDate(q,y):l.format(q))&&(E=c(z,x,v.length-1))}return{value:q,color:r[x],label:E}})},updateColorStops:function(h){var v=h.stops,r=h.changes,
C=h.isDate,w=h.dateFormatOptions,y=[],q=u.map(v,function(E){return E.value});u.forEach(r,function(E){y.push(E.index);q[E.index]=E.value});var x=l.round(q,{indexes:y});u.forEach(v,function(E,z){E.value=q[z];if(null!=E.label){var D,F=null;(D=C?a.formatDate(x[z],w):l.format(x[z]))&&(F=c(D,z,v.length-1));E.label=F}})},createClassBreakLabel:function(h){var v=h.minValue,r=h.maxValue,C=h.isFirstBreak?"":b.gt+" ";h="percent-of-total"===h.normalizationType?b.pct:"";v=null==v?"":l.format(v);r=null==r?"":l.format(r);
return C+v+h+" \u2013 "+r+h},setLabelsForClassBreaks:function(h){var v=h.classBreaks,r=h.classificationMethod,C=h.normalizationType,w=[];v&&v.length&&("standard-deviation"===r?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):h.round?(w.push(v[0].minValue),u.forEach(v,function(y){w.push(y.maxValue)}),w=l.round(w),u.forEach(v,function(y,q){y.label=a.createClassBreakLabel({minValue:0===q?w[0]:w[q],maxValue:w[q+1],isFirstBreak:0===
q,normalizationType:C})})):u.forEach(v,function(y,q){y.label=a.createClassBreakLabel({minValue:y.minValue,maxValue:y.maxValue,isFirstBreak:0===q,normalizationType:C})}))},updateClassBreak:function(h){var v=h.classBreaks,r=h.normalizationType,C=h.change,w=C.index;C=C.value;var y=-1,q=-1,x=v.length;"standard-deviation"===h.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===w?y=w:w===x?q=w-1:(q=w-1,y=w),-1<y&&
y<x&&(h=v[y],h.minValue=C,h.label=a.createClassBreakLabel({minValue:h.minValue,maxValue:h.maxValue,isFirstBreak:0===y,normalizationType:r})),-1<q&&q<x&&(h=v[q],h.maxValue=C,h.label=a.createClassBreakLabel({minValue:h.minValue,maxValue:h.maxValue,isFirstBreak:0===q,normalizationType:r})))},calculateDateFormatInterval:function(h){var v,r,C=h.length,w=Infinity;h=u.map(h,function(J){return new Date(J)});for(v=0;v<C-1;v++){var y=h[v];var q=[];var x=Infinity;var E="";for(r=v+1;r<C;r++){var z=h[r];z=y.getFullYear()!==
z.getFullYear()&&"year"||y.getMonth()!==z.getMonth()&&"month"||y.getDate()!==z.getDate()&&"day"||y.getHours()!==z.getHours()&&"hour"||y.getMinutes()!==z.getMinutes()&&"minute"||y.getSeconds()!==z.getSeconds()&&"second"||"millisecond";var D=f[z];D<x&&(x=D,E=z);q.push(z)}if(x<w){w=x;var F=E}}return F},createUniqueValueLabel:function(h){var v=h.value,r=h.fieldInfo,C=h.domain;h=h.dateFormatInterval;var w=String(v);(C=C&&C.codedValues?C.getName(v):null)?w=C:"number"===typeof v&&(w=r&&"esriFieldTypeDate"===
r.type?a.formatDate(v,h&&t[h]):l.format(v));return w},cloneColorInfo:function(h){if(h){var v=e.mixin({},h);v.colors=d(v.colors);v.stops=v.stops&&u.map(v.stops,function(r){r=e.mixin({},r);r.color&&(r.color=new k(r.color));return r});v.legendOptions&&(v.legendOptions=e.mixin({},v.legendOptions))}return v},cloneOpacityInfo:function(h){if(h){var v=e.mixin({},h);if(h=v.opacityValues)v.opacityValues=h.slice(0);if(h=v.stops)v.stops=u.map(h,function(r){return e.mixin({},r)});if(h=v.legendOptions)v.legendOptions=
e.mixin({},h)}return v},cloneSizeInfo:function(h){if(h){var v=e.mixin({},h);v.stops&&(v.stops=u.map(v.stops,function(r){return e.mixin({},r)}));(h=v.minSize)&&"object"===typeof h&&(v.minSize=a.cloneSizeInfo(h));(h=v.maxSize)&&"object"===typeof h&&(v.maxSize=a.cloneSizeInfo(h));if(h=v.legendOptions)if(v.legendOptions=e.mixin({},h),h=h.customValues)v.legendOptions.customValues=h.slice(0)}return v},getClassCodesForRelationship:function(){return e.clone({2:["L","H"],3:["L","M","H"],4:["L","M1","M2","H"]})},
getClassValuesForRelationship:function(){return e.clone({2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]})}});return a})},"esri/dijit/LocateButton":function(){define("require dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config dijit/_WidgetBase dijit/a11yclick dijit/_TemplatedMixin dojo/on dojo/Deferred dojo/text!./templates/LocateButton.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style dojo/dom-attr ../geometry/webMercatorUtils ../geometry/Point ../SpatialReference ../graphic ../symbols/PictureMarkerSymbol ../tasks/ProjectParameters".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h,v,r,C,w,y,q){return B("esri.dijit.LocateButton",[g,c,u],{templateString:f,options:{theme:"LocateButton",map:null,visible:!0,highlightLocation:!0,symbol:new y(e.toUrl("./images/sdk_gps_location.png"),28,28),infoTemplate:null,scale:null,useTracking:!1,clearOnTrackingStop:!1,setScale:!0,centerAt:!0,timeout:15E3,graphicsLayer:null,geolocationOptions:{maximumAge:0,timeout:15E3,enableHighAccuracy:!0}},constructor:function(x,E){x=A.mixin({},this.options,x);this.domNode=
E;this._i18n=t;E=navigator.geolocation;var z=window.hasOwnProperty("isSecureContext");z=z&&window.isSecureContext||!z&&"https:"===window.location.protocol;z&&E||(x.visible=!1);E||console.log("LocateButton::navigator.geolocation unsupported.");z||console.log("LocateButton::navigator.geolocation requires a secure origin.");this.set("map",x.map);this.set("theme",x.theme);this.set("visible",x.visible);this.set("scale",x.scale);this.set("highlightLocation",x.highlightLocation);this.set("symbol",x.symbol);
this.set("infoTemplate",x.infoTemplate);this.set("geolocationOptions",x.geolocationOptions);this.set("useTracking",x.useTracking);this.set("setScale",x.setScale);this.set("centerAt",x.centerAt);this.set("timeout",x.timeout);this.set("graphicsLayer",x.graphicsLayer);this.set("clearOnTrackingStop",x.clearOnTrackingStop);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this.watch("tracking",this._locate);this.watch("useTracking",A.hitch(this,function(){this.get("tracking")&&
!this.get("useTracking")&&this._stopTracking();this._setTitle()}));this._css={container:"locateContainer",locate:"zoomLocateButton",loading:"loading",tracking:"tracking"}},postCreate:function(){this.inherited(arguments);this.own(a(this._locateNode,d,A.hitch(this,this.locate)))},startup:function(){this.inherited(arguments);this.get("map")||(this.set("visible",!1),console.log("LocateButton::map required"));if(this.get("map").loaded)this._init();else a.once(this.get("map"),"load",A.hitch(this,function(){this._init()}))},
destroy:function(){this.clear();this._graphicsEvent&&this._graphicsEvent.remove();this._removeWatchPosition();this.inherited(arguments)},clear:function(){var x=this.get("highlightGraphic"),E=this.get("graphicsLayer");x&&(E?E.remove(x):this.get("map").graphics.remove(x),this.set("highlightGraphic",null))},locate:function(){this.get("useTracking")&&this.set("tracking",!this.get("tracking"));return this._locate()},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},_setTitle:function(){this.get("useTracking")?
this.get("tracking")?h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.stopTracking):h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.tracking):h.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.title)},_removeWatchPosition:function(){this.get("watchId")&&(navigator.geolocation.clearWatch(this.get("watchId")),this.set("watchId",null));this._removePrivateVars()},_stopTracking:function(){n.remove(this._locateNode,this._css.tracking);this._removeWatchPosition();
this.get("clearOnTrackingStop")&&this.clear();this._hideLoading()},_positionToObject:function(x){return x?{coords:A.mixin({},x.coords),timestamp:x.timestamp}:{}},_startTracking:function(){n.add(this._locateNode,this._css.tracking);this._removeWatchPosition();var x=navigator.geolocation.watchPosition(A.hitch(this,function(E){E=this._positionToObject(E);this._setPosition(E).then(A.hitch(this,function(z){this._locateEvent(z)}),A.hitch(this,function(z){z||(z=Error("LocateButton::Error setting the position."));
this._locateError(z)}))}),A.hitch(this,function(E){this.set("tracking",!1);E||(E=Error("LocateButton::Could not get tracking position."));this._locateError(E)}),this.get("geolocationOptions"));this.set("watchId",x)},_removePrivateVars:function(){this._scale=this._position=this._graphic=null},_getCurrentPosition:function(){var x=new b;this._removePrivateVars();var E=setTimeout(A.hitch(this,function(){clearTimeout(E);x.reject(Error("LocateButton::time expired for getting location."))}),this.get("timeout"));
navigator.geolocation.getCurrentPosition(A.hitch(this,function(z){z=this._positionToObject(z);clearTimeout(E);this._setPosition(z).then(A.hitch(this,function(D){x.resolve(D)}),A.hitch(this,function(D){D||(D=Error("LocateButton::Error setting map position."));x.reject(D)}))}),A.hitch(this,function(z){z||(z=Error("LocateButton::Could not get current position."));x.reject(z)}),this.get("geolocationOptions"));return x.promise},_locate:function(){var x=new b;this._showLoading();if(navigator.geolocation)this.get("useTracking")?
this.get("tracking")?(this._startTracking(),x.resolve({tracking:!0})):(this._stopTracking(),x.resolve({tracking:!1})):this._getCurrentPosition().then(A.hitch(this,function(z){this._locateEvent(z);x.resolve(z)}),A.hitch(this,function(z){z||(z=Error("LocateButton::Could not get current position."));this._locateError(z);x.reject(z)}));else{var E=Error("LocateButton::geolocation unsupported");this._locateError(E);x.reject(E)}this._setTitle();return x.promise},_projectPoint:function(x){var E=new b,z=this.get("map").spatialReference,
D=z.wkid;z.isWebMercator()?(x=v.geographicToWebMercator(x),E.resolve(x)):k.defaults.geometryService&&4326!==D?(D=new q,D.geometries=[x],D.outSR=z,k.defaults.geometryService.project(D).then(A.hitch(this,function(F){F&&F.length?E.resolve(F[0]):E.reject(Error("LocateButton::Point was not projected."))}),function(F){F||(F=Error("LocateButton::please specify a geometry service on esri/config to project."));E.reject(F)})):E.resolve(x);return E.promise},_getScale:function(x){var E=this.get("scale");return x&&
x.coords?E||x.coords.accuracy||5E4:E||5E4},_createPoint:function(x){var E;x&&x.coords&&(E=new r([x.coords.longitude,x.coords.latitude],new C({wkid:4326})));return E},_setPosition:function(x){var E=new b,z,D;this._removePrivateVars();if((this._position=x)&&x.coords){if(z=this._createPoint(x))this._graphic=D=this._createGraphic(z,x);var F=this._getScale(x);this._scale=F;z?this._projectPoint(z).then(A.hitch(this,function(J){this._graphic=D=this._createGraphic(J,x);var L={graphic:D,scale:F,position:x};
this.get("setScale")&&this.get("map").setScale(F);this.get("centerAt")?this.get("map").centerAt(J).then(A.hitch(this,function(){E.resolve(L)}),A.hitch(this,function(Q){Q||(Q=Error("LocateButton::Could not center map."));E.reject(Q)})):E.resolve(L)}),A.hitch(this,function(J){J||(J=Error("LocateButton::Error projecting point."));E.reject(J)})):(z=Error("LocateButton::Invalid point"),E.reject(z))}else z=Error("LocateButton::Invalid position"),E.reject(z);return E.promise},_createGraphic:function(x,E){if(x){E=
{position:E};var z=new w(x,this.get("symbol"),E,this.get("infoTemplate"))}return z},_locateEvent:function(x){if(x.graphic){var E=this.get("highlightGraphic"),z=this.get("graphicsLayer");E?(E.setGeometry(x.graphic.geometry),E.setAttributes(x.graphic.attributes),E.setInfoTemplate(x.graphic.infoTemplate),E.setSymbol(x.graphic.symbol)):(E=x.graphic,this.get("highlightLocation")&&(z?z.add(E):this.get("map").graphics.add(E)));this.set("highlightGraphic",E)}this._hideLoading();this.emit("locate",x)},_locateError:function(x){x=
{graphic:this._graphic,scale:this._scale,position:this._position,error:x};this._hideLoading();this.emit("locate",x)},_showLoading:function(){this.get("useTracking")||n.add(this._locateNode,this._css.loading)},_hideLoading:function(){this.get("useTracking")||n.remove(this._locateNode,this._css.loading)},_init:function(){this._visible();this._setTitle();this.get("tracking")&&this.get("useTracking")&&this._locate();this.set("loaded",!0);this.emit("load",{})},_updateThemeWatch:function(x,E,z){n.remove(this.domNode,
E);n.add(this.domNode,z)},_visible:function(){this.get("visible")?m.set(this.domNode,"display","block"):m.set(this.domNode,"display","none")}})})},"esri/tasks/ProjectParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(e,u,B,A,p,l,k,g){return e(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var d=
B.map(this.geometries,function(a){return a.toJson()}),c={};c.outSR=this.outSR.wkid||A.toJson(this.outSR.toJson());c.inSR=this.geometries[0].spatialReference.wkid||A.toJson(this.geometries[0].spatialReference.toJson());c.geometries=A.toJson({geometryType:g.getJsonType(this.geometries[0]),geometries:d});this.transformation&&(c.transformation=this.transformation.wkid||A.toJson(this.transformation));k.isDefined(this.transformForward)&&(c.transformForward=this.transformForward);return c}})})},"presentation/common/util/mapCreator":function(){define(["../../config",
"../../workarounds","./layer","esri/arcgis/utils","dojo/_base/lang"],function(e,u,B,A,p){return{createWebMap:function(l,k){var g=p.clone(k.itemData);k.itemData=g;e.alteredItemData=g;return A.createMap(k,l,{mapOptions:{},bingMapsKey:e.bingmapskey,editable:!1}).then(function(d){k.itemData.operationalLayers.forEach(function(c){var a=c.layerObject;B.is(a,"dynamic")&&a.layerInfos.forEach(function(b){u.fixedSublayerDefaultVisibility[a.id+"/"+b.id]=b.defaultVisibility})});return d})}}})},"presentation/workarounds":function(){define({fixedSublayerDefaultVisibility:{}})},
"presentation/common/util/layer":function(){define(["./array","../../config","../../workarounds"],function(e,u,B){var A={dynamic:"esri.layers.ArcGISDynamicMapServiceLayer",kml:"esri.layers.KMLLayer",label:"esri.layers.LabelLayer",wfs:"esri.layers.WFSLayer",wms:"esri.layers.WMSLayer"};return{is:function(p,l){return!(!p||p.declaredClass!==A[l])},supportsToggling:function(p){var l=e.find(u.alteredItemData.operationalLayers,function(k){return k.layerObject===p},this);l=l&&l.resourceInfo&&l.resourceInfo.singleFusedMapCache;
return this.is(p,"dynamic")&&!l},getDefaultVisibleSubLayerIds:function(p){var l=e.find(u.alteredItemData.operationalLayers||[],function(k){return k.id===p});return l.visibleLayers?l.visibleLayers.slice():l.layerObject.layerInfos.filter(function(k){return B.fixedSublayerDefaultVisibility[p+"/"+k.id]}).map(function(k){return k.id})}}})},"presentation/common/util/array":function(){define([],function(){return{find:function(e,u,B){if(e)for(var A=0;A<e.length;A++){var p=e[A];if(u.call(B,p,A,e))return p}}}})},
"presentation/common/util/MapSlide":function(){define("../../config ./array ./basemap ./map ./layer dojo/Evented dojo/_base/array dojo/_base/declare esri/TimeExtent esri/geometry/Extent esri/geometry/Point esri/layers/ArcGISTiledMapServiceLayer esri/layers/OpenStreetMapLayer esri/layers/VectorTileLayer esri/layers/WebTiledLayer esri/tasks/query esri/virtualearth/VETiledLayer".split(" "),function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h){return g([l],{constructor:function(v){this.map=v.map;this.useSlideTimeExtent=
v.useSlideTimeExtent;this.homeButton=v.homeButton},hideAllLayers:function(){k.forEach(A.getAllLayers(this.map),function(v){this._hideLayer(v)},this)},_hideLayer:function(v){v&&!p.is(v,"label")&&(v.hide(),v.visibilityField&&k.forEach(v.graphics,function(r){r.hide()}))},_applyTimeExtent:function(v){this.useSlideTimeExtent&&v&&2==v.length&&this.map.setTimeExtent(new d(new Date(v[0]),new Date(v[1])))},applySlide:function(v){var r=this._getSlideExtent(v),C=this;this.map.setExtent(r).then(function(){C._showBasemap(v.baseMap);
C._showVisibleLayers(v.visibleLayers);C._showPopup(v.visiblePopup);C._applyTimeExtent(v.timeExtent);C.homeButton.extent=r})},_getSlideExtent:function(v){var r=v.mapLocation;if(r){v=this.map;var C=r.resolution||1;var w=.5*v.height*C;C*=.5*v.width;w=new c(r.centerPoint.x-C,r.centerPoint.y-w,r.centerPoint.x+C,r.centerPoint.y+w,v.spatialReference)}else v.extent&&(w=new c(v.extent));return w},_getLayerId:function(v){return v.id||v.type},_hideBasemap:function(){this._activeBasemap&&(k.forEach(this._activeBasemap.baseMapLayers,
function(v){this._findBasemapLayer(v).hide()},this),this._activeBasemap=null)},_findBasemapLayer:function(v){return this._findLayer(this._getLayerId(v))},_findLayer:function(v){return this.map.getLayer(v)},_activeBasemap:null,_showBasemap:function(v){if(!B.sameBasemaps(v,this._activeBasemap)){this._hideBasemap();var r=this.map;k.forEach(v.baseMapLayers,function(C){var w=this._findBasemapLayer(C);w||(w=this._createBasemapLayer(C),r.addLayer(w,C.isReference?void 0:r.layerIds.length));w.show()},this);
this._activeBasemap=v}},_createBasemapLayer:function(v){var r={id:this._getLayerId(v),visible:!1,opacity:v.opacity},C=v.type,w={BingMapsAerial:h.MAP_STYLE_AERIAL,BingMapsRoad:h.MAP_STYLE_ROAD,BingMapsHybrid:h.MAP_STYLE_AERIAL_WITH_LABELS};switch(C){case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":r.mapStyle=w[C];r.bingMapsKey=e.bingmapskey;v=new h(r);break;case "OpenStreetMap":v=new f(r);break;case "VectorTileLayer":v=new t(v.styleUrl,r);break;case "WebTiledLayer":v=new n(v.templateUrl,
r);break;default:v=new b(v.url,r)}return v},_hideVisibleLayers:function(v){if(this._activeVisibleLayers){var r,C=[],w,y,q=k.filter(this._activeVisibleLayers,function(x){return-1===v.indexOf(x.id)||x.featureVisibility});k.forEach(q,function(x){r=x.id;C.push(x);this._shouldIgnoreIndices(r)||(w=this._getLayerIndices(r),k.forEach(w,function(E){y=r+"_"+E;C.push({id:y})},this))},this);k.forEach(C,this._hideVisibleLayer,this);this._activeVisibleLayers=null}},_hideVisibleLayer:function(v){(v=this._findLayer(v.id))&&
this._hideLayer(v)},_activeVisibleLayers:null,_layerIdToLayerIndices:{},_getLayerIndices:function(v){if(this._layerIdToLayerIndices[v])return this._layerIdToLayerIndices[v];var r=A.getAllLayerIds(this.map),C=new RegExp(v+"_([^_]+)$");r=k.filter(r,function(w){return C.test(w)});r=k.map(r,function(w){return Number(C.exec(w)[1])});return this._layerIdToLayerIndices[v]=r},_getOperationalLayers:function(){return e.alteredItemData.operationalLayers||[]},_showVisibleLayers:function(v){var r,C,w,y=[],q=k.map(v,
function(z){return z.id}),x=e.itemData.operationalLayers,E=x.map(function(z){return z.id});this._hideVisibleLayers(q);k.forEach(v,function(z){r=z.id;y.push({id:r,subLayerIds:z.subLayerIds});this._shouldIgnoreIndices(r)||(w=this._getLayerIndices(r),C=z.featureVisibility||[],k.forEach(w,function(D){var F=r+"_"+D;if(-1===E.indexOf(F)){var J=x[E.indexOf(r)].visibleLayers||[];0<J.length&&!k.some(J,function(L){return L===D})||(F={id:F},0<C.length?F.visibleFeatureIds=C[D]:F.subLayerIds=z.subLayerIds,y.push(F))}},
this))},this);k.forEach(y,this._showVisibleLayer,this);this._activeVisibleLayers=v},_shouldIgnoreIndices:function(v){v=this.map.getLayer(v);return p.is(v,"kml")},_showVisibleLayer:function(v){var r=this._findLayer(v.id);if(r){var C,w,y=r.objectIdField,q=v.visibleFeatureIds,x=!q;v=v.subLayerIds;k.forEach(r.graphics,function(E){C=E.attributes[y];(w=x||-1<k.indexOf(q,C))&&E.show()});p.is(r,"dynamic")&&r.setVisibleLayers(this._getTrulyVisibleLayerIds(r,r.layerInfos,v));r.show()}},_getTrulyVisibleLayerIds:function(v,
r,C){C=C||p.getDefaultVisibleSubLayerIds(v.id);var w={};k.forEach(r,function(q){w[q.id]=q});var y=[];k.forEach(C,function(q){var x=w[q].parentLayerId;if(!w[q].subLayerIds)if(-1<x){do{var E=-1<k.indexOf(C,x);x=w[x].parentLayerId;var z=-1<x}while(E&&z);E&&y.push(q)}else y.push(q)});return y},_activePopup:null,_showPopup:function(v){if(v){var r=isNaN(v.subLayerId)?v.layerId:v.layerId+"_"+v.subLayerId;if(r=this._findLayer(r)){var C=this.map,w=this._getPopupQuery(v);r.queryFeatures(w).then(function(y){var q=
new a(v.anchorPoint);C.infoWindow.setFeatures(y.features);C.infoWindow.show(q)});this._activePopup=v}}else this._hidePopup()},_getPopupQuery:function(v){var r=new m,C=this._findLayer(v.layerId);C&&!C._collection?r.where=C.objectIdField+" \x3d "+v.featureId:r.objectIds=[v.featureId];return r},_hidePopup:function(){this.map.infoWindow.hide();this._activePopup=null}})})},"presentation/common/util/map":function(){define(["dojo/_base/array"],function(e){var u={getAllLayers:function(B){return e.map(u.getAllLayerIds(B),
function(A){return B.getLayer(A)})},getAllLayerIds:function(B){return B.layerIds.concat(B.graphicsLayerIds)}};return u})},"esri/layers/VectorTileLayer":function(){(function(){var e=function(){try{var B=window.WebGLRenderingContext}catch(d){B=!1}try{for(var A=document.createElement("canvas"),p=["webgl","experimental-webgl","webkit-3d","moz-webgl"],l=null,k=0;k<p.length;++k){try{l=A.getContext(p[k])}catch(d){}if(l)break}var g=l}catch(d){g=!1}return B&&g?!0:!1}(),u=["dojo/_base/lang","dojo/has","dojo/Deferred",
"../sniff","./layer"];e&&u.push("./VectorTileLayerImpl");define(u,function(B,A,p,l,k,g){A=g?g:k.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var d=new p;d.reject(Error("esri.layers.VectorTileLayer is not supported"));d.promise.otherwise(B.hitch(this,function(c){this._errorHandler(c)}))}});A.ACCESS_TOKEN=null;A.supported=function(){return e};return A})})()},"esri/layers/WebTiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/url dojo/sniff dojo/string ../config ../kernel ../request ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t){function n(m,h){var v=[];if(m&&h&&(h.customLayerParameters||h.customParameters)){var r=u.clone(h.customParameters||{});u.mixin(r,h.customLayerParameters||{});m=c.urlToObject(m);for(var C in m.query)r.hasOwnProperty(C)||v.push(C+"\x3d"+m.query[C]);m=m.path+(v.length?"?"+v.join("\x26"):"")}return m}return e(f,{declaredClass:"esri.layers.WebTiledLayer",constructor:function(m,h){h||(h={});this.urlTemplate=m=n(m,h.wmtsInfo);var v=new b(-2.0037508342787E7,-2.003750834278E7,
2.003750834278E7,2.0037508342787E7,new a({wkid:102100})),r=new b(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new a({wkid:102100}));this.initialExtent=h.initialExtent||v;this.fullExtent=h.fullExtent||r;this.tileInfo=h.tileInfo?h.tileInfo:new t({dpi:96,rows:256,cols:256,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,
scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147},{level:23,resolution:.01866138385297604,scale:70.5310735}]});this.spatialReference=new a(this.tileInfo.spatialReference.toJson());this.copyright=h.copyright||"";var C=new A(m);v=C.scheme+"://"+C.authority+"/";this.urlPath=m.substring(v.length);this.tileServers=h.tileServers||[];-1===C.authority.indexOf("{subDomain}")&&
this.tileServers.push(v);if(h.subDomains&&0<h.subDomains.length&&1<C.authority.split(".").length){this.subDomains=h.subDomains;var w;B.forEach(h.subDomains,function(x){-1<C.authority.indexOf("${subDomain}")?w=C.scheme+"://"+l.substitute(C.authority,{subDomain:x})+"/":-1<C.authority.indexOf("{subDomain}")&&(w=C.scheme+"://"+C.authority.replace(/\{subDomain\}/gi,x)+"/");this.tileServers.push(w)},this)}this.tileServers=B.map(this.tileServers,function(x){"/"!==x.charAt(x.length-1)&&(x+="/");return x});
this._levelToLevelValue=[];var y=0;B.forEach(this.tileInfo.lods,function(x,E){this._levelToLevelValue[x.level]=x.levelValue||x.level;0===E&&(y=this._levelToLevelValue[x.level])},this);this._wmtsInfo=h.wmtsInfo;var q=u.hitch(this,function(){this.loaded=!0;this.onLoad(this)});p("chrome")?(m=this.getTileUrl(y,0,0),h=k.defaults.io,v="with-credentials"===h.useCors?c.canUseXhr(m,!0):-1,(h=-1<v?h.corsEnabledServers[v]:null)&&h.withCredentials?d({url:m,handleAs:"arraybuffer"}).addBoth(function(){q()}):q()):
q()},getTileUrl:function(m,h,v){m=this._levelToLevelValue[m];var r=this.tileServers[h%this.tileServers.length]+l.substitute(this.urlPath,{level:m,z:m,col:v,x:v,row:h,y:h});r=r.replace(/\{level\}/gi,m).replace(/\{row\}/gi,h).replace(/\{col\}/gi,v).replace(/\{z\}/gi,m).replace(/\{x\}/gi,v).replace(/\{y\}/gi,h);r=this._appendCustomLayerParameters(r);r=this.addTimestampToURL(r);return c.addProxy(r)},_appendCustomLayerParameters:function(m){var h;if(this._wmtsInfo&&(this._wmtsInfo.customLayerParameters||
this._wmtsInfo.customParameters)){var v=u.clone(this._wmtsInfo.customParameters||{});u.mixin(v,this._wmtsInfo.customLayerParameters||{});for(h in v)m+=(-1===m.indexOf("?")?"?":"\x26")+h+"\x3d"+encodeURIComponent(v[h])}return m}})})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred ../kernel ../urlUtils ../SpatialReference ../layers/TileInfo ../layers/TiledMapServiceLayer ../geometry/Extent ../request".split(" "),
function(e,u,B,A,p,l,k,g,d,c,a,b,f,t,n){e=e(f,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(m){try{if(m=u.mixin({bingMapsKey:null,culture:"en-US"},m||{}),this.url=c.getProtocolForWebResource()+"//dev.virtualearth.net/REST/v1",this._url=c.urlToObject(this.url),this.spatialReference=new a({wkid:102100}),this.tileInfo=new b({rows:256,cols:256,dpi:96,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,
scale:1128.497176},{level:20,resolution:.1492910708238085,scale:564.248588}]}),this.initialExtent=this.fullExtent=new t(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new a({wkid:102100})),u.mixin(this,m),this.hasAttributionData=this.showAttribution,this._initLayer=u.hitch(this,this._initLayer),this._errorHandler=u.hitch(this,this._errorHandler),this._getTileInfo=u.hitch(this,this._getTileInfo),this.bingMapsKey)this._getTileInfo();else throw Error("BingMapsKey must be provided.");
}catch(h){throw this.onError(h),h;}},_unsetMap:function(m,h){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var m=this._url.path+"/Imagery/Metadata/"+this.mapStyle,h=window.location.protocol;if(this.bingMapsKey){var v=this.resourceInfo;!this.loaded&&v?this._initLayer(v):n({url:m,content:u.mixin({},{uriScheme:"https:"===h?"https":"http",key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,
error:this._errorHandler})}}},_initLayer:function(m,h){if(200!==m.statusCode)h=Error(),h.code=m.statusCode,h.message=m.statusDescription,h.details=m.errorDetails,h.authenticationResultCode=m.authenticationResultCode,this.onError(h);else try{this.resourceInfo=B.toJson(m);var v=m.resourceSets[0].resources[0],r=v.imageUrl.replace("{","${");this.tileServers=A.map(v.imageUrlSubdomains,function(w){var y=c.getProtocolForWebResource();return k.substitute(r,{subdomain:w}).replace("http:",y)});this._tsLength=
this.tileServers.length;if(this.loaded)this.refresh(),this.onMapStyleChange();else{this.copyright=this.copyright||"\x26copy; 2017 Microsoft Corporation and its data suppliers";this.loaded=!0;this.onLoad(this);var C=this.loadCallback;C&&(delete this.loadCallback,C(this))}}catch(w){this.onError(w)}},getAttributionData:function(){var m=new g,h=B.fromJson(this.resourceInfo),v;this.hasAttributionData&&h&&(v=u.getObject("resourceSets.0.resources.0.imageryProviders",!1,h));v?m.callback({contributors:v}):
(h=Error("Layer does not have attribution data"),h.log=p.isDebug,m.errback(h));return m},getTileUrl:function(m,h,v){return k.substitute(this.tileServers[h%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(m,h,v),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(m,h,v){var r="",C;for(C=m;0<C;C--){m="0";var w=1<<C-1;0!=(v&w)&&m++;0!=(h&w)&&(m++,m++);r+=m}return r},setMapStyle:function(m){this.mapStyle=m;this._getTileInfo()},setCulture:function(m){this.culture=m;this._getTileInfo()},
setBingMapsKey:function(m){this.bingMapsKey=m},onMapStyleChange:function(){}});u.mixin(e,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabelsOnDemand",MAP_STYLE_ROAD:"roadOnDemand"});return e})},"presentation/common/widget/Title":function(){define("../util/html ../util/titleStyle dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-style dojo/_base/declare dojo/text!./template/Title.html".split(" "),function(e,u,B,A,p,l,k,g){return k(null,{constructor:function(d){this._initView(d)},
_initView:function(d){this.view=B.byId(d);p.place(g,this.view,"only");this._initParts()},_initParts:function(){this.slideTitleParent=B.byId("slideTitleParent");this.slideTitleText=B.byId("slideTitleText");this.slideTitleBackground=B.byId("slideTitleBackground")},setTitle:function(d){var c=d?d.text:"";this.applyTitleStyle(d);this.applyTitleText(c)},applyTitleStyle:function(d){d&&(l.set(this.slideTitleParent,"textAlign",u.toTextAlign(d.horizontalAlignment)),l.set(this.slideTitleBackground,u.createBackgroundStyle(d)),
l.set(this.slideTitleText,u.createTextStyle(d)))},applyTitleText:function(d){d?(this.slideTitleText.innerHTML=e.normalizeNewlines(e.sanitize(d)),A.remove(this.slideTitleParent,"invisible")):A.add(this.slideTitleParent,"invisible")}})})},"presentation/common/util/titleStyle":function(){define(["./fontStyles","./textAlignments","dojo/has","dojo/_base/Color"],function(e,u,B,A){return{toTextAlign:function(p){return p===u.LEFT?"left":p===u.RIGHT?"right":"center"},createBackgroundStyle:function(p){var l=
isNaN(p.opacity)?1:p.opacity,k=100*l;return{"-msFilter":"progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+k+")",filter:"alpha(opacity\x3d"+k+")",opacity:l,backgroundColor:this._toSupportedColor(p.backgroundColor),borderColor:this._toSupportedColor(p.borderColor),borderStyle:"solid",borderWidth:p.borderSize+"px"}},_toSupportedColor:function(p){p=A.fromArray(p);var l=8!==B("ie");return p.toCss(l)},createTextStyle:function(p){var l=p.titleFontStyle;return{color:this._toSupportedColor(p.foregroundColor),
fontFamily:p.font,fontSize:this._toEms(p.fontSize)+"em",fontStyle:this._toFontStyle(l),fontWeight:this._toFontWeight(l),textDecoration:this._toTextDecoration(l)}},_toEms:function(p){return p/16},_toFontStyle:function(p){return p&e.ITALIC?"italic":"normal"},_toFontWeight:function(p){return p&e.BOLD?"bold":"normal"},_toTextDecoration:function(p){return p&e.UNDERLINE?"underline":"none"}}})},"presentation/common/util/fontStyles":function(){define({NORMAL:0,BOLD:1,ITALIC:2,UNDERLINE:4})},"presentation/common/util/textAlignments":function(){define({LEFT:0,
CENTER:1,RIGHT:2})},"presentation/viewer/util/deckParser":function(){define(["../model/deckPlaybackMixin","../../common/model/Deck","dojo/_base/array","dojo/_base/lang"],function(e,u,B,A){return{parse:function(p){var l=new u,k=[];B.forEach(p.slides,function(g){g.hidden||k.push(g)});l.add(k);p=p.slideAdvancementInterval;0<p&&(A.mixin(l,e),l.setPlaybackInterval(p));return l}}})},"presentation/viewer/model/deckPlaybackMixin":function(){define(function(){return{slideInterval:5E3,_intervalId:NaN,setPlaybackInterval:function(e){this.slideInterval=
0<e?1E3*e:5E3},play:function(){var e=this;isNaN(this._intervalId)&&(this._goToStart(),this.emit("playbackBegin"));this._clearTimer();this._intervalId=setInterval(function(){e.atEnd()?(e.stop(),e.emit("playbackEnd")):e.next()},this.slideInterval);this.emit("startPlayback")},_goToStart:function(){this.goTo(0)},_clearTimer:function(){clearInterval(this._intervalId)},pause:function(){this._clearTimer();this.emit("pausePlayback")},stop:function(){this._clearTimer();this._intervalId=NaN;this.emit("stopPlayback")}}}())},
"presentation/common/model/Deck":function(){define(["dojo/Evented","dojo/_base/declare"],function(e,u){return u([e],{constructor:function(){this._slides=[];this._index=-1},atStart:function(){return 0===this._index},atEnd:function(){return this._index===this._slides.length-1},_validIndex:function(B){return 0<=B&&B<this._slides.length},index:function(){return this._index},current:function(){return this._get(this.index())},_get:function(B){return this._validIndex(B)?this._slides[B]:null},add:function(B){if(B){var A=
this._slides.length;B.hasOwnProperty("length")?0<B.length&&(this._slides=this._slides.concat(B.slice(0)),this._dispatchSlidesChange()):(this._slides.push(B),this._dispatchSlidesChange());0===A&&0<this._slides.length&&this.goTo(0)}},remove:function(B){B=this._slides.indexOf(B);0<=B&&(this._slides.splice(B,1),0===this.count()?this.clear():this._validIndex(B)?this.goTo(B):this._validIndex(B-1)&&this.goTo(B-1))},clear:function(){this._slides=[];this._index=-1;this._dispatchSlidesChange()},next:function(){this.atEnd()||
this.goTo(this.index()+1)},prev:function(){this.atStart()||this.goTo(this.index()-1)},goTo:function(B){B=isNaN(B)?this._index:B;var A=this._clamp;this._index=B=A(B,0,this._slides.length-1);this._dispatchSlidesChange()},_clamp:function(B,A,p){return B<A?A:B<p?B:p},count:function(){return this._slides.length},_dispatchSlidesChange:function(){this.emit("slideChanged")}})})},"presentation/viewer/util/slideControl":function(){define(["../widget/SlideControl","../widget/SlidePlaybackControl"],function(e,
u){return{createControl:function(B,A){return A.slideInterval?new u(B,A):new e(B,A)}}})},"presentation/viewer/widget/SlideControl":function(){define("../../common/util/dom ../../common/util/html dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/keys dojo/on dojo/query dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!./nls/SlideControl dojo/i18n!./nls/SlideControlCommon dojo/i18n!../../common/nls/common dojo/text!./template/SlideControl.html".split(" "),function(e,
u,B,A,p,l,k,g,d,c,a,b,f,t,n,m,h){return b([k],{constructor:function(v,r){this.deck=r;this._initView(v);this._addListeners();this._updateButtonsState();this._updateSlideList();this.hideList()},_initView:function(v){h=f.replace(h,f.mixin({},n,t));this.view=B.byId(v);l.place(h,this.view,"only");this._initParts();a.forEach(this.deck._slides,function(r){r=r.title&&r.title.text;r||(r=m.untitledSlide);var C=l.create("li",{className:"backgroundColorful"},this.slideList);l.create("div",{className:"slideListIndex"},
C);l.create("div",{className:"slideListEntry",innerHTML:u.sanitize(r)},C)},this)},_initParts:function(){this.nextButton=B.byId("nextButton");this.prevButton=B.byId("prevButton");this.listButton=B.byId("listButton");this.slideList=B.byId("slideList");this.slideProgress=B.byId("slideProgress");e.hideAndExcludeFromLayout(this.slideList)},_updateButtonsState:function(){var v=this.deck;v.atEnd()?(p.add(this.nextButton,"disabled"),A.set(this.nextButton,"title","")):(p.remove(this.nextButton,"disabled"),
A.set(this.nextButton,"title",t.nextTooltip));v.atStart()?(p.add(this.prevButton,"disabled"),A.set(this.prevButton,"title","")):(p.remove(this.prevButton,"disabled"),A.set(this.prevButton,"title",t.prevTooltip))},hideList:function(){e.hideAndExcludeFromLayout(this.slideList);this._removeCursorSlide();this.emit("listHide")},_updateSlideList:function(){c("li",this.slideList).removeClass("selectedSlide");var v=this.deck.index()+1;c("li:nth-child("+v+")").addClass("selectedSlide");this.slideProgress.innerHTML=
f.replace(n.slideXOfTotal,{index:v,total:this.deck.count()})},_addKeyboardListeners:function(){d(window.document,"keydown",f.hitch(this,function(v){v=v.keyCode;if(80===v||v===g.PAGE_UP)this._showPrevious();else if(78===v||v===g.PAGE_DOWN)this._showNext();else if(76===v)this._toggleList(),p.add(this._getSelectedSlide(),"cursorSlide");else if((v===g.UP_ARROW||v===g.DOWN_ARROW||v===g.ENTER)&&this._isSlideListVisible()){var r=c("li",this.slideList),C=c("li.cursorSlide",this.slideList)[0]||this._getSelectedSlide(),
w=r.indexOf(C);v===g.UP_ARROW&&0<w?(p.remove(C,"cursorSlide"),C=r[w-1],p.add(C,"cursorSlide"),this._ensureUpwardListingVisibility(C)):v===g.DOWN_ARROW&&w<r.length-1?(p.remove(C,"cursorSlide"),C=r[w+1],p.add(C,"cursorSlide"),this._ensureDownwardListingVisibility(C)):v===g.ENTER&&(this.hideList(),this.deck.goTo(w))}}))},_ensureUpwardListingVisibility:function(v){this._isListingVisible(v)||v.scrollIntoView(!0)},_isListingVisible:function(v){return e.isWithinBounds(v,this.slideList)},_ensureDownwardListingVisibility:function(v){this._isListingVisible(v)||
v.scrollIntoView(!1)},_addListeners:function(){var v=this,r=this.deck;v._addViewListeners();v._addKeyboardListeners();r.on("slideChanged",function(){v._updateSlideList();v._updateButtonsState()})},_addViewListeners:function(){var v=this;d(v.prevButton,"click",function(){v.emit("prevPressed");v._showPrevious()});d(v.nextButton,"click",function(){v.emit("nextPressed");v._showNext()});d(v.listButton,"click",function(){v._toggleList()});d(v.slideList,d.selector("li","click"),function(){var r=c("li",v.slideList).indexOf(this);
v.emit("slideSelected",r);v.hideList();v.deck.goTo(r)})},_showPrevious:function(){this.hideList();this.deck.prev()},_showNext:function(){this.hideList();this.deck.next()},_toggleList:function(){this._isSlideListVisible()?this.hideList():this.showList()},_isSlideListVisible:function(){return!e.isHidden(this.slideList)},_removeCursorSlide:function(){c("li",this.slideList).removeClass("cursorSlide")},_getSelectedSlide:function(){return c("li.selectedSlide",this.slideList)[0]},showList:function(){e.showAndIncludeInLayout(this.slideList);
this._getSelectedSlide().scrollIntoView();this.emit("listShow")}})})},"presentation/viewer/widget/SlidePlaybackControl":function(){define("../../common/util/dom ../../common/util/html dojo/dom dojo/dom-class dojo/dom-construct dojo/Evented dojo/keys dojo/on dojo/query dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!./nls/SlidePlaybackControl dojo/i18n!./nls/SlideControlCommon dojo/i18n!../../common/nls/common dojo/text!./template/SlidePlaybackControl.html".split(" "),function(e,u,B,
A,p,l,k,g,d,c,a,b,f,t,n,m){return a([l],{constructor:function(h,v){this.deck=v;this._signals=[];this._initView(h);this._addListeners();this._handlePlay();this._updateSlideList()},_initView:function(h){m=b.replace(m,b.mixin({},t,f));this.view=B.byId(h);p.place(m,this.view,"only");this._initParts()},_initParts:function(){this.playButton=B.byId("playButton");this.pauseButton=B.byId("pauseButton");this.listButton=B.byId("listButton");this.slideProgress=B.byId("slideProgress");this.slideList=B.byId("slideList");
e.hideAndExcludeFromLayout(this.pauseButton);e.hideAndExcludeFromLayout(this.slideList);c.forEach(this.deck._slides,function(h){h=h.title.text;h||(h=n.untitledSlide);var v=p.create("li",{className:"backgroundColorful"},this.slideList);p.create("div",{className:"slideListIndex"},v);p.create("div",{className:"slideListEntry",innerHTML:u.sanitize(h)},v)},this)},_addPlayListeners:function(){this._addSignal(g(this.playButton,"click",b.hitch(this,this._handlePlay)))},_handlePlay:function(){this._removeSignals();
this._addPauseListeners();this._addKeyboardListeners();e.hideAndExcludeFromLayout(this.playButton);e.showAndIncludeInLayout(this.pauseButton);this.emit("playPressed");this.deck.play();this._lastAction=this.deck.play},_addPauseListeners:function(){this._addSignal(g(this.pauseButton,"click",b.hitch(this,this._handlePause)))},_handlePause:function(){this._removeSignals();this._addPlayListeners();this._addKeyboardListeners();e.hideAndExcludeFromLayout(this.pauseButton);e.showAndIncludeInLayout(this.playButton);
this.emit("pausePressed");this.deck.pause();this._lastAction=this.deck.pause},_addSignal:function(h){this._signals.push(h)},_removeSignals:function(){c.forEach(this._signals,function(h){h.remove()})},hideList:function(){e.hideAndExcludeFromLayout(this.slideList);this._removeCursorSlide();this.emit("listHide")},_showPlaybackCountdown:function(){var h=this,v=10,r=p.create("div");A.add(r,"overlayContainer overlayBackground translucent");var C=p.create("div",{id:"countdownText",className:"overlayContent",
innerHTML:h._getCountdownText(v)});e.placeInCenteredContainer(C,r);h._removeSignals();p.place(r,document.body,"first");var w=setInterval(function(){1===v?(p.destroy(r),clearInterval(w),h.deck.goTo(0),h._handlePlay()):(v--,C.innerHTML=h._getCountdownText(v))},1E3)},_getCountdownText:function(h){return 1===h?f.willReplayInOneSecond:b.replace(f.willReplayInXSeconds,{x:h})},_addKeyboardListeners:function(){var h=g(window.document,"keydown",b.hitch(this,function(v){v=v.keyCode;if(v===k.PAGE_UP)this._showPrevious();
else if(v===k.PAGE_DOWN)this._showNext();else if(80===v)this._lastAction===this.deck.play?this._handlePause():this._lastAction===this.deck.pause&&this._handlePlay();else if(76===v)this._toggleList(),A.add(this._getSelectedSlide(),"cursorSlide");else if((v===k.UP_ARROW||v===k.DOWN_ARROW||v===k.ENTER)&&this._isSlideListVisible()){var r=d("li",this.slideList),C=d("li.cursorSlide",this.slideList)[0]||this._getSelectedSlide(),w=r.indexOf(C);v===k.UP_ARROW&&0<w?(A.remove(C,"cursorSlide"),C=r[w-1],A.add(C,
"cursorSlide"),this._ensureUpwardListingVisibility(C)):v===k.DOWN_ARROW&&w<r.length-1?(A.remove(C,"cursorSlide"),C=r[w+1],A.add(C,"cursorSlide"),this._ensureDownwardListingVisibility(C)):v===k.ENTER&&(this.hideList(),this.deck.goTo(w))}}));this._addSignal(h)},_showPrevious:function(){this.hideList();this.deck.prev()},_showNext:function(){this.hideList();this.deck.next()},_addListeners:function(){var h=this,v=this.deck;h._addKeyboardListeners();g(h.listButton,"click",function(){h._toggleList()});g(h.slideList,
g.selector("li","click"),function(){var r=d("li",h.slideList).indexOf(this);h.emit("slideSelected",r);h.hideList();h.deck.goTo(r)});v.on("slideChanged",function(){h._updateSlideList()});v.on("playbackEnd",function(){h._showPlaybackCountdown()})},_ensureUpwardListingVisibility:function(h){this._isListingVisible(h)||h.scrollIntoView(!0)},_isListingVisible:function(h){return e.isWithinBounds(h,this.slideList)},_ensureDownwardListingVisibility:function(h){this._isListingVisible(h)||h.scrollIntoView(!1)},
_toggleList:function(){this._isSlideListVisible()?this.hideList():this.showList()},_isSlideListVisible:function(){return!e.isHidden(this.slideList)},_removeCursorSlide:function(){d("li",this.slideList).removeClass("cursorSlide")},_getSelectedSlide:function(){return d("li.selectedSlide",this.slideList)[0]},showList:function(){e.showAndIncludeInLayout(this.slideList);this._getSelectedSlide().scrollIntoView();this.emit("listShow")},_updateSlideList:function(){d("li",this.slideList).removeClass("selectedSlide");
var h=this.deck.index()+1;d("li:nth-child("+h+")").addClass("selectedSlide");this.slideProgress.innerHTML=b.replace(t.slideXOfTotal,{index:h,total:this.deck.count()})}})})},"xstyle/css":function(){define(["require"],function(e){function u(B,A,p){var l=document.documentElement;B=l.insertBefore(document.createElement(B),l.firstChild);B.id=A;A=(B.currentStyle||getComputedStyle(B,null)||{})[p];l.removeChild(B);return A}return{load:function(B,A,p,l){function k(a){var b=u("x-parse",null,"content"),f=a&&
(a.sheet||a.styleSheet);b&&"none"!=b&&"normal"!=b?A([eval(b)],function(t){a?t.process(a,p):(t.processAll(),p(f))}):p(f)}var g=A.toUrl(B);if(g.match(/!$/)){var d={wait:!1};g=g.slice(0,-1)}var c=A.cache&&A.cache["url:"+g];if(null!=c)c.xCss&&(c=c.cssText),"string"==typeof c?e(["./core/load-css"],function(a){k(a.insertCss(c))}):k();else{if("none"==u("div",B.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return k();e(["./core/load-css"],function(a){a(g,k,d)})}}}})},"xstyle/core/load-css":function(){define([],
function(){function e(l){if(A.createStyleSheet){var k=A.createStyleSheet();k.cssText=l;return k.owningElement}k=A.createElement("style");k.setAttribute("type","text/css");k.appendChild(A.createTextNode(l));p.appendChild(k);return k}function u(l,k,g){var d=B[l];if(d)return c=e(d),k(c);var c=A.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=l;var a=!g||!1!==g.wait;g=(g=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+g[1];if(null===c.onload&&!(536>g))c.onload=function(){c.onload=
null;c.onerror=null;a&&k(c)},c.onerror=function(){console.error("Error loading stylesheet "+l);a&&k(c)};else if(a)var b=setInterval(function(){c.style&&(clearInterval(b),k(c))},15);(p||A.getElementsByTagName("head")[0]).appendChild(c);a||k(c)}var B="undefined"==typeof _css_cache?{}:_css_cache,A=document,p=A.head;u.insertCss=e;return u})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/templates/HomeButton.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"${_css.container}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_homeNode" title\x3d"${_i18n.widgets.homeButton.home.title}" role\x3d"button" class\x3d"${_css.home}" tabindex\x3d"0"\x3e\x3cspan\x3e${_i18n.widgets.homeButton.home.button}\x3c/span\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:esri/dijit/templates/LocateButton.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"${_css.container}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_locateNode" role\x3d"button" class\x3d"${_css.locate}" tabindex\x3d"0"\x3e\x3cspan\x3e${_i18n.widgets.locateButton.locate.button}\x3c/span\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:presentation/common/widget/template/Title.html":'\x3cdiv id\x3d"slideTitleParent" class\x3d"nonUserSelectable"\x3e\r\n  \x3cdiv id\x3d"slideTitle"\x3e\r\n    \x3cdiv id\x3d"slideTitleBackground" class\x3d"bordered translucent"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"scroller"\x3e\r\n      \x3cdiv id\x3d"slideTitleText"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:presentation/viewer/widget/template/SlideControl.html":'\x3cdiv id\x3d"slideControlsParent" class\x3d"nonUserSelectable"\x3e\r\n  \x3cdiv id\x3d"slideListParent"\x3e\r\n    \x3cul id\x3d"slideList" class\x3d"pane backgroundColorful bordered"\x3e\x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"slideControls" class\x3d"bordered shy appearable"\x3e\r\n    \x3cdiv data-tooltip\x3d"{prevTooltip}" id\x3d"prevButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv title\x3d"{listTooltip}" id\x3d"listButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv data-tooltip\x3d"{nextTooltip}" id\x3d"nextButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv id\x3d"slideProgress"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:presentation/viewer/widget/template/SlidePlaybackControl.html":'\x3cdiv id\x3d"slideControlsParent" class\x3d"nonUserSelectable"\x3e\r\n  \x3cdiv id\x3d"slideListParent"\x3e\r\n    \x3cul id\x3d"slideList" class\x3d"pane backgroundColorful bordered"\x3e\x3c/ul\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv id\x3d"slideControls" class\x3d"bordered shy appearable"\x3e\r\n    \x3cdiv title\x3d"{playTooltip}" id\x3d"playButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv title\x3d"{pauseTooltip}" id\x3d"pauseButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv title\x3d"{listTooltip}" id\x3d"listButton" class\x3d"slideButton"\x3e\x3c/div\x3e\r\n    \x3cdiv id\x3d"slideProgress"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:presentation/viewer/template/app.html":'\x3cdiv id\x3d"app" class\x3d"invisible"\x3e\r\n  \x3cdiv id\x3d"map" dir\x3d"ltr"\x3e\x3c/div\x3e\r\n  \x3cdiv id\x3d"title"\x3e\x3c/div\x3e\r\n  \x3cdiv id\x3d"controls"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"*now":function(e){e(['dojo/i18n!*preload*presentation/nls/main*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])}}});
define("./builder/util/browserSupport ./common/util/configInitializer ./common/util/errorPopup ./common/util/knownErrorMessage ./common/util/page ./common/util/startup ./viewer/app dojo/Deferred require".split(" "),function(e,u,B,A,p,l,k,g,d){function c(b){var f=b.hasOwnProperty("builder")&&(void 0===b.builder||!!b.builder),t=b.user.username===b.item.owner;b=b.item.itemControl||"";b=-1<b.indexOf("admin")||-1<b.indexOf("update");return f&&(t||b)?a():k.startUp()}function a(){return e.test().then(function(){var b=
new g;d(["./builder/app","xstyle/css!./builder/css/main.css"],function(f){b.resolve(f.startUp())});return b.promise})}(function(){l.addOverlay();u.init().then(function(b){p.setTitle(b.item.title);return b}).then(c).otherwise(function(b){B.showNonRecoverableError(A.getErrorMessage(b))}).then(function(){l.removeOverlay()})})()});